(self.webpackChunkAngularSrc=self.webpackChunkAngularSrc||[]).push([[50],{50:(Yn,Ii,Oe)=>{"use strict";Oe.r(Ii),Oe.d(Ii,{PagesModule:()=>GE});var Ee=Oe(6814),Kt=Oe(9862),mi=Oe(8397),n=Oe(5879),Yi=Oe(6889),Ie=Oe(9045);let Ai=(()=>{class e{constructor(t,o,r){this.router=t,this.winRef=o,this.apiService=r,this.profUrl="assets/user.png",this.user=JSON.parse(localStorage.getItem("user"))}ngOnInit(){}logout(){localStorage.removeItem("user"),this.router.navigate(["/login"])}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(mi.F0),n.Y36(Yi.X),n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-header"]],decls:35,vars:5,consts:[[1,"main-header"],[1,"navbar","navbar-static-top"],[1,"container"],[1,"navbar-header"],["href","/",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbar-collapse",1,"navbar-toggle","collapsed"],[1,"fa","fa-bars"],[1,"navbar-custom-menu"],[1,"nav","navbar-nav"],[1,"dropdown","user","user-menu"],["href","#","data-toggle","dropdown",1,"dropdown-toggle"],["alt","User Image",1,"user-image",3,"src"],[1,"hidden-xs"],[1,"dropdown-menu"],[1,"user-header"],["alt","User Image",1,"img-circle",3,"src"],[2,"color","white"],[1,"fa","fa-map-marker",2,"margin-right","5px"],[1,"user-footer"],[1,"pull-left"],["href","/dashboard",1,"btn","btn-success","btn-flat"],[1,"pull-right"],[1,"btn","btn-danger","btn-flat",3,"click"],["data-toggle","control-sidebar",3,"click"],[1,"fa","fa-sign-out"]],template:function(o,r){1&o&&(n.TgZ(0,"header",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"b"),n._uU(6,"Shree Ram"),n.qZA(),n._uU(7," Export"),n.qZA(),n.TgZ(8,"button",5),n._UZ(9,"i",6),n.qZA()(),n.TgZ(10,"div",7)(11,"ul",8)(12,"li",9)(13,"a",10),n._UZ(14,"img",11),n.TgZ(15,"span",12),n._uU(16),n.qZA()(),n.TgZ(17,"ul",13)(18,"li",14),n._UZ(19,"img",15),n.TgZ(20,"p"),n._uU(21),n.TgZ(22,"small",16),n._UZ(23,"i",17),n._uU(24),n.qZA()()(),n.TgZ(25,"li",18)(26,"div",19)(27,"a",20),n._uU(28,"Home"),n.qZA()(),n.TgZ(29,"div",21)(30,"a",22),n.NdJ("click",function(){return r.logout()}),n._uU(31,"Sign out"),n.qZA()()()()(),n.TgZ(32,"li")(33,"a",23),n.NdJ("click",function(){return r.logout()}),n._UZ(34,"span",24),n.qZA()()()()()()()),2&o&&(n.xp6(14),n.Q6J("src",r.profUrl,n.LSH),n.xp6(2),n.Oqu(r.user.name),n.xp6(3),n.Q6J("src",r.profUrl,n.LSH),n.xp6(2),n.hij(" ",r.user.name," "),n.xp6(3),n.hij(" ",r.user.department.name,""))}})}return e})(),ni=(()=>{class e{constructor(){}ngOnInit(){window.dispatchEvent(new Event("resize")),$("body").addClass("hold-transition skin-blue layout-top-nav")}static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-pages"]],decls:15,vars:0,consts:[[1,"wrapper"],[1,"content-wrapper"],[1,"container-fluid"],[1,"main-footer"],[1,"container"],[1,"pull-right","hidden-xs"],["href","#"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0),n._UZ(1,"app-header"),n.TgZ(2,"div",1)(3,"div",2),n._UZ(4,"router-outlet"),n.qZA()(),n.TgZ(5,"footer",3)(6,"div",4)(7,"div",5),n._uU(8,"Developed by RoughCommerce"),n.qZA(),n.TgZ(9,"strong"),n._uU(10,"Copyright \xa9 2023 "),n.TgZ(11,"a",6),n._uU(12,"ShreeRamExport"),n.qZA(),n._uU(13,"."),n.qZA(),n._uU(14," All rights reserved. "),n.qZA()()())},dependencies:[mi.lC,Ai]})}return e})();var $i=Oe(1391);let nn=(()=>{class e{constructor(t){this.router=t}ngOnInit(){this.router.navigate(["/dashboard"])}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(mi.F0))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-home"]],decls:0,vars:0,template:function(o,r){}})}return e})();var ee=Oe(5861),M=Oe(6990),mt=Oe.n(M),_e=Oe(6676),te=Oe(95);let Ut=(()=>{class e{constructor(t){this.el=t}onKeydown(t){"Enter"===t.key&&(t.preventDefault(),this.navigateFocus("next")),"ArrowUp"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),this.navigateFocus("ArrowUp"===t.key?"prev":"next")),"ArrowLeft"!==t.key&&"ArrowRight"!==t.key||(t.preventDefault(),this.navigateFocus("ArrowLeft"===t.key?"prev":"next"))}navigateFocus(t){const o=document.querySelectorAll("input"),r=Array.from(o).indexOf(this.el.nativeElement);let s="next"===t?r+1:r-1;s>=0&&s<o.length&&o[s].focus()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(n.SBq))};static#t=this.\u0275dir=n.lG2({type:e,selectors:[["","appFocusNavigate",""]],hostBindings:function(o,r){1&o&&n.NdJ("keydown",function(a){return r.onKeydown(a)})},inputs:{appFocusNavigate:"appFocusNavigate"}})}return e})(),Ji=(()=>{class e{constructor(t,o){this.api=t,this.zone=o,this.employee={},this.roles=[],this.changed=new n.vpe,this.loading=!1}ngOnInit(){}submit(){var t=this;return(0,ee.Z)(function*(){try{var o=Object.assign({},t.employee);delete o.Salary,delete o.Attendance,t.employee?.id?t.api.putInfo("employee",o):yield t.api.postInfo("employee",o),t.changed.emit(!0),toastr.success("Updated Succesfully!"),$("#employee_modal").modal("toggle")}catch{toastr.error("Something Went Wrong!")}})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(n.R0b))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-employee"]],inputs:{employee:"employee",roles:"roles"},outputs:{changed:"changed"},decls:49,vars:10,consts:[[1,"modal-dialog"],[1,"modal-content","modal-sm"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-4"],["type","text","name","code",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-8"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-6"],["name","sType",1,"form-control",3,"ngModel","ngModelChange"],["value","STN"],["value","GLX"],["value","PLN"],["value","PLNQC"],["type","number","name","target",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","da",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button",1,"btn","btn-sm",3,"disabled","click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),n._uU(12,"Code"),n.qZA(),n.TgZ(13,"div",10)(14,"input",11),n.NdJ("ngModelChange",function(a){return r.employee.code=a}),n.qZA()()(),n.TgZ(15,"div",8)(16,"label",9),n._uU(17,"Name"),n.qZA(),n.TgZ(18,"div",12)(19,"input",13),n.NdJ("ngModelChange",function(a){return r.employee.name=a}),n.qZA()()(),n.TgZ(20,"div",8)(21,"label",9),n._uU(22,"Role"),n.qZA(),n.TgZ(23,"div",14)(24,"select",15),n.NdJ("ngModelChange",function(a){return r.employee.sType=a}),n._UZ(25,"option"),n.TgZ(26,"option",16),n._uU(27,"STN"),n.qZA(),n.TgZ(28,"option",17),n._uU(29,"GALAXY"),n.qZA(),n.TgZ(30,"option",18),n._uU(31,"PLAN"),n.qZA(),n.TgZ(32,"option",19),n._uU(33,"PLAN QC"),n.qZA()()()(),n.TgZ(34,"div",8)(35,"label",9),n._uU(36,"Target"),n.qZA(),n.TgZ(37,"div",10)(38,"input",20),n.NdJ("ngModelChange",function(a){return r.employee.target=a}),n.qZA()()(),n.TgZ(39,"div",8)(40,"label",9),n._uU(41,"Cost"),n.qZA(),n.TgZ(42,"div",10)(43,"input",21),n.NdJ("ngModelChange",function(a){return r.employee.da=a}),n.qZA()()()()(),n.TgZ(44,"div",22)(45,"button",23),n._uU(46,"Cancel"),n.qZA(),n.TgZ(47,"button",24),n.NdJ("click",function(){return r.submit()}),n._uU(48),n.qZA()()()()),2&o&&(n.xp6(7),n.Oqu(r.employee.id?"Edit Employee":"Add Employee"),n.xp6(7),n.Q6J("ngModel",r.employee.code),n.xp6(5),n.Q6J("ngModel",r.employee.name),n.xp6(5),n.Q6J("ngModel",r.employee.sType),n.xp6(14),n.Q6J("ngModel",r.employee.target),n.xp6(5),n.Q6J("ngModel",r.employee.da),n.xp6(4),n.Tol(r.employee.id?"btn-success":"btn-primary"),n.Q6J("disabled",r.loading||!(null!=r.employee&&r.employee.code)),n.xp6(1),n.Oqu(r.employee.id?"Update":"Submit"))},dependencies:[te._Y,te.YN,te.Kr,te.Fj,te.wV,te.EJ,te.JJ,te.JL,te.On,te.F],styles:["input[_ngcontent-%COMP%]{font-weight:600}"]})}return e})();var Oi=Oe(23),Bt=Oe(738),Rt=Oe(5540);let vi=(()=>{class e{transform(t,o){return!t||!o||Object.keys(o).forEach(r=>{t=t.filter(s=>s[r]?.toString().toLowerCase().indexOf(o[r]?.toString().toLowerCase())>-1)}),t}static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275pipe=n.Yjl({name:"contains",type:e,pure:!0})}return e})();function An(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",17)(1,"th")(2,"a",18),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.editEmployee(s.id))}),n._uU(3),n.qZA(),n.TgZ(4,"a",47),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.viewHistory(s))}),n._UZ(5,"span",48),n.qZA()(),n.TgZ(6,"th"),n._uU(7),n.qZA(),n.TgZ(8,"td",49)(9,"input",50),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.target=r)}),n.qZA()(),n.TgZ(10,"td",49)(11,"input",50),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.than=r)}),n.qZA()(),n.TgZ(12,"td",49)(13,"input",50),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.weight=r)}),n.qZA()(),n.TgZ(14,"td"),n._uU(15),n.ALo(16,"wt"),n.qZA(),n.TgZ(17,"td"),n._uU(18),n.ALo(19,"wt"),n.qZA()()}if(2&e){const t=i.$implicit;n.xp6(3),n.Oqu(t.code),n.xp6(4),n.Oqu(t.sType),n.xp6(2),n.MGl("name","target_emp_",t.id,""),n.Q6J("ngModel",t.target),n.xp6(2),n.MGl("name","than_emp_",t.id,""),n.Q6J("ngModel",t.than),n.xp6(2),n.MGl("name","weight_emp_",t.id,""),n.Q6J("ngModel",t.weight),n.xp6(1),n.Tol(t.weight-t.target>0?"text-green":"text-red"),n.xp6(1),n.Oqu(n.lcZ(16,14,t.weight-t.target)),n.xp6(2),n.Tol(t.weight-t.target>0?"text-green":"text-red"),n.xp6(1),n.Oqu(t.target?n.lcZ(19,16,100*(t.weight/t.target-1))+" %":"")}}function Wt(e,i){if(1&e&&(n.TgZ(0,"tr",17)(1,"th"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.ALo(7,"wt"),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.ALo(10,"momentDate"),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"momentDate"),n.qZA(),n.TgZ(14,"th"),n._uU(15),n.qZA()()),2&e){const t=i.$implicit;n.xp6(2),n.Oqu(null==t?null:t.srno),n.xp6(2),n.Oqu(null==t?null:t.rpcs),n.xp6(2),n.Oqu(n.lcZ(7,6,null==t?null:t.actweight)),n.xp6(3),n.Oqu(n.xi3(10,8,null==t?null:t.issueDate,"DD/MM/YYYY")),n.xp6(3),n.Oqu(n.xi3(13,11,null==t?null:t.closeDate,"DD/MM/YYYY")),n.xp6(3),n.Oqu(null==t?null:t.dayDiff)}}const nt=function(){return{role:"PLN"}},it=function(e){return{date:e}},di=function(){return{role:"PLNQC"}};function ot(e,i){if(1&e&&(n.TgZ(0,"tr",17)(1,"th"),n._uU(2),n.ALo(3,"momentDate"),n.qZA(),n.TgZ(4,"td",12),n._uU(5),n.ALo(6,"contains"),n.ALo(7,"filter"),n.qZA(),n.TgZ(8,"td",12),n._uU(9),n.ALo(10,"wt"),n.ALo(11,"contains"),n.ALo(12,"filter"),n.qZA(),n.TgZ(13,"td",12),n._uU(14),n.ALo(15,"wt"),n.ALo(16,"contains"),n.ALo(17,"filter"),n.qZA(),n.TgZ(18,"td",12),n._uU(19),n.ALo(20,"contains"),n.ALo(21,"filter"),n.ALo(22,"wt"),n.ALo(23,"contains"),n.ALo(24,"filter"),n.ALo(25,"contains"),n.ALo(26,"filter"),n.qZA(),n.TgZ(27,"td",51),n._uU(28),n.ALo(29,"contains"),n.ALo(30,"filter"),n.qZA(),n.TgZ(31,"td",51),n._uU(32),n.ALo(33,"wt"),n.ALo(34,"contains"),n.ALo(35,"filter"),n.qZA(),n.TgZ(36,"td",51),n._uU(37),n.ALo(38,"wt"),n.ALo(39,"contains"),n.ALo(40,"filter"),n.qZA(),n.TgZ(41,"td",51),n._uU(42),n.ALo(43,"contains"),n.ALo(44,"filter"),n.ALo(45,"wt"),n.ALo(46,"contains"),n.ALo(47,"filter"),n.ALo(48,"contains"),n.ALo(49,"filter"),n.qZA(),n.TgZ(50,"td",52),n._uU(51),n.ALo(52,"contains"),n.qZA(),n.TgZ(53,"td",52),n._uU(54),n.ALo(55,"wt"),n.ALo(56,"contains"),n.qZA(),n.TgZ(57,"td",52),n._uU(58),n.ALo(59,"wt"),n.ALo(60,"contains"),n.qZA(),n.TgZ(61,"td",52),n._uU(62),n.ALo(63,"contains"),n.ALo(64,"wt"),n.ALo(65,"contains"),n.ALo(66,"contains"),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(n.xi3(3,13,t,"DD/MM/YYYY")),n.xp6(3),n.Oqu(o.api.getSum(n.xi3(6,16,n.xi3(7,19,o.rlist,n.DdM(124,nt)),n.VKq(125,it,t)),"than","")),n.xp6(4),n.Oqu(n.lcZ(10,22,o.api.getSum(n.xi3(11,24,n.xi3(12,27,o.rlist,n.DdM(127,nt)),n.VKq(128,it,t)),"weight",""))),n.xp6(5),n.Oqu(n.lcZ(15,30,o.api.getSum(n.xi3(16,32,n.xi3(17,35,o.rlist,n.DdM(130,nt)),n.VKq(131,it,t)),"target",""))),n.xp6(5),n.hij("",o.api.getSum(n.xi3(20,38,n.xi3(21,41,o.rlist,n.DdM(133,nt)),n.VKq(134,it,t)),"target")?n.lcZ(22,44,100*(o.api.getSum(n.xi3(23,46,n.xi3(24,49,o.rlist,n.DdM(136,nt)),n.VKq(137,it,t)),"weight")/o.api.getSum(n.xi3(25,52,n.xi3(26,55,o.rlist,n.DdM(139,nt)),n.VKq(140,it,t)),"target")-1))+" %":""," "),n.xp6(9),n.Oqu(o.api.getSum(n.xi3(29,58,n.xi3(30,61,o.rlist,n.DdM(142,di)),n.VKq(143,it,t)),"than","")),n.xp6(4),n.Oqu(n.lcZ(33,64,o.api.getSum(n.xi3(34,66,n.xi3(35,69,o.rlist,n.DdM(145,di)),n.VKq(146,it,t)),"weight",""))),n.xp6(5),n.Oqu(n.lcZ(38,72,o.api.getSum(n.xi3(39,74,n.xi3(40,77,o.rlist,n.DdM(148,di)),n.VKq(149,it,t)),"target",""))),n.xp6(5),n.hij("",o.api.getSum(n.xi3(43,80,n.xi3(44,83,o.rlist,n.DdM(151,di)),n.VKq(152,it,t)),"target")?n.lcZ(45,86,100*(o.api.getSum(n.xi3(46,88,n.xi3(47,91,o.rlist,n.DdM(154,di)),n.VKq(155,it,t)),"weight")/o.api.getSum(n.xi3(48,94,n.xi3(49,97,o.rlist,n.DdM(157,di)),n.VKq(158,it,t)),"target")-1))+" %":""," "),n.xp6(9),n.Oqu(o.api.getSum(n.xi3(52,100,o.rlist,n.VKq(160,it,t)),"than","")),n.xp6(3),n.Oqu(n.lcZ(55,103,o.api.getSum(n.xi3(56,105,o.rlist,n.VKq(162,it,t)),"weight",""))),n.xp6(4),n.Oqu(n.lcZ(59,108,o.api.getSum(n.xi3(60,110,o.rlist,n.VKq(164,it,t)),"target",""))),n.xp6(4),n.hij("",o.api.getSum(n.xi3(63,113,o.rlist,n.VKq(166,it,t)),"target")?n.lcZ(64,116,100*(o.api.getSum(n.xi3(65,118,o.rlist,n.VKq(168,it,t)),"weight")/o.api.getSum(n.xi3(66,121,o.rlist,n.VKq(170,it,t)),"target")-1))+" %":""," ")}}function Ue(e,i){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t)}}function Ge(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t)}}function Xe(e,i){if(1&e&&(n.TgZ(0,"tr",17)(1,"th"),n._uU(2),n.ALo(3,"momentDate"),n.qZA(),n.YNc(4,Ge,2,1,"td",46),n.qZA()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(n.xi3(3,2,t,"DD/MM/YYYY")),n.xp6(2),n.Q6J("ngForOf",o.generateEmpRow(t))}}let He=(()=>{class e{constructor(t){this.api=t,this.user=JSON.parse(localStorage.getItem("user")),this.today=_e().add(-1,"days").format("YYYY-MM-DD"),this.month=_e().format("YYYY-MM"),this.employees=[],this.employee={},this.selEmp={},this.selId=null,this.list=[],this.rlist=[],this.dates=[],this.klist=[]}ngOnInit(){var t=this;return(0,ee.Z)(function*(){t.reload(!0),t.dates=t.api.getMonthDays(t.month),_e().startOf("day").toDate();const s=_e().startOf("month").subtract(2,"months").toDate();var a={where:{employee:t.user.code,issueDate:{gte:s}},orderBy:{issueDate:"asc"}};t.klist=yield t.api.postInfo("stock/enquiry",a)})()}addEmployee(){this.employee={departmentHeadId:this.user.id},$("#employee_modal").modal("toggle")}editEmployee(t){var o=this;return(0,ee.Z)(function*(){o.employee=yield o.api.getInfo("employee/"+t),$("#employee_modal").modal("toggle")})()}viewHistory(t){this.selId=t.id,this.selEmp=t,this.generateSumRow(),$("#employee_history").modal("toggle")}reload(t){var o=this;return(0,ee.Z)(function*(){o.employees=yield o.api.getInfo("employee?dId="+o.user.id),o.rlist=yield o.api.getInfo("planing?dId="+o.user.id),o.loadList()})()}loadList(){this.list=this.employees.map(t=>{var o=this.rlist.find(r=>r.employeeId==t.id&&r.date==this.today+"T00:00:00.000Z");return{id:t.id,code:t.code,sType:t.sType,than:o?.than??"",weight:o?.weight??"",target:o?.target??t.target,diff:o?t.weight-t.target:""}}),this.list=M.orderBy(this.list,["sType","id"],["desc","desc"])}submit(){var t=this;return(0,ee.Z)(function*(){var o=t.list.map(s=>({date:t.today+"T00:00:00.000Z",than:s.than,weight:s.weight,target:s.target,role:s.sType,departmentHeadId:t.user.id,diff:M.round(s.weight-s.target,2),employeeId:s.id}));if(window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=t.user.pin)return void toastr.warning("Invalid PIN");try{yield t.api.postInfo("planing/bulk",o),toastr.success("Update Successfully!"),t.reload(!0)}catch{toastr.error("Something Went Wrong!")}}}})()}generateSumRow(){var t=[],o=this.rlist.filter(s=>s.employeeId==this.selId&&s.date.indexOf(this.month)>-1),r=[M.sumBy(o,"than")?M.sumBy(o,"than"):"",M.sumBy(o,"weight")?M.sumBy(o,"weight").toFixed(2):"",M.sumBy(o,"target")?M.sumBy(o,"target").toFixed(2):"",M.sumBy(o,"target")?(100*(M.sumBy(o,"weight")-M.sumBy(o,"target"))/M.sumBy(o,"target")).toFixed(2)+" %":""];return[...t,...r]}generateEmpRow(t){var o=[],r=this.rlist.filter(a=>a.employeeId==this.selEmp.id&&a.date.indexOf(t)>-1),s=[M.sumBy(r,"than")?M.sumBy(r,"than"):"",M.sumBy(r,"weight")?M.sumBy(r,"weight").toFixed(2):"",M.sumBy(r,"target")?M.sumBy(r,"target").toFixed(2):"",M.sumBy(r,"target")?(100*(M.sumBy(r,"weight")-M.sumBy(r,"target"))/M.sumBy(r,"target")).toFixed(2)+" %":""];return[...o,...s]}onMonthChange(t){t.target.value?.length&&(this.month=t.target.value,this.dates=this.api.getMonthDays(this.month),this.generateSumRow())}onDateChange(t){t.target.value?(this.today=t.target.value,this.loadList()):this.list=[]}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-planing"]],decls:264,vars:306,consts:[[1,"content"],[1,"container"],[1,"nav-tabs-custom"],[1,"nav","nav-tabs"],[1,"active"],["href","#report","data-toggle","tab"],["href","#history","data-toggle","tab"],[1,"tab-content",2,"min-height","500px"],["id","report",1,"tab-pane","active"],[1,"row"],[1,"col-sm-7","p-r-0"],[1,"table","table-responsive","table-bordered","table-condensed","table-striped","table-striped","text-center"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto","bg-lightred","p2","jc"],["type","date",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],["scope","col",1,"col-sm-auto"],["scope","row",4,"ngFor","ngForOf"],["scope","row"],[3,"click"],[1,"fa","fa-plus-circle","text-green"],[1,"btn","btn-sm","btn-success","pull-right",3,"disabled","click"],[1,"col-sm-5","p-l-5"],[1,"table-container"],[1,"table","table-responsive","table-bordered","table-condensed","table-striped","text-center","table-fixed-header"],["scope","row",1,"bg-lightyellow"],["id","history",1,"tab-pane"],[1,"col-sm-12"],["colspan","4",1,"bg-lightblue"],["colspan","4",1,"bg-lightgreen"],["colspan","4",1,"bg-lightred"],["scope","col",1,"p2","jc","w100"],["type","month",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],["scope","col",1,"col-sm-auto","bg-lightgrey"],[1,"bg-lightyellow"],["id","employee_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"employee","changed"],["id","employee_history","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"table","table-responsive","table-bordered","table-condensed","table-striped","table-striped","text-center","table-fixed-header"],[1,"p2","jc"],[4,"ngFor","ngForOf"],[1,"pull-right",3,"click"],[1,"fa","fa-list-alt","text-grey"],[1,"p2","jc","w90"],["type","number","appFocusNavigate","",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","name","ngModelChange"],[1,"bg-lightgreen"],[1,"bg-lightred"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),n._uU(6,"Reporting"),n.qZA()(),n.TgZ(7,"li")(8,"a",6),n._uU(9,"History"),n.qZA()()(),n.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"table",11)(15,"thead")(16,"tr",12)(17,"th",13)(18,"input",14),n.NdJ("change",function(a){return r.onDateChange(a)}),n.ALo(19,"momentDate"),n.qZA()(),n.TgZ(20,"th",15),n._uU(21,"ROLE"),n.qZA(),n.TgZ(22,"th",15),n._uU(23,"TARGET"),n.qZA(),n.TgZ(24,"th",15),n._uU(25,"PIC"),n.qZA(),n.TgZ(26,"th",15),n._uU(27,"VAJAN"),n.qZA(),n.TgZ(28,"th",15),n._uU(29,"DIFF"),n.qZA(),n.TgZ(30,"th",15),n._uU(31,"NET"),n.qZA()()(),n.TgZ(32,"tbody"),n.YNc(33,An,20,18,"tr",16),n.qZA(),n.TgZ(34,"tfoot")(35,"tr",17)(36,"th")(37,"a",18),n.NdJ("click",function(){return r.addEmployee()}),n._UZ(38,"span",19),n.qZA()(),n._UZ(39,"th"),n.TgZ(40,"th"),n._uU(41),n.ALo(42,"wt"),n.qZA(),n.TgZ(43,"th"),n._uU(44),n.qZA(),n.TgZ(45,"th"),n._uU(46),n.ALo(47,"wt"),n.qZA(),n.TgZ(48,"th"),n._uU(49),n.ALo(50,"wt"),n.qZA(),n.TgZ(51,"th"),n._uU(52),n.ALo(53,"wt"),n.qZA()()()(),n.TgZ(54,"button",20),n.NdJ("click",function(){return r.submit()}),n._uU(55,"Save Changes"),n.qZA()(),n.TgZ(56,"div",21)(57,"div",22)(58,"table",23)(59,"thead")(60,"tr",12)(61,"th",15),n._uU(62,"Kapan"),n.qZA(),n.TgZ(63,"th",15),n._uU(64,"Pcs"),n.qZA(),n.TgZ(65,"th",15),n._uU(66,"Weight"),n.qZA(),n.TgZ(67,"th",15),n._uU(68,"S.Date"),n.qZA(),n.TgZ(69,"th",15),n._uU(70,"E.Date"),n.qZA(),n.TgZ(71,"th",15),n._uU(72,"Days"),n.qZA()()(),n.TgZ(73,"tbody"),n.YNc(74,Wt,16,14,"tr",16),n.qZA(),n.TgZ(75,"tfoot")(76,"tr",24)(77,"th"),n._uU(78,"Total"),n.qZA(),n.TgZ(79,"th"),n._uU(80),n.qZA(),n.TgZ(81,"th"),n._uU(82),n.ALo(83,"wt"),n.qZA(),n.TgZ(84,"th"),n._uU(85),n.ALo(86,"contains"),n.ALo(87,"filter"),n.ALo(88,"momentDate"),n.qZA(),n.TgZ(89,"th"),n._uU(90),n.ALo(91,"wt"),n.ALo(92,"contains"),n.ALo(93,"filter"),n.ALo(94,"momentDate"),n.qZA(),n.TgZ(95,"th"),n._uU(96),n.ALo(97,"wt"),n.ALo(98,"contains"),n.ALo(99,"filter"),n.ALo(100,"momentDate"),n.qZA()()()()()()()(),n.TgZ(101,"div",25)(102,"div",9)(103,"div",26)(104,"div",22)(105,"table",23)(106,"thead")(107,"tr"),n._UZ(108,"th"),n.TgZ(109,"th",27),n._uU(110,"PLAN"),n.qZA(),n.TgZ(111,"th",28),n._uU(112,"PLAN QC"),n.qZA(),n.TgZ(113,"th",29),n._uU(114,"ALL"),n.qZA()(),n.TgZ(115,"tr")(116,"th",30)(117,"input",31),n.NdJ("change",function(a){return r.onMonthChange(a)}),n.ALo(118,"momentDate"),n.qZA()(),n.TgZ(119,"th",32),n._uU(120,"PIC"),n.qZA(),n.TgZ(121,"th",32),n._uU(122,"VAJAN"),n.qZA(),n.TgZ(123,"th",32),n._uU(124,"TARGET"),n.qZA(),n.TgZ(125,"th",32),n._uU(126,"NET"),n.qZA(),n.TgZ(127,"th",32),n._uU(128,"PIC"),n.qZA(),n.TgZ(129,"th",32),n._uU(130,"VAJAN"),n.qZA(),n.TgZ(131,"th",32),n._uU(132,"TARGET"),n.qZA(),n.TgZ(133,"th",32),n._uU(134,"NET"),n.qZA(),n.TgZ(135,"th",32),n._uU(136,"PIC"),n.qZA(),n.TgZ(137,"th",32),n._uU(138,"VAJAN"),n.qZA(),n.TgZ(139,"th",32),n._uU(140,"TARGET"),n.qZA(),n.TgZ(141,"th",32),n._uU(142,"NET"),n.qZA()(),n.TgZ(143,"tr",33)(144,"th"),n._uU(145,"Total"),n.qZA(),n.TgZ(146,"td"),n._uU(147),n.ALo(148,"contains"),n.ALo(149,"filter"),n.ALo(150,"momentDate"),n.qZA(),n.TgZ(151,"td"),n._uU(152),n.ALo(153,"wt"),n.ALo(154,"contains"),n.ALo(155,"filter"),n.ALo(156,"momentDate"),n.qZA(),n.TgZ(157,"td"),n._uU(158),n.ALo(159,"wt"),n.ALo(160,"contains"),n.ALo(161,"filter"),n.ALo(162,"momentDate"),n.qZA(),n.TgZ(163,"td"),n._uU(164),n.ALo(165,"contains"),n.ALo(166,"filter"),n.ALo(167,"momentDate"),n.ALo(168,"wt"),n.ALo(169,"contains"),n.ALo(170,"filter"),n.ALo(171,"momentDate"),n.ALo(172,"contains"),n.ALo(173,"filter"),n.ALo(174,"momentDate"),n.qZA(),n.TgZ(175,"td"),n._uU(176),n.ALo(177,"contains"),n.ALo(178,"filter"),n.ALo(179,"momentDate"),n.qZA(),n.TgZ(180,"td"),n._uU(181),n.ALo(182,"wt"),n.ALo(183,"contains"),n.ALo(184,"filter"),n.ALo(185,"momentDate"),n.qZA(),n.TgZ(186,"td"),n._uU(187),n.ALo(188,"wt"),n.ALo(189,"contains"),n.ALo(190,"filter"),n.ALo(191,"momentDate"),n.qZA(),n.TgZ(192,"td"),n._uU(193),n.ALo(194,"contains"),n.ALo(195,"filter"),n.ALo(196,"momentDate"),n.ALo(197,"wt"),n.ALo(198,"contains"),n.ALo(199,"filter"),n.ALo(200,"momentDate"),n.ALo(201,"contains"),n.ALo(202,"filter"),n.ALo(203,"momentDate"),n.qZA(),n.TgZ(204,"td"),n._uU(205),n.ALo(206,"contains"),n.ALo(207,"momentDate"),n.qZA(),n.TgZ(208,"td"),n._uU(209),n.ALo(210,"wt"),n.ALo(211,"contains"),n.ALo(212,"momentDate"),n.qZA(),n.TgZ(213,"td"),n._uU(214),n.ALo(215,"wt"),n.ALo(216,"contains"),n.ALo(217,"momentDate"),n.qZA(),n.TgZ(218,"td"),n._uU(219),n.ALo(220,"contains"),n.ALo(221,"momentDate"),n.ALo(222,"wt"),n.ALo(223,"contains"),n.ALo(224,"momentDate"),n.ALo(225,"contains"),n.ALo(226,"momentDate"),n.qZA()()(),n.TgZ(227,"tbody"),n.YNc(228,ot,67,172,"tr",16),n.qZA()()()()()()()()()(),n.TgZ(229,"div",34)(230,"app-employee",35),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()(),n.TgZ(231,"div",36)(232,"div",37)(233,"div",38)(234,"div",39)(235,"button",40)(236,"span",41),n._uU(237,"\xd7"),n.qZA()(),n.TgZ(238,"h4",42),n._uU(239),n.qZA()(),n.TgZ(240,"div",43)(241,"div",9)(242,"div",26)(243,"div",22)(244,"table",44)(245,"thead")(246,"tr")(247,"th",45)(248,"input",31),n.NdJ("change",function(a){return r.onMonthChange(a)}),n.ALo(249,"momentDate"),n.qZA()(),n.TgZ(250,"th",32),n._uU(251,"PIC"),n.qZA(),n.TgZ(252,"th",32),n._uU(253,"VAJAN"),n.qZA(),n.TgZ(254,"th",32),n._uU(255,"TARGET"),n.qZA(),n.TgZ(256,"th",32),n._uU(257,"NET"),n.qZA()(),n.TgZ(258,"tr",33)(259,"th"),n._uU(260,"Total"),n.qZA(),n.YNc(261,Ue,2,1,"th",46),n.qZA()(),n.TgZ(262,"tbody"),n.YNc(263,Xe,5,5,"tr",16),n.qZA()()()()()()()()()),2&o&&(n.xp6(18),n.Q6J("value",n.xi3(19,37,r.today,"YYYY-MM-DD")),n.xp6(15),n.Q6J("ngForOf",r.list),n.xp6(8),n.Oqu(n.lcZ(42,40,r.api.getSum(r.list,"target",""))),n.xp6(3),n.Oqu(r.api.getSum(r.list,"than","")),n.xp6(2),n.Oqu(n.lcZ(47,42,r.api.getSum(r.list,"weight",""))),n.xp6(2),n.Tol(r.api.getSum(r.list,"weight")>r.api.getSum(r.list,"target")?"text-green":"text-maroon"),n.xp6(1),n.Oqu(n.lcZ(50,44,r.api.getSum(r.list,"weight")-r.api.getSum(r.list,"target"))),n.xp6(2),n.Tol(r.api.getSum(r.list,"weight")>r.api.getSum(r.list,"target")?"text-green":"text-maroon"),n.xp6(1),n.hij(" ",r.api.getSum(r.list,"target")?n.lcZ(53,46,100*(r.api.getSum(r.list,"weight")/r.api.getSum(r.list,"target")-1))+" %":""," "),n.xp6(2),n.Q6J("disabled",!r.api.getSum(r.list,"weight")||!r.api.getSum(r.list,"than")),n.xp6(20),n.Q6J("ngForOf",r.klist),n.xp6(6),n.Oqu(r.api.getSum(r.klist,"rpcs")),n.xp6(2),n.Oqu(n.lcZ(83,48,r.api.getSum(r.klist,"actweight"))),n.xp6(3),n.Oqu(r.api.getSum(n.xi3(86,50,n.xi3(87,53,r.rlist,n.DdM(249,nt)),n.VKq(250,it,n.xi3(88,56,r.today,"YYYY-MM"))),"than","")),n.xp6(5),n.Oqu(n.lcZ(91,59,r.api.getSum(n.xi3(92,61,n.xi3(93,64,r.rlist,n.DdM(252,nt)),n.VKq(253,it,n.xi3(94,67,r.today,"YYYY-MM"))),"weight",""))),n.xp6(6),n.Oqu(n.lcZ(97,70,r.api.getSum(r.klist,"actweight")-r.api.getSum(n.xi3(98,72,n.xi3(99,75,r.rlist,n.DdM(255,nt)),n.VKq(256,it,n.xi3(100,78,r.today,"YYYY-MM"))),"weight"))),n.xp6(21),n.Q6J("value",n.xi3(118,81,r.month,"YYYY-MM")),n.xp6(30),n.Oqu(r.api.getSum(n.xi3(148,84,n.xi3(149,87,r.rlist,n.DdM(258,nt)),n.VKq(259,it,n.xi3(150,90,r.month,"YYYY-MM"))),"than","")),n.xp6(5),n.Oqu(n.lcZ(153,93,r.api.getSum(n.xi3(154,95,n.xi3(155,98,r.rlist,n.DdM(261,nt)),n.VKq(262,it,n.xi3(156,101,r.month,"YYYY-MM"))),"weight",""))),n.xp6(6),n.Oqu(n.lcZ(159,104,r.api.getSum(n.xi3(160,106,n.xi3(161,109,r.rlist,n.DdM(264,nt)),n.VKq(265,it,n.xi3(162,112,r.month,"YYYY-MM"))),"target",""))),n.xp6(6),n.hij("",r.api.getSum(n.xi3(165,115,n.xi3(166,118,r.rlist,n.DdM(267,nt)),n.VKq(268,it,n.xi3(167,121,r.month,"YYYY-MM"))),"target")?n.lcZ(168,124,100*(r.api.getSum(n.xi3(169,126,n.xi3(170,129,r.rlist,n.DdM(270,nt)),n.VKq(271,it,n.xi3(171,132,r.month,"YYYY-MM"))),"weight")/r.api.getSum(n.xi3(172,135,n.xi3(173,138,r.rlist,n.DdM(273,nt)),n.VKq(274,it,n.xi3(174,141,r.month,"YYYY-MM"))),"target")-1))+" %":""," "),n.xp6(12),n.Oqu(r.api.getSum(n.xi3(177,144,n.xi3(178,147,r.rlist,n.DdM(276,di)),n.VKq(277,it,n.xi3(179,150,r.month,"YYYY-MM"))),"than","")),n.xp6(5),n.Oqu(n.lcZ(182,153,r.api.getSum(n.xi3(183,155,n.xi3(184,158,r.rlist,n.DdM(279,di)),n.VKq(280,it,n.xi3(185,161,r.month,"YYYY-MM"))),"weight",""))),n.xp6(6),n.Oqu(n.lcZ(188,164,r.api.getSum(n.xi3(189,166,n.xi3(190,169,r.rlist,n.DdM(282,di)),n.VKq(283,it,n.xi3(191,172,r.month,"YYYY-MM"))),"target",""))),n.xp6(6),n.hij("",r.api.getSum(n.xi3(194,175,n.xi3(195,178,r.rlist,n.DdM(285,di)),n.VKq(286,it,n.xi3(196,181,r.month,"YYYY-MM"))),"target")?n.lcZ(197,184,100*(r.api.getSum(n.xi3(198,186,n.xi3(199,189,r.rlist,n.DdM(288,di)),n.VKq(289,it,n.xi3(200,192,r.month,"YYYY-MM"))),"weight")/r.api.getSum(n.xi3(201,195,n.xi3(202,198,r.rlist,n.DdM(291,di)),n.VKq(292,it,n.xi3(203,201,r.month,"YYYY-MM"))),"target")-1))+" %":""," "),n.xp6(12),n.Oqu(r.api.getSum(n.xi3(206,204,r.rlist,n.VKq(294,it,n.xi3(207,207,r.month,"YYYY-MM"))),"than","")),n.xp6(4),n.Oqu(n.lcZ(210,210,r.api.getSum(n.xi3(211,212,r.rlist,n.VKq(296,it,n.xi3(212,215,r.month,"YYYY-MM"))),"weight",""))),n.xp6(5),n.Oqu(n.lcZ(215,218,r.api.getSum(n.xi3(216,220,r.rlist,n.VKq(298,it,n.xi3(217,223,r.month,"YYYY-MM"))),"target",""))),n.xp6(5),n.hij("",r.api.getSum(n.xi3(220,226,r.rlist,n.VKq(300,it,n.xi3(221,229,r.month,"YYYY-MM"))),"target")?n.lcZ(222,232,100*(r.api.getSum(n.xi3(223,234,r.rlist,n.VKq(302,it,n.xi3(224,237,r.month,"YYYY-MM"))),"weight")/r.api.getSum(n.xi3(225,240,r.rlist,n.VKq(304,it,n.xi3(226,243,r.month,"YYYY-MM"))),"target")-1))+" %":""," "),n.xp6(9),n.Q6J("ngForOf",r.dates),n.xp6(2),n.Q6J("employee",r.employee),n.xp6(9),n.Oqu(null==r.selEmp?null:r.selEmp.code),n.xp6(9),n.Q6J("value",n.xi3(249,246,r.month,"YYYY-MM")),n.xp6(13),n.Q6J("ngForOf",r.generateSumRow()),n.xp6(2),n.Q6J("ngForOf",r.dates))},dependencies:[Ee.sg,te.Fj,te.wV,te.JJ,te.On,Ut,Ji,Oi.g,Bt.J,Rt.v,vi],styles:["input[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-weight:600}"]})}return e})();var et=Oe(1387),rt=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,i,t){const o=i?this.allAsyncListeners:this.allSyncListeners;let r=o.get(e);return!r&&t&&(r=new Set,o.set(e,r)),r}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,i,t=!1){this.getListeners(e,t,!0).add(i)}removeEventListener(e,i,t=!1){const o=this.getListeners(e,t,!1);o&&(o.delete(i),0===o.size&&(t?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,i=!1){(i?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,i=!1){(i?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const i=e;this.dispatchToListeners(i,!0),this.dispatchToListeners(i,!1),this.firedEvents[i.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,i){const t=e.type;if(i&&"event"in e){const l=e.event;l instanceof Event&&(e.eventPath=l.composedPath())}const r=this.getListeners(t,i,!1)??new Set,s=new Set(r);s.size>0&&((l,c)=>{l.forEach(d=>{if(!c.has(d))return;const h=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>d(e)):()=>d(e);i?this.dispatchAsync(h):h()})})(s,r),new Set(i?this.globalAsyncListeners:this.globalSyncListeners).forEach(l=>{const c=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>l(t,e)):()=>l(t,e);i?this.dispatchAsync(c):c()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const i=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(i):i(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(i=>i())}},Pt=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(Pt||{}),oi={};function ui(e,i){oi[i]||(e(),oi[i]=!0)}function Ht(e,...i){console.log("AG Grid: "+e,...i)}function pe(e,...i){ui(()=>console.warn("AG Grid: "+e,...i),e+i?.join(""))}function pt(e,...i){ui(()=>console.error("AG Grid: "+e,...i),e+i?.join(""))}function kn(e){return!!(e&&e.constructor&&e.call&&e.apply)}var fn=[],wi=!1;function on(e){fn.push(e),!wi&&(wi=!0,window.setTimeout(()=>{const i=fn.slice();fn.length=0,wi=!1,i.forEach(t=>t())},0))}function hi(e,i){let t;return function(...o){const r=this;window.clearTimeout(t),t=window.setTimeout(function(){e.apply(r,o)},i)}}function Os(e,i){let t=0;return function(...o){const s=(new Date).getTime();s-t<i||(t=s,e.apply(this,o))}}function tr(e){return null==e||""===e?null:e}function Fe(e,i=!1){return null!=e&&(""!==e||i)}function kt(e){return!Fe(e)}function Tn(e){return null==e||0===e.length}function xu(e){return null!=e&&"function"==typeof e.toString?e.toString():null}function ts(e){if(void 0===e)return;if(null===e||""===e)return null;if("number"==typeof e)return isNaN(e)?void 0:e;const i=parseInt(e,10);return isNaN(i)?void 0:i}function Au(e){if(void 0!==e)return null!==e&&""!==e&&ku(e)}function ku(e){return"boolean"==typeof e?e:"string"==typeof e&&("TRUE"===e.toUpperCase()||""==e)}function $a(e,i){return(e?JSON.stringify(e):null)===(i?JSON.stringify(i):null)}function FC(e,i,t=!1){const o=null==e,r=null==i;if(e&&e.toNumber&&(e=e.toNumber()),i&&i.toNumber&&(i=i.toNumber()),o&&r)return 0;if(o)return-1;if(r)return 1;function s(a,l){return a>l?1:a<l?-1:0}if("string"!=typeof e||!t)return s(e,i);try{return e.localeCompare(i)}catch{return s(e,i)}}function uc(e){if(e instanceof Set||e instanceof Map){const i=[];return e.forEach(t=>i.push(t)),i}return Object.values(e)}function af(e,i){return e.get("rowModelType")===i}function gi(e){return af(e,"clientSide")}function ir(e){return af(e,"serverSide")}function Ki(e,i){return e.get("domLayout")===i}function hc(e){return void 0!==vc(e)}function gc(e){return!e.get("suppressAsyncEvents")}function lf(e){return"function"==typeof e.get("getRowHeight")}function _r(e,i,t=!1,o){if(null==o&&(o=e.environment.getDefaultRowHeight()),lf(e)){if(t)return{height:o,estimated:!0};const a={node:i,data:i.data},l=e.getCallback("getRowHeight")(a);if(Tu(l))return 0===l&&pe("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,l),estimated:!1}}if(i.detail&&e.get("masterDetail"))return function MC(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const i=e.get("detailRowHeight");return Tu(i)?{height:i,estimated:!1}:{height:300,estimated:!1}}(e);const r=e.get("rowHeight");return{height:r&&Tu(r)?r:o,estimated:!1}}function is(e){const{environment:i}=e,t=e.get("rowHeight");if(!t||kt(t))return i.getDefaultRowHeight();const o=i.refreshRowHeightVariable();return-1!==o?o:(pe("row height must be a number if not using standard row model"),i.getDefaultRowHeight())}function Tu(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)}function Ja(e,i,t){const o=i[e.getDomDataKey()];return o?o[t]:void 0}function ns(e,i,t,o){const r=e.getDomDataKey();let s=i[r];kt(s)&&(s={},i[r]=s),s[t]=o}function ki(e){let i=null;const t=e.get("getDocument");return t&&Fe(t)?i=t():e.eGridDiv&&(i=e.eGridDiv.ownerDocument),i&&Fe(i)?i:document}function cf(e){return ki(e).defaultView||window}function Ka(e){return e.eGridDiv.getRootNode()}function ai(e){return Ka(e).activeElement}function df(e){const i=ki(e),t=ai(e);return null===t||t===i.body}function Ns(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function pc(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Ki(e,"print"))}function Io(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function Du(e){const i=e.get("groupAggFiltering");return"function"==typeof i?e.getCallback("groupAggFiltering"):!0===i?()=>!0:void 0}function uf(e){return e.get("grandTotalRow")||(e.get("groupIncludeTotalFooter")?"bottom":void 0)}function hf(e){const i=e.get("groupTotalRow");if("function"==typeof i)return e.getCallback("groupTotalRow");if(i)return()=>i;const t=e.get("groupIncludeFooter");if("function"==typeof t){const o=e.getCallback("groupIncludeFooter");return r=>o(r)?"bottom":void 0}return()=>t?"bottom":void 0}function gf(e){return e.exists("groupDisplayType")?"multipleColumns"===e.get("groupDisplayType"):e.get("groupHideOpenParents")}function fc(e,i){return!i&&"groupRows"===e.get("groupDisplayType")}function Bs(e){const i=e.getCallback("getRowId");return void 0===i?i:t=>{let o=i(t);return"string"!=typeof o&&(pe("The getRowId callback must return a string. The ID ",o," is being cast to a string."),o=String(o)),o}}function Zs(e){return e?.checkboxes??!0}function mc(e){return"multiRow"===e?.mode&&(e.headerCheckbox??!0)}function Oo(e){const i=e.get("cellSelection");return void 0!==i?!!i:e.get("enableRangeSelection")}function pf(e){const i=e.get("cellSelection");return void 0!==i?"boolean"!=typeof i&&"fill"===i.handle?.mode:e.get("enableFillHandle")}function ff(e){const i=e.get("rowSelection")??"single";if("string"==typeof i){const t=e.get("suppressRowClickSelection"),o=e.get("suppressRowDeselection");return(!t||!o)&&(t?"enableDeselection":!o||"enableSelection")}return("singleRow"===i.mode||"multiRow"===i.mode)&&(i.enableClickSelection??!1)}function Fu(e){const i=ff(e);return!0===i||"enableDeselection"===i}function Ru(e){const i=e.get("rowSelection");return"string"==typeof i?e.get("isRowSelectable"):i?.isRowSelectable}function vc(e){const i=e.get("rowSelection");if("string"==typeof i)switch(i){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return i?.mode}function Mu(e){return"multiRow"===vc(e)}function Eu(e){const i=e.get("rowSelection");if("string"==typeof i){const t=e.get("groupSelectsChildren"),o=e.get("groupSelectsFiltered");return t&&o?"filteredDescendants":t?"descendants":"self"}return"multiRow"===i?.mode?i.groupSelects:void 0}function os(e){const i=Eu(e);return"descendants"===i||"filteredDescendants"===i}function Pu(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function Tt(e){if(e&&e.length)return e[e.length-1]}function nr(e,i,t){return null==e&&null==i||null!=e&&null!=i&&e.length===i.length&&e.every((o,r)=>t?t(o,i[r]):i[r]===o)}function mf(e,i){const t=e.indexOf(i);t>=0&&(e[t]=e[e.length-1],e.pop())}function mn(e,i){const t=e.indexOf(i);t>=0&&e.splice(t,1)}function Qa(e,i,t){e.splice(t,0,i)}function vf(e,i,t){(function HC(e,i){for(let t=0;t<i.length;t++)mn(e,i[t])})(e,i),i.slice().reverse().forEach(o=>Qa(e,o,t))}function rs(e,i){return e.indexOf(i)>-1}function qC(e){return e?.flatMap(i=>i)??[]}function Cf(e,i){null==i||null==e||i.forEach(t=>e.push(t))}var wf="__ag_Grid_Stop_Propagation",zC=["touchstart","touchend","touchmove","touchcancel","scroll"],Lu={};function Gs(e){e[wf]=!0}function or(e){return!0===e[wf]}var yf=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"==typeof Lu[t])return Lu[t];const o=document.createElement(e[t]||"div");return Lu[t="on"+t]=t in o}})();function Iu(e,i,t){let o=i;for(;o;){const r=Ja(e,o,t);if(r)return r;o=o.parentElement}return null}function VC(e,i){return!(!i||!e)&&function WC(e){const i=e;return i.path?i.path:i.composedPath?i.composedPath():function UC(e){const i=[];let t=e.target;for(;t;)i.push(t),t=t.parentElement;return i}(i)}(i).indexOf(e)>=0}var fe=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,i,t){this.localEventService||(this.localEventService=new rt),this.localEventService.addEventListener(e,i,t)}removeEventListener(e,i,t){this.localEventService&&this.localEventService.removeEventListener(e,i,t)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,i){return this._setupListeners(e,i)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,i){return this._setupListeners(e,i)}_setupListeners(e,i){const t=[];for(const o in i){const r=i[o];r&&t.push(this._setupListener(e,o,r))}return t}_setupListener(e,i,t){if(this.destroyed)return()=>null;e instanceof HTMLElement?function jC(e,i,t,o){const s=rs(zC,t)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(i,t,o,s)}(this.getFrameworkOverrides(),e,i,t):e.addEventListener(i,t);const o=()=>(e.removeEventListener(i,t),null);return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==o),null)}setupGridOptionListener(e,i){this.gos.addPropertyEventListener(e,i);const t=()=>(this.gos.removePropertyEventListener(e,i),null);return this.destroyFunctions.push(t),()=>(t(),this.destroyFunctions=this.destroyFunctions.filter(o=>o!==t),null)}addManagedPropertyListener(e,i){return this.destroyed?()=>null:this.setupGridOptionListener(e,i)}addManagedPropertyListeners(e,i){if(this.destroyed)return;const t=e.join("-")+this.propertyListenerId++,o=r=>{if(r.changeSet){if(r.changeSet&&r.changeSet.id===this.lastChangeSetIdLookup[t])return;this.lastChangeSetIdLookup[t]=r.changeSet.id}i({type:"gridPropertyChanged",changeSet:r.changeSet,source:r.source})};e.forEach(r=>this.setupGridOptionListener(r,o))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,i){const t=this.createBean(e,i);return this.addDestroyFunc(this.destroyBean.bind(this,e,i)),t}createBean(e,i,t){return(i||this.stubContext).createBean(e,t)}destroyBean(e,i){return(i||this.stubContext).destroyBean(e)}destroyBeans(e,i){return(i||this.stubContext).destroyBeans(e)}};function vn(e){return e instanceof Cc}var Cc=class extends fe{constructor(e,i,t,o){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=_f(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=i,this.expanded=!!e&&!!e.openByDefault,this.padding=t,this.level=o}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,i){this.colGroupDef=e,this.level=i,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some(e=>e.isVisible())}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(i=>{kr(i)?e.push(i):vn(i)&&i.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(i=>i.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(i=>i.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,i=!1,t=!1;const o=this.findChildrenRemovingPadding();for(let s=0,a=o.length;s<a;s++){const l=o[s];if(!l.isVisible())continue;const c=l.getColumnGroupShow();"open"===c?(e=!0,t=!0):"closed"===c?(i=!0,t=!0):(e=!0,i=!0)}const r=e&&i&&t;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],i=t=>{t.forEach(o=>{vn(o)&&o.isPadding()?i(o.children):e.push(o)})};return i(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},bf="ag-Grid-ControlsColumn",YC=class extends fe{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const e=this.gos.get("rowSelection");if(!e||"string"==typeof e)return[];const i=Zs(e),t=mc(e);if(i||t){const o=this.gos.get("selectionColumnDef"),s={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:this.gos.get("enableRtl")?"right":"left",comparator(l,c,d,h){const g=d.isSelected(),m=h.isSelected();return g&&m?0:g?1:-1},editable:!1,suppressFillHandle:!0,...o,colId:`${bf}`},a=new qu(s,null,s.colId,!1);return this.createBean(a),[a]}return[]}},wc="ag-Grid-AutoColumn";function Ou(e){const i=[],t=o=>{for(let r=0;r<o.length;r++){const s=o[r];kr(s)?i.push(s):vn(s)&&t(s.getChildren())}};return t(e),i}function rr(e){return e.reduce((i,t)=>i+t.getActualWidth(),0)}function xr(e,i,t){const o={};if(!i)return;sr(null,i,s=>{o[s.getInstanceId()]=s}),t&&sr(null,t,s=>{o[s.getInstanceId()]=null});const r=Object.values(o).filter(s=>null!=s);e.destroyBeans(r)}function Nu(e){return e.getId().startsWith(wc)}function Hs(e){return e.getColId().startsWith(bf)}function yc(e){let i=[];return e instanceof Array?e.some(o=>"string"!=typeof o)?pe("if colDef.type is supplied an array it should be of type 'string[]'"):i=e:"string"==typeof e?i=e.split(","):pe("colDef.type should be of type 'string' | 'string[]'"),i}var Bu=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let i=e;return this.frameworkOverrides.shouldWrapOutgoing&&(i=t=>{this.frameworkOverrides.wrapOutgoing(()=>e(t))},this.wrappedListeners.set(e,i)),i}wrapGlobal(e){let i=e;return this.frameworkOverrides.shouldWrapOutgoing&&(i=(t,o)=>{this.frameworkOverrides.wrapOutgoing(()=>e(t,o))},this.wrappedGlobalListeners.set(e,i)),i}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},Zu=new Set(["__proto__","constructor","prototype"]);function $n(e,i){if(null!=e){if(Array.isArray(e)){for(let t=0;t<e.length;t++)i(t.toString(),e[t]);return}for(const[t,o]of Object.entries(e))i(t,o)}}function Sf(e){const i={},t=Object.keys(e);for(let o=0;o<t.length;o++){if(Zu.has(t[o]))continue;const r=t[o];i[r]=e[r]}return i}function Gu(e,i){if(!e)return;const t=e,o={};return Object.keys(t).forEach(r=>{if(i&&i.indexOf(r)>=0||Zu.has(r))return;const s=t[r];o[r]=Hu(s)&&s.constructor===Object?Gu(s):s}),o}function Ar(e){if(!e)return[];const i=Object;if("function"==typeof i.values)return i.values(e);const t=[];for(const o in e)e.hasOwnProperty(o)&&e.propertyIsEnumerable(o)&&t.push(e[o]);return t}function Cn(e,i,t=!0,o=!1){Fe(i)&&$n(i,(r,s)=>{if(Zu.has(r))return;let a=e[r];a!==s&&(o&&null==a&&null!=s&&"object"==typeof s&&s.constructor===Object&&(a={},e[r]=a),Hu(s)&&Hu(a)&&!Array.isArray(a)?Cn(a,s,t,o):(t||void 0!==s)&&(e[r]=s))})}function Xa(e,i,t){if(!i||!e)return;if(!t)return e[i];const o=i.split(".");let r=e;for(let s=0;s<o.length;s++){if(null==r)return;r=r[o[s]]}return r}function Hu(e){return"object"==typeof e&&null!==e}var $C={resizable:!0,sortable:!0},JC=0;function _f(){return JC++}function kr(e){return e instanceof qu}var qu=class extends fe{constructor(e,i,t,o){super(),this.isColumn=!0,this.instanceId=_f(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new rt,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=i,this.colId=t,this.primary=o,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){void 0!==e.sort?("asc"===e.sort||"desc"===e.sort)&&(this.sort=e.sort):("asc"===e.initialSort||"desc"===e.initialSort)&&(this.sort=e.initialSort);const i=e.sortIndex,t=e.initialSortIndex;void 0!==i?null!==i&&(this.sortIndex=i):null!==t&&(this.sortIndex=t);const o=e.hide;this.visible=void 0!==o?!o:!e.initialHide,this.setPinned(void 0!==e.pinned?e.pinned:e.initialPinned);const s=e.flex,a=e.initialFlex;void 0!==s?this.flex=s:void 0!==a&&(this.flex=a)}setColDef(e,i,t){this.colDef=e,this.userProvidedColDef=i,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",t))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=Fe(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=Fe(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=Fe(this.colDef.tooltipField)||Fe(this.colDef.tooltipValueGetter)||Fe(this.colDef.tooltipComponent)}resetActualWidth(e){const i=this.calculateColInitialWidth(this.colDef);this.setActualWidth(i,e,!0)}calculateColInitialWidth(e){let i;const t=ts(e.width),o=ts(e.initialWidth);return i=null!=t?t:null!=o?o:200,Math.max(Math.min(i,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return!kt(this.colDef)&&!kt(this.colDef.showRowGroup)&&(!0===this.colDef.showRowGroup||this.colDef.showRowGroup===e)}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,i){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new Bu(this.frameworkOverrides));const t=this.frameworkEventListenerService?.wrap(i)??i;this.columnEventService.addEventListener(e,t)}removeEventListener(e,i){const t=this.frameworkEventListenerService?.unwrap(i)??i;this.columnEventService.removeEventListener(e,t)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){const i=this.createColumnFunctionCallbackParams(e);return(0,this.colDef.suppressNavigable)(i)}return!1}isCellEditable(e){if(e.group)if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1;return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const i=this.gos.get("rowSelection");if(i&&"string"!=typeof i){const t=Hs(this)&&Zs(i);return this.isColumnFunc(e,t)}return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??$C[e]}isColumnFunc(e,i){return"boolean"==typeof i?i:"function"==typeof i&&i(this.createColumnFunctionCallbackParams(e))}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,i){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",i))}createColumnEvent(e,i){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:i})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,i){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",i))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return kt(this.sort)}isSorting(){return Fe(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,i){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",i)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,i){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",i)))}isFilterActive(){return this.filterActive}setFilterActive(e,i,t){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",i)));const o=this.createColumnEvent("filterChanged",i);t&&Cn(o,t),this.columnEventService.dispatchEvent(o)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){this.pinned=!0===e||"left"===e?"left":"right"===e?"right":null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,i){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",i)))}setLastLeftPinned(e,i){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",i)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,i){const t=!0===e;this.visible!==t&&(this.visible=t,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",i))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const i=e.getPaddingLevel()+1;let t=!0;for(;e;){if(!e.isPadding()){t=!1;break}e=e.getParent()}return{numberOfParents:i,isSpanningTotal:t}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const i=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,i}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(kt(this.colDef.colSpan))return 1;const i=this.createBaseColDefParams(e),t=this.colDef.colSpan(i);return Math.max(t,1)}getRowSpan(e){if(kt(this.colDef.rowSpan))return 1;const i=this.createBaseColDefParams(e),t=this.colDef.rowSpan(i);return Math.max(t,1)}setActualWidth(e,i,t=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&"flex"!==i&&"gridInitializing"!==i&&(this.flex=null),t||this.fireColumnWidthChangedEvent(i)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,i){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",i))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,i){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",i))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,i){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",i)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},KC={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},XC=class extends fe{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,i,t,o){const r=new class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let i=0;i<e.length;i++)this.existingKeys[e[i]]=!0}getUniqueKey(e,i){e=xu(e);let t=0;for(;;){let o;if(e?(o=e,0!==t&&(o+="_"+t)):i?(o=i,0!==t&&(o+="_"+t)):o=t,!this.existingKeys[o])return this.existingKeys[o]=!0,String(o);t++}}},{existingCols:s,existingGroups:a,existingColKeys:l}=this.extractExistingTreeData(t);r.addExistingKeys(l);const c=this.recursivelyCreateColumns(e,0,i,s,r,a,o),d=this.findMaxDept(c,0),h=this.balanceColumnTree(c,0,d,r);return sr(null,h,(m,f)=>{vn(m)&&m.setupExpandable(),m.setOriginalParent(f)}),{columnTree:h,treeDept:d}}extractExistingTreeData(e){const i=[],t=[],o=[];return e&&sr(null,e,r=>{if(vn(r))t.push(r);else{const s=r;o.push(s.getId()),i.push(s)}}),{existingCols:i,existingGroups:t,existingColKeys:o}}balanceTreeForAutoCols(e,i){const t=[],o=this.findDepth(i);return e.forEach(r=>{let s=r;for(let a=o-1;a>=0;a--){const l=new Cc(null,`FAKE_PATH_${r.getId()}}_${a}`,!0,a);this.createBean(l),l.setChildren([s]),s.setOriginalParent(l),s=l}0===o&&r.setOriginalParent(null),t.push(s)}),[t,o]}findDepth(e){let i=0,t=e;for(;t&&t[0]&&vn(t[0]);)i++,t=t[0].getChildren();return i}balanceColumnTree(e,i,t,o){const r=[];for(let s=0;s<e.length;s++){const a=e[s];if(vn(a)){const l=a,c=this.balanceColumnTree(l.getChildren(),i+1,t,o);l.setChildren(c),r.push(l)}else{let l,c;for(let d=t-1;d>=i;d--){const h=o.getUniqueKey(null,null),g=this.createMergedColGroupDef(null),m=new Cc(g,h,!0,i);this.createBean(m),c&&c.setChildren([m]),c=m,l||(l=c)}if(l&&c){if(r.push(l),e.some(h=>vn(h))){c.setChildren([a]);continue}c.setChildren(e);break}r.push(a)}}return r}findMaxDept(e,i){let t=i;for(let o=0;o<e.length;o++){const r=e[o];if(vn(r)){const a=this.findMaxDept(r.getChildren(),i+1);t<a&&(t=a)}}return t}recursivelyCreateColumns(e,i,t,o,r,s,a){if(!e)return[];const l=new Array(e.length);for(let c=0;c<l.length;c++){const d=e[c];l[c]=this.isColumnGroup(d)?this.createColumnGroup(t,d,i,o,r,s,a):this.createColumn(t,d,o,r,a)}return l}createColumnGroup(e,i,t,o,r,s,a){const l=this.createMergedColGroupDef(i),c=r.getUniqueKey(l.groupId||null,null),d=new Cc(l,c,!1,t);this.createBean(d);const h=this.findExistingGroup(i,s);h&&s.splice(h.idx,1);const g=h?.group;g&&d.setExpanded(g.isExpanded());const m=this.recursivelyCreateColumns(l.children,t+1,e,o,r,s,a);return d.setChildren(m),d}createMergedColGroupDef(e){const i={};return Object.assign(i,this.gos.get("defaultColGroupDef")),Object.assign(i,e),i}createColumn(e,i,t,o,r){const s=this.findExistingColumn(i,t);s&&t?.splice(s.idx,1);let a=s?.column;if(a){const l=this.addColumnDefaultAndTypes(i,a.getColId());a.setColDef(l,i,r),this.applyColumnState(a,l,r)}else{const l=o.getUniqueKey(i.colId,i.field),c=this.addColumnDefaultAndTypes(i,l);a=new qu(c,i,l,e),this.createBean(a)}return this.dataTypeService?.addColumnListeners(a),a}applyColumnState(e,i,t){const o=ts(i.flex);if(void 0!==o&&e.setFlex(o),e.getFlex()<=0){const l=ts(i.width);if(null!=l)e.setActualWidth(l,t);else{const c=e.getActualWidth();e.setActualWidth(c,t)}}void 0!==i.sort&&e.setSort("asc"==i.sort||"desc"==i.sort?i.sort:void 0,t);const s=ts(i.sortIndex);void 0!==s&&e.setSortIndex(s);const a=Au(i.hide);void 0!==a&&e.setVisible(!a,t),void 0!==i.pinned&&e.setPinned(i.pinned)}findExistingColumn(e,i){if(i)for(let t=0;t<i.length;t++){const o=i[t].getUserProvidedColDef();if(o)if(null==e.colId){if(null==e.field){if(o===e)return{idx:t,column:i[t]}}else if(o.field===e.field)return{idx:t,column:i[t]}}else if(i[t].getId()===e.colId)return{idx:t,column:i[t]}}}findExistingGroup(e,i){if(null!=e.groupId)for(let o=0;o<i.length;o++){const r=i[o];if(r.getColGroupDef()&&r.getId()===e.groupId)return{idx:o,group:r}}}addColumnDefaultAndTypes(e,i){const t={};Cn(t,this.gos.get("defaultColDef"),!1,!0);const r=this.updateColDefAndGetColumnType(t,e,i);r&&this.assignColumnTypes(r,t),Cn(t,e,!1,!0);const s=this.gos.get("autoGroupColumnDef"),a=Io(this.gos);return e.rowGroup&&s&&a&&Cn(t,{sort:s.sort,initialSort:s.initialSort},!1,!0),this.dataTypeService?.validateColDef(t),t}updateColDefAndGetColumnType(e,i,t){const o=this.dataTypeService?.updateColDefAndGetColumnType(e,i,t),r=i.type??o??e.type;return e.type=r,r?yc(r):void 0}assignColumnTypes(e,i){if(!e.length)return;const t=Object.assign({},KC);$n(this.gos.get("columnTypes")||{},(r,s)=>{r in t?pe(`the column type '${r}' is a default column type and cannot be overridden.`):(s.type&&pe("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),t[r]=s)}),e.forEach(r=>{const s=t[r.trim()];s?Cn(i,s,!1,!0):pe("colDef.type '"+r+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return void 0!==e.children}};function sr(e,i,t){if(i)for(let o=0;o<i.length;o++){const r=i[o];vn(r)&&sr(r,r.getChildren(),t),t(r,e)}}var ew=class extends fe{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],i=>this.refreshAll(ss(i.source))),this.addManagedPropertyListener("rowSelection",i=>{this.onSelectionOptionsChanged(i.currentValue,i.previousValue,ss(i.source))}),this.addManagedPropertyListener("autoGroupColumnDef",i=>this.onAutoGroupColumnDefChanged(ss(i.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],i=>this.recreateColumnDefs(ss(i.source))),this.addManagedPropertyListener("pivotMode",i=>this.setPivotMode(this.gos.get("pivotMode"),ss(i.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){const i=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const t=this.colDefCols?.list,o=this.colDefCols?.tree,r=this.columnFactory.createColumnTree(this.colDefs,!0,o,e);xr(this.context,this.colDefCols?.tree,r.columnTree);const s=r.columnTree,a=r.treeDept,l=Ou(s),c={};l.forEach(d=>c[d.getId()]=d),this.colDefCols={tree:s,treeDepth:a,list:l,map:c},this.funcColsService.extractCols(e,t),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),i&&(this.changeEventsDispatching=!0,i(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),"gridInitializing"===e&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;const i=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const t=function RC(e,i){return i?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}(this.gos,this.showingPivotResult);(!e||t)&&this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!nr(i,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=null!=e,e){const{map:i,list:t,tree:o,treeDepth:r}=e;this.cols={list:t.slice(),map:{...i},tree:o.slice(),treeDepth:r},e.list.some(a=>void 0!==this.cols?.map[a.getColId()])||(this.lastPivotOrder=null)}else{const{map:i,list:t,tree:o,treeDepth:r}=this.colDefCols;this.cols={list:t.slice(),map:{...i},tree:o.slice(),treeDepth:r}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),i=this.funcColsService.getValueColumns();return this.cols.list.filter(o=>{const r=Nu(o);if(e){const s=i&&rs(i,o);return r||s}return r||o.isVisible()})}addAutoCols(){null!=this.autoCols&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),xf(this.cols))}createAutoCols(){const e=fc(this.gos,this.pivotMode),i=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),t=this.funcColsService.getRowGroupColumns(),s=()=>{this.autoCols&&(xr(this.context,this.autoCols.tree),this.autoCols=null)};if(!(t.length>0||this.gos.get("treeData"))||i||e||!this.autoColService)return void s();const a=this.autoColService.createAutoCols(t)??[],l=function tw(e,i){return nr(e,i,(t,o)=>t.getColId()===o.getColId())}(a,this.autoCols?.list||null);if(l&&(this.autoCols?this.autoCols.treeDepth:-1)==this.cols.treeDepth)return;s();const[g,m]=this.columnFactory.balanceTreeForAutoCols(a,this.cols?.tree);this.autoCols={list:a,tree:g,treeDepth:m,map:{}};const f=y=>{if(!y)return null;const b=y.filter(S=>!Nu(S));return[...a,...b]};this.lastOrder=f(this.lastOrder),this.lastPivotOrder=f(this.lastPivotOrder)}createControlsCols(){xr(this.context,this.controlsCols?.tree),this.controlsCols=null;const e=this.controlsColService?.createControlsCols()??[],[i,t]=this.columnFactory.balanceTreeForAutoCols(e,this.cols.tree);function o(r,s){const a=Hs(r),l=Hs(s);return a&&!l?-1:!a&&l?1:0}this.controlsCols={list:e,tree:i,treeDepth:t,map:{}},this.lastOrder?.sort(o),this.lastPivotOrder?.sort(o)}addControlsCols(){null!=this.controlsCols&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),xf(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,i=!1,t){this.columnApplyStateService.applyColumnState({state:e.map(o=>({colId:"string"==typeof o?o:o.getColId(),hide:!i}))},t)}setColsPinned(e,i,t){if(!this.cols||Tn(e))return;if(Ki(this.gos,"print"))return void pe("Changing the column pinning status is not allowed with domLayout='print'");let o;this.columnAnimationService.start(),o=!0===i||"left"===i?"left":"right"===i?"right":null;const r=[];e.forEach(s=>{if(!s)return;const a=this.getCol(s);a&&a.getPinned()!==o&&(a.setPinned(o),r.push(a))}),r.length&&(this.visibleColsService.refresh(t),this.eventDispatcher.columnPinned(r,t)),this.columnAnimationService.finish()}setColumnGroupOpened(e,i,t){let o;o=vn(e)?e.getId():e||"",this.columnGroupStateService.setColumnGroupState([{groupId:o,open:i}],t)}getProvidedColGroup(e){let i=null;return sr(null,this.cols?.tree,t=>{vn(t)&&t.getId()===e&&(i=t)}),i}isColGroupLocked(e){const i=this.gos.get("groupLockGroupColumns");return!(!e.isRowGroupActive()||0===i)&&(-1===i||i>this.funcColsService.getRowGroupColumns().findIndex(r=>r.getColId()===e.getColId()))}isSuppressAutoCol(){return"custom"===this.gos.get("groupDisplayType")||"custom"===this.gos.get("treeDataDisplayType")}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,gi(this.gos)||ir(this.gos)||pe("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const i=new Map(e.map((c,d)=>[c,d]));if(!this.cols.list.some(c=>i.has(c)))return;const o=new Map(this.cols.list.map(c=>[c,!0])),r=e.filter(c=>o.has(c)),s=new Map(r.map(c=>[c,!0])),a=this.cols.list.filter(c=>!s.has(c)),l=r.slice();a.forEach(c=>{let d=c.getOriginalParent();if(!d)return void l.push(c);const h=[];for(;!h.length&&d;)d.getLeafColumns().forEach(y=>{const b=l.indexOf(y)>=0,S=h.indexOf(y)<0;b&&S&&h.push(y)}),d=d.getOriginalParent();if(!h.length)return void l.push(c);const g=h.map(f=>l.indexOf(f)),m=Math.max(...g);Qa(l,c,m+1)}),this.cols.list=l}sortColsLikeKeys(e){if(null==this.cols)return;let i=[];const t={};e.forEach(r=>{if(t[r])return;const s=this.cols.map[r];s&&(i.push(s),t[r]=!0)});let o=0;this.cols.list.forEach(r=>{const s=r.getColId();null==t[s]&&(s.startsWith(wc)?Qa(i,r,o++):i.push(r))}),i=this.columnMoveService.placeLockedColumns(i),this.columnMoveService.doesMovePassMarryChildren(i)?this.cols.list=i:pe("Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}sortColsLikeCols(e){!e||e.length<=1||e.filter(t=>this.cols.list.indexOf(t)<0).length>0||e.sort((t,o)=>this.cols.list.indexOf(t)-this.cols.list.indexOf(o))}resetColDefIntoCol(e,i){const t=e.getUserProvidedColDef();if(!t)return!1;const o=this.columnFactory.addColumnDefaultAndTypes(t,e.getColId());return e.setColDef(o,t,i),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,i,t){vf(this.cols?.list,e,i),this.visibleColsService.refresh(t)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((o,r)=>this.lastOrder.indexOf(o)-this.lastOrder.indexOf(r)):this.lastOrder&&e.sort((o,r)=>this.cols.list.indexOf(o)-this.cols.list.indexOf(r));const i=this.funcColsService.getRowGroupColumns(),t=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,i,t)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>null!=e.getColDef().colSpan)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,i){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(i),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return!e||!this.gos.get("treeData")||(pe("Pivot mode not available with treeData."),!1)}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!Tn(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,i){this.colDefs=e,this.createColsFromColDefs(i)}destroy(){xr(this.context,this.colDefCols?.tree),xr(this.context,this.autoCols?.tree),xr(this.context,this.controlsCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){const i=this.pivotResultColsService.getPivotResultCols()?.list;return[this.colDefCols?.list??[],this.autoCols?.list??[],this.controlsCols?.list??[],i??[]].flat()}getColsForKeys(e){return e?e.map(i=>this.getCol(i)).filter(i=>null!=i):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,i){if(null==i)return null;const{map:t,list:o}=i;if("string"==typeof e&&t[e])return t[e];for(let r=0;r<o.length;r++)if(Af(o[r],e))return o[r];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols?.list.find(i=>Af(i,e))??null}getAutoCols(){return this.autoCols?.list??null}setColHeaderHeight(e,i){e.setAutoHeaderHeight(i)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],i=this.ctrlsService.getHeaderRowContainerCtrls();for(const t of i){if(!t)continue;const o=t.getGroupRowCount()||0;for(let r=0;r<o;r++){const s=t.getGroupRowCtrlAtIndex(r),a=e[r];if(s){const l=this.getColumnGroupHeaderRowHeight(s);(null==a||l>a)&&(e[r]=l)}}}return e}getColumnGroupHeaderRowHeight(e){const i=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let t=0;const o=e.getHeaderCtrls();for(const r of o){const s=r.getColumn();if(s.isAutoHeaderHeight()){const a=s.getAutoHeaderHeight();null!=a&&a>t&&(t=a)}}return Math.max(i,t)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.visibleColsService.getAllCols().filter(o=>o.isAutoHeaderHeight()).map(o=>o.getAutoHeaderHeight()||0);return Math.max(e,...t)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==e?.type)return;const{colIds:i,skipHeader:t}=e;setTimeout(()=>{i?this.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",t)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,i,t){if("string"==typeof e||"string"==typeof i)return;const s=(i?Zs(i):void 0)!==(e?Zs(e):void 0),a=i?mc(i):void 0,l=e?mc(e):void 0;(s||a!==l)&&this.refreshAll(t)}};function ss(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e}function xf(e){e.map={},e.list.forEach(i=>e.map[i.getId()]=i)}function Af(e,i){const t=e===i,o=e.getColDef()===i,r=e.getColId()==i;return t||o||r}var iw=class extends fe{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));const{colKeys:i,skipHeader:t,skipHeaderGroups:o,stopAtGroup:r,source:s="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered())return this.timesDelayed++,void setTimeout(()=>this.autoSizeCols(e));this.timesDelayed=0;const a=[];let l=-1;const c=t??this.gos.get("skipHeaderOnAutoSize"),d=o??c;for(;0!==l;){l=0;const h=[];i.forEach(g=>{if(!g)return;const m=this.columnModel.getCol(g);if(!m||a.indexOf(m)>=0)return;const f=this.autoWidthCalculator.getPreferredWidthForColumn(m,c);if(f>0){const y=this.normaliseColumnWidth(m,f);m.setActualWidth(y,s),a.push(m),l++}h.push(m)}),h.length&&this.visibleColsService.refresh(s)}d||this.autoSizeColumnGroupsByColumns(i,s,r),this.eventDispatcher.columnResized(a,!0,"autosizeColumns")}autoSizeColumn(e,i,t){e&&this.autoSizeCols({colKeys:[e],skipHeader:t,skipHeaderGroups:!0,source:i})}autoSizeColumnGroupsByColumns(e,i,t){const o=new Set;let s;this.columnModel.getColsForKeys(e).forEach(l=>{let c=l.getParent();for(;c&&c!=t;)c.isPadding()||o.add(c),c=c.getParent()});for(const l of o){for(const c of this.ctrlsService.getHeaderRowContainerCtrls())if(s=c.getHeaderCtrlForColumn(l),s)break;s&&s.resizeLeafColumnsToFit(i)}return[]}autoSizeAllColumns(e,i){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,i));const t=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:t,skipHeader:i,source:e})}normaliseColumnWidth(e,i){const t=e.getMinWidth();i<t&&(i=t);const o=e.getMaxWidth();return e.isGreaterThanMax(i)&&(i=o),i}},nw=class extends fe{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>mn(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>mn(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>mn(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const i=e.getColDef().showRowGroup;if(!i)return null;if(!0===i)return this.rowGroupCols.slice(0);const t=this.columnModel.getColDefCol(i);return t?[t]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return Tn(this.rowGroupCols)}setColumnAggFunc(e,i,t){if(!e)return;const o=this.columnModel.getColDefCol(e);o&&(o.setAggFunc(i),this.eventDispatcher.columnChanged("columnValueChanged",[o],t))}setRowGroupColumns(e,i){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(t,o)=>this.setRowGroupActive(t,o,i),i)}setRowGroupActive(e,i,t){e!==i.isRowGroupActive()&&(i.setRowGroupActive(e,t),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([i],!1,t),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([i],!0,t))}addRowGroupColumns(e,i){this.updateColList(e,this.rowGroupCols,!0,!0,t=>this.setRowGroupActive(!0,t,i),"columnRowGroupChanged",i)}removeRowGroupColumns(e,i){this.updateColList(e,this.rowGroupCols,!1,!0,t=>this.setRowGroupActive(!1,t,i),"columnRowGroupChanged",i)}addPivotColumns(e,i){this.updateColList(e,this.pivotCols,!0,!1,t=>t.setPivotActive(!0,i),"columnPivotChanged",i)}setPivotColumns(e,i){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(t,o)=>{o.setPivotActive(t,i)},i)}removePivotColumns(e,i){this.updateColList(e,this.pivotCols,!1,!1,t=>t.setPivotActive(!1,i),"columnPivotChanged",i)}setValueColumns(e,i){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(t,o)=>this.setValueActive(t,o,i),i)}setValueActive(e,i,t){if(e!==i.isValueActive()&&(i.setValueActive(e,t),e&&!i.getAggFunc()&&this.aggFuncService)){const o=this.aggFuncService.getDefaultAggFunc(i);i.setAggFunc(o)}}addValueColumns(e,i){this.updateColList(e,this.valueCols,!0,!1,t=>this.setValueActive(!0,t,i),"columnValueChanged",i)}removeValueColumns(e,i){this.updateColList(e,this.valueCols,!1,!1,t=>this.setValueActive(!1,t,i),"columnValueChanged",i)}moveRowGroupColumn(e,i,t){if(this.isRowGroupEmpty())return;const o=this.rowGroupCols[e],r=this.rowGroupCols.slice(e,i);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(i,0,o),this.eventDispatcher.rowGroupChanged(r,t)}setColList(e,i,t,o,r,s,a){if(Tn(this.columnModel.getCols()))return;const c=new Map;i.forEach((h,g)=>c.set(h,g)),i.length=0,Fe(e)&&e.forEach(h=>{const g=this.columnModel.getColDefCol(h);g&&i.push(g)}),i.forEach((h,g)=>{const m=c.get(h);void 0!==m?o&&m!==g||c.delete(h):c.set(h,0)}),(this.columnModel.getColDefCols()||[]).forEach(h=>{const g=i.indexOf(h)>=0;s(g,h)}),r&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(a),this.eventDispatcher.columnChanged(t,[...c.keys()],a)}updateColList(e,i,t,o,r,s,a){if(!e||Tn(e))return;let l=!1;const c=new Set;e.forEach(d=>{if(!d)return;const h=this.columnModel.getColDefCol(d);if(h){if(c.add(h),t){if(i.indexOf(h)>=0)return;i.push(h)}else{const g=i.indexOf(h);if(g<0)return;for(let m=g+1;m<i.length;m++)c.add(i[m]);mn(i,h)}r(h),l=!0}}),l&&(o&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(a),this.eventDispatcher.genericColumnEvent(s,Array.from(c),a))}extractCols(e,i){this.extractRowGroupCols(e,i),this.extractPivotCols(e,i),this.extractValueCols(e,i)}extractValueCols(e,i){this.valueCols=this.extractColsCommon(i,this.valueCols,(t,o)=>t.setValueActive(o,e),()=>{},()=>{},t=>{const o=t.aggFunc;return null===o||""===o?null:void 0!==o?!!o:void 0},t=>null!=t.initialAggFunc&&""!=t.initialAggFunc),this.valueCols.forEach(t=>{const o=t.getColDef();null!=o.aggFunc&&""!=o.aggFunc?t.setAggFunc(o.aggFunc):t.getAggFunc()||t.setAggFunc(o.initialAggFunc)})}extractRowGroupCols(e,i){this.rowGroupCols=this.extractColsCommon(i,this.rowGroupCols,(t,o)=>t.setRowGroupActive(o,e),t=>t.rowGroupIndex,t=>t.initialRowGroupIndex,t=>t.rowGroup,t=>t.initialRowGroup)}extractPivotCols(e,i){this.pivotCols=this.extractColsCommon(i,this.pivotCols,(t,o)=>t.setPivotActive(o,e),t=>t.pivotIndex,t=>t.initialPivotIndex,t=>t.pivot,t=>t.initialPivot)}extractColsCommon(e=[],i=[],t,o,r,s,a){const l=[],c=[];(this.columnModel.getColDefCols()||[]).forEach(m=>{const f=e.indexOf(m)<0,y=m.getColDef(),b=Au(s(y)),S=Au(a(y)),_=ts(o(y)),k=ts(r(y));let E;E=void 0!==b?b:void 0!==_?null!==_&&_>=0:f?void 0!==S?S:void 0!==k&&null!=k&&k>=0:i.indexOf(m)>=0,E&&((f?null!=_||null!=k:null!=_)?l.push(m):c.push(m))});const h=m=>{const f=o(m.getColDef()),y=r(m.getColDef());return f??y};l.sort((m,f)=>{const y=h(m),b=h(f);return y===b?0:y<b?-1:1});const g=[].concat(l);return i.forEach(m=>{c.indexOf(m)>=0&&g.push(m)}),c.forEach(m=>{g.indexOf(m)<0&&g.push(m)}),i.forEach(m=>{g.indexOf(m)<0&&t(m,!1)}),g.forEach(m=>{i.indexOf(m)<0&&t(m,!0)}),g}generateColumnStateForRowGroupAndPivotIndexes(e,i){const t={},o=(r,s,a,l,c,d)=>{const h=this.columnModel.getColDefCols();if(!s.length||!h)return[];const g=Object.keys(r),m=new Set(g),f=new Set(g),y=new Set(s.map(ne=>{const V=ne.getColId();return f.delete(V),V}).concat(g)),b=[],S={};let _=0;for(let ne=0;ne<h.length;ne++){const V=h[ne].getColId();y.has(V)&&(b.push(V),S[V]=_++)}let k=1e3,E=!1,G=0;const K=ne=>{const V=S[ne];for(let N=G;N<V;N++){const X=b[N];f.has(X)&&(r[X][c]=k++,f.delete(X))}G=V};s.forEach(ne=>{const V=ne.getColId();if(m.has(V))K(V),r[V][c]=k++;else{const N=ne.getColDef();(null===N[c]||void 0===N[c]&&null==N[d])&&(E||(N[a]||void 0===N[a]&&N[l]?K(V):(f.forEach(L=>{r[L][c]=k+S[L]}),k+=b.length,E=!0)),t[V]||(t[V]={colId:V}),t[V][c]=k++)}})};return o(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),o(i,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(t)}},ow=class extends fe{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,i){const t=this.columnModel.getColDefCols()||[];if(Tn(t))return!1;if(e&&e.state&&!e.state.forEach)return pe("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const o=this.funcColsService.getModifyColumnsNoEventsCallbacks(),r=(l,c,d)=>{const h=this.compareColumnStatesAndDispatchEvents(i),g=c.slice(),m={},f={},y=[],b=[];let S=0;const _=this.funcColsService.getRowGroupColumns().slice(),k=this.funcColsService.getPivotColumns().slice();l.forEach(ne=>{const V=ne.colId||"";if(V.startsWith(wc))return y.push(ne),void b.push(ne);const X=d(V);X?(this.syncColumnWithStateItem(X,ne,e.defaultState,m,f,!1,i,o),mn(g,X)):(b.push(ne),S+=1)});const E=ne=>this.syncColumnWithStateItem(ne,null,e.defaultState,m,f,!1,i,o);g.forEach(E),this.funcColsService.sortRowGroupColumns(kf.bind(this,m,_)),this.funcColsService.sortPivotColumns(kf.bind(this,f,k)),this.columnModel.refreshCols(!1);const K=(this.columnModel.getAutoCols()||[]).slice();return y.forEach(ne=>{const V=this.columnModel.getAutoCol(ne.colId);mn(K,V),this.syncColumnWithStateItem(V,ne,e.defaultState,null,null,!0,i,o)}),K.forEach(E),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(i),this.eventDispatcher.everythingChanged(i),h(),{unmatchedAndAutoStates:b,unmatchedCount:S}};this.columnAnimationService.start();let{unmatchedAndAutoStates:s,unmatchedCount:a}=r(e.state||[],t,l=>this.columnModel.getColDefCol(l));if(s.length>0||Fe(e.defaultState)){const c=this.pivotResultColsService.getPivotResultCols()?.list;a=r(s,c||[],d=>this.pivotResultColsService.getPivotResultCol(d)).unmatchedCount}return this.columnAnimationService.finish(),0===a}resetColumnState(e){if(Tn(this.columnModel.getColDefCols()))return;const o=Ou(this.columnModel.getColDefColTree()),r=[];let s=1e3,a=1e3,l=[];const c=this.columnModel.getAutoCols();c&&(l=l.concat(c)),o&&(l=l.concat(o)),l.forEach(d=>{const h=this.getColumnStateFromColDef(d);kt(h.rowGroupIndex)&&h.rowGroup&&(h.rowGroupIndex=s++),kt(h.pivotIndex)&&h.pivot&&(h.pivotIndex=a++),r.push(h)}),this.applyColumnState({state:r,applyOrder:!0},e)}getColumnStateFromColDef(e){const i=(y,b)=>y??b??null,t=e.getColDef(),o=i(t.sort,t.initialSort),r=i(t.sortIndex,t.initialSortIndex),s=i(t.hide,t.initialHide),a=i(t.pinned,t.initialPinned),l=i(t.width,t.initialWidth),c=i(t.flex,t.initialFlex);let d=i(t.rowGroupIndex,t.initialRowGroupIndex),h=i(t.rowGroup,t.initialRowGroup);null==d&&(null==h||0==h)&&(d=null,h=null);let g=i(t.pivotIndex,t.initialPivotIndex),m=i(t.pivot,t.initialPivot);null==g&&(null==m||0==m)&&(g=null,m=null);const f=i(t.aggFunc,t.initialAggFunc);return{colId:e.getColId(),sort:o,sortIndex:r,hide:s,pinned:a,width:l,flex:c,rowGroup:h,rowGroupIndex:d,pivot:m,pivotIndex:g,aggFunc:f}}syncColumnWithStateItem(e,i,t,o,r,s,a,l){if(!e)return;const c=(G,K)=>{const ne={value1:void 0,value2:void 0};let V=!1;return i&&(void 0!==i[G]&&(ne.value1=i[G],V=!0),Fe(K)&&void 0!==i[K]&&(ne.value2=i[K],V=!0)),!V&&t&&(void 0!==t[G]&&(ne.value1=t[G]),Fe(K)&&void 0!==t[K]&&(ne.value2=t[K])),ne},d=c("hide").value1;void 0!==d&&e.setVisible(!d,a);const h=c("pinned").value1;void 0!==h&&e.setPinned(h);const g=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),m=c("flex").value1;if(void 0!==m&&e.setFlex(m),null==m){const G=c("width").value1;null!=G&&null!=g&&G>=g&&e.setActualWidth(G,a)}const f=c("sort").value1;void 0!==f&&e.setSort("desc"===f||"asc"===f?f:void 0,a);const y=c("sortIndex").value1;if(void 0!==y&&e.setSortIndex(y),s||!e.isPrimary())return;const b=c("aggFunc").value1;void 0!==b&&("string"==typeof b?(e.setAggFunc(b),e.isValueActive()||(e.setValueActive(!0,a),l.addValueCol(e))):(Fe(b)&&pe("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,a),l.removeValueCol(e))));const{value1:S,value2:_}=c("rowGroup","rowGroupIndex");(void 0!==S||void 0!==_)&&("number"==typeof _||S?(e.isRowGroupActive()||(e.setRowGroupActive(!0,a),l.addGroupCol(e)),o&&"number"==typeof _&&(o[e.getId()]=_)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,a),l.removeGroupCol(e)));const{value1:k,value2:E}=c("pivot","pivotIndex");(void 0!==k||void 0!==E)&&("number"==typeof E||k?(e.isPivotActive()||(e.setPivotActive(!0,a),l.addPivotCol(e)),r&&"number"==typeof E&&(r[e.getId()]=E)):e.isPivotActive()&&(e.setPivotActive(!1,a),l.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const i=[];e.state.forEach(t=>{null!=t.colId&&i.push(t.colId)}),this.columnModel.sortColsLikeKeys(i)}compareColumnStatesAndDispatchEvents(e){const i={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},t=this.columnGetStateService.getColumnState(),o={};return t.forEach(r=>{o[r.colId]=r}),()=>{const r=this.columnModel.getAllCols(),s=(b,S,_,k)=>{if(nr(S.map(k),_.map(k)))return;const ne=new Set(S);_.forEach(N=>{ne.delete(N)||ne.add(N)});const V=[...ne];this.eventService.dispatchEvent({type:b,columns:V,column:1===V.length?V[0]:null,source:e})},a=b=>{const S=[];return r.forEach(_=>{const k=o[_.getColId()];k&&b(k,_)&&S.push(_)}),S},l=b=>b.getColId();s("columnRowGroupChanged",i.rowGroupColumns,this.funcColsService.getRowGroupColumns(),l),s("columnPivotChanged",i.pivotColumns,this.funcColsService.getPivotColumns(),l);const d=a((b,S)=>{const _=null!=b.aggFunc,k=_!=S.isValueActive(),E=_&&b.aggFunc!=S.getAggFunc();return k||E});d.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",d,e),this.eventDispatcher.columnResized(a((b,S)=>b.width!=S.getActualWidth()),!0,e),this.eventDispatcher.columnPinned(a((b,S)=>b.pinned!=S.getPinned()),e),this.eventDispatcher.columnVisible(a((b,S)=>b.hide==S.isVisible()),e);const y=a((b,S)=>b.sort!=S.getSort()||b.sortIndex!=S.getSortIndex());y.length>0&&this.sortController.dispatchSortChangedEvents(e,y),this.normaliseColumnMovedEventForColumnState(t,e)}}normaliseColumnMovedEventForColumnState(e,i){const t=this.columnGetStateService.getColumnState(),o={};t.forEach(c=>o[c.colId]=c);const r={};e.forEach(c=>{o[c.colId]&&(r[c.colId]=!0)});const s=e.filter(c=>r[c.colId]),a=t.filter(c=>r[c.colId]),l=[];a.forEach((c,d)=>{const h=s&&s[d];if(h&&h.colId!==c.colId){const g=this.columnModel.getCol(h.colId);g&&l.push(g)}}),l.length&&this.eventDispatcher.columnMoved({movedColumns:l,source:i,finished:!0})}},kf=(e,i,t,o)=>{const r=e[t.getId()],s=e[o.getId()],a=null!=r,l=null!=s;if(a&&l)return r-s;if(a)return-1;if(l)return 1;const c=i.indexOf(t),d=i.indexOf(o),h=c>=0;return h&&d>=0?c-d:h?-1:1},rw=class extends fe{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,i,t){const o=this.columnModel.getCols();o&&this.moveColumns([o[e]],i,t)}moveColumns(e,i,t,o=!0){const r=this.columnModel.getCols();if(!r)return;if(i>r.length-e.length)return pe("tried to insert columns in invalid location, toIndex = ",i),void pe("remember that you should not count the moving columns when calculating the new index");this.columnAnimationService.start();const s=this.columnModel.getColsForKeys(e);this.doesMovePassRules(s,i)&&(this.columnModel.moveInCols(s,i,t),this.eventDispatcher.columnMoved({movedColumns:s,source:t,toIndex:i,finished:o})),this.columnAnimationService.finish()}doesMovePassRules(e,i){const t=this.getProposedColumnOrder(e,i);return this.doesOrderPassRules(t)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,i){const o=this.columnModel.getCols().slice();return vf(o,e,i),o}doesMovePassLockedPositions(e){const t=this.gos.get("enableRtl");let o=t?1:-1,r=!0;return e.forEach(s=>{const a=(s=>s?"left"===s||!0===s?-1:1:0)(s.getColDef().lockPosition);t?a>o&&(r=!1):a<o&&(r=!1),o=a}),r}doesMovePassMarryChildren(e){let i=!0;return sr(null,this.columnModel.getColTree(),o=>{if(!vn(o))return;const r=o,s=r.getColGroupDef();if(!s||!s.marryChildren)return;const l=[];r.getLeafColumns().forEach(m=>{const f=e.indexOf(m);l.push(f)}),Math.max.apply(Math,l)-Math.min.apply(Math,l)>r.getLeafColumns().length-1&&(i=!1)}),i}placeLockedColumns(e){const i=[],t=[],o=[];return e.forEach(s=>{const a=s.getColDef().lockPosition;"right"===a?o.push(s):"left"===a||!0===a?i.push(s):t.push(s)}),this.gos.get("enableRtl")?[...o,...t,...i]:[...i,...t,...o]}},sw=/[&<>"']/g,aw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function No(e,i){if(null==e)return null;const t=e.toString().toString();return i?t:t.replace(sw,o=>aw[o])}function dw(e){return e.replace(/[A-Z]/g,i=>`-${i.toLocaleLowerCase()}`)}var uw=class extends fe{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,i,t=!1){if(!e)return null;const o=this.getHeaderName(e.getColDef(),e,null,null,i);return t?this.wrapHeaderNameWithAggFunc(e,o):o}getDisplayNameForProvidedColumnGroup(e,i,t){const o=i?i.getColGroupDef():null;return o?this.getHeaderName(o,null,e,i,t):null}getDisplayNameForColumnGroup(e,i){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),i)}getHeaderName(e,i,t,o,r){const s=e.headerValueGetter;if(s){const a=this.gos.addGridCommonParams({colDef:e,column:i,columnGroup:t,providedColumnGroup:o,location:r});return"function"==typeof s?s(a):"string"==typeof s?this.expressionService.evaluate(s,a):(pe("headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?function cw(e){return e&&null!=e?e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" "):null}(e.field):""}wrapHeaderNameWithAggFunc(e,i){if(this.gos.get("suppressAggFuncInHeader"))return i;const t=e.getColDef().pivotValueColumn;let s,r=null;if(Fe(t)){const a=this.funcColsService.getValueColumns(),l=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===a.length,c=void 0!==e.getColDef().pivotTotalColumnIds;if(l&&!c)return i;r=t?t.getAggFunc():null,s=!0}else{const a=e.isValueActive(),l=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();a&&l?(r=e.getAggFunc(),s=!0):s=!1}if(s){const a="string"==typeof r?r:"func";return`${this.localeService.getLocaleTextFunc()(a,a)}(${i})`}return i}},hw=class extends fe{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){xr(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return null!=this.pivotResultCols}lookupPivotResultCol(e,i){if(null==this.pivotResultCols)return null;const t=this.columnModel.getColDefCol(i);let o=null;return this.pivotResultCols.list.forEach(r=>{const s=r.getColDef().pivotKeys,a=r.getColDef().pivotValueColumn;nr(s,e)&&a===t&&(o=r)}),o}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,i){if(this.columnModel.isReady()&&(null!=e||null!=this.pivotResultCols)){if(e){this.processPivotResultColDef(e);const t=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,i);xr(this.context,this.pivotResultCols?.tree,t.columnTree);const o=t.columnTree,r=t.treeDept,s=Ou(o);this.pivotResultCols={tree:o,treeDepth:r,list:s,map:{}},this.pivotResultCols.list.forEach(c=>this.pivotResultCols.map[c.getId()]=c);const l=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!l)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(i)}}processPivotResultColDef(e){const i=this.gos.get("processPivotResultColDef"),t=this.gos.get("processPivotResultColGroupDef");if(!i&&!t)return;const o=r=>{r.forEach(s=>{if(Fe(s.children)){const l=s;t&&t(l),o(l.children)}else i&&i(s)})};e&&o(e)}},gw=class extends fe{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,i,t,o){const r=[];e.forEach(s=>{const a=this.columnModel.getColDefCol(s.key)||this.columnModel.getCol(s.key);if(a&&(r.push({width:s.newWidth,ratios:[1],columns:[a]}),"shift"===this.gos.get("colResizeDefault")&&(i=!i),i)){const c=this.visibleColsService.getColAfter(a);if(!c)return;const d=a.getActualWidth()-s.newWidth,h=c.getActualWidth()+d;r.push({width:h,ratios:[1],columns:[c]})}}),0!==r.length&&this.resizeColumnSets({resizeSets:r,finished:t,source:o})}resizeColumnSets(e){const{resizeSets:i,finished:t,source:o}=e;if(i&&!i.every(h=>this.checkMinAndMaxWidthsForSet(h)))return void(t&&this.eventDispatcher.columnResized(i&&i.length>0?i[0].columns:null,t,o));const s=[],a=[];i.forEach(h=>{const{width:g,columns:m,ratios:f}=h,y={},b={};m.forEach(k=>a.push(k));let S=!0,_=0;for(;S;){if(_++,_>1e3){pt("infinite loop in resizeColumnSets");break}S=!1;const k=[];let E=0,G=g;m.forEach((ne,V)=>{b[ne.getId()]?G-=y[ne.getId()]:(k.push(ne),E+=f[V])});const K=1/E;k.forEach((ne,V)=>{let X;V===k.length-1?X=G:(X=Math.round(f[V]*g*K),G-=X);const ve=ne.getMinWidth(),L=ne.getMaxWidth();X<ve?(X=ve,b[ne.getId()]=!0,S=!0):L>0&&X>L&&(X=L,b[ne.getId()]=!0,S=!0),y[ne.getId()]=X})}m.forEach(k=>{const E=y[k.getId()];k.getActualWidth()!==E&&(k.setActualWidth(E,o),s.push(k))})});const l=s.length>0;let c=[];l&&(c=this.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0}),this.visibleColsService.setLeftValues(o),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const d=a.concat(c);(l||t)&&this.eventDispatcher.columnResized(d,t,o,c)}checkMinAndMaxWidthsForSet(e){const{columns:i,width:t}=e;let o=0,r=0,s=!0;return i.forEach(c=>{const d=c.getMinWidth();o+=d||0;const h=c.getMaxWidth();h>0?r+=h:s=!1}),t>=o&&(!s||t<=r)}refreshFlexedColumns(e={}){const i=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const t=this.visibleColsService.getCenterCols();let o=-1;if(e.resizingCols){const m=new Set(e.resizingCols);for(let f=t.length-1;f>=0;f--)if(m.has(t[f])){o=f;break}}let r=0,s=[],a=0,l=0;for(let m=0;m<t.length;m++)t[m].getFlex()&&m>o?(s.push(t[m]),l+=t[m].getFlex(),a+=t[m].getMinWidth()):r+=t[m].getActualWidth();if(!s.length)return[];let c=[];r+a>this.flexViewportWidth&&(s.forEach(m=>m.setActualWidth(m.getMinWidth(),i)),c=s,s=[]);const d=[];let h;e:for(;;){h=this.flexViewportWidth-r;const m=h/l;for(let f=0;f<s.length;f++){const y=s[f],b=m*y.getFlex();let S=0;const _=y.getMinWidth(),k=y.getMaxWidth();if(b<_?S=_:b>k&&(S=k),S){y.setActualWidth(S,i),mf(s,y),l-=y.getFlex(),c.push(y),r+=y.getActualWidth();continue e}d[f]=Math.floor(b)}break}let g=h;return s.forEach((m,f)=>{const y=f<s.length-1?Math.min(d[f],g):Math.max(d[f],g);m.setActualWidth(y,i),c.push(m),g-=d[f]}),e.skipSetLeft||this.visibleColsService.setLeftValues(i),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(c,!0,i,s),s}sizeColumnsToFit(e,i="sizeColumnsToFit",t,o){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,i,t,o));const r={};o&&o?.columnLimits?.forEach(({key:m,...f})=>{r["string"==typeof m?m:m.getColId()]=f});const s=this.visibleColsService.getAllCols(),a=e===rr(s);if(e<=0||!s.length||a)return;const l=[],c=[];s.forEach(m=>{!0===m.getColDef().suppressSizeToFit?c.push(m):l.push(m)});const d=l.slice(0);let h=!1;const g=m=>{mn(l,m),c.push(m)};for(l.forEach(m=>{m.resetActualWidth(i);const f=r?.[m.getId()],y=f?.minWidth??o?.defaultMinWidth,b=f?.maxWidth??o?.defaultMaxWidth,S=m.getActualWidth();"number"==typeof y&&S<y?m.setActualWidth(y,i,!0):"number"==typeof b&&S>b&&m.setActualWidth(b,i,!0)});!h;){h=!0;const m=e-rr(c);if(m<=0)l.forEach(f=>{const y=r?.[f.getId()]?.minWidth??o?.defaultMinWidth;"number"!=typeof y?f.setMinimum(i):f.setActualWidth(y,i,!0)});else{const f=m/rr(l);let y=m;for(let b=l.length-1;b>=0;b--){const S=l[b],_=r?.[S.getId()],k=_?.minWidth??o?.defaultMinWidth,E=_?.maxWidth??o?.defaultMaxWidth,G=S.getMinWidth(),K=S.getMaxWidth(),ne="number"==typeof k&&k>G?k:G,V="number"==typeof E&&E<K?E:K;let N=Math.round(S.getActualWidth()*f);N<ne?(N=ne,g(S),h=!1):N>V?(N=V,g(S),h=!1):0===b&&(N=y),S.setActualWidth(N,i,!0),y-=N}}}d.forEach(m=>{m.fireColumnWidthChangedEvent(i)}),this.visibleColsService.setLeftValues(i),this.visibleColsService.updateBodyWidths(),!t&&this.eventDispatcher.columnResized(d,!0,i)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:i}=e;setTimeout(()=>{if("fitGridWidth"===i){const{columnLimits:t,defaultMinWidth:o,defaultMaxWidth:r}=e,s=t?.map(({colId:a,minWidth:l,maxWidth:c})=>({key:a,minWidth:l,maxWidth:c}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:o,defaultMaxWidth:r,columnLimits:s})}else"fitProvidedWidth"===i&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function Tf(e,i){return e+"_"+i}function Ti(e){return e instanceof Df}var Df=class extends fe{constructor(e,i,t,o){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=i,this.partId=t,this.providedColumnGroup=e,this.pinned=o}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return Tf(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every(i=>i.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{Ti(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const i=Tt(this.displayedChildren).getLeft();this.setLeft(i)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(i=>{e+=i.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(i=>{i.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(i=>{e+=i.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const i=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,i}addDisplayedLeafColumns(e){this.displayedChildren.forEach(i=>{kr(i)?e.push(i):Ti(i)&&i.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(i=>{kr(i)?e.push(i):Ti(i)&&i.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!e||!e.getProvidedColumnGroup().isExpandable())return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});this.children.forEach(t=>{if(!Ti(t)||t.displayedChildren&&t.displayedChildren.length)switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},Ff=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const i=this.existingIds[e];let t;return t="number"!=typeof i?0:i+1,this.existingIds[e]=t,t}},pw=class extends fe{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,i=!1){i||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=zu(this.treeLeft),this.columnsCenter=zu(this.treeCenter),this.columnsRight=zu(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(t=>t.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=rr(this.columnsCenter),i=rr(this.columnsLeft),t=rr(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==i||this.rightWidth!==t)&&(this.bodyWidth=e,this.leftWidth=i,this.rightWidth=t,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let i,t;this.gos.get("enableRtl")?(i=this.columnsLeft?this.columnsLeft[0]:null,t=this.columnsRight?Tt(this.columnsRight):null):(i=this.columnsLeft?Tt(this.columnsLeft):null,t=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(o=>{o.setLastLeftPinned(o===i,e),o.setFirstRightPinned(o===t,e)})}buildTrees(){const e=this.columnModel.getColsToShow(),i=e.filter(s=>"left"==s.getPinned()),t=e.filter(s=>"right"==s.getPinned()),o=e.filter(s=>"left"!=s.getPinned()&&"right"!=s.getPinned()),r=new Ff;this.treeLeft=this.createGroups({columns:i,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:t,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:o,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),i=[],t=[],o=[];for(const r of e){const s=r.getPinned();s?!0===s||"left"===s?i.push(r):o.push(r):t.push(r)}this.ariaOrderColumns=i.concat(t).concat(o)}getAriaColIndex(e){let i;return i=Ti(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(i)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(i=>{Ti(i)&&i.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const t=this.columnModel.getCols().slice(0),o=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(r=>{if(o){let s=rr(r);r.forEach(a=>{s-=a.getActualWidth(),a.setLeft(s,e)})}else{let s=0;r.forEach(a=>{a.setLeft(s,e),s+=a.getActualWidth()})}!function GC(e,i){for(let t=0;t<i.length;t++)mf(e,i[t])}(t,r)}),t.forEach(r=>{r.setLeft(null,e)})}joinCols(){this.columns=this.gos.get("enableRtl")?this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,i,t,o){const r=[];let s=null;for(let a=0;a<i.length;a++){const l=i[a],c=i.length-a,d=Math.min(l.getColSpan(e),c),h=[l];if(d>1){const m=d-1;for(let f=1;f<=m;f++)h.push(i[a+f]);a+=m}let g;t?(g=!1,h.forEach(m=>{t(m)&&(g=!0)})):g=!0,g&&(0===r.length&&s&&o&&o(l)&&r.push(s),r.push(l)),s=l}return r}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const i=this.getAllCols(),t=i.indexOf(e);return t>0?i[t-1]:null}getGroupAtDirection(e,i){const t=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),o=e.getDisplayedLeafColumns(),r="After"===i?Tt(o):o[0],s=`getCol${i}`;for(;;){const a=this[s](r);if(!a)return null;const l=this.getColGroupAtLevel(a,t);if(l!==e)return l}}getColGroupAtLevel(e,i){let o,r,t=e.getParent();for(;o=t.getProvidedColumnGroup().getLevel(),r=t.getPaddingLevel(),!(o+r<=i);)t=t.getParent();return t}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=i=>{this.colsAndGroupsMap[i.getUniqueId()]=i};as(this.treeCenter,!1,e),as(this.treeLeft,!1,e),as(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){as(this.getAllTrees(),!1,i=>{Ti(i)&&i.calculateDisplayedColumns()})}getFirstColumn(){const e=this.gos.get("enableRtl"),i=["getLeftCols","getCenterCols","getRightCols"];e&&i.reverse();for(let t=0;t<i.length;t++){const o=this[i[t]]();if(o.length)return e?Tt(o):o[0]}return null}getColumnGroup(e,i){if(!e)return null;if(Ti(e))return e;const t=this.getAllTrees(),o="number"==typeof i;let r=null;return as(t,!1,s=>{if(Ti(s)){const a=s;let l;l=o?e===a.getGroupId()&&i===a.getPartId():e===a.getGroupId(),l&&(r=a)}}),r}getColAfter(e){const i=this.getAllCols(),t=i.indexOf(e);return t<i.length-1?i[t+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return rr(this.columnsLeft)}getDisplayedColumnsRightWidth(){return rr(this.columnsRight)}isColAtEdge(e,i){const t=this.getAllCols();if(!t.length)return!1;const o="first"===i;let r;if(Ti(e)){const s=e.getDisplayedLeafColumns();if(!s.length)return!1;r=o?s[0]:Tt(s)}else r=e;return(o?t[0]:Tt(t))===r}createGroups(e){const{columns:i,idCreator:t,pinned:o,oldDisplayedGroups:r,isStandaloneStructure:s}=e,a=this.mapOldGroupsById(r),l=[];let c=i;for(;c.length;){const d=c;c=[];let h=0;const g=m=>{const f=h;h=m;const y=d[f],S=(Ti(y)?y.getProvidedColumnGroup():y).getOriginalParent();if(null==S){for(let k=f;k<m;k++)l.push(d[k]);return}const _=this.createColGroup(S,t,a,o,s);for(let k=f;k<m;k++)_.addChild(d[k]);c.push(_)};for(let m=1;m<d.length;m++){const f=d[m],b=(Ti(f)?f.getProvidedColumnGroup():f).getOriginalParent(),S=d[h];b!==(Ti(S)?S.getProvidedColumnGroup():S).getOriginalParent()&&g(m)}h<d.length&&g(d.length)}return s||this.setupParentsIntoCols(l,null),l}createColGroup(e,i,t,o,r){const s=e.getGroupId(),a=i.getInstanceIdForKey(s);let c=t[Tf(s,a)];return c&&c.getProvidedColumnGroup()!==e&&(c=null),Fe(c)?c.reset():(c=new Df(e,s,a,o),r||this.createBean(c)),c}mapOldGroupsById(e){const i={},t=o=>{o.forEach(r=>{if(Ti(r)){const s=r;i[r.getUniqueId()]=s,t(s.getChildren())}})};return e&&t(e),i}setupParentsIntoCols(e,i){e.forEach(t=>{if(t.setParent(i),Ti(t)){const o=t;this.setupParentsIntoCols(o.getChildren(),o)}})}};function as(e,i,t){if(e)for(let o=0;o<e.length;o++){const r=e[o];Ti(r)&&as(i?r.getDisplayedChildren():r.getChildren(),i,t),t(r)}}function zu(e){const i=[];return as(e,!0,t=>{kr(t)&&i.push(t)}),i}var Rf=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],mw=[...Rf,"scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],vw={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},rn=class{};rn.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"],rn.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"],rn.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],rn.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],rn.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],rn.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"],rn.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"],rn.ALL_PROPERTIES=[...rn.ARRAY_PROPERTIES,...rn.OBJECT_PROPERTIES,...rn.STRING_PROPERTIES,...rn.NUMBER_PROPERTIES,...rn.FUNCTION_PROPERTIES,...rn.BOOLEAN_PROPERTIES,...rn.OTHER_PROPERTIES];var el=rn,Jn=class{static getCallbackForEvent(i){return!i||i.length<2?i:"on"+i[0].toUpperCase()+i.substring(1)}};Jn.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",Jn.PUBLIC_EVENTS=Rf,Jn.EVENT_CALLBACKS=mw.map(e=>Jn.getCallbackForEvent(e)),Jn.BOOLEAN_PROPERTIES=el.BOOLEAN_PROPERTIES,Jn.ALL_PROPERTIES=el.ALL_PROPERTIES,Jn.ALL_PROPERTIES_AND_CALLBACKS=[...Jn.ALL_PROPERTIES,...Jn.EVENT_CALLBACKS],Jn.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Jn.ALL_PROPERTIES_AND_CALLBACKS);var ju,_c,Yu,$u,Ju,Ku,Qu,Xu,eh,xc,tl=Jn;function il(e,i,t){return t&&e.addDestroyFunc(()=>i.destroyBean(t)),t??e}function Kn(e,i,t){null==t||"string"==typeof t&&""==t?Vu(e,i):Qn(e,i,t)}function Qn(e,i,t){e.setAttribute(Mf(i),t.toString())}function Vu(e,i){e.removeAttribute(Mf(i))}function Mf(e){return`aria-${e}`}function Dn(e,i){i?e.setAttribute("role",i):e.removeAttribute("role")}function qs(e,i){Kn(e,"label",i)}function nl(e,i){Kn(e,"labelledby",i)}function Ef(e,i){Kn(e,"live",i)}function Uu(e,i){Kn(e,"hidden",i)}function bc(e,i){Qn(e,"expanded",i)}function Pf(e,i){Qn(e,"rowindex",i)}function Lf(e,i){Qn(e,"colindex",i)}function Sc(e,i){Kn(e,"selected",i)}function Wu(e,i){return void 0===i?e("ariaIndeterminate","indeterminate"):!0===i?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}function Bo(){return void 0===ju&&(ju=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),ju}function If(){if(void 0===_c)if(Bo()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(_c=null!=e[1]?parseFloat(e[1]):0)}else _c=0;return _c}function th(){if(void 0===Yu){const e=window;Yu=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Yu}function ih(){return void 0===$u&&($u=/(firefox)/i.test(navigator.userAgent)),$u}function Of(){return void 0===Ju&&(Ju=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Ju}function Tr(){return void 0===Ku&&(Ku=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),Ku}function nh(){return!Bo()||If()>=15}function oh(e){if(!e)return null;const i=e.tabIndex,t=e.getAttribute("tabIndex");return-1!==i||null!==t&&(""!==t||ih())?i.toString():null}function Nf(){const e=document.body,i=document.createElement("div");i.style.width=i.style.height="100px",i.style.opacity="0",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar",i.style.position="absolute",e.appendChild(i);let t=i.offsetWidth-i.clientWidth;0===t&&0===i.clientWidth&&(t=null),i.parentNode&&i.parentNode.removeChild(i),null!=t&&(Xu=t,Qu=0===t)}function Bf(){return null==Qu&&Nf(),Qu}var Zf="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function rh(e){const i=Element.prototype.matches||Element.prototype.msMatchesSelector,o=i.call(e,"input, select, button, textarea"),r=i.call(e,Zf),s=mo(e);return o&&!r&&s}function li(e,i,t={}){const{skipAriaHidden:o}=t;e.classList.toggle("ag-hidden",!i),o||Uu(e,!i)}function ol(e,i){const t="disabled",o=i?r=>r.setAttribute(t,""):r=>r.removeAttribute(t);o(e),Wf(e.querySelectorAll("input"),r=>o(r))}function zs(e,i,t){let o=0;for(;e;){if(e.classList.contains(i))return!0;if(e=e.parentElement,"number"==typeof t){if(++o>t)break}else if(e===t)break}return!1}function ls(e){const{height:i,width:t,borderTopWidth:o,borderRightWidth:r,borderBottomWidth:s,borderLeftWidth:a,paddingTop:l,paddingRight:c,paddingBottom:d,paddingLeft:h,marginTop:g,marginRight:m,marginBottom:f,marginLeft:y,boxSizing:b}=window.getComputedStyle(e);return{height:parseFloat(i||"0"),width:parseFloat(t||"0"),borderTopWidth:parseFloat(o||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(a||"0"),paddingTop:parseFloat(l||"0"),paddingRight:parseFloat(c||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(h||"0"),marginTop:parseFloat(g||"0"),marginRight:parseFloat(m||"0"),marginBottom:parseFloat(f||"0"),marginLeft:parseFloat(y||"0"),boxSizing:b}}function sh(e){const i=ls(e);return"border-box"===i.boxSizing?i.height-i.paddingTop-i.paddingBottom:i.height}function rl(e){const i=ls(e);return"border-box"===i.boxSizing?i.width-i.paddingLeft-i.paddingRight:i.width}function Gf(e){const{height:i,marginBottom:t,marginTop:o}=ls(e);return Math.floor(i+t+o)}function Ac(e){const{width:i,marginLeft:t,marginRight:o}=ls(e);return Math.floor(i+t+o)}function Hf(e){const i=e.getBoundingClientRect(),{borderTopWidth:t,borderLeftWidth:o,borderRightWidth:r,borderBottomWidth:s}=ls(e);return{top:i.top+(t||0),left:i.left+(o||0),right:i.right+(r||0),bottom:i.bottom+(s||0)}}function kc(){if("boolean"==typeof xc)return xc;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(e),e.scrollLeft=1,xc=0===Math.floor(e.scrollLeft),document.body.removeChild(e),xc}function Tc(e,i){let t=e.scrollLeft;return i&&(t=Math.abs(t),th()&&!kc()&&(t=e.scrollWidth-e.clientWidth-t)),t}function Dc(e,i,t){t&&(kc()?i*=-1:(Bo()||th())&&(i=e.scrollWidth-e.clientWidth-i)),e.scrollLeft=i}function sn(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function fo(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function qf(e){return!!e.offsetParent}function mo(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!qf(e)||"visible"!==window.getComputedStyle(e).visibility)}function sl(e){const i=document.createElement("div");return i.innerHTML=(e||"").trim(),i.firstChild}function zf(e,i,t){t&&t.nextSibling===i||(t?t.nextSibling?e.insertBefore(i,t.nextSibling):e.appendChild(i):e.firstChild&&e.firstChild!==i&&e.insertAdjacentElement("afterbegin",i))}function Vf(e,i){for(let t=0;t<i.length;t++){const o=i[t],r=e.children[t];r!==o&&e.insertBefore(o,r)}}function Uf(e,i){if(i)for(const[t,o]of Object.entries(i)){if(!t||!t.length||null==o)continue;const r=dw(t),s=o.toString(),a=s.replace(/\s*!important/g,"");e.style.setProperty(r,a,a.length!=s.length?"important":void 0)}}function Fc(e,i){"flex"===i?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):vo(e,i)}function vo(e,i){i=ah(i),e.style.width=i.toString(),e.style.maxWidth=i.toString(),e.style.minWidth=i.toString()}function al(e,i){i=ah(i),e.style.height=i.toString(),e.style.maxHeight=i.toString(),e.style.minHeight=i.toString()}function ah(e){return"number"==typeof e?`${e}px`:e}function lh(e){return e instanceof Node||e instanceof HTMLElement}function Xn(e,i,t){null==t||""===t?e.removeAttribute(i):e.setAttribute(i,t.toString())}function Wf(e,i){if(null!=e)for(let t=0;t<e.length;t++)i(e[t])}var Vs=class{constructor(e=0,i=1){this.nextValue=e,this.step=i}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},Yf=class Ls extends fe{constructor(i,t,o,r){super(),this.parentComp=i,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=o,this.shouldDisplayTooltip=r,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(i){this.popupService=i.popupService,this.userComponentFactory=i.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const i=this.parentComp.getGui();0===this.tooltipTrigger&&this.addManagedListeners(i,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(i,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(i,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(i,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(i){const t=this.gos.get(i);return t<0&&pe(`${i} should not be lower than 0`),Math.max(200,t)}getTooltipDelay(i){return"show"===i?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const i=this.gos.get("tooltipTrigger");return i&&"hover"!==i?1:0}onMouseEnter(i){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Tr()&&(Ls.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(i)},100):this.prepareToShowTooltip(i))}onMouseMove(i){this.lastMouseEvent&&(this.lastMouseEvent=i),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(i){const t=i.relatedTarget,o=this.parentComp.getGui(),r=this.tooltipComp?.getGui();this.isInteractingWithTooltip||o.contains(t)||this.interactionEnabled&&r?.contains(t)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(i){if(0!=this.state||Ls.isLocked)return;let t=0;i&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=i||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return(new Date).getTime()-Ls.lastTooltipHideTime<1e3}setToDoNothing(i){!i&&2===this.state&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const i={...this.parentComp.getTooltipParams()};if(!Fe(i.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip())return void this.setToDoNothing();this.state=2,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(i).newAgStackInstance().then(t)}hideTooltip(i){!i&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Ls.lastTooltipHideTime=(new Date).getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),i&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(i,t){if(2!==this.state||this.tooltipInstanceCount!==i)return void this.destroyBean(t);const r=t.getGui();this.tooltipComp=t,r.classList.contains("ag-tooltip")||r.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&r.classList.add("ag-tooltip-animate"),this.interactionEnabled&&r.classList.add("ag-tooltip-interactive");const s=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({eChild:r,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(a&&(this.tooltipPopupDestroyFunc=a.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){const l=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:l,columnMoved:l})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(r,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),1===this.tooltipTrigger&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(r,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:r,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const i=this.tooltipComp?.getGui(),t=ai(this.gos);return!!i&&i.contains(t)}onTooltipFocusOut(i){const t=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(i.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const i={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...i,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...i,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const i=this.tooltipPopupDestroyFunc,t=this.tooltipComp;window.setTimeout(()=>{i(),this.destroyBean(t)},0===this.tooltipTrigger?1e3:0),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(i=>{i&&i()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Ls.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},100)}unlockService(){Ls.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};Yf.isLocked=!1;var Yw=Yf,Us=class extends fe{constructor(e,i){super(),this.ctrl=e,i&&(this.beans=i)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const i="title",t=this.ctrl.getGui();t&&(null!=e&&""!=e?t.setAttribute(i,e):t.removeAttribute(i))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){null==this.tooltipManager&&(this.tooltipManager=this.createBean(new Yw({getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()},this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context))}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,i=e.getColumn?.(),t=e.getColDef?.(),o=e.getRowNode?.();return{location:e.getLocation(),colDef:t,column:i,rowIndex:e.getRowIndex?.(),node:o,data:o?.data,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},$w=new Vs,Ne=null,Mt=class _C extends fe{constructor(i,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=$w.next(),this.cssClassManager=new class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const i=(e||"").split(" ");if(i.length>1)i.forEach(o=>this.addCssClass(o));else if(!0!==this.cssClassStates[e]&&e.length){const o=this.getGui();o&&o.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const i=(e||"").split(" ");if(i.length>1)i.forEach(o=>this.removeCssClass(o));else if(!1!==this.cssClassStates[e]&&e.length){const o=this.getGui();o&&o.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const i=this.getGui();return!!i&&i.classList.contains(e)}addOrRemoveCssClass(e,i){if(e){if(e.indexOf(" ")>=0){const o=(e||"").split(" ");if(o.length>1)return void o.forEach(r=>this.addOrRemoveCssClass(r,i))}if(this.cssClassStates[e]!==i&&e.length){const o=this.getGui();o&&o.classList.toggle(e,i),this.cssClassStates[e]=i}}}}(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(o=>[o.selector,o])),i&&this.setTemplate(i)}preWireBeans(i){super.preWireBeans(i)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(i,t){i&&this.gos&&(this.applyElementsToComponent(i),this.createChildComponentsFromTags(i,t))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(i){const{newTooltipText:t,showDelayOverride:o,hideDelayOverride:r,location:s,shouldDisplayTooltip:a}=i||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==t&&(this.tooltipText=t),null!=t&&(this.tooltipFeature=this.createBean(new Us({getTooltipValue:()=>this.tooltipText,getGui:()=>this.getGui(),getLocation:()=>s??"UNKNOWN",getColDef:i?.getColDef,getColumn:i?.getColumn,getTooltipShowDelayOverride:null!=o?()=>o:void 0,getTooltipHideDelayOverride:null!=r?()=>r:void 0,shouldDisplayTooltip:a})))}getDataRefAttribute(i){return i.getAttribute?i.getAttribute("data-ref"):null}applyElementsToComponent(i,t,o,r=null){if(void 0===t&&(t=this.getDataRefAttribute(i)),t){const s=this[t];s===Ne?this[t]=r??i:!this.suppressDataRefValidation&&(!o||!o[t])&&pe(`Issue with data-ref: ${t} on ${this.constructor.name} with ${s}`)}}createChildComponentsFromTags(i,t){(function Vw(e){if(null==e)return[];const i=[];return Wf(e,t=>i.push(t)),i})(i.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;const s=this.createComponentFromElement(r,a=>{a.getGui()&&this.copyAttributesFromNode(r,a.getGui())},t);if(s){if(s.addItems&&r.children.length){this.createChildComponentsFromTags(r,t);const a=Array.prototype.slice.call(r.children);s.addItems(a)}this.swapComponentForNode(s,i,r)}else r.childNodes&&this.createChildComponentsFromTags(r,t)})}createComponentFromElement(i,t,o){const r=i.nodeName,s=this.getDataRefAttribute(i),a=0===r.indexOf("AG-"),l=a?this.componentSelectors.get(r):null;let c=null;return l?(_C.elementGettingCreated=i,c=new l.component(o&&s?o[s]:void 0),c.setParentComponent(this),this.createBean(c,null,t)):a&&pe(`Missing selector: ${r}`),this.applyElementsToComponent(i,s,o,c),c}copyAttributesFromNode(i,t){!function Uw(e,i){if(e)for(let t=0;t<e.length;t++){const o=e[t];i(o.name,o.value)}}(i.attributes,(o,r)=>t.setAttribute(o,r))}swapComponentForNode(i,t,o){const r=i.getGui();t.replaceChild(r,o),t.insertBefore(document.createComment(o.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,i))}activateTabIndex(i){const t=this.gos.get("tabIndex");i||(i=[]),i.length||i.push(this.getGui()),i.forEach(o=>o.setAttribute("tabindex",t.toString()))}setTemplate(i,t,o){const r=sl(i);this.setTemplateFromElement(r,t,o)}setTemplateFromElement(i,t,o,r=!1){if(this.eGui=i,this.suppressDataRefValidation=r,t)for(let s=0;s<t.length;s++){const a=t[s];this.componentSelectors.set(a.selector,a)}this.wireTemplate(i,o)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(i){this.parentComponent=i}getParentComponent(){return this.parentComponent}setGui(i){this.eGui=i}queryForHtmlElement(i){return this.eGui.querySelector(i)}getContainerAndElement(i,t){let o=t;return null==i?null:(o||(o=this.eGui),lh(i)?{element:i,parent:o}:{element:i.getGui(),parent:o})}prependChild(i,t){const{element:o,parent:r}=this.getContainerAndElement(i,t)||{};!o||!r||r.insertAdjacentElement("afterbegin",o)}appendChild(i,t){const{element:o,parent:r}=this.getContainerAndElement(i,t)||{};!o||!r||r.appendChild(o)}isDisplayed(){return this.displayed}setVisible(i,t={}){if(i!==this.visible){this.visible=i;const{skipAriaHidden:o}=t;!function Gw(e,i,t={}){const{skipAriaHidden:o}=t;e.classList.toggle("ag-invisible",!i),o||Uu(e,!i)}(this.eGui,i,{skipAriaHidden:o})}}setDisplayed(i,t={}){if(i!==this.displayed){this.displayed=i;const{skipAriaHidden:o}=t;li(this.eGui,i,{skipAriaHidden:o}),this.dispatchLocalEvent({type:"displayChanged",visible:this.displayed})}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(i,t,o){this.eGui.addEventListener(i,t,o),this.addDestroyFunc(()=>this.eGui.removeEventListener(i,t))}addCssClass(i){this.cssClassManager.addCssClass(i)}removeCssClass(i){this.cssClassManager.removeCssClass(i)}containsCssClass(i){return this.cssClassManager.containsCssClass(i)}addOrRemoveCssClass(i,t){this.cssClassManager.addOrRemoveCssClass(i,t)}},$f={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},Jw=(()=>{const e=new Set(Object.values($f));return e.add("eye"),e})();function Gn(e,i,t,o){let r=null;const s=t&&t.getColDef().icons;if(s&&(r=s[e]),i&&!r){const a=i.get("icons");a&&(r=a[e])}if(!r){const a=document.createElement("span");let l=$f[e]??(Jw.has(e)?e:void 0);return l||(o?l=e:(pe(`Did not find icon ${e}`),l="")),a.setAttribute("class",`ag-icon ag-icon-${l}`),a.setAttribute("unselectable","on"),Dn(a,"presentation"),a}{let a;if("function"==typeof r)a=r();else{if("string"!=typeof r)throw new Error("icon from grid options needs to be a string or a function");a=r}if("string"==typeof a)return sl(a);if(lh(a))return a;pe("iconRenderer should return back a string or a dom object")}}var Qw=class extends Mt{constructor(){super(...arguments),this.dragSource=null,this.eIcon=Ne,this.eLabel=Ne}postConstruct(){const e=i=>function Kw(e,i,t){const o=Gn(e,i,t);if(o){const{className:s}=o;if("string"==typeof s&&s.indexOf("ag-icon")>-1||"object"==typeof s&&s["ag-icon"])return o}const r=document.createElement("span");return r.appendChild(o),r}(i,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate('<div class="ag-dnd-ghost ag-unselectable">\n                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>\n            </div>')}destroy(){this.dragSource=null,super.destroy()}setIcon(e,i=!1){sn(this.eIcon);let t=null;e||(e=this.dragSource?.getDefaultIconName?this.dragSource?.getDefaultIconName():"notAllowed"),t=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",i),(t!==this.dropIconMap.hide||!this.gos.get("suppressDragLeaveHidesColumns"))&&t&&this.eIcon.appendChild(t)}setLabel(e){this.eLabel.textContent=No(e)}};function Jf(e,i,t){if(0===t)return!1;const o=Math.abs(e.clientX-i.clientX),r=Math.abs(e.clientY-i.clientY);return Math.max(o,r)<=t}var Dr=class{constructor(e,i=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new rt,this.eElement=e,this.preventMouseClick=i;const t=this.onTouchStart.bind(this),o=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",t,{passive:!0}),this.eElement.addEventListener("touchmove",o,{passive:!0}),this.eElement.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",t,{passive:!0}),this.eElement.removeEventListener("touchmove",o,{passive:!0}),this.eElement.removeEventListener("touchend",r,{passive:!1})})}getActiveTouch(e){for(let i=0;i<e.length;i++)if(e[i].identifier===this.touchStart.identifier)return e[i];return null}addEventListener(e,i){this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService.removeEventListener(e,i)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const i=this.touchStart;window.setTimeout(()=>{this.touching&&this.touchStart===i&&!this.moved&&(this.moved=!0,this.localEventService.dispatchEvent({type:"longTap",touchStart:this.touchStart,touchEvent:e}))},500)}onTouchMove(e){if(!this.touching)return;const i=this.getActiveTouch(e.touches);i&&!Jf(i,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){this.touching&&(this.moved||(this.localEventService.dispatchEvent({type:"tap",touchStart:this.touchStart}),this.checkForDoubleTap()),this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1)}checkForDoubleTap(){const e=(new Date).getTime();this.lastTapTime&&this.lastTapTime>0&&e-this.lastTapTime>this.DOUBLE_TAP_MILLIS?(this.localEventService.dispatchEvent({type:"doubleTap",touchStart:this.touchStart}),this.lastTapTime=null):this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function ll(e,i){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${i} ag-hidden" aria-hidden="true"></span>`}var Xw=`<span class="ag-sort-indicator-container">\n        ${ll("Order","order")}\n        ${ll("Asc","ascending-icon")}\n        ${ll("Desc","descending-icon")}\n        ${ll("Mixed","mixed-icon")}\n        ${ll("None","none-icon")}\n    </span>`,ch=class extends Mt{constructor(e){super(),this.eSortOrder=Ne,this.eSortAsc=Ne,this.eSortDesc=Ne,this.eSortMixed=Ne,this.eSortNone=Ne,e||this.setTemplate(Xw)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,i,t,o,r){this.eSortOrder=e,this.eSortAsc=i,this.eSortDesc=t,this.eSortMixed=o,this.eSortNone=r}setupSort(e,i=!1){if(this.column=e,this.suppressOrder=i,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const t=this.updateIcons.bind(this),o=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",t),this.addManagedEventListeners({newColumnsLoaded:t,sortChanged:o,columnRowGroupChanged:o}),this.onSortChanged()}addInIcon(e,i,t){if(null==i)return;const o=Gn(e,this.gos,t);o&&i.appendChild(o)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc&&li(this.eSortAsc,"asc"===e,{skipAriaHidden:!0}),this.eSortDesc&&li(this.eSortDesc,"desc"===e,{skipAriaHidden:!0}),this.eSortNone){const i=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon");li(this.eSortNone,!i&&null==e,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;Io(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e="mixed"===this.sortController.getDisplaySortForColumn(this.column);li(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),i=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,t=e.some(r=>this.sortController.getDisplaySortIndexForColumn(r)??!1);li(this.eSortOrder,i>=0&&t,{skipAriaHidden:!0}),i>=0?this.eSortOrder.textContent=(i+1).toString():sn(this.eSortOrder)}},e2={selector:"AG-SORT-INDICATOR",component:ch},dh=class extends Mt{constructor(){super(...arguments),this.eFilter=Ne,this.eFilterButton=Ne,this.eSortIndicator=Ne,this.eMenu=Ne,this.eLabel=Ne,this.eText=Ne,this.eSortOrder=Ne,this.eSortAsc=Ne,this.eSortDesc=Ne,this.eSortMixed=Ne,this.eSortNone=Ne,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const i=this.params;return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&this.shouldSuppressMenuHide()==this.currentSuppressMenuHide&&i.enableFilterButton==e.enableFilterButton&&i.enableFilterIcon==e.enableFilterIcon&&(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??'<div class="ag-cell-label-container" role="presentation">\n        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n            <span data-ref="eText" class="ag-header-cell-text"></span>\n            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>\n        </div>\n    </div>';return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[e2]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const i=No(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=i)}}addInIcon(e,i,t){if(null==i)return;const o=Gn(e,this.gos,t);o&&i.appendChild(o)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const i=new Dr(this.getGui(),!0),t=this.shouldSuppressMenuHide(),o=t&&Fe(this.eMenu),r=o?new Dr(this.eMenu,!0):i;if(this.params.enableMenu&&this.addManagedListeners(r,{[o?"tap":"longTap"]:l=>this.params.showColumnMenuAfterMouseClick(l.touchStart)}),this.params.enableSorting&&this.addManagedListeners(i,{tap:a=>{const l=a.touchStart.target;t&&(this.eMenu?.contains(l)||this.eFilterButton?.contains(l))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")}}),this.params.enableFilterButton){const s=new Dr(this.eFilterButton,!0);this.addManagedListeners(s,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>s.destroy())}this.addDestroyFunc(()=>i.destroy()),o&&this.addDestroyFunc(()=>r.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return fo(this.eMenu),void(this.eMenu=void 0);const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const i=this.params.column,t=this.menuService.isLegacyMenuEnabled();if(e&&!t){if(this.menuService.isFilterMenuInHeaderEnabled(i))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new ch(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=(new Date).getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:i=>{if(!(this.params.column.isMoving()||(new Date).getTime()-this.lastMovingChanged<50)){const l="ctrl"===this.gos.get("multiSortKey")?i.ctrlKey||i.metaKey:i.shiftKey;this.params.progressSort(l)}}});const e=()=>{const i=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc","asc"===i),this.addOrRemoveCssClass("ag-header-cell-sorted-desc","desc"===i),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!i),this.params.column.getColDef().showRowGroup){const r=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(s=>this.params.column.getSort()==s.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){this.eFilterButton&&(this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0)}configureFilter(e,i,t){if(!e)return fo(i),!1;const o=this.params.column;return this.addInIcon("filter",i,o),this.addManagedListeners(o,{filterChanged:t}),t(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();li(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},n2=class extends Mt{constructor(){super('<div class="ag-header-group-cell-label" role="presentation">\n            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>'),this.agOpened=Ne,this.agClosed=Ne,this.agLabel=Ne}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&pe("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=r=>{if(or(r))return;const s=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),s,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const i=r=>{Gs(r)};this.addManagedElementListeners(this.agClosed,{dblclick:i}),this.addManagedElementListeners(this.agOpened,{dblclick:i}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const t=this.params.columnGroup.getProvidedColumnGroup(),o=this.updateIconVisibility.bind(this);this.addManagedListeners(t,{expandedChanged:o,expandableChanged:o})}addTouchAndClickListeners(e,i){const t=new Dr(e,!0);this.addManagedListeners(t,{tap:i}),this.addDestroyFunc(()=>t.destroy()),this.addManagedElementListeners(e,{click:i})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const i=this.params.columnGroup.isExpanded();li(this.agOpened,i),li(this.agClosed,!i)}else li(this.agOpened,!1),li(this.agClosed,!1)}addInIcon(e,i){const t=Gn(e,this.gos,null);t&&i.appendChild(t)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable())return li(this.agOpened,!1),void li(this.agClosed,!1)}setupLabel(){const{displayName:e,columnGroup:i}=this.params;if(Fe(e)){const t=No(e,!0);this.agLabel.textContent=t}this.addOrRemoveCssClass("ag-sticky-label",!i.getColGroupDef()?.suppressStickyLabel)}},s2=class extends Mt{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),i=document.createElement("span");i.setAttribute("class","ag-value-change-delta");const t=document.createElement("span");t.setAttribute("class","ag-value-change-value"),e.appendChild(i),e.appendChild(t),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,i){const t=Math.abs(i),o=e.formatValue(t),r=Fe(o)?o:t,s=i>=0;this.eDelta.textContent=s?"\u2191"+r:"\u2193"+r,this.eDelta.classList.toggle("ag-value-change-delta-up",s),this.eDelta.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),sn(this.eDelta)}refresh(e,i=!1){const t=e.value;return t!==this.lastValue&&(Fe(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:Fe(e.value)?this.eValue.textContent=t:sn(this.eValue),!this.filterManager?.isSuppressFlashingCellsBecauseFiltering())&&("number"==typeof t&&"number"==typeof this.lastValue&&this.showDelta(e,t-this.lastValue),this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),i||this.setTimerToRemoveDelta(),this.lastValue=t,!0)}},a2=class extends Mt{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),i=document.createElement("span");i.setAttribute("class","ag-value-slide-current"),e.appendChild(i),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const i=document.createElement("span");i.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=i,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,i=!1){let t=e.value;return kt(t)&&(t=""),t!==this.lastValue&&!this.filterManager?.isSuppressFlashingCellsBecauseFiltering()&&(i||this.addSlideAnimation(),this.lastValue=t,Fe(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:Fe(e.value)?this.eCurrent.textContent=t:sn(this.eCurrent),!0)}},le=class{};le.BACKSPACE="Backspace",le.TAB="Tab",le.ENTER="Enter",le.ESCAPE="Escape",le.SPACE=" ",le.LEFT="ArrowLeft",le.UP="ArrowUp",le.RIGHT="ArrowRight",le.DOWN="ArrowDown",le.DELETE="Delete",le.F2="F2",le.PAGE_UP="PageUp",le.PAGE_DOWN="PageDown",le.PAGE_HOME="Home",le.PAGE_END="End",le.A="KeyA",le.C="KeyC",le.D="KeyD",le.V="KeyV",le.X="KeyX",le.Y="KeyY",le.Z="KeyZ";var l2=class extends Mt{constructor(e,i,t){super(i,t),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:i,labelWidth:t,labelAlignment:o,disabled:r}=this.config;null!=r&&this.setDisabled(r),null!=e&&this.setLabelSeparator(e),null!=i&&this.setLabel(i),null!=t&&this.setLabelWidth(t),this.setLabelAlignment(o||this.labelAlignment),this.refreshLabel()}refreshLabel(){sn(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(li(this.eLabel,!1),Dn(this.eLabel,"presentation")):(li(this.eLabel,!0),Dn(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||Fc(this.eLabel,e),this}setDisabled(e){e=!!e;const i=this.getGui();return ol(i,e),i.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},Kf=class extends l2{constructor(e,i,t,o){super(e,i,t),this.className=o}postConstruct(){super.postConstruct();const{width:e,value:i,onValueChange:t}=this.config;null!=e&&this.setWidth(e),null!=i&&this.setValue(i),null!=t&&this.onValueChange(t),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),i=this.getLabelId(),t=this.getLabel();null==t||""==t||null!==function Sw(e){return e.getAttribute("aria-label")}(e)?nl(e,""):nl(e,i??"")}setAriaLabel(e){return qs(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return vo(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,i){return this.value===e||(this.previousValue=this.value,this.value=e,i||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}},cs=class extends Kf{constructor(e,i,t="text",o="input"){super(e,e?.template??`\n            <div role="presentation">\n                <div data-ref="eLabel" class="ag-input-field-label"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <${o} data-ref="eInput" class="ag-input-field-input"></${o}>\n                </div>\n            </div>`,[],i),this.inputType=t,this.displayFieldTag=o,this.eLabel=Ne,this.eWrapper=Ne,this.eInput=Ne}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:i}=this.config;null!=e&&this.setInputName(e),null!=i&&this.setInputWidth(i),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Fc(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return Xn(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return qs(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return ol(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){return Xn(this.eInput,"autocomplete",!0===e?null:"string"==typeof e?e:"off"),this}},Rc=class extends cs{constructor(e,i="ag-checkbox",t="checkbox"){super(e,i,t),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:i}=this.config;"boolean"==typeof e&&this.setReadOnly(e),"boolean"==typeof i&&this.setPassive(i)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),i=this.getNextValue();this.passive?this.dispatchChange(i,e):this.setValue(i)}getValue(){return this.isSelected()}setValue(e,i){return this.refreshSelectedClass(e),this.setSelected(e,i),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,i){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,i||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,i,t){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:i,event:t});const o=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:o.id,name:o.name,selected:e,previousValue:i})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const i=this.isSelected(),t=this.selected=e.target.checked;this.refreshSelectedClass(t),this.dispatchChange(t,i,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",!0===e),this.eWrapper.classList.toggle("ag-indeterminate",null==e)}},uh={selector:"AG-CHECKBOX",component:Rc},c2=class extends Mt{constructor(){super('\n            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[uh]),this.eCheckbox=Ne}init(e){this.refresh(e);const i=this.eCheckbox.getInputElement();i.setAttribute("tabindex","-1"),Ef(i,"polite"),this.addManagedListeners(i,{click:t=>{if(Gs(t),this.eCheckbox.isDisabled())return;const o=this.eCheckbox.getValue();this.onCheckboxChanged(o)},dblclick:t=>{Gs(t)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:t=>{if(t.key===le.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===ai(this.gos)&&this.eCheckbox.toggle();const o=this.eCheckbox.getValue();this.onCheckboxChanged(o),t.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let i,t=!0;if(e.node.group&&e.column)if("boolean"==typeof e.value)i=e.value;else{const l=e.column.getColId();l.startsWith(wc)?i=null==e.value||""===e.value?void 0:"true"===e.value:e.node.aggData&&void 0!==e.node.aggData[l]?i=e.value??void 0:t=!1}else i=e.value??void 0;if(!t)return void this.eCheckbox.setDisplayed(!1);this.eCheckbox.setValue(i);const o=null!=e.disabled?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(o);const r=this.localeService.getLocaleTextFunc(),s=Wu(r,i),a=o?s:`${r("ariaToggleCellValue","Press SPACE to toggle cell value")} (${s})`;this.eCheckbox.setInputAriaLabel(a)}onCheckboxChanged(e){const{column:i,node:t,value:o}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:i,colDef:i?.getColDef(),data:t.data,node:t,rowIndex:t.rowIndex,rowPinned:t.rowPinned,value:o});const r=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:i,colDef:i?.getColDef(),data:t.data,node:t,rowIndex:t.rowIndex,rowPinned:t.rowPinned,value:o,oldValue:o,newValue:e,valueChanged:r}),r||this.updateCheckbox(this.params)}},d2=class extends Mt{constructor(){super('<div class="ag-loading">\n            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" data-ref="eLoadingText"></span>\n        </div>'),this.eLoadingIcon=Ne,this.eLoadingText=Ne}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Gn("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const i=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=i("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},u2=class extends Mt{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const i=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",i),this.addDestroyFunc(()=>nl(e.eParentOfValue)),nl(e.eParentOfValue,i),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const i=e("ariaSkeletonCellLoadingFailed","Row failed to load");qs(this.getGui(),i)}setupLoading(e){const t=ki(this.gos).createElement("div");t.classList.add("ag-skeleton-effect");const o=e.node.rowIndex;if(null!=o){const a=75+25*(o%2==0?Math.sin(o):Math.cos(o));t.style.width=`${a}%`}this.getGui().appendChild(t);const s=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");qs(this.getGui(),s)}refresh(e){return!1}destroy(){super.destroy()}},Qf=class extends Mt{constructor(){super()}destroy(){super.destroy()}},h2=class extends Qf{init(){const e=tr(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("loadingOoo","Loading...")})}}},g2=class extends Qf{init(){const e=tr(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("noRowsToShow","No Rows To Show")})}}},Ws=class extends Mt{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},p2=class extends Ws{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:i}=e;this.getGui().textContent=No(i,!0)}};function Xf(e,i,t,o){let r=i.map((l,c)=>({value:l,relevance:m2(e.toLowerCase(),l.toLocaleLowerCase()),idx:c}));if(r.sort((l,c)=>c.relevance-l.relevance),t&&(r=r.filter(l=>0!==l.relevance)),r.length>0&&o&&o>0){const c=r[0].relevance*o;r=r.filter(d=>c-d.relevance<0)}const s=[],a=[];for(const l of r)s.push(l.value),a.push(l.idx);return{values:s,indices:a}}function m2(e,i){const t=e.replace(/\s/g,""),o=i.replace(/\s/g,"");let r=0,s=-1;for(let a=0;a<t.length;a++){const l=o.indexOf(t[a],s+1);-1!==l&&(s=l,r+=100-100*s/1e4*100)}return r}var v2=class extends fe{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:Qw,agColumnHeader:dh,agColumnGroupHeader:n2,agSortIndicator:ch,agAnimateShowChangeCellRenderer:s2,agAnimateSlideCellRenderer:a2,agLoadingCellRenderer:d2,agSkeletonCellRenderer:u2,agCheckboxCellRenderer:c2,agLoadingOverlay:h2,agNoRowsOverlay:g2,agTooltipComponent:p2},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");null!=e&&$n(e,(i,t)=>this.registerJsComponent(i,t))}registerDefaultComponent(e,i,t){this.agGridDefaults[e]=i,t&&(this.agGridDefaultParams[e]=t)}registerJsComponent(e,i){this.jsComps[e]=i}retrieve(e,i){const t=(l,c,d)=>({componentFromFramework:c,component:l,params:d}),o=this.getFrameworkOverrides().frameworkComponent(i,this.gos.get("components"));if(null!=o)return t(o,!0);const r=this.jsComps[i];if(r)return t(r,this.getFrameworkOverrides().isFrameworkComponent(r));const s=this.agGridDefaults[i];if(s)return t(s,!1,this.agGridDefaultParams[i]);const a=this.enterpriseAgDefaultCompsModule[i];return a?this.gos.assertModuleRegistered(a,`AG Grid '${e}' component: ${i}`):ui(()=>{this.warnAboutMissingComponent(e,i)},"MissingComp"+i),null}warnAboutMissingComponent(e,i){const o=Xf(i,[...Object.keys(this.agGridDefaults).filter(r=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(r)),...Object.keys(this.jsComps)],!0,.8).values;pe(`Could not find '${i}' component. It was configured as "${e}: '${i}'" but it wasn't found in the list of registered components.`),o.length>0&&pe(`         Did you mean: [${o.slice(0,3)}]?`),pe(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},Hn=class dc{constructor(i){this.status=0,this.resolution=null,this.waiters=[],i(t=>this.onDone(t),t=>this.onReject(t))}static all(i){return i.length?new dc(t=>{let o=i.length;const r=new Array(o);i.forEach((s,a)=>{s.then(l=>{r[a]=l,o--,0===o&&t(r)})})}):dc.resolve()}static resolve(i=null){return new dc(t=>t(i))}then(i){return new dc(t=>{1===this.status?t(i(this.resolution)):this.waiters.push(o=>t(i(o)))})}onDone(i){this.status=1,this.resolution=i,this.waiters.forEach(t=>t(i))}onReject(i){}},C2={propertyName:"dateComponent",cellRenderer:!1},w2={propertyName:"dragAndDropImageComponent",cellRenderer:!1},y2={propertyName:"headerComponent",cellRenderer:!1},b2={propertyName:"headerGroupComponent",cellRenderer:!1},em={propertyName:"cellRenderer",cellRenderer:!0},S2={propertyName:"cellRenderer",cellRenderer:!1},_2={propertyName:"loadingCellRenderer",cellRenderer:!0},x2={propertyName:"cellEditor",cellRenderer:!1},tm={propertyName:"innerRenderer",cellRenderer:!0},A2={propertyName:"loadingOverlayComponent",cellRenderer:!1},k2={propertyName:"noRowsOverlayComponent",cellRenderer:!1},T2={propertyName:"tooltipComponent",cellRenderer:!1},hh={propertyName:"filter",cellRenderer:!1},D2={propertyName:"floatingFilterComponent",cellRenderer:!1},F2={propertyName:"toolPanel",cellRenderer:!1},R2={propertyName:"statusPanel",cellRenderer:!1},M2={propertyName:"fullWidthCellRenderer",cellRenderer:!0},E2={propertyName:"loadingCellRenderer",cellRenderer:!0},P2={propertyName:"groupRowRenderer",cellRenderer:!0},L2={propertyName:"detailCellRenderer",cellRenderer:!0},I2={propertyName:"menuItem",cellRenderer:!1},im=class xC extends fe{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(i){this.agComponentUtils=i.agComponentUtils,this.componentMetadataProvider=i.componentMetadataProvider,this.userComponentRegistry=i.userComponentRegistry,this.frameworkComponentWrapper=i.frameworkComponentWrapper,this.gridOptions=i.gridOptions}getDragAndDropImageCompDetails(i){return this.getCompDetails(this.gridOptions,w2,"agDragAndDropImage",i,!0)}getHeaderCompDetails(i,t){return this.getCompDetails(i,y2,"agColumnHeader",t)}getHeaderGroupCompDetails(i){const t=i.columnGroup.getColGroupDef();return this.getCompDetails(t,b2,"agColumnGroupHeader",i)}getFullWidthCellRendererDetails(i){return this.getCompDetails(this.gridOptions,M2,null,i,!0)}getFullWidthLoadingCellRendererDetails(i){return this.getCompDetails(this.gridOptions,E2,"agLoadingCellRenderer",i,!0)}getFullWidthGroupCellRendererDetails(i){return this.getCompDetails(this.gridOptions,P2,"agGroupRowRenderer",i,!0)}getFullWidthDetailCellRendererDetails(i){return this.getCompDetails(this.gridOptions,L2,"agDetailCellRenderer",i,!0)}getInnerRendererDetails(i,t){return this.getCompDetails(i,tm,null,t)}getFullWidthGroupRowInnerCellRenderer(i,t){return this.getCompDetails(i,tm,null,t)}getCellRendererDetails(i,t){return this.getCompDetails(i,em,null,t)}getEditorRendererDetails(i,t){return this.getCompDetails(i,S2,null,t)}getLoadingCellRendererDetails(i,t){return this.getCompDetails(i,_2,"agSkeletonCellRenderer",t,!0)}getCellEditorDetails(i,t){return this.getCompDetails(i,x2,"agCellEditor",t,!0)}getFilterDetails(i,t,o){return this.getCompDetails(i,hh,o,t,!0)}getDateCompDetails(i){return this.getCompDetails(this.gridOptions,C2,"agDateInput",i,!0)}getLoadingOverlayCompDetails(i){return this.getCompDetails(this.gridOptions,A2,"agLoadingOverlay",i,!0)}getNoRowsOverlayCompDetails(i){return this.getCompDetails(this.gridOptions,k2,"agNoRowsOverlay",i,!0)}getTooltipCompDetails(i){return this.getCompDetails(i.colDef,T2,"agTooltipComponent",i,!0)}getSetFilterCellRendererDetails(i,t){return this.getCompDetails(i,em,null,t)}getFloatingFilterCompDetails(i,t,o){return this.getCompDetails(i,D2,o,t)}getToolPanelCompDetails(i,t){return this.getCompDetails(i,F2,null,t,!0)}getStatusPanelCompDetails(i,t){return this.getCompDetails(i,R2,null,t,!0)}getMenuItemCompDetails(i,t){return this.getCompDetails(i,I2,"agMenuItem",t,!0)}getCompDetails(i,t,o,r,s=!1){const{propertyName:a,cellRenderer:l}=t;let y,{compName:c,jsComp:d,fwComp:h,paramsFromSelector:g,popupFromSelector:m,popupPositionFromSelector:f}=xC.getCompKeys(this.frameworkOverrides,i,t,r);const b=E=>{const G=this.userComponentRegistry.retrieve(a,E);G&&(d=G.componentFromFramework?void 0:G.component,h=G.componentFromFramework?G.component:void 0,y=G.params)};if(null!=c&&b(c),null==d&&null==h&&null!=o&&b(o),d&&l&&!this.agComponentUtils.doesImplementIComponent(d)&&(d=this.agComponentUtils.adaptFunction(a,d)),!d&&!h)return void(s&&pt(`Could not find component ${c}, did you forget to configure this component?`));const S=this.mergeParamsWithApplicationProvidedParams(i,t,r,g,y),_=null==d,k=d||h;return{componentFromFramework:_,componentClass:k,params:S,type:t,popupFromSelector:m,popupPositionFromSelector:f,newAgStackInstance:()=>this.newAgStackInstance(k,_,S,t)}}static getCompKeys(i,t,o,r){const{propertyName:s}=o;let a,l,c,d,h,g;if(t){const m=t,f=m[s+"Selector"],y=f?f(r):null,b=S=>{"string"==typeof S?a=S:null!=S&&!0!==S&&(i.isFrameworkComponent(S)?c=S:l=S)};y?(b(y.component),d=y.params,h=y.popup,g=y.popupPosition):b(m[s])}return{compName:a,jsComp:l,fwComp:c,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:g}}newAgStackInstance(i,t,o,r){let l;if(t){const d=this.componentMetadataProvider.retrieve(r.propertyName);l=this.frameworkComponentWrapper.wrap(i,d.mandatoryMethodList,d.optionalMethodList,r)}else l=new i;const c=this.initComponent(l,o);return null==c?Hn.resolve(l):c.then(()=>l)}mergeParamsWithApplicationProvidedParams(i,t,o,r=null,s){const a=this.gos.getGridCommonParams();Cn(a,o),s&&Cn(a,s);const c=i&&i[t.propertyName+"Params"];return"function"==typeof c?Cn(a,c(o)):"object"==typeof c&&Cn(a,c),Cn(a,r),a}initComponent(i,t){if(this.createBean(i),null!=i.init)return i.init(t)}};function cl(e){return null!=e&&null!=e.getFrameworkComponentInstance?e.getFrameworkComponentInstance():e}var Mc=class Gt{static register(i){Gt.__register(i,!0,void 0)}static registerModules(i){Gt.__registerModules(i,!0,void 0)}static __register(i,t,o){Gt.runVersionChecks(i),void 0!==o?(Gt.areGridScopedModules=!0,void 0===Gt.gridModulesMap[o]&&(Gt.gridModulesMap[o]={}),Gt.gridModulesMap[o][i.moduleName]=i):Gt.globalModulesMap[i.moduleName]=i,Gt.setModuleBased(t)}static __unRegisterGridModules(i){delete Gt.gridModulesMap[i]}static __registerModules(i,t,o){Gt.setModuleBased(t),i&&i.forEach(r=>Gt.__register(r,t,o))}static isValidModuleVersion(i){const[t,o]=i.version.split(".")||[],[r,s]=Gt.currentModuleVersion.split(".")||[];return t===r&&o===s}static runVersionChecks(i){Gt.currentModuleVersion||(Gt.currentModuleVersion=i.version);const t=o=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${o} Please update all modules to the same version.`;if(i.version?Gt.isValidModuleVersion(i)||pt(t(`'${i.moduleName}' is version ${i.version} but the other modules are version ${Gt.currentModuleVersion}.`)):pt(t(`'${i.moduleName}' is incompatible.`)),i.validate){const o=i.validate();o.isValid||pt(`${o.message}`)}}static setModuleBased(i){void 0===Gt.moduleBased?Gt.moduleBased=i:Gt.moduleBased!==i&&(pt("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),pt("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){Gt.isBundled=!0}static __assertRegistered(i,t,o){if(this.__isRegistered(i,o))return!0;let r;if(Gt.isBundled)r=`AG Grid: unable to use ${t} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(Gt.moduleBased||void 0===Gt.moduleBased){const s=Object.entries(Pt).find(([a,l])=>l===i)?.[0];r=`AG Grid: unable to use ${t} as the ${s} is not registered${Gt.areGridScopedModules?` for gridId: ${o}`:""}. Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { ${s} } from '${i}';\n    \n    ModuleRegistry.registerModules([ ${s} ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/`}else r=`AG Grid: unable to use ${t} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';`;return pt(r),!1}static __isRegistered(i,t){return!!Gt.globalModulesMap[i]||!!Gt.gridModulesMap[t]?.[i]}static __getRegisteredModules(i){return[...uc(Gt.globalModulesMap),...uc(Gt.gridModulesMap[i]||{})]}static __getGridRegisteredModules(i){return uc(Gt.gridModulesMap[i]??{})||[]}static __isPackageBased(){return!Gt.moduleBased}};Mc.globalModulesMap={},Mc.gridModulesMap={},Mc.areGridScopedModules=!1;var ar=Mc,O2=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach(([i,t])=>{this.beans[i]=t}),e.beanClasses.forEach(i=>{const t=new i;t.beanName?this.beans[t.beanName]=t:console.error(`Bean ${i.name} is missing beanName`),this.createdBeans.push(t)}),e.derivedBeans?.forEach(i=>{const{beanName:t,bean:o}=i(this);this.beans[t]=o,this.createdBeans.push(o)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,i){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],i),e}initBeans(e,i){e.forEach(t=>{t.preWireBeans?.(this.beans),t.wireBeans?.(this.beans)}),e.forEach(t=>t.preConstruct?.()),i&&e.forEach(i),e.forEach(t=>t.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let i=0;i<e.length;i++)this.destroyBean(e[i]);return[]}isDestroyed(){return this.destroyed}},N2=class extends O2{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),ar.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},nm=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(nm||{}),H2=class extends fe{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,i=!1){const t={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:i};this.dragSourceAndParamsList.push({params:t,dragSource:e}),this.dragService.addDragSource(t)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return e&&e.comp?e.comp:null}removeDragSource(e){const i=this.dragSourceAndParamsList.find(t=>t.dragSource===e);i&&(this.dragService.removeDragSource(i.params),mn(this.dragSourceAndParamsList,i))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,i){this.dragging=!0,this.dragSource=e,this.eventLastTime=i,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){if(this.dragSource?.onDragStopped?.(),this.lastDropTarget?.onDragStop){const i=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(i)}this.clearDragAndDropProperties()}onDragCancel(){this.dragSource?.onDragCancelled?.(),this.lastDropTarget?.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,i=!1){const t=this.getHorizontalDirection(e),o=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const r=this.dropTargets.filter(a=>this.isMouseOnDropTarget(e,a)),s=this.findCurrentDropTarget(e,r);if(s!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,t,o,i),null!==this.lastDropTarget&&null===s&&this.dragSource?.onGridExit?.(this.dragItem),null===this.lastDropTarget&&null!==s&&this.dragSource?.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(s,e,t,o,i),s&&this.dragAndDropImageComp){const{comp:a,promise:l}=this.dragAndDropImageComp;a?a.setIcon(s.getIconName?s.getIconName():null):l.then(c=>{c&&c.setIcon(s.getIconName?s.getIconName():null)})}this.lastDropTarget=s}else if(s&&s.onDragging){const a=this.createDropTargetEvent(s,e,t,o,i);s.onDragging(a)}}getAllContainersFromDropTarget(e){const i=e.getSecondaryContainers?e.getSecondaryContainers():null,t=[[e.getContainer()]];return i?t.concat(i):t}allContainersIntersect(e,i){for(const t of i){const{width:o,height:r,left:s,right:a,top:l,bottom:c}=t.getBoundingClientRect();if(0===o||0===r)return!1;if(!(e.clientX>=s&&e.clientX<a&&e.clientY>=l&&e.clientY<c))return!1}return!0}isMouseOnDropTarget(e,i){const t=this.getAllContainersFromDropTarget(i);let o=!1;for(const a of t)if(this.allContainersIntersect(e,a)){o=!0;break}const{eElement:r,type:s}=this.dragSource;return!(i.targetContainsSource&&!i.getContainer().contains(r))&&o&&i.isInterestedIn(s,r)}findCurrentDropTarget(e,i){const t=i.length;if(0===t)return null;if(1===t)return i[0];const r=Ka(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const s of r)for(const a of i)if(-1!==qC(this.getAllContainersFromDropTarget(a)).indexOf(s))return a;return null}enterDragTargetIfExists(e,i,t,o,r){if(e&&e.onDragEnter){const s=this.createDropTargetEvent(e,i,t,o,r);e.onDragEnter(s)}}leaveLastTargetIfExists(e,i,t,o){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const s=this.createDropTargetEvent(this.lastDropTarget,e,i,t,o);this.lastDropTarget.onDragLeave(s)}const r=this.getDragAndDropImageComponent();r&&r.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(i=>i.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(t=>t.external).find(t=>t.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const t=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:o}=e;return t.contains(o)}getHorizontalDirection(e){const i=this.eventLastTime&&this.eventLastTime.clientX,t=e.clientX;return i===t?null:i>t?0:1}getVerticalDirection(e){const i=this.eventLastTime&&this.eventLastTime.clientY,t=e.clientY;return i===t?null:i>t?0:1}createDropTargetEvent(e,i,t,o,r){const s=e.getContainer(),a=s.getBoundingClientRect(),{dragItem:l,dragSource:c}=this;return this.gos.addGridCommonParams({event:i,x:i.clientX-a.left,y:i.clientY-a.top,vDirection:o,hDirection:t,dragSource:c,fromNudge:r,dragItem:l,dropZoneTarget:s})}positionDragAndDropImageComp(e){const i=this.getDragAndDropImageComponent();if(!i)return;const t=i.getGui(),r=t.getBoundingClientRect().height,s=function Ow(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}()-2,a=function Nw(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}()-2;if(!t.offsetParent)return;const c=Hf(t.offsetParent),{clientY:d,clientX:h}=e;let g=d-c.top-r/2,m=h-c.left-10;const f=ki(this.gos),y=f.defaultView||window,b=y.pageYOffset||f.documentElement.scrollTop,S=y.pageXOffset||f.documentElement.scrollLeft;s>0&&m+t.clientWidth>s+S&&(m=s+S-t.clientWidth),m<0&&(m=0),a>0&&g+t.clientHeight>a+b&&(g=a+b-t.clientHeight),g<0&&(g=0),t.style.left=`${m}px`,t.style.top=`${g}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const i=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(i),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const t=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:t},t.then(o=>{!o||!this.isAlive()||(this.processDragAndDropImageComponent(o),this.dragAndDropImageComp.comp=o)})}processDragAndDropImageComponent(e){const{dragSource:i,mouseEventService:t,environment:o}=this;if(!i)return;const r=e.getGui();r.style.setProperty("position","absolute"),r.style.setProperty("z-index","9999"),t.stampTopLevelGridCompWithGridInstance(r),o.applyThemeClasses(r),e.setIcon(null);let{dragItemName:s}=i;kn(s)&&(s=s()),e.setLabel(s||""),r.style.top="20px",r.style.left="20px";const a=ki(this.gos);let l=null,c=null;try{l=a.fullscreenElement}catch{}finally{l||(l=Ka(this.gos));c=l.querySelector("body")||(l instanceof ShadowRoot?l:l instanceof Document?l?.documentElement:l)}this.dragAndDropImageParent=c,c?c.appendChild(r):pe("Could not find document body, it is needed for drag and drop.")}},V2=class extends fe{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){gi(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{const i=e.gridBodyCtrl;this.autoScrollService=new class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,i=!1){const t=i||this.shouldSkipVerticalScroll();if(t&&this.shouldSkipHorizontalScroll())return;const o=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=e.clientX<o.left+r,this.tickRight=e.clientX>o.right-r,this.tickUp=e.clientY<o.top+r&&!t,this.tickDown=e.clientY>o.bottom-r&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const i=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(i-e),this.tickDown&&this.setVerticalPosition(i+e)}if(this.scrollHorizontally){const i=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(i-e),this.tickRight&&this.setHorizontalPosition(i+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}}({scrollContainer:i.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>i.getScrollFeature().getVScrollPosition().top,setVerticalPosition:t=>i.getScrollFeature().setVerticalScrollPosition(t),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const i=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const o=[...this.selectionService.getSelectedNodes()].sort((r,s)=>null==r.rowIndex||null==s.rowIndex?0:this.getRowIndexNumber(r)-this.getRowIndexNumber(s));if(-1!==o.indexOf(i))return o}return[i]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(i=>{i.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:i}=e.dragSource;return i===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const i=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,i),this.autoScrollService.check(e.event)}doManagedDrag(e,i){const t=this.isFromThisGrid(e),o=this.gos.get("rowDragManaged"),r=e.dragItem.rowNodes;o&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!t?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(r[0],i):this.moveRows(r,i))}getRowIndexNumber(e){const i=e.getRowIndexString();return parseInt(Tt(i.split("-")),10)}moveRowAndClearHighlight(e){const i=this.clientSideRowModel.getLastHighlightedRowNode(),t=i&&1===i.highlighted,o=this.mouseEventService.getNormalisedPosition(e).y,r=e.dragItem.rowNodes;let s=t?1:0;if(this.isFromThisGrid(e))r.forEach(a=>{a.rowTop<o&&(s-=1)}),this.moveRows(r,o,s);else{const a=Bs(this.gos);let l=this.clientSideRowModel.getRowIndexAtPixel(o)+1;0===this.clientSideRowModel.getHighlightPosition(o)&&l--,this.clientSideRowModel.updateRowData({add:r.filter(c=>!this.clientSideRowModel.getRowNode(a?.({data:c.data,level:0,rowPinned:c.rowPinned})??c.data.id)).map(c=>c.data),addIndex:l})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,i,t=0){this.clientSideRowModel.ensureRowsAtPixel(e,i,t)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer())return void pe("addRowDropZone - A container target needs to be provided");if(this.dragAndDropService.findExternalZone(e))return void pe("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");let i={getContainer:e.getContainer};e.fromGrid?i=e:(e.onDragEnter&&(i.onDragEnter=o=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",o))}),e.onDragLeave&&(i.onDragLeave=o=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",o))}),e.onDragging&&(i.onDragging=o=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",o))}),e.onDragStop&&(i.onDragStop=o=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",o))}),e.onDragCancel&&(i.onDragCancel=o=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",o))}));const t={isInterestedIn:o=>2===o,getIconName:()=>"move",external:!0,...i};this.dragAndDropService.addDropTarget(t),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(t))}getRowDropZone(e){const i=this.getContainer.bind(this),t=this.onDragEnter.bind(this),o=this.onDragLeave.bind(this),r=this.onDragging.bind(this),s=this.onDragStop.bind(this),a=this.onDragCancel.bind(this);let l;return l=e?{getContainer:i,onDragEnter:e.onDragEnter?c=>{t(c),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",c))}:t,onDragLeave:e.onDragLeave?c=>{o(c),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",c))}:o,onDragging:e.onDragging?c=>{r(c),e.onDragging(this.draggingToRowDragEvent("rowDragMove",c))}:r,onDragStop:e.onDragStop?c=>{s(c),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",c))}:s,onDragCancel:e.onDragCancel?c=>{a(c),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",c))}:a,fromGrid:!0}:{getContainer:i,onDragEnter:t,onDragLeave:o,onDragging:r,onDragStop:s,onDragCancel:a,fromGrid:!0},l}draggingToRowDragEvent(e,i){const t=this.mouseEventService.getNormalisedPosition(i).y;let s,a,r=-1;switch(t>this.pageBoundsService.getCurrentPageHeight()||(r=this.rowModel.getRowIndexAtPixel(t),s=this.rowModel.getRow(r)),i.vDirection){case 1:a="down";break;case 0:a="up";break;default:a=null}return this.gos.addGridCommonParams({type:e,event:i.event,node:i.dragItem.rowNode,nodes:i.dragItem.rowNodes,overIndex:r,overNode:s,y:t,vDirection:a})}dispatchGridEvent(e,i){const t=this.draggingToRowDragEvent(e,i);this.eventService.dispatchEvent(t)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(i=>{i.setDragging(!1)})}},U2=class extends fe{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const i=e.dragSource.eElement;i.removeEventListener("mousedown",e.mouseDownListener),e.touchEnabled&&i.removeEventListener("touchstart",e.touchStartListener,{passive:!0})}removeDragSource(e){const i=this.dragSources.find(t=>t.dragSource===e);i&&(this.removeListener(i),mn(this.dragSources,i))}isDragging(){return this.dragging}addDragSource(e){const i=this.onMouseDown.bind(this,e),{eElement:t,includeTouch:o,stopPropagationForTouch:r}=e;t.addEventListener("mousedown",i);let s=null;const a=this.gos.get("suppressTouch");o&&!a&&(s=l=>{rh(l.target)||(r&&l.stopPropagation(),this.onTouchStart(e,l))},t.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:i,touchStartListener:s,touchEnabled:!!o})}getStartTarget(){return this.startTarget}onTouchStart(e,i){this.currentDragParams=e,this.dragging=!1;const t=i.touches[0];this.touchLastTime=t,this.touchStart=t;const r=c=>this.onTouchUp(c,e.eElement),a=i.target,l=[{target:Ka(this.gos),type:"touchmove",listener:c=>{c.cancelable&&c.preventDefault()},options:{passive:!1}},{target:a,type:"touchmove",listener:c=>this.onTouchMove(c,e.eElement),options:{passive:!0}},{target:a,type:"touchend",listener:r,options:{passive:!0}},{target:a,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(l),0===e.dragStartPixels&&this.onCommonMove(t,this.touchStart,e.eElement)}onMouseDown(e,i){const t=i;if(e.skipMouseEvent&&e.skipMouseEvent(i)||t._alreadyProcessedByDragService||(t._alreadyProcessedByDragService=!0,0!==i.button))return;this.shouldPreventMouseEvent(i)&&i.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=i,this.startTarget=i.target;const l=Ka(this.gos);this.addTemporaryEvents([{target:l,type:"mousemove",listener:d=>this.onMouseMove(d,e.eElement)},{target:l,type:"mouseup",listener:d=>this.onMouseUp(d,e.eElement)},{target:l,type:"contextmenu",listener:d=>d.preventDefault()},{target:l,type:"keydown",listener:d=>{d.key===le.ESCAPE&&this.cancelDrag(e.eElement)}}]),0===e.dragStartPixels&&this.onMouseMove(i,e.eElement)}addTemporaryEvents(e){e.forEach(i=>{const{target:t,type:o,listener:r,options:s}=i;t.addEventListener(o,r,s)}),this.dragEndFunctions.push(()=>{e.forEach(i=>{const{target:t,type:o,listener:r,options:s}=i;t.removeEventListener(o,r,s)})})}isEventNearStartEvent(e,i){const{dragStartPixels:t}=this.currentDragParams;return Jf(e,i,Fe(t)?t:4)}getFirstActiveTouch(e){for(let i=0;i<e.length;i++)if(e[i].identifier===this.touchStart.identifier)return e[i];return null}onCommonMove(e,i,t){if(!this.dragging){if(this.isEventNearStartEvent(e,i))return;this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:t}),this.currentDragParams.onDragStart(i),this.currentDragParams.onDragging(i)}this.currentDragParams.onDragging(e)}onTouchMove(e,i){const t=this.getFirstActiveTouch(e.touches);t&&this.onCommonMove(t,this.touchStart,i)}onMouseMove(e,i){Bo()&&ki(this.gos).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,i)}shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&"mousemove"===e.type&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){return!!e.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(e,i){let t=this.getFirstActiveTouch(e.changedTouches);t||(t=this.touchLastTime),this.onUpCommon(t,i)}onMouseUp(e,i){this.onUpCommon(e,i)}onUpCommon(e,i){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:i})),this.resetDragProperties()}cancelDrag(e){this.eventService.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},gh=class extends Mt{constructor(e,i,t,o,r,s){super(),this.cellValueFn=e,this.rowNode=i,this.column=t,this.customGui=o,this.dragStartPixels=r,this.suppressVisibilityChange=s,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return null!=this.customGui}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Gn("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new j2(this,this.beans,this.rowNode,this.column):new W2(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,i){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(i)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const i=this.beans.selectionService.getSelectedNodes();return-1!==i.indexOf(this.rowNode)?i:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&pe("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const i=e.getColDef();if(i.rowDragText)return i.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const i=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(i,{mousedown:o=>{o?.preventDefault()}})[0]);const t=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:i,dragItemName:()=>{const o=this.getDragItem(),r=o.rowNodes?.length||1,s=this.getRowDragText(this.column);return s?s(o,r):1===r?this.cellValueFn():`${r} ${t("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},om=class extends fe{constructor(e,i,t){super(),this.parent=e,this.rowNode=i,this.column=t}setDisplayedOrVisible(e){const i={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,i);else{let t=!0,o=!1;this.column&&(t=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),o=kn(this.column.getColDef().rowDrag)),o?(this.parent.setDisplayed(!0,i),this.parent.setVisible(t,i)):(this.parent.setDisplayed(t,i),this.parent.setVisible(!0,i))}}},W2=class extends om{constructor(e,i,t,o){super(e,t,o),this.beans=i}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},j2=class extends om{constructor(e,i,t,o){super(e,t,o),this.beans=i}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const i=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),t=i&&i.shouldPreventRowMove(),o=this.gos.get("suppressRowDrag"),r=this.beans.dragAndDropService.hasExternalDropZones();this.setDisplayedOrVisible(t&&!r||o)}},Y2=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),dl=class es{constructor(i){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=es.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=i}setData(i){this.setDataCommon(i,!1)}updateData(i){this.setDataCommon(i,!0)}setDataCommon(i,t){const o=this.data;this.data=i,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(i,o,t);this.localEventService?.dispatchEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(i,t,o){return{type:"dataChanged",node:this,oldData:t,newData:i,update:o}}getRowIndexString(){return null==this.rowIndex?(pt("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):"top"===this.rowPinned?es.ID_PREFIX_TOP_PINNED+this.rowIndex:"bottom"===this.rowPinned?es.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const i=new es(this.beans);return i.id=this.id,i.data=this.data,i.__daemon=!0,i.selected=this.selected,i.level=this.level,i}setDataAndId(i,t){const o=Fe(this.id)?this.createDaemonNode():null,r=this.data;this.data=i,this.updateDataOnDetailNode(),this.setId(t),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,o);const s=this.createDataChangedEvent(i,r,!1);this.localEventService?.dispatchEvent(s)}checkRowSelectable(){const i=Ru(this.beans.gos);this.setRowSelectable(!i||i(this))}setRowSelectable(i,t){if(this.selectable!==i){if(this.selectable=i,this.dispatchRowEvent("selectableChanged"),t)return;if(os(this.beans.gos)){const r=this.calculateSelectedFromChildren();return void this.setSelectedParams({newValue:r??!1,source:"selectableChanged"})}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(i){const t=Bs(this.beans.gos);if(t)if(this.data){const o=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:o.length>0?o:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(es.ID_PREFIX_ROW_GROUP)&&pt(`Row IDs cannot start with ${es.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=i}setRowTop(i){this.oldRowTop=this.rowTop,this.rowTop!==i&&(this.rowTop=i,this.dispatchRowEvent("topChanged"),this.setDisplayed(null!==i))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(i){this.hovered=i}isHovered(){return this.hovered}setMaster(i){this.master!==i&&(this.master&&!i&&(this.expanded=!1),this.master=i,this.dispatchRowEvent("masterChanged"))}setGroup(i){this.group!==i&&(this.group&&!i&&(this.expanded=!1),this.group=i,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(i,t=!1){this.rowHeight=i,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(i,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=i,null!=i&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=hi(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let i=!1,t=!0,o=0;const r=this.__autoHeights;null==r||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(l=>{let c=r[l.getId()];if(null==c){if(!this.beans.columnModel.isColSpanActive())return void(i=!0);{let d=[];switch(l.getPinned()){case"left":d=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":d=this.beans.visibleColsService.getRightColsForRow(this);break;case null:d=this.beans.columnViewportService.getColsWithinViewport(this)}if(d.includes(l))return void(i=!0);c=-1}}else t=!1;c>o&&(o=c)}),i)||((t||o<10)&&(o=_r(this.beans.gos,this).height),o==this.rowHeight)||(this.setRowHeight(o),this.beans.rowModel.onRowHeightChangedDebounced?.())}setExpanded(i,t,o){if(this.expanded===i)return;this.expanded=i,this.dispatchRowEvent("expandedChanged");const r={...this.createGlobalRowEvent("rowGroupOpened"),expanded:i,event:t||null};this.beans.rowNodeEventThrottle.dispatchExpanded(r,o),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(i){return this.beans.gos.addGridCommonParams({type:i,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(i,t,o){const s=(()=>"string"!=typeof i?i:this.beans.columnModel.getCol(i)??this.beans.columnModel.getColDefCol(i))(),a=this.beans.valueService.getValueForDisplay(s,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:s,colDef:s.getColDef(),data:this.data,node:this,oldValue:a,newValue:t,value:t,source:o}),!1;const l=this.beans.valueService.setValue(this,s,t,o);return this.dispatchCellChangedEvent(s,t,a),this.checkRowSelectable(),l}setGroupValue(i,t){const o=this.beans.columnModel.getCol(i);kt(this.groupData)&&(this.groupData={});const r=o.getColId(),s=this.groupData[r];s!==t&&(this.groupData[r]=t,this.dispatchCellChangedEvent(o,t,s))}setAggData(i){const t=this.aggData;if(this.aggData=i,this.localEventService){const o=r=>{const s=this.aggData?this.aggData[r]:void 0,a=t?t[r]:void 0;if(s===a)return;const l=this.beans.columnModel.getCol(r);l&&this.dispatchCellChangedEvent(l,s,a)};for(const r in t)o(r);for(const r in i)(!t||!(r in t))&&o(r)}}updateHasChildren(){let i=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(ir(this.beans.gos)){const o=this.beans.gos.get("treeData"),r=this.beans.gos.get("isServerSideGroup");i=!this.stub&&!this.footer&&(o?!!r&&r(this.data):!!this.group)}i!==this.__hasChildren&&(this.__hasChildren=!!i,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(i,t,o){const r={type:"cellChanged",node:this,column:i,newValue:t,oldValue:o};this.localEventService?.dispatchEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!this.footer&&(this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(i){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(t=>t.depthFirstSearch(i)),i(this)}calculateSelectedFromChildren(){let i=!1,t=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let o=0;o<this.childrenAfterGroup.length;o++){const r=this.childrenAfterGroup[o];let s=r.isSelected();if(!r.selectable){const a=r.calculateSelectedFromChildren();if(null===a)continue;s=a}switch(s){case!0:i=!0;break;case!1:t=!0;break;default:return}}return i&&t?void 0:!!i||!t&&(this.selectable?this.selected:null)}setSelectedInitialValue(i){this.selected=i}dispatchRowEvent(i){this.localEventService?.dispatchEvent({type:i,node:this})}selectThisNode(i,t,o="api"){if(!this.selectable&&i||this.selected===i)return!1;this.selected=i,this.dispatchRowEvent("rowSelected");const a=this.sibling;return a&&a.footer&&a.localEventService&&a.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:t||null,source:o}),!0}setSelected(i,t=!1,o="api"){"boolean"!=typeof o?this.setSelectedParams({newValue:i,clearSelection:t,rangeSelect:!1,source:o}):pe("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")}setSelectedParams(i){return this.rowPinned?(pe("cannot select pinned rows"),0):void 0===this.id?(pe("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...i,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(i,t){this.localEventService||(this.localEventService=new rt),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new Bu(this.beans.frameworkOverrides));const o=this.frameworkEventListenerService?.wrap(t)??t;this.localEventService.addEventListener(i,o)}removeEventListener(i,t){if(!this.localEventService)return;const o=this.frameworkEventListenerService?.unwrap(t)??t;this.localEventService.removeEventListener(i,o),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(pe("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const i=this.beans.gos.getCallback("isFullWidthRow");return!!i&&i({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const i=[];let t=this;for(;t&&null!=t.key;)i.push(t.key),t=t.parent;return i.reverse()}createFooter(){if(this.sibling)return;const i=new es(this.beans);Object.keys(this).forEach(t=>{Y2.has(t)||(i[t]=this[t])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(i){this.firstChild!==i&&(this.firstChild=i,this.dispatchRowEvent("firstChildChanged"))}setLastChild(i){this.lastChild!==i&&(this.lastChild=i,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(i){this.childIndex!==i&&(this.childIndex=i,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(i){this.displayed!==i&&(this.displayed=i,this.dispatchRowEvent("displayedChanged"))}setDragging(i){this.dragging!==i&&(this.dragging=i,this.dispatchRowEvent("draggingChanged"))}setHighlighted(i){this.highlighted!==i&&(this.highlighted=i,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(i){this.allChildrenCount!==i&&(this.allChildrenCount=i,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(i){this.rowIndex!==i&&(this.rowIndex=i,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(i){this.uiLevel!==i&&(this.uiLevel=i,this.dispatchRowEvent("uiLevelChanged"))}};dl.ID_PREFIX_ROW_GROUP="row-group-",dl.ID_PREFIX_TOP_PINNED="t-",dl.ID_PREFIX_BOTTOM_PINNED="b-",dl.OBJECT_ID_SEQUENCE=0;var lr=dl,J2=class extends Mt{constructor(e,i){super('<div class="ag-filter"></div>'),this.column=e,this.source=i,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??Hn.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(i=>{i?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){const{column:i,source:t}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(i)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(o=>{const r=o.getGui();Fe(r)||pe(`getGui method from filter returned ${r}; it should be a DOM element.`),this.appendChild(r),e&&this.eventService.dispatchEvent({type:"filterOpened",column:i,source:t,eGui:this.getGui()})})}onFilterDestroyed(e){("api"===e.source||"paramsUpdated"===e.source)&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(sn(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},rm="ag-resizer-wrapper",Fr=(e,i)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${i}"></div>`,K2=`<div class="${rm}">\n        ${Fr("eTopLeft","topLeft")}\n        ${Fr("eTop","top")}\n        ${Fr("eTopRight","topRight")}\n        ${Fr("eRight","right")}\n        ${Fr("eBottomRight","bottomRight")}\n        ${Fr("eBottom","bottom")}\n        ${Fr("eBottomLeft","bottomLeft")}\n        ${Fr("eLeft","left")}\n    </div>`,Q2=class extends fe{constructor(e,i){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},i)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:i}=this.offsetParent,t=i/2-this.getWidth()/2,o=e/2-this.getHeight()/2;this.offsetElement(t,o)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:i,minWidth:t,width:o,minHeight:r,height:s,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,d=0;const h=mo(this.element);if(h){const g=this.findBoundaryElement(),m=window.getComputedStyle(g);if(null!=m.minWidth){const f=g.offsetWidth-this.element.offsetWidth;d=parseInt(m.minWidth,10)-f}if(null!=m.minHeight){const f=g.offsetHeight-this.element.offsetHeight;c=parseInt(m.minHeight,10)-f}}if(this.minHeight=r||c,this.minWidth=t||d,o&&this.setWidth(o),s&&this.setHeight(s),(!o||!s)&&this.refreshSize(),e)this.center();else if(a||l)this.offsetElement(a,l);else if(h&&i){let g=this.boundaryEl,m=!0;if(g||(g=this.findBoundaryElement(),m=!1),g){const f=parseFloat(g.style.top),y=parseFloat(g.style.left);m?this.offsetElement(isNaN(y)?0:y,isNaN(f)?0:f):this.setPosition(y,f)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,i){if(!this.config.popup||e===this.movable)return;this.movable=e;const t=this.moveElementDragListener||{eElement:i,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(t),this.moveElementDragListener=t):(this.dragService.removeDragSource(t),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(i=>{const o=!!e[i],r=this.getResizerElement(i),s={dragStartPixels:0,eElement:r,onDragStart:a=>this.onResizeStart(a,i),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,i)};(o||!this.isAlive()&&!o)&&(o?(this.dragService.addDragSource(s),this.resizeListeners.push(s),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[i]=o)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:i}=this.lastSize;-1!==i&&(this.element.style.width=`${i}px`),-1!==e&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:i}=this.config,t=this.element;let o=!1;if("string"==typeof e&&-1!==e.indexOf("%"))al(t,e),e=Gf(t),o=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const r=this.getAvailableHeight();r&&e>r&&(e=r)}this.getHeight()!==e&&(o?(t.style.maxHeight="unset",t.style.minHeight="unset"):i?al(t,e):(t.style.height=`${e}px`,t.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:i}=this.config;this.positioned||this.initialisePosition();const{clientHeight:t}=this.offsetParent;if(!t)return null;const o=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:o.top,a=e?0:r.top;let l=0;if(i){const d=this.element.parentElement;if(d){const{bottom:h}=d.getBoundingClientRect();l=h-o.bottom}}return t+a-s-l}getWidth(){return this.element.offsetWidth}setWidth(e){const i=this.element,{popup:t}=this.config;let o=!1;if("string"==typeof e&&-1!==e.indexOf("%"))vo(i,e),e=Ac(i),o=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:r}=this.offsetParent,s=t?this.position.x:this.element.getBoundingClientRect().left;r&&e+s>r&&(e=r-s)}this.getWidth()!==e&&(o?(i.style.maxWidth="unset",i.style.minWidth="unset"):this.config.popup?vo(i,e):(i.style.width=`${e}px`,i.style.flex=" unset",this.lastSize.width="number"==typeof e?e:parseFloat(e)))}offsetElement(e=0,i=0){const{forcePopupParentAsOffsetParent:t}=this.config,o=t?this.boundaryEl:this.element;o&&(this.popupService.positionPopup({ePopup:o,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:i})}),this.setPosition(parseFloat(o.style.left),parseFloat(o.style.top)))}constrainSizeToAvailableHeight(e){this.config.forcePopupParentAsOffsetParent&&(e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),()=>{const t=this.getAvailableHeight();this.element.style.setProperty("max-height",`${t}px`)}):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0)))}setPosition(e,i){this.position.x=e,this.position.y=i}updateDragStartPosition(e,i){this.dragStartPosition={x:e,y:i}}calculateMouseMovement(e){const{e:i,isLeft:t,isTop:o,anywhereWithin:r,topBuffer:s}=e,a=i.clientX-this.dragStartPosition.x,l=i.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(i,!!t,!!r,a)?0:a,movementY:this.shouldSkipY(i,!!o,s,l)?0:l}}shouldSkipX(e,i,t,o){const r=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.x:r.left;let c=l<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=a.right;return!!c||(c=i?o<0&&e.clientX>l+s.left||o>0&&e.clientX<l+s.left:t?o<0&&e.clientX>a.right||o>0&&e.clientX<l+s.left:o<0&&e.clientX>a.right||o>0&&e.clientX<a.right,c)}shouldSkipY(e,i,t=0,o){const r=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.y:r.top;let c=l<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=a.bottom;return!!c||(c=i?o<0&&e.clientY>l+s.top+t||o>0&&e.clientY<l+s.top:o<0&&e.clientY>a.bottom||o>0&&e.clientY<a.bottom,c)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const t=(new DOMParser).parseFromString(K2,"text/html").body;e.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${rm}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,i){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!i.match(/top/i),isRight:!!i.match(/right/i),isBottom:!!i.match(/bottom/i),isLeft:!!i.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[i].element.classList.add("ag-active");const{popup:t,forcePopupParentAsOffsetParent:o}=this.config;!t&&!o&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const i=this.element.parentElement;return i?Array.prototype.slice.call(i.children).filter(t=>!t.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let i=0,t=0;for(let o=0;o<e.length;o++){const r=e[o],s=!!r.style.flex&&"0 0 auto"!==r.style.flex;if(r===this.element)continue;let a=this.minHeight||0,l=this.minWidth||0;if(s){const c=window.getComputedStyle(r);c.minHeight&&(a=parseInt(c.minHeight,10)),c.minWidth&&(l=parseInt(c.minWidth,10))}else a=r.offsetHeight,l=r.offsetWidth;i+=a,t+=l}return{height:i,width:t}}applySizeToSiblings(e){let i=null;const t=this.getSiblings();if(t){for(let o=0;o<t.length;o++){const r=t[o];r!==i&&(e?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(i=t[o+1]))}i&&(i.style.removeProperty("height"),i.style.removeProperty("min-height"),i.style.removeProperty("max-height"),i.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:i,forcePopupParentAsOffsetParent:t}=this.config,{isTop:o,isRight:r,isBottom:s,isLeft:a}=this.currentResizer,l=r||a,c=s||o,{movementX:d,movementY:h}=this.calculateMouseMovement({e,isLeft:a,isTop:o}),g=this.position.x,m=this.position.y;let f=0,y=0;if(l&&d){const b=a?-1:1,S=this.getWidth(),_=S+d*b;let k=!1;a&&(f=S-_,(g+f<=0||_<=this.minWidth)&&(k=!0,f=0)),k||this.setWidth(_)}if(c&&h){const b=o?-1:1,S=this.getHeight(),_=S+h*b;let k=!1;o?(y=S-_,(m+y<=0||_<=this.minHeight)&&(k=!0,y=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&S<_&&this.getMinSizeOfSiblings().height+_>this.element.parentElement.offsetHeight&&(k=!0),k||this.setHeight(_)}this.updateDragStartPosition(e.clientX,e.clientY),((i||t)&&f||y)&&this.offsetElement(g+f,m+y)}onResizeEnd(e,i){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[i].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:i,y:t}=this.position;let o;this.config.calculateTopBuffer&&(o=this.config.calculateTopBuffer());const{movementX:r,movementY:s}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:o});this.offsetElement(i+r,t+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.offsetParent=this.config.forcePopupParentAsOffsetParent?this.popupService.getPopupParent():this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},sm=class AC extends fe{constructor(i,t={}){super(),this.eFocusableElement=i,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:o=>{if(o.defaultPrevented)return;const r=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,o.shiftKey);r&&(r.focus(),o.preventDefault())},...t}}wireBeans(i){this.focusService=i.focusService}postConstruct(){this.eFocusableElement.classList.add(AC.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(i){this.addManagedElementListeners(i,{keydown:t=>{if(!t.defaultPrevented&&!or(t)){if(this.callbacks.shouldStopEventPropagation(t))return void Gs(t);t.key===le.TAB?this.callbacks.onTabKeyDown(t):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(t)}}})}};sm.FOCUS_MANAGED_CLASS="ag-focus-managed";var ds=sm,am={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function ph(e,i){return Ec(e)?(null!=e.debounceMs&&pe("debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:i}function Ec(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var X2=class extends Mt{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Ne,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new ds(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Q2(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let i=this.getGui();i&&i.removeEventListener("submit",this.onFormSubmit);const t=`\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">\n                    ${this.createBodyTemplate()}\n                </div>\n            </form>`;this.setTemplate(t,this.getAgComponents(),e),i=this.getGui(),i&&i.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=Ec(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=Ec(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,i){const{buttons:t,readOnly:o}=i??{},{buttons:r,readOnly:s}=e;if(o===s&&$a(t,r))return;const a=r&&r.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(sn(this.eButtonsPanel),this.buttonListeners.forEach(d=>d()),this.buttonListeners=[]):a&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!a)return void(this.eButtonsPanel&&fo(this.eButtonsPanel));const l=document.createDocumentFragment(),c=d=>{let h,g;switch(d){case"apply":h=this.translate("applyFilter"),g=y=>this.onBtApply(!1,!1,y);break;case"clear":h=this.translate("clearFilter"),g=()=>this.onBtClear();break;case"reset":h=this.translate("resetFilter"),g=()=>this.onBtReset();break;case"cancel":h=this.translate("cancelFilter"),g=y=>{this.onBtCancel(y)};break;default:return void pe("Unknown button type specified")}const f=sl(`<button\n                    type="${"apply"===d?"submit":"button"}"\n                    data-ref="${d}FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >${h}\n                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(f,{click:g})),l.append(f)};r.forEach(d=>c(d)),this.eButtonsPanel.append(l),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=ph(this.providedFilterParams,this.getDefaultDebounceMs()),i=hi(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,i()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,i){const t=()=>{this.onUiChanged(!1,"prevent"),i?.()};null!=e?this.setModelIntoUi(e).then(t):this.resetUiToDefaults().then(t)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const i=this.getModelFromUi();if(!this.isModelValid(i))return!1;const t=this.appliedModel;return this.appliedModel=i,!this.areModelsEqual(t,i)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,i=!1,t){t&&t.preventDefault(),this.applyModel(i?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:i,source:"columnFilter"});const{closeOnApply:o}=this.providedFilterParams;o&&this.applyActive&&!e&&!i&&this.close(t)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e&&e.key;let o;("Enter"===t||"Space"===t)&&(o={keyboardEvent:e}),this.hidePopup(o),this.hidePopup=null}onUiChanged(e=!1,i){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const t=this.isModelValid(this.getModelFromUi()),o=this.queryForHtmlElement('[data-ref="applyFilterButton"]');o&&ol(o,!t)}e&&!i||"immediately"===i?this.onBtApply(e):(!this.applyActive&&!i||"debounce"===i)&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||"toolPanel"===e)return;const i="floatingFilter"===e||"columnFilter"===e,{positionableFeature:t,gos:o}=this;i?(t.restoreLastSize(),t.setResizable(o.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const i=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,i),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,am[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},ey=class extends Rc{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},ty=class extends Mt{constructor(e="default",i=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=i,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const i=e.key;switch(i){case le.ENTER:if(this.highlightedEl){const t=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(t)}else this.setValue(this.getValue());break;case le.DOWN:case le.UP:e.preventDefault(),this.navigate(i);break;case le.PAGE_DOWN:case le.PAGE_UP:case le.PAGE_HOME:case le.PAGE_END:e.preventDefault(),this.navigateToPage(i)}}navigate(e){const i=e===le.DOWN;let t;if(this.highlightedEl){let r=this.itemEls.indexOf(this.highlightedEl)+(i?1:-1);r=Math.min(Math.max(r,0),this.itemEls.length-1),t=this.itemEls[r]}else t=this.itemEls[i?0:this.itemEls.length-1];this.highlightItem(t)}navigateToPage(e){if(!this.highlightedEl||0===this.itemEls.length)return;const i=this.itemEls.indexOf(this.highlightedEl),t=this.options.length-1,o=this.itemEls[0].clientHeight,r=Math.floor(this.getGui().clientHeight/o);let s=-1;e===le.PAGE_HOME?s=0:e===le.PAGE_END?s=t:e===le.PAGE_DOWN?s=Math.min(i+r,t):e===le.PAGE_UP&&(s=Math.max(i-r,0)),-1!==s&&this.highlightItem(this.itemEls[s])}addOptions(e){return e.forEach(i=>this.addOption(i)),this}addOption(e){const{value:i,text:t}=e,o=t||i;return this.options.push({value:i,text:o}),this.renderOption(i,o),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{fo(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((i,t)=>{(function Tw(e,i){Qn(e,"posinset",i)})(i,t+1),function kw(e,i){Qn(e,"setsize",i)}(i,e.length)})}renderOption(e,i){const t=ki(this.gos),o=t.createElement("div");Dn(o,"option"),o.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const r=t.createElement("span");o.appendChild(r),r.textContent=i,this.unFocusable||(o.tabIndex=-1),this.itemEls.push(o),this.addManagedListeners(o,{mouseover:()=>this.highlightItem(o),mousedown:s=>{s.preventDefault(),s.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Us({getTooltipValue:()=>i,getGui:()=>o,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})),this.getGui().appendChild(o)}setValue(e,i){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(i),this;const t=this.options.findIndex(o=>o.value===e);if(-1!==t){const o=this.options[t];this.value=o.value,this.displayValue=o.text,this.highlightItem(this.itemEls[t]),i||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(i=>i.value===this.value);-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!mo(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),Sc(this.highlightedEl,!0);const i=this.getGui(),{scrollTop:t,clientHeight:o}=i,{offsetTop:r,offsetHeight:s}=e;(r+s>t+o||r<t)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!mo(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),Sc(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},iy=class extends Kf{constructor(e){if(super(e,e?.template||'\n            <div class="ag-picker-field" role="presentation">\n                <div data-ref="eLabel"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Ne,this.eWrapper=Ne,this.eDisplayField=Ne,this.eIcon=Ne,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:i,maxPickerHeight:t,variableWidth:o,minPickerWidth:r,maxPickerWidth:s}=e;null!=i&&(this.pickerGap=i),this.variableWidth=!!o,null!=t&&this.setPickerMaxHeight(t),null!=r&&this.setPickerMinWidth(r),null!=s&&this.setPickerMaxWidth(s)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const i=this.getAriaElement();this.addManagedElementListeners(i,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:t,inputWidth:o}=this.config;if(t){const r=Gn(t,this.gos);r&&this.eIcon.appendChild(r)}null!=o&&this.setInputWidth(o)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),bc(e,!1),this.ariaRole&&Dn(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const i=this.getFocusableElement();if(i!==this.eWrapper&&e?.target===i)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case le.UP:case le.DOWN:case le.ENTER:case le.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case le.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const i=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:t,pickerAriaLabelValue:o,modalPicker:r=!0}=this.config,s={modal:r,eChild:e,closeOnEsc:!0,closedCallback:()=>{const m=df(this.gos);this.beforeHidePicker(),m&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(t,o),anchorToElement:this.eWrapper};e.style.position="absolute";const a=this.popupService.addPopup(s),{maxPickerHeight:l,minPickerWidth:c,maxPickerWidth:d,variableWidth:h}=this;h?(c&&(e.style.minWidth=c),e.style.width=ah(Ac(this.eWrapper)),d&&(e.style.maxWidth=d)):Fc(e,d??Ac(this.eWrapper));const g=l??`${sh(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",g),this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:i}=this,t=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:t,keepWithinBounds:!0,nudgeY:i})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){this.isAlive()&&(bc(this.getAriaElement(),e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e))}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return Fc(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"==typeof e&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},fh=class extends iy{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:i,placeholder:t}=this.config;null!=e&&this.addOptions(e),null!=i&&this.setValue(i,!0),t&&null==i&&(this.eDisplayField.textContent=t),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new ty("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),i=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",i),function Lw(e,i){Kn(e,"controls",i.id),nl(i,e.id)}(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:i}=e;switch(i===le.TAB&&this.hidePicker(),i){case le.ENTER:case le.UP:case le.DOWN:case le.PAGE_UP:case le.PAGE_DOWN:case le.PAGE_HOME:case le.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case le.ESCAPE:super.onKeyDown(e);break;case le.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(i=>this.addOption(i)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,i,t){if(this.value===e||!this.listComponent)return this;if(t||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let r=this.listComponent.getDisplayValue();return null==r&&this.config.placeholder&&(r=this.config.placeholder),this.eDisplayField.textContent=r,this.setTooltip({newTooltipText:r??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,i)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},ny={selector:"AG-SELECT",component:fh},lm=class{constructor(){this.customFilterOptions={}}init(e,i){this.filterOptions=e.filterOptions||i,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{"string"!=typeof e&&([["displayKey"],["displayName"],["predicate","test"]].every(o=>!!o.some(r=>null!=e[r])||(pe(`ignoring FilterOptionDef as it doesn't contain one of '${o}'`),!1))?this.customFilterOptions[e.displayKey]=e:this.filterOptions=this.filterOptions.filter(o=>o===e)||[])})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const i=this.filterOptions[0];"string"==typeof i?this.defaultOption=i:i.displayKey?this.defaultOption=i.displayKey:pe("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else pe("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},cm=class extends X2{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const i=this.optionsFactory.getCustomOption(e);if(i){const{numberOfInputs:o}=i;return o??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}onFloatingFilterChanged(e,i){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(i),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((i,t)=>{i.setValue(0===t?e:this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"}areModelsEqual(e,i){if(!e&&!i)return!0;if(!e&&i||e&&!i)return!1;const t=!e.operator,o=!i.operator;if(!t&&o||t&&!o)return!1;let s;return s=t?this.areSimpleModelsEqual(e,i):e.operator===i.operator&&nr(e.conditions,i.conditions,(c,d)=>this.areSimpleModelsEqual(c,d)),s}shouldRefresh(e){const i=this.getModel(),t=i?i.conditions??[i]:null,o=e.filterOptions?.map(s=>"string"==typeof s?s:s.displayKey)??this.getDefaultFilterOptions();return!(t&&!t.every(s=>void 0!==o.find(a=>a===s.type))||"number"==typeof e.maxNumConditions&&t&&t.length>e.maxNumConditions)}refresh(e){return!(!this.shouldRefresh(e)||!super.refresh(e)||(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),0))}setModelIntoUi(e){if(e.operator){const t=e;let o=t.conditions;null==o&&(o=[],pe("Filter model is missing 'conditions'"));const r=this.validateAndUpdateConditions(o),s=this.getNumConditions();if(r<s)this.removeConditionsAndOperators(r);else if(r>s)for(let l=s;l<r;l++)this.createJoinOperatorPanel(),this.createOption();const a="OR"===t.operator;this.eJoinOperatorsAnd.forEach(l=>l.setValue(!a,!0)),this.eJoinOperatorsOr.forEach(l=>l.setValue(a,!0)),o.forEach((l,c)=>{this.eTypes[c].setValue(l.type,!0),this.setConditionIntoUi(l,c)})}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Hn.resolve()}validateAndUpdateConditions(e){let i=e.length;return i>this.maxNumConditions&&(e.splice(this.maxNumConditions),pe('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),i=this.maxNumConditions),i}doesFilterPass(e){const i=this.getModel();if(null==i)return!0;const{operator:t}=i,o=[];return t?o.push(...i.conditions??[]):o.push(i),o[t&&"OR"===t?"some":"every"](s=>this.individualConditionPasses(e,s))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new lm,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(pe('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(pe('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(pe('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new fh);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const i=this.createValueElement();this.eConditionBodies.push(i),this.eFilterBody.appendChild(i),this.putOptionsIntoDropdown(e),this.resetType(e);const t=this.getNumConditions()-1;this.forEachPositionInput(t,o=>this.resetInput(o)),this.addChangedListeners(e,t)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const i=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),t=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const o=this.eJoinOperatorPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(i,o,r),this.resetJoinOperatorOr(t,o,r),this.isReadOnly()||(i.onValueChange(this.listener),t.onValueChange(this.listener))}createJoinOperator(e,i,t){const o=this.createManagedBean(new ey);return e.push(o),o.addCssClass("ag-filter-condition-operator"),o.addCssClass(`ag-filter-condition-operator-${t}`),i.appendChild(o.getGui()),o}getDefaultJoinOperator(e){return"AND"===e||"OR"===e?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(i=>"string"==typeof i?this.createBoilerplateListOption(i):this.createCustomListOption(i))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(i=>{e.addOption(i)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:i}=e,t=this.optionsFactory.getCustomOption(e.displayKey);return{value:i,text:t?this.localeService.getLocaleTextFunc()(t.displayKey,t.displayName):this.translate(i)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,i=!0;for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)?e=t:i=!1;if(this.shouldAddNewConditionAtEnd(i))this.createJoinOperatorPanel(),this.createOption();else{const t=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const o=e+1,r=t-o;r>0&&this.removeConditionsAndOperators(o,r),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,i){this.eTypes.forEach((o,r)=>{const s=this.isConditionDisabled(r,e);o.setDisabled(s||this.filterListOptions.length<=1),1===r&&(ol(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))}),this.eConditionBodies.forEach((o,r)=>{li(o,this.isConditionBodyVisible(r))});const t="OR"===(i??this.getJoinOperator());this.eJoinOperatorsAnd.forEach(o=>{o.setValue(!t,!0)}),this.eJoinOperatorsOr.forEach(o=>{o.setValue(t,!0)}),this.forEachInput((o,r,s,a)=>{this.setElementDisplayed(o,r<a),this.setElementDisabled(o,this.isConditionDisabled(s,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,i){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,i),this.removeElements(this.eConditionBodies,e,i),this.removeValueElements(e,i);const t=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,t,i),this.removeComponents(this.eJoinOperatorsAnd,t,i),this.removeComponents(this.eJoinOperatorsOr,t,i)}removeElements(e,i,t){this.removeItems(e,i,t).forEach(r=>fo(r))}removeComponents(e,i,t){this.removeItems(e,i,t).forEach(r=>{fo(r.getGui()),this.destroyBean(r)})}removeItems(e,i,t){return null==t?e.splice(i):e.splice(i,t)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{const i=this.getInputs(0)[0];if(!i)return;i instanceof cs&&i.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let i=-1,t=-1,o=!1;const r=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))-1===i&&(i=a,t=a);else{const c=a<i;(a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1)||c)&&(this.removeConditionsAndOperators(a,1),o=!0,c&&t--)}let s=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),s=!0),this.shouldAddNewConditionAtEnd(t===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),s=!0),s&&this.updateConditionStatusesAndValues(t,r),o&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=t}getPlaceholderText(e,i){let t=this.translate(e);if(kn(this.filterPlaceholder)){const o=this.filterPlaceholder,r=this.eTypes[i].getValue();t=o({filterOptionKey:r,filterOption:this.translate(r),placeholder:t})}else"string"==typeof this.filterPlaceholder&&(t=this.filterPlaceholder);return t}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((i,t,o,r)=>{if(!(i instanceof cs))return;const s=0===t&&r>1?"inRangeStart":0===t?"filterOoo":"inRangeEnd",a=0===t&&r>1?e("ariaFilterFromValue","Filter from value"):0===t?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");i.setInputPlaceholder(this.getPlaceholderText(s,o)),i.setInputAriaLabel(a)})}setElementValue(e,i,t){e instanceof cs&&e.setValue(null!=i?String(i):null,!0)}setElementDisplayed(e,i){e instanceof Mt&&li(e.getGui(),i)}setElementDisabled(e,i){e instanceof Mt&&ol(e.getGui(),i)}attachElementOnChange(e,i){e instanceof cs&&e.onValueChange(i)}forEachInput(e){this.getConditionTypes().forEach((i,t)=>{this.forEachPositionTypeInput(t,i,e)})}forEachPositionInput(e,i){const t=this.getConditionType(e);this.forEachPositionTypeInput(e,t,i)}forEachPositionTypeInput(e,i,t){const o=this.getNumberOfInputs(i),r=this.getInputs(e);for(let s=0;s<r.length;s++){const a=r[s];null!=a&&t(a,s,e,o)}}isConditionDisabled(e,i){return!!this.isReadOnly()||0!==e&&e>i+1}isConditionBodyVisible(e){const i=this.getConditionType(e);return this.getNumberOfInputs(i)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||"empty"===this.getConditionType(e)||this.getValues(e).some(t=>null==t))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)&&e.push(this.createCondition(i));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(i=>this.resetType(i)),this.eJoinOperatorsAnd.forEach((i,t)=>this.resetJoinOperatorAnd(i,t,this.joinOperatorId+t)),this.eJoinOperatorsOr.forEach((i,t)=>this.resetJoinOperatorOr(i,t,this.joinOperatorId+t)),this.joinOperatorId++,this.forEachInput(i=>this.resetInput(i)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Hn.resolve()}resetType(e){const t=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,i,t){this.resetJoinOperator(e,i,this.isDefaultOperator("AND"),this.translate("andCondition"),t)}resetJoinOperatorOr(e,i,t){this.resetJoinOperator(e,i,this.isDefaultOperator("OR"),this.translate("orCondition"),t)}resetJoinOperator(e,i,t,o,r){this.updateJoinOperatorDisabled(e.setValue(t,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${r}`).setLabel(o),i)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,i)=>this.updateJoinOperatorDisabled(e,i)),this.eJoinOperatorsOr.forEach((e,i)=>this.updateJoinOperatorDisabled(e,i))}updateJoinOperatorDisabled(e,i){e.setDisabled(this.isReadOnly()||i>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,i){const t=this.mapValuesFromModel(e);this.forEachInput((o,r,s)=>{s===i&&this.setElementValue(o,null!=t[r]?t[r]:null)})}setValueFromFloatingFilter(e){this.forEachInput((i,t,o)=>{this.setElementValue(i,0===t&&0===o?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,i){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(i,t=>{this.attachElementOnChange(t,this.listener)}))}individualConditionPasses(e,i){const t=this.getCellValue(e.node),o=this.mapValuesFromModel(i),r=this.optionsFactory.getCustomOption(i.type);return this.evaluateCustomFilter(r,o,t)??(null==t?this.evaluateNullValue(i.type):this.evaluateNonNullValue(o,t,i,e))}evaluateCustomFilter(e,i,t){if(null==e)return;const{predicate:o}=e;return null==o||i.some(r=>null==r)?void 0:o(i,t)}isBlank(e){return null==e||"string"==typeof e&&0===e.trim().length}hasInvalidInputs(){return!1}},dm=class extends cm{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,i,t){const o=this.comparator(),r=null!=e[0]?o(e[0],i):0;switch(t.type){case"equals":return 0===r;case"notEqual":return 0!==r;case"greaterThan":return r>0;case"greaterThanOrEqual":return r>=0;case"lessThan":return r<0;case"lessThanOrEqual":return r<=0;case"inRange":{const s=o(e[1],i);return this.scalarFilterParams.inRangeInclusive?r>=0&&s<=0:r>0&&s<0}case"blank":return this.isBlank(i);case"notBlank":return!this.isBlank(i);default:return pe('Unexpected type of filter "'+t.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}};function um(e){return!(e.altKey||e.ctrlKey||e.metaKey)&&1===e.key?.length}function mh(e,i,t,o,r){const s=o?o.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const a=e.addGridCommonParams({event:i,editing:r,column:o,node:t,data:t.data,colDef:o.getColDef()});return!(!s||!s(a))}var us=class extends cs{constructor(e,i="ag-text-field",t="text"){super(e,i,t)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,i){return this.eInput.value!==e&&(this.eInput.value=Fe(e)?e:""),super.setValue(e,i)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`);this.addManagedListeners(this.eInput,{keydown:t=>{um(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{const o=t.clipboardData?.getData("text");o&&o.split("").some(r=>!e.test(r))&&t.preventDefault()}})}},Pc={selector:"AG-INPUT-TEXT-FIELD",component:us},vh=class extends us{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const r=parseFloat(this.eInput.value),s=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==s&&this.setValue(s)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:i,max:t,step:o}=this.config;"number"==typeof e&&this.setPrecision(e),"number"==typeof i&&this.setMin(i),"number"==typeof t&&this.setMax(t),"number"==typeof o&&this.setStep(o)}onWheel(e){ai(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const i=parseFloat(e);return null!=this.min&&i<this.min?e=this.min.toString():null!=this.max&&i>this.max&&(e=this.max.toString()),e}adjustPrecision(e,i){if(null==this.precision)return e;if(i){const o=parseFloat(e).toFixed(this.precision);return parseFloat(o).toString()}const t=String(e).split(".");if(t.length>1){if(t[1].length<=this.precision)return e;if(this.precision>0)return`${t[0]}.${t[1].slice(0,this.precision)}`}return t[0]}setMin(e){return this.min===e||(this.min=e,Xn(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,Xn(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,Xn(this.eInput,"step",e)),this}setValue(e,i){return this.setValueOrInputValue(t=>super.setValue(t,i),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(i=>super.setValue(i,!0),i=>{this.eInput.value=i},e)}setValueOrInputValue(e,i,t){if(Fe(t)){let o=this.isScientificNotation(t);if(o&&this.eInput.validity.valid)return e(t);if(o||(o=(t=this.adjustPrecision(t))!=this.normalizeValue(t)),o)return i(t)}return e(t)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return"string"==typeof e&&e.includes("e")}},gy={selector:"AG-INPUT-NUMBER-FIELD",component:vh},hm=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],Ch=class{constructor(e,i,t){this.localeService=e,this.optionsFactory=i,this.valueFormatter=t}getModelAsString(e){if(!e)return null;const i=null!=e.operator,t=this.localeService.getLocaleTextFunc();if(i){const o=e,s=(o.conditions??[]).map(l=>this.getModelAsString(l)),a="AND"===o.operator?"andCondition":"orCondition";return s.join(` ${t(a,am[a])} `)}if("blank"===e.type||"notBlank"===e.type)return t(e.type,e.type);{const o=e,r=this.optionsFactory.getCustomOption(o.type),{displayKey:s,displayName:a,numberOfInputs:l}=r||{};return s&&a&&0===l?(t(s,a),a):this.conditionToString(o,r)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},gm=class extends Ch{conditionToString(e,i){const{numberOfInputs:t}=i||{};return"inRange"==e.type||2===t?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:null!=e.filter?this.formatValue(e.filter):`${e.type}`}};function wh(e){const{allowedCharPattern:i}=e??{};return i??null}var pm=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],fm=class extends Ch{conditionToString(e,i){const{numberOfInputs:t}=i||{};return"inRange"==e.type||2===t?`${e.filter}-${e.filterTo}`:null!=e.filter?`${e.filter}`:`${e.type}`}};function mm(e){const i=e&&e.trim();return""===i?e:i}function vm(e){if("number"==typeof e)return e;if("string"==typeof e){const i=parseInt(e);return isNaN(i)?void 0:i}}function Zo(e,i=Number.MAX_VALUE){return t=>{const o=vm(t);if(!(null==o||o<e||o>i))return o}}function ul(e,i){return e.toString().padStart(i,"0")}function eo(e,i=!0,t="-"){if(!e)return null;let o=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(r=>ul(r,2)).join(t);return i&&(o+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(r=>ul(r,2)).join(":")),o}var yh=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function hl(e,i="YYYY-MM-DD"){const t=ul(e.getFullYear(),4),o=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>t.slice(t.length-4,t.length),YY:()=>t.slice(t.length-2,t.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>o[e.getMonth()],MMM:()=>o[e.getMonth()].slice(0,3),MM:()=>ul(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${yh(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${yh(e.getDate())}`,DD:()=>ul(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>r[e.getDay()],ddd:()=>r[e.getDay()].slice(0,3),dd:()=>r[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${yh(e.getDay())}`,d:()=>`${e.getDay()}`},a=new RegExp(Object.keys(s).join("|"),"g");return i.replace(a,l=>l in s?s[l]():l)}function Fn(e){if(!e)return null;const[i,t]=e.split(" ");if(!i)return null;const o=i.split("-").map(g=>parseInt(g,10));if(3!==o.filter(g=>!isNaN(g)).length)return null;const[r,s,a]=o,l=new Date(r,s-1,a);if(l.getFullYear()!==r||l.getMonth()!==s-1||l.getDate()!==a)return null;if(!t||"00:00:00"===t)return l;const[c,d,h]=t.split(":").map(g=>parseInt(g,10));return c>=0&&c<24&&l.setHours(c),d>=0&&d<60&&l.setMinutes(d),h>=0&&h<60&&l.setSeconds(h),l}var wm=class{constructor(e,i,t,o,r){this.alive=!0,this.context=e,this.eParent=o,i.getDateCompDetails(t).newAgStackInstance().then(l=>{this.alive?(this.dateComp=l,l&&(o.appendChild(l.getGui()),l.afterGuiAttached&&l.afterGuiAttached(),this.tempValue&&l.setDate(this.tempValue),null!=this.disabled&&this.setDateCompDisabled(this.disabled),r?.(this))):e.destroyBean(l)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){li(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(e)}updateParams(e){let i=!1;this.dateComp?.refresh&&"function"==typeof this.dateComp.refresh&&null!==this.dateComp.refresh(e)&&(i=!0),!i&&this.dateComp?.onParamsUpdated&&"function"==typeof this.dateComp.onParamsUpdated&&null!==this.dateComp.onParamsUpdated(e)&&pe("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(e)}},ym=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],bm=class extends Ch{constructor(e,i,t){super(i,t),this.dateFilterParams=e}conditionToString(e,i){const{type:t}=e,{numberOfInputs:o}=i||{},r="inRange"==t||2===o,s=Fn(e.dateFrom),a=Fn(e.dateTo),l=this.dateFilterParams.inRangeFloatingFilterDateFormat;return r?`${null!==s?hl(s,l):"null"}-${null!==a?hl(a,l):"null"}`:null!=s?hl(s,l):`${t}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},bh=class extends fe{constructor(e,i,t,o){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=i,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=o,this.beans=t}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?Tt(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),i=Fe(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&i&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),i=e.getLeft(),t=e.getOldLeft(),o=this.modifyLeftForPrintLayout(e,t),r=this.modifyLeftForPrintLayout(e,i);this.setLeft(o),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===r&&this.setLeft(r)})}onLeftChanged(){const e=this.getColumnOrGroup(),i=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,i),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,i){if(!Ki(this.beans.gos,"print")||"left"===e.getPinned())return i;const o=this.beans.visibleColsService.getColsLeftWidth();return"right"===e.getPinned()?o+this.beans.visibleColsService.getBodyContainerWidth()+i:o+i}setLeft(e){if(Fe(e)&&(this.eCell.style.left=`${e}px`),Ti(this.columnOrGroup)){const i=this.columnOrGroup.getLeafColumns();if(!i.length)return;i.length>1&&function Mw(e,i){Qn(e,"colspan",i)}(this.ariaEl,i.length)}}};function xm(e,i,t,o){return kt(e)?[]:function km(e,i,t,o,r){if(kt(e))return[];let s;if("function"==typeof e){const a=function yy(e,i,t,o){return i.addGridCommonParams({colDef:e,column:t,columnGroup:o})}(i,t,o,r);s=e(a)}else s=e;return"string"==typeof s?[s]:Array.isArray(s)?[...s]:[]}(e.headerClass,e,i,t,o)}function Am(e,i,t){e.addOrRemoveCssClass("ag-column-first",t.isColAtEdge(i,"first")),e.addOrRemoveCssClass("ag-column-last",t.isColAtEdge(i,"last"))}var by=0,Tm=class kC extends fe{constructor(i,t,o){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=i,this.parentRowCtrl=o,this.beans=t,this.instanceId=i.getUniqueId()+"-"+by++}wireBeans(i){this.pinnedWidthService=i.pinnedWidthService,this.focusService=i.focusService,this.userComponentFactory=i.userComponentFactory,this.ctrlsService=i.ctrlsService,this.dragAndDropService=i.dragAndDropService,this.menuService=i.menuService}postConstruct(){const i=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],i),this.addManagedEventListeners({overlayExclusiveChanged:i})}shouldStopEventPropagation(i){const{headerRowIndex:t,column:o}=this.focusService.getFocusedHeader();return function dy(e,i,t,o){const r=o.getDefinition(),s=r&&r.suppressHeaderKeyboardEvent;return!!Fe(s)&&!!s(e.addGridCommonParams({colDef:r,column:o,headerRowIndex:t,event:i}))}(this.gos,i,t,o)}getWrapperHasFocus(){return ai(this.gos)===this.eGui}setGui(i,t){this.eGui=i,this.addDomData(t),t.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(i){const{wrapperElement:t,checkMeasuringCallback:o,compBean:r}=i,{animationFrameService:s,resizeObserverService:a,columnModel:l,gos:c}=this.beans,d=b=>{if(!this.isAlive()||!r.isAlive())return;const{paddingTop:S,paddingBottom:_,borderBottomWidth:k,borderTopWidth:E}=ls(this.getGui()),ne=t.offsetHeight+(S+_+k+E);if(b<5){const V=ki(c);if(!V||!V.contains(t)||0==ne)return void s.requestAnimationFrame(()=>d(b+1))}l.setColHeaderHeight(this.column,ne)};let g,h=!1;const m=()=>{const b=this.column.isAutoHeaderHeight();b&&!h&&f(),!b&&h&&y()},f=()=>{h=!0,d(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),g=a.observeResize(t,()=>d(0))},y=()=>{h=!1,g&&g(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),g=void 0};m(),r.addDestroyFunc(()=>y()),r.addManagedListeners(this.column,{widthChanged:()=>h&&d(0)}),r.addManagedEventListeners({sortChanged:()=>{h&&window.setTimeout(()=>d(0))}}),o&&o(m)}onDisplayedColumnsChanged(){const{comp:i,column:t,beans:o,eGui:r}=this;!i||!t||!r||(Am(i,t,o.visibleColsService),Lf(r,o.visibleColsService.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(i){this.resizeFeature&&i.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const i=this.focusService.isHeaderFocusSuppressed();this.eGui&&Xn(this.eGui,"tabindex",i?null:"-1")}onGuiKeyDown(i){const t=ai(this.gos),o=i.key===le.LEFT||i.key===le.RIGHT;if(this.isResizing&&(i.preventDefault(),i.stopImmediatePropagation()),t!==this.eGui||!i.shiftKey&&!i.altKey||((this.isResizing||o)&&(i.preventDefault(),i.stopImmediatePropagation()),!o))return;const r=i.key===le.LEFT!==this.gos.get("enableRtl"),s=nm[r?"Left":"Right"];if(i.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(i);this.resizeHeader(a,i.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(s)}getViewportAdjustedResizeDiff(i){let t=this.getResizeDiff(i);if(this.column.getPinned()){const r=this.pinnedWidthService.getPinnedLeftWidth(),s=this.pinnedWidthService.getPinnedRightWidth(),a=rl(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(r+s+t>a){if(!(a>r+s))return 0;t=a-r-s}}return t}getResizeDiff(i){let t=i.key===le.LEFT!==this.gos.get("enableRtl");const o=this.column.getPinned(),r=this.gos.get("enableRtl");return o&&r!==("right"===o)&&(t=!t),(t?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(i){const t=this.getWrapperHasFocus();switch(i.key){case le.PAGE_DOWN:case le.PAGE_UP:case le.PAGE_HOME:case le.PAGE_END:t&&i.preventDefault()}}addDomData(i){const t=kC.DOM_DATA_KEY_HEADER_CTRL;ns(this.gos,this.eGui,t,this),i.addDestroyFunc(()=>ns(this.gos,this.eGui,t,null))}getGui(){return this.eGui}focus(i){return!!this.eGui&&(this.lastFocusEvent=i||null,this.eGui.focus(),!0)}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(i,t,o){const r=i??t;this.gos.get("preventDefaultOnContextMenu")&&r.preventDefault(),this.menuService.isHeaderContextMenuEnabled(o)&&this.menuService.showHeaderContextMenu(o,i,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",o)}dispatchColumnMouseEvent(i,t){this.eventService.dispatchEvent({type:i,column:t})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};Tm.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var Lc=Tm,Sh=class extends fe{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,i){super(),this.columns=e,this.element=i}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},lt="32.2.1",Dm={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Fm=["january","february","march","april","may","june","july","august","september","october","november","december"],Rm=class extends Mt{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.getDefaultOption());let t;t=e.operator?e.conditions[0]:e,this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){return e?!e.operator&&this.isTypeEditable(e.type):this.isTypeEditable(this.lastType)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,i=!0){this.optionsFactory=new lm,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),i||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const t=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(t)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const i=this.optionsFactory.getCustomOption(e),{numberOfInputs:t}=i||{};return null==t||1==t}isTypeEditable(e){return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){return`${this.columnNameService.getDisplayNameForColumn(e.column,"header",!0)} ${this.localeService.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},Mm=class extends fe{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=Ne,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new us(this.params?.config));const i=this.eFloatingFilterTextInput.getGui();e.appendChild(i);const t=o=>this.valueChangedListener(o);this.addManagedListeners(i,{input:t,keydown:t})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,i){this.eFloatingFilterTextInput.setValue(e,i)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},Em=class extends Rm{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Ne}postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>\n        ')}getDefaultDebounceMs(){return 500}onParentModelChanged(e,i){this.isEventFromFloatingFilter(i)||this.isEventFromDataChange(i)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const i=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:i}),this.applyActive=Ec(this.params.filterParams),!this.isReadOnly()){const t=ph(this.params.filterParams,this.getDefaultDebounceMs()),o=hi(this.syncUpWithParentFilter.bind(this),t);this.floatingFilterInputService.setValueChangedListener(o)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const i=this.floatingFilterInputService.getValue();sn(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(i,!0)}syncUpWithParentFilter(e){if(this.applyActive&&e.key!==le.ENTER)return;let t=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(t=mm(t),this.floatingFilterInputService.setValue(t,!0)),this.params.parentFilterInstance(o=>{o&&o.onFloatingFilterChanged(this.getLastType()||null,t||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},Zy=class extends fe{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new vh),this.eFloatingFilterTextInput=this.createManagedBean(new us),this.eFloatingFilterTextInput.setDisabled(!0);const i=this.eFloatingFilterNumberInput.getGui(),t=this.eFloatingFilterTextInput.getGui();e.appendChild(i),e.appendChild(t),this.setupListeners(i,o=>this.valueChangedListener(o)),this.setupListeners(t,o=>this.valueChangedListener(o))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,i){this.getActiveInputElement().setValue(e,i)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,i){this.addManagedListeners(e,{input:i,keydown:i})}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},_h={version:lt,moduleName:"@ag-grid-community/filter-core",beans:[class extends fe{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),i=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:i,columnVisible:i,advancedFilterEnabledChanged:({enabled:t})=>this.onAdvancedFilterEnabledChanged(t),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",t=>this.setAdvancedFilterModel(t.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"==typeof e&&e({})}doesExternalFilterPass(e){const i=this.gos.get("doesExternalFilterPass");return"function"==typeof i&&i(e)}setFilterModel(e,i="api"){this.isAdvancedFilterEnabled()?this.warnAdvancedFilters():this.columnFilterService?.setFilterModel(e,i)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){Du(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:i,additionalEventAttributes:t,columns:o=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):Hn.resolve()).then(()=>{const r={source:i,type:"filterChanged",columns:o};t&&Cn(r,t),this.eventService.dispatchEvent(r),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!Du(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,i){return this.doesRowPassFilter({rowNode:i,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,i){return this.columnFilterService.createFilterParams(e,i)}isFilterAllowed(e){return!this.isAdvancedFilterEnabled()&&!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,i){return this.columnFilterService?.getFloatingFilterCompDetails(e,i)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,i="api"){this.columnFilterService?.destroyFilter(e,i)}areFilterCompsDifferent(e,i){return!!this.columnFilterService?.areFilterCompsDifferent(e,i)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference())return void this.advancedFilterModelUpdateQueue.push(e);this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,i){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:i,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return!this.isAdvancedFilterEnabled()&&!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,i){if(!this.isAdvancedFilterEnabled())return this.columnFilterService?.getFilterInstance(e,i);this.warnAdvancedFilters()}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){pe("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,i){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,i)??Promise.resolve()}setColDefPropertiesForDataType(e,i,t){this.columnFilterService?.setColDefPropertiesForDataType(e,i,t)}}]},Wy={version:lt,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:function Ly(e){return!!e.filterManager?.isAnyFilterPresent()},onFilterChanged:function Iy(e,i="api"){e.filterManager?.onFilterChanged({source:i})}},dependantModules:[_h]},Ic={version:lt,moduleName:"@ag-grid-community/column-filter",beans:[class extends fe{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...this.gos.get("initialState")?.filter?.filterModel??{}}}setFilterModel(e,i="api"){if(this.dataTypeService?.isPendingInference())return void this.filterModelUpdateQueue.push({model:e,source:i});const t=[],o=this.getFilterModel(!0);if(e){const r=new Set(Object.keys(e));this.allColumnFilters.forEach((s,a)=>{t.push(this.setModelOnFilterWrapper(s.filterPromise,e[a])),r.delete(a)}),r.forEach(s=>{const a=this.columnModel.getColDefCol(s)||this.columnModel.getCol(s);if(!a)return void pe("setFilterModel() - no column found for colId: "+s);if(!a.isFilterAllowed())return void pe("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+s);const l=this.getOrCreateFilterWrapper(a);l?t.push(this.setModelOnFilterWrapper(l.filterPromise,e[s])):pe("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+s)})}else this.allColumnFilters.forEach(r=>{t.push(this.setModelOnFilterWrapper(r.filterPromise,null))});Hn.all(t).then(()=>{const r=this.getFilterModel(!0),s=[];this.allColumnFilters.forEach((a,l)=>{$a(o?o[l]:null,r?r[l]:null)||s.push(a.column)}),s.length>0&&this.filterManager?.onFilterChanged({columns:s,source:i})})}setModelOnFilterWrapper(e,i){return new Hn(t=>{e.then(o=>{"function"!=typeof o.setModel&&(pe("filter missing setModel method, which is needed for setFilterModel"),t()),(o.setModel(i)||Hn.resolve()).then(()=>t())})})}getFilterModel(e){const i={},{allColumnFilters:t,initialFilterModel:o}=this;return t.forEach((r,s)=>{const a=this.getModelFromFilterWrapper(r);Fe(a)&&(i[s]=a)}),e||Object.entries(o).forEach(([r,s])=>{Fe(s)&&!t.has(r)&&this.columnModel.getCol(r)?.isFilterAllowed()&&(i[r]=s)}),i}getModelFromFilterWrapper(e){const{filter:i}=e;return i?"function"!=typeof i.getModel?(pe("filter API missing getModel method, which is needed for getFilterModel"),null):i.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return!!this.allColumnFilters.size&&(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0)}doAggregateFiltersPass(e,i){return this.doColumnFiltersPass(e,i,!0)}updateActiveFilters(){const i=!!Du(this.gos),t=s=>{if(!s.isPrimary())return!0;const l=!this.columnModel.isPivotActive();return!(!s.isValueActive()||!l)&&(!!this.columnModel.isPivotMode()||i)},o=[],r=[];return this.forEachColumnFilter((s,a)=>{(s=>!!s&&(s.isFilterActive?s.isFilterActive():(pe("Filter is missing isFilterActive() method"),!1)))(s)&&(t(a.column)?o.push(s):r.push(s))}).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=r})}updateFilterFlagInColumns(e,i){return this.forEachColumnFilter((t,o)=>o.column.setFilterActive(t.isFilterActive(),e,i))}forEachColumnFilter(e){return Hn.all(Array.from(this.allColumnFilters.values()).map(i=>i.filterPromise.then(t=>e(t,i))))}doColumnFiltersPass(e,i,t){const{data:o,aggData:r}=e,s=t?this.activeAggregateFilters:this.activeColumnFilters,a=t?r:o;for(let l=0;l<s.length;l++){const c=s[l];if(null!=c&&c!==i){if("function"!=typeof c.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!c.doesFilterPass({node:e,data:a}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const i=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(e={}){const{filterInstance:i,additionalEventAttributes:t}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",t).then(()=>{this.allColumnFilters.forEach(o=>{o.filterPromise&&o.filterPromise.then(r=>{r&&r!==i&&r.onAnyFilterChanged&&r.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!this.gos.get("allowShowChangeAfterFilter")&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(i=>{i.onNewRowsLoaded&&i.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:i})=>this.valueService.getValue(e,i,!0)}createGetValue(e){return(i,t)=>{const o=t?this.columnModel.getCol(t):e;return o?this.valueService.getValue(o,i,!0):void 0}}isFilterActive(e){const{filter:i}=this.cachedFilter(e)??{};return i?i.isFilterActive():null!=this.getModelFromInitialState(e)}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let i=this.cachedFilter(e);return i||(i=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,i)),i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let i;if(Pu(this.gos))i="agSetColumnFilter";else{const t=this.dataTypeService?.getBaseDataType(e);i="number"===t?"agNumberColumnFilter":"date"===t||"dateString"===t?"agDateColumnFilter":"agTextColumnFilter"}return i}getDefaultFloatingFilter(e){let i;if(Pu(this.gos))i="agSetColumnFloatingFilter";else{const t=this.dataTypeService?.getBaseDataType(e);i="number"===t?"agNumberColumnFloatingFilter":"date"===t||"dateString"===t?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return i}createFilterInstance(e,i){const t=this.getDefaultFilter(e),o=e.getColDef();let r;const s={...this.createFilterParams(e,o),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(r,e)(),filterChangedCallback:l=>this.filterChangedCallbackFactory(r,e)(l),doesRowPassOtherFilter:l=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(r,l)},a=this.userComponentFactory.getFilterDetails(o,s,t);return a?{filterPromise:()=>{const l=a.newAgStackInstance();return l?.then(c=>{r=c,i&&(i.filter=c)}),l},compDetails:a}:{filterPromise:null,compDetails:null}}createFilterParams(e,i){return this.gos.addGridCommonParams({column:e,colDef:Sf(i),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const i={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:t,compDetails:o}=this.createFilterInstance(e,i);return i.filterPromise=t?.()??null,i.compDetails=o,i}onColumnsChanged(){const e=[];this.allColumnFilters.forEach((t,o)=>{let r;r=t.column.isPrimary()?this.columnModel.getColDefCol(o):this.columnModel.getCol(o),(!r||r!==t.column)&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(o))});const i=e.every(t=>"agGroupColumnFilter"===t.getColDef().filter);e.length>0&&!i?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(i=>{"agGroupColumnFilter"===i.getColDef().filter&&this.getOrCreateFilterWrapper(i)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:t}=this.allColumnFilters.get(e.getColId())??{};return!t||"function"!=typeof t?.isFilterAllowed||t.isFilterAllowed()}getFloatingFilterCompDetails(e,i){const t=c=>{const d=this.getOrCreateFilterWrapper(e)?.filterPromise;d?.then(h=>{c(cl(h))})},o=e.getColDef(),r={...this.createFilterParams(e,o),filterChangedCallback:()=>t(c=>this.filterChangedCallbackFactory(c,e)())},s=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(o,hh,r);let a=function Ey(e,i,t){if(null==i)return null;let o=null;const{compName:r,jsComp:s,fwComp:a}=im.getCompKeys(e,i,hh);return r?o={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[r]:null==s&&null==a&&!0===i.filter&&(o=t()),o}(this.frameworkOverrides,o,()=>this.getDefaultFloatingFilter(e));return null==a&&(a="agReadOnlyFloatingFilter"),this.userComponentFactory.getFloatingFilterCompDetails(o,{column:e,filterParams:s,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:t,showParentFilter:i,suppressFilterButton:!1},a)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,i="api"){const t=e.getColId(),o=this.allColumnFilters.get(t);this.disposeColumnListener(t),delete this.initialFilterModel[t],o&&(this.disposeFilterWrapper(o,i),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const i=this.allColumnListeners.get(e);i&&(this.allColumnListeners.delete(e),i())}disposeFilterWrapper(e,i){e.filterPromise.then(t=>{this.destroyBean(t),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:i,column:e.column})})}filterModifiedCallbackFactory(e,i){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:i,filterInstance:e})}}filterChangedCallbackFactory(e,i){return t=>{this.callOnFilterChangedOutsideRenderCycle({filter:e,additionalEventAttributes:t,columns:[i],source:t?.source??"columnFilter"})}}checkDestroyFilter(e){const i=this.allColumnFilters.get(e);if(!i)return;const t=i.column,{compDetails:o}=t.isFilterAllowed()?this.createFilterInstance(t):{compDetails:null};if(this.areFilterCompsDifferent(i.compDetails,o))return void this.destroyFilter(t,"paramsUpdated");const r=t.getColDef().filterParams;i.filterPromise?i.filterPromise.then(s=>{!1===(!s?.refresh||s.refresh({...this.createFilterParams(t,t.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(s,t),filterChangedCallback:this.filterChangedCallbackFactory(s,t),doesRowPassOtherFilter:l=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(s,l),...r}))&&this.destroyFilter(t,"paramsUpdated")}):this.destroyFilter(t,"paramsUpdated")}setColumnFilterWrapper(e,i){const t=e.getColId();this.allColumnFilters.set(t,i),this.allColumnListeners.set(t,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(t)})[0])}areFilterCompsDifferent(e,i){if(!i||!e)return!0;const{componentClass:t}=e,{componentClass:o}=i;return!(t===o||t?.render&&o?.render&&t.render===o.render)}hasFloatingFilters(){return this.columnModel.getCols().some(i=>i.getColDef().floatingFilter)}getFilterInstance(e,i){i&&this.getFilterInstanceImpl(e).then(t=>{const o=cl(t);i(o)})}getColumnFilterInstance(e){return new Promise(i=>{this.getFilterInstanceImpl(e).then(t=>{i(cl(t))})})}getFilterInstanceImpl(e){const i=this.columnModel.getColDefCol(e);return i?this.getOrCreateFilterWrapper(i)?.filterPromise??Hn.resolve(null):Hn.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:i})=>this.setFilterModel(e,i)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:i,resolve:t})=>{this.setColumnFilterModel(e,i).then(()=>t())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const i=this.getFilterWrapper(e);return i?this.getModelFromFilterWrapper(i):null}setColumnFilterModel(e,i){if(this.dataTypeService?.isPendingInference()){let s=()=>{};const a=new Promise(l=>{s=l});return this.columnFilterModelUpdateQueue.push({key:e,model:i,resolve:s}),a}const t=this.columnModel.getColDefCol(e),o=t?this.getOrCreateFilterWrapper(t):null;return o?(s=this.setModelOnFilterWrapper(o.filterPromise,i),new Promise(a=>{s.then(l=>a(l))})):Promise.resolve();var s}getFilterWrapper(e){const i=this.columnModel.getColDefCol(e);return i?this.cachedFilter(i)??null:null}setColDefPropertiesForDataType(e,i,t){const o=Pu(this.gos),r=this.localeService.getLocaleTextFunc(),s=a=>{const{filterParams:l}=e;e.filterParams="object"==typeof l?{...l,...a}:a};switch(i.baseDataType){case"number":o&&s({comparator:(a,l)=>{const c=null==a?0:parseInt(a),d=null==l?0:parseInt(l);return c===d?0:c>d?1:-1}});break;case"boolean":s(o?{valueFormatter:a=>Fe(a.value)?r(String(a.value),a.value?"True":"False"):r("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,l)=>l,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,l)=>!1===l,numberOfInputs:0}]});break;case"date":o&&s({valueFormatter:a=>{const l=t(a);return Fe(l)?l:r("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,l)=>{if(1===l&&null!=a){const c=Fm[Number(a)-1];return r(c,Dm[c])}return a??r("blanks","(Blanks)")}});break;case"dateString":{const a=i.dateParser;s(o?{valueFormatter:l=>{const c=t(l);return Fe(c)?c:r("blanks","(Blanks)")},treeList:!0,treeListPathGetter:l=>{const c=a(l??void 0);return c?[String(c.getFullYear()),String(c.getMonth()+1),String(c.getDate())]:null},treeListFormatter:(l,c)=>{if(1===c&&null!=l){const d=Fm[Number(l)-1];return r(d,Dm[d])}return l??r("blanks","(Blanks)")}}:{comparator:(l,c)=>{const d=a(c);return null==c||d<l?-1:d>l?1:0}});break}case"object":o?s({valueFormatter:a=>{const l=t(a);return Fe(l)?l:r("blanks","(Blanks)")}}):e.filterValueGetter=a=>t({column:a.column,node:a.node,value:this.valueService.getValue(a.column,a.node)})}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}}],dependantModules:[_h]},jy={version:lt,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:function _y(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()},getFilterInstance:function xy(e,i,t){return e.filterManager?.getFilterInstance(i,t)},getColumnFilterInstance:function Ay(e,i){return e.filterManager?.getColumnFilterInstance(i)??Promise.resolve(void 0)},destroyFilter:function ky(e,i){const t=e.columnModel.getColDefCol(i);if(t)return e.filterManager?.destroyFilter(t,"api")},setFilterModel:function Ty(e,i){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(i))},getFilterModel:function Dy(e){return e.filterManager?.getFilterModel()??{}},getColumnFilterModel:function Fy(e,i){return e.filterManager?.getColumnFilterModel(i)??null},setColumnFilterModel:function Ry(e,i,t){return e.filterManager?.setColumnFilterModel(i,t)??Promise.resolve()},showColumnFilter:function My(e,i){const t=e.columnModel.getCol(i);t?e.menuService.showFilterMenu({column:t,containerType:"columnFilter",positionBy:"auto"}):pt(`column '${i}' not found`)}},dependantModules:[Ic,Wy]},xh={version:lt,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:class extends Lc{constructor(e,i,t){super(e,i,t),this.iconCreated=!1,this.column=e}setComp(e,i,t,o,r){this.comp=e,r=il(this,this.beans.context,r),this.eButtonShowMainFilter=t,this.eFloatingFilterBody=o,this.setGui(i,r),this.setupActive(),this.setupWidth(r),this.setupLeft(r),this.setupHover(r),this.setupFocus(r),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(r),this.setupUi(),r.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(r),r.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(r)}),r.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef();this.active=!!e.filter&&!!e.floatingFilter}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Gn("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new ds(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();qs(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(ai(this.gos)===this.eGui)return;const o=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(o)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void o.focus();const r=this.findNextColumnWithFloatingFilter(e.shiftKey);r&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:r},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const i=this.beans.visibleColsService;let t=this.column;do{if(t=e?i.getColBefore(t):i.getColAfter(t),!t)break}while(!t.getColDef().filter||!t.getColDef().floatingFilter);return t}handleKeyDown(e){super.handleKeyDown(e);const i=this.getWrapperHasFocus();switch(e.key){case le.UP:case le.DOWN:i||e.preventDefault();case le.LEFT:case le.RIGHT:if(i)return;e.stopPropagation();case le.ENTER:i&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case le.ESCAPE:i||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),o=!!e.relatedTarget&&zs(e.relatedTarget,"ag-floating-filter");if(t&&o&&e.target===this.eGui){const s=this.lastFocusEvent;s&&s&&s.key===le.TAB&&this.focusService.focusInto(this.eGui,s.shiftKey)}const r=this.getRowIndex();this.beans.focusService.setFocusedHeader(r,this.column)}setupHover(e){e.createManagedBean(new Sh([this.column],this.eGui));const i=()=>{if(!this.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};e.addManagedEventListeners({columnHoverChanged:i}),i()}setupLeft(e){const i=new bh(this.column,this.eGui,this.beans);e.createManagedBean(i)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){this.menuService.showFilterMenu({column:this.column,buttonElement:this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:i}=this.beans,t=o=>{if("filterDestroyed"===o?.source&&!this.isAlive())return;const r=this.comp.getFloatingFilterComp();r&&r.then(s=>{if(s){const a=i?.getCurrentFloatingFilterParentModel(this.column),l=o?{...o,columns:o.columns??[],source:"api"===o.source?"api":"columnFilter"}:null;s.onParentModelChanged(a,l)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:t}),i?.isFilterActive(this.column)&&t(null)}setupWidth(e){const i=()=>{const t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};e.addManagedListeners(this.column,{widthChanged:i}),i()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const i=this.active;this.setupActive();const t=!i&&this.active;i&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const o=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,r=this.comp.getFloatingFilterComp();r&&o?r.then(s=>{!s||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,o)?this.updateCompDetails(e,o,t):this.updateFloatingFilterParams(o)}):this.updateCompDetails(e,o,t)}updateCompDetails(e,i,t){this.isAlive()&&(this.setCompDetails(i),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;const i=e.params;this.comp.getFloatingFilterComp()?.then(t=>{let o=!1;t?.refresh&&"function"==typeof t.refresh&&null!==t.refresh(i)&&(o=!0),!o&&t?.onParamsUpdated&&"function"==typeof t.onParamsUpdated&&null!==t.onParamsUpdated(i)&&pe("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}}}],dependantModules:[Ic]},Yy={version:lt,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:class extends Mt{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>\n            </div>',[Pc]),this.eFloatingFilterText=Ne}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const i=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),t=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${i} ${t("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){null!=e?this.params.parentFilterInstance(i=>{if(i.getModelAsString){const t=i.getModelAsString(e);this.eFloatingFilterText.setValue(t)}}):this.eFloatingFilterText.setValue("")}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}}}],dependantModules:[xh]},$y={version:lt,moduleName:"@ag-grid-community/simple-filter",dependantModules:[Ic],userComponents:[{name:"agTextColumnFilter",classImp:class extends cm{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>null==e?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:i,filterText:t})=>{if(null==t)return!1;switch(e){case"contains":return i.indexOf(t)>=0;case"notContains":return i.indexOf(t)<0;case"equals":return i===t;case"notEqual":return i!=t;case"startsWith":return 0===i.indexOf(t);case"endsWith":{const o=i.lastIndexOf(t);return o>=0&&o===i.length-t.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new fm(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(pe("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:i,value:t,filterText:o})=>e(i,t,o)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const i=this.getConditionType(e),t={filterType:this.getFilterType(),type:i},o=this.getValuesWithSideEffects(e,!0);return o.length>0&&(t.filter=o[0]),o.length>1&&(t.filterTo=o[1]),t}getFilterType(){return"text"}areSimpleModelsEqual(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,i){const t=[];return this.forEachPositionInput(e,(o,r,s,a)=>{if(r<a){let l=tr(o.getValue());i&&this.textFilterParams.trimInput&&(l=mm(l)??null,o.setValue(l,!0)),t.push(l)}}),t}getDefaultFilterOptions(){return pm}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Dn(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,i,t){const o=this.createManagedBean(new us);o.addCssClass(`ag-filter-${t}`),o.addCssClass("ag-filter-filter"),i.push(o),e.appendChild(o.getGui())}removeValueElements(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)}mapValuesFromModel(e){const{filter:i,filterTo:t,type:o}=e||{};return[i||null,t||null].slice(0,this.getNumberOfInputs(o))}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,i,t,o){const r=e.map(m=>this.formatter(m))||[],s=this.formatter(i),{api:a,colDef:l,column:c,context:d,textFormatter:h}=this.textFilterParams;if("blank"===t.type)return this.isBlank(i);if("notBlank"===t.type)return!this.isBlank(i);const g={api:a,colDef:l,column:c,context:d,node:o.node,data:o.data,filterOption:t.type,value:s,textFormatter:h};return r.some(m=>this.matcher({...g,filterText:m}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}},{name:"agNumberColumnFilter",classImp:class extends dm{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:i,filterTo:t,type:o}=e||{};return[this.processValue(i),this.processValue(t)].slice(0,this.getNumberOfInputs(o))}getDefaultDebounceMs(){return 500}comparator(){return(e,i)=>e===i?0:e<i?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new gm(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return hm}setElementValue(e,i,t){const o=!t&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(i??null):i;super.setElementValue(e,o)}createValueElement(){const e=wh(this.numberFilterParams),i=document.createElement("div");return i.classList.add("ag-filter-body"),Dn(i,"presentation"),this.createFromToElement(i,this.eValuesFrom,"from",e),this.createFromToElement(i,this.eValuesTo,"to",e),i}createFromToElement(e,i,t,o){const r=this.createManagedBean(o?new us({allowedCharPattern:o}):new vh);r.addCssClass(`ag-filter-${t}`),r.addCssClass("ag-filter-filter"),i.push(r),e.appendChild(r.getGui())}removeValueElements(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)}getValues(e){const i=[];return this.forEachPositionInput(e,(t,o,r,s)=>{o<s&&i.push(this.processValue(this.stringToFloat(t.getValue())))}),i}areSimpleModelsEqual(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type}getFilterType(){return"number"}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"==typeof e)return e;let i=tr(e);return null!=i&&""===i.trim()&&(i=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(i):null==i||"-"===i.trim()?null:parseFloat(i)}createCondition(e){const i=this.getConditionType(e),t={filterType:this.getFilterType(),type:i},o=this.getValues(e);return o.length>0&&(t.filter=o[0]),o.length>1&&(t.filterTo=o[1]),t}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(i=>{i.getInputElement().validity.valid||(e=!0)}),e}}},{name:"agDateColumnFilter",classImp:class extends dm{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=1/0,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:i,dateTo:t,type:o}=e||{};return[i&&Fn(i)||null,t&&Fn(t)||null].slice(0,this.getNumberOfInputs(o))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,i){return null==i||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const i=(t,o)=>{if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?o:Number(e[t]);pe(`DateFilter ${t} is not a number`)}return o};this.minValidYear=i("minValidYear",1e3),this.maxValidYear=i("maxValidYear",1/0),this.minValidYear>this.maxValidYear&&pe("DateFilter minValidYear should be <= maxValidYear"),this.minValidDate=e.minValidDate?e.minValidDate instanceof Date?e.minValidDate:Fn(e.minValidDate):null,this.maxValidDate=e.maxValidDate?e.maxValidDate instanceof Date?e.maxValidDate:Fn(e.maxValidDate):null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&pe("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new bm(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const i=new wm(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>i.destroy()),i}setElementValue(e,i){e.setDate(i)}setElementDisplayed(e,i){e.setDisplayed(i)}setElementDisabled(e,i){e.setDisabled(i)}getDefaultFilterOptions(){return ym}createValueElement(){const i=ki(this.gos).createElement("div");return i.classList.add("ag-filter-body"),this.createFromToElement(i,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(i,this.eConditionPanelsTo,this.dateConditionToComps,"to"),i}createFromToElement(e,i,t,o){const s=ki(this.gos).createElement("div");s.classList.add(`ag-filter-${o}`),s.classList.add(`ag-filter-date-${o}`),i.push(s),e.appendChild(s),t.push(this.createDateCompWrapper(s))}removeValueElements(e,i){this.removeDateComps(this.dateConditionFromComps,e,i),this.removeDateComps(this.dateConditionToComps,e,i),this.removeItems(this.eConditionPanelsFrom,e,i),this.removeItems(this.eConditionPanelsTo,e,i)}removeDateComps(e,i,t){this.removeItems(e,i,t).forEach(r=>r.destroy())}isValidDateValue(e){if(null===e)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let i=!0;return this.forEachInput((t,o,r,s)=>{r!==e||!i||o>=s||(i=i&&this.isValidDateValue(t.getDate()))}),i}areSimpleModelsEqual(e,i){return e.dateFrom===i.dateFrom&&e.dateTo===i.dateTo&&e.type===i.type}getFilterType(){return"date"}createCondition(e){const i=this.getConditionType(e),t={},o=this.getValues(e);return o.length>0&&(t.dateFrom=eo(o[0])),o.length>1&&(t.dateTo=eo(o[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:i,...t}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),i=this.translate("dateFormatOoo"),t=e("ariaFilterValue","Filter Value");this.forEachInput(o=>{o.setInputPlaceholder(i),o.setInputAriaLabel(t)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const i=[];return this.forEachPositionInput(e,(t,o,r,s)=>{o<s&&i.push(t.getDate())}),i}translate(e){return super.translate("lessThan"===e?"before":"greaterThan"===e?"after":e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}},{name:"agDateInput",classImp:class extends Mt{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>\n            </div>',[Pc]),this.eDateInput=Ne}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const i=this.eDateInput.getInputElement();this.addManagedListeners(i,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||i.focus()},input:t=>{t.target===ai(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const i=this.eDateInput.getInputElement(),t=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=t&&Bo(),i.type=t?"date":"text";const{minValidYear:o,maxValidYear:r,minValidDate:s,maxValidDate:a}=e.filterParams||{};if(s&&o&&pe("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),a&&r&&pe("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),s&&a){const[l,c]=[s,a].map(d=>d instanceof Date?d:Fn(d));l&&c&&l.getTime()>c.getTime()&&pe("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}s?i.min=s instanceof Date?hl(s):s:o&&(i.min=`${o}-01-01`),a?i.max=a instanceof Date?hl(a):a:r&&(i.max=`${r}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Fn(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(eo(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:th()||ih()||Bo()&&If()>=14.1}}}]},Jy={version:lt,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[$y,xh],userComponents:[{name:"agTextColumnFloatingFilter",classImp:class extends Em{init(e){super.init(e),this.filterModelFormatter=new fm(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return pm}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new Mm)}}},{name:"agNumberColumnFloatingFilter",classImp:class extends Em{init(e){super.init(e),this.filterModelFormatter=new gm(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){wh(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return hm}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=wh(e.filterParams),this.createManagedBean(this.allowedCharPattern?new Mm({config:{allowedCharPattern:this.allowedCharPattern}}):new Zy)}}},{name:"agDateColumnFloatingFilter",classImp:class extends Rm{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>\n                <div data-ref="eDateWrapper" style="display: flex;"></div>\n            </div>',[Pc]),this.eReadOnlyText=Ne,this.eDateWrapper=Ne}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return ym}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new bm(this.filterParams,this.localeService,this.optionsFactory);const i=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(i("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const i=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);this.setEditable(i),i?(this.dateComp.setDate(e?Fn(e.dateFrom):null),this.eReadOnlyText.setValue("")):(this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null))}setEditable(e){li(this.eDateWrapper,e),li(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,i){this.isEventFromFloatingFilter(i)||this.isEventFromDataChange(i)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const i=eo(this.dateComp.getDate());this.params.parentFilterInstance(t=>{if(t){const o=Fn(i);t.onFloatingFilterChanged(this.getLastType()||null,o)}})}getDateComponentParams(){const e=ph(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:hi(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new wm(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}}}]},Pm={version:lt,moduleName:"@ag-grid-community/quick-filter-core",beans:[class extends fe{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",i=>this.setQuickFilter(i.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){const e=this.columnModel.isPivotMode(),i=this.columnModel.getAutoCols(),t=this.columnModel.getColDefCols();let o=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:t)??[];i&&(o=o.concat(i)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?o:o.filter(r=>r.isVisible()||r.isRowGroupActive())}isQuickFilterPresent(){return null!==this.quickFilter}doesRowPassQuickFilter(e){const i=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(i,e):this.quickFilterParts.every(t=>i?this.doesRowPassQuickFilterCache(e,t):this.doesRowPassQuickFilterNoCache(e,t))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:i}=this;this.quickFilterParts=e?i?i(e):e.split(" "):null}parseQuickFilter(e){return Fe(e)?gi(this.gos)?e.toUpperCase():(pe("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(null!=e&&"string"!=typeof e)return void pe("Grid option quickFilterText only supports string inputs, received: "+typeof e);const i=this.parseQuickFilter(e);this.quickFilter!==i&&(this.quickFilter=i,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),i=this.gos.get("quickFilterMatcher"),t=e!==this.parser||i!==this.matcher;this.parser=e,this.matcher=i,t&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,i){return this.colsForQuickFilter.some(t=>{const o=this.getQuickFilterTextForColumn(t,e);return Fe(o)&&o.indexOf(i)>=0})}doesRowPassQuickFilterCache(e,i){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(i)>=0}doesRowPassQuickFilterMatcher(e,i){let t;e?(this.checkGenerateQuickFilterAggregateText(i),t=i.quickFilterAggregateText):t=this.getQuickFilterAggregateText(i);const{quickFilterParts:o,matcher:r}=this;return r(o,t)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,i){let t=this.valueService.getValue(e,i,!0);const o=e.getColDef();if(o.getQuickFilterText){const r=this.gos.addGridCommonParams({value:t,node:i,data:i.data,column:e,colDef:o});t=o.getQuickFilterText(r)}return Fe(t)?t.toString().toUpperCase():null}getQuickFilterAggregateText(e){const i=[];return this.colsForQuickFilter.forEach(t=>{const o=this.getQuickFilterTextForColumn(t,e);Fe(o)&&i.push(o)}),i.join("\n")}}],dependantModules:[_h]},Ky={version:lt,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:function qy(e){return!!e.filterManager?.isQuickFilterPresent()},getQuickFilter:function zy(e){return e.gos.get("quickFilterText")},resetQuickFilter:function Vy(e){e.filterManager?.resetQuickFilterCache()}},dependantModules:[Pm]},Xy={version:lt,moduleName:"@ag-grid-community/filter",dependantModules:[Jy,Yy,{version:lt,moduleName:"@ag-grid-community/quick-filter",dependantModules:[Pm,Ky]},jy]},Ah=class extends Mt{constructor(e,i){super(e),this.ctrl=i}getCtrl(){return this.ctrl}},e3=class extends Ah{constructor(e){super('<div class="ag-header-cell ag-floating-filter" role="gridcell">\n            <div data-ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',e),this.eFloatingFilterBody=Ne,this.eButtonWrapper=Ne,this.eButtonShowMainFilter=Ne}postConstruct(){const e=this.getGui();this.ctrl.setComp({addOrRemoveCssClass:(t,o)=>this.addOrRemoveCssClass(t,o),addOrRemoveBodyCssClass:(t,o)=>this.eFloatingFilterBody.classList.toggle(t,o),setButtonWrapperDisplayed:t=>li(this.eButtonWrapper,t),setCompDetails:t=>this.setCompDetails(t),getFloatingFilterComp:()=>this.compPromise,setWidth:t=>e.style.width=t,setMenuIcon:t=>this.eButtonShowMainFilter.appendChild(t)},e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=e.newAgStackInstance(),this.compPromise.then(i=>this.afterCompCreated(i))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive())return void this.destroyBean(e);this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},t3=class extends Ah{constructor(e){super('<div class="ag-header-cell" role="columnheader">\n            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',e),this.eResize=Ne,this.eHeaderCompWrapper=Ne,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui();var r,s;r="col-id",null!=(s=this.column.getColId())&&""!=s?e.setAttribute(r,s):e.removeAttribute(r);const t={setWidth:r=>e.style.width=r,addOrRemoveCssClass:(r,s)=>this.addOrRemoveCssClass(r,s),setAriaSort:r=>r?function Ew(e,i){Qn(e,"sort",i)}(e,r):function Pw(e){Vu(e,"sort")}(e),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(t,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);const o=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",o)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const i=this.headerCompVersion;e.newAgStackInstance().then(t=>this.afterCompCreated(i,t))}afterCompCreated(e,i){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=i,this.headerCompGui=i.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(i)}},n3=class extends Ah{constructor(e){super('<div class="ag-header-group-cell" role="columnheader">\n            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',e),this.eResize=Ne,this.eHeaderCompWrapper=Ne}postConstruct(){const e=this.getGui();e.setAttribute("col-id",this.ctrl.getColId()),this.ctrl.setComp({addOrRemoveCssClass:(o,r)=>this.addOrRemoveCssClass(o,r),setResizableDisplayed:o=>li(this.eResize,o),setWidth:o=>e.style.width=o,setAriaExpanded:o=>((o,r)=>null!=r?e.setAttribute(o,r):e.removeAttribute(o))("aria-expanded",o),setUserCompDetails:o=>this.setUserCompDetails(o),getUserCompInstance:()=>this.headerGroupComp},e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(i=>this.afterHeaderCompCreated(i))}afterHeaderCompCreated(e){const i=()=>this.destroyBean(e);if(!this.isAlive())return void i();const t=this.getGui(),o=e.getGui();this.eHeaderCompWrapper.appendChild(o),this.addDestroyFunc(i),this.headerGroupComp=e,this.ctrl.setDragSource(t)}},r3=class extends Mt{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){Pf(this.getGui(),this.ctrl.getAriaRowIndex()),this.ctrl.setComp({setHeight:i=>this.getGui().style.height=i,setTop:i=>this.getGui().style.top=i,setHeaderCtrls:(i,t)=>this.setHeaderCtrls(i,t),setWidth:i=>this.getGui().style.width=i},void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,i){if(!this.isAlive())return;const t=this.headerComps;if(this.headerComps={},e.forEach(o=>{const r=o.instanceId;let s=t[r];delete t[r],null==s&&(s=this.createHeaderComp(o),this.getGui().appendChild(s.getGui())),this.headerComps[r]=s}),$n(t,(o,r)=>{this.getGui().removeChild(r.getGui()),this.destroyBean(r)}),i){const o=Ar(this.headerComps);o.sort((s,a)=>s.getCtrl().getColumnGroupChild().getLeft()-a.getCtrl().getColumnGroupChild().getLeft());const r=o.map(s=>s.getGui());Vf(this.getGui(),r)}}createHeaderComp(e){let i;switch(this.ctrl.getType()){case"group":i=new n3(e);break;case"filter":i=new e3(e);break;default:i=new t3(e)}return this.createBean(i),i.setParentComponent(this),i}},a3=class extends fe{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,i=>{this.gridBodyCon=i.gridBodyCtrl});const e=ki(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){return this.ctrlsService.getHeaderRowContainerCtrl()?.getRowCount()??0}getHeaderPositionForColumn(e,i){let t;if("string"==typeof e?(t=this.columnModel.getCol(e),t||(t=this.visibleColService.getColumnGroup(e))):t=e,!t)return null;const r=this.ctrlsService.getHeaderRowContainerCtrl()?.getAllCtrls(),s="filter"===Tt(r||[]).getType(),a=this.getHeaderRowCount()-1;let l=-1,c=t;for(;c;)l++,c=c.getParent();let d=l;return i&&s&&d===a-1&&d++,-1===d?null:{headerRowIndex:d,column:t}}navigateVertically(e,i,t){if(i||(i=this.focusService.getFocusedHeader()),!i)return!1;const{headerRowIndex:o}=i,r=i.column,s=this.getHeaderRowCount(),a=0===e;let{headerRowIndex:l,column:c,headerRowIndexWithoutSpan:d}=a?this.headerPositionUtils.getColumnVisibleParent(r,o):this.headerPositionUtils.getColumnVisibleChild(r,o),h=!1;return l<0&&(l=0,c=r,h=!0),l>=s?(l=-1,this.setCurrentHeaderRowWithoutSpan(-1)):void 0!==d&&(this.currentHeaderRowWithoutSpan=d),!(!h&&!c)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l,column:c},allowUserOverride:!0,event:t})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,i=!1,t){const o=this.focusService.getFocusedHeader(),r=2===e,s=this.gos.get("enableRtl");let a,l;if(-1!==this.currentHeaderRowWithoutSpan?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,r!==s?(l="Before",a=this.headerPositionUtils.findHeader(o,l)):(l="After",a=this.headerPositionUtils.findHeader(o,l)),a||!i)return this.focusService.focusHeaderPosition({headerPosition:a,direction:l,fromTab:i,allowUserOverride:!0,event:t});if(i){const c=this.gos.getCallback("tabToNextHeader");if(c)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:c,headerPosition:a,direction:l})}return this.focusNextHeaderRow(o,l,t)}focusNextHeaderRow(e,i,t){const o=e.headerRowIndex;let s,r=null;if("Before"===i?o>0&&(s=o-1,this.currentHeaderRowWithoutSpan-=1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"end")):(s=o+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),r=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"start")),!r)return!1;const{column:a,headerRowIndex:l}=this.headerPositionUtils.getHeaderIndexToFocus(r.column,r?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:a,headerRowIndex:l},direction:i,fromTab:!0,allowUserOverride:!0,event:t})}scrollToColumn(e,i="After"){if(e.getPinned())return;let t;if(Ti(e)){const o=e.getDisplayedLeafColumns();t="Before"===i?Tt(o):o[0]}else t=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(t)}},l3=class extends fe{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,i,t){this.comp=e,this.eGui=i,this.createManagedBean(new ds(t,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const o=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:o}),this.mockContextMenuForIPad(o),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let i=0;const t=this.columnModel.getGroupRowsHeight().reduce((s,a)=>s+a,0),o=this.columnModel.getColumnHeaderRowHeight();this.filterManager?.hasFloatingFilters()&&(i+=e.getFloatingFiltersHeight()),i+=t,i+=o,this.headerHeight!==i&&(this.headerHeight=i,this.comp.setHeightAndMinHeight(`${i+1}px`),this.eventService.dispatchEvent({type:"headerHeightChanged"}))}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const i=this.visibleColsService.getAllCols().some(t=>t.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",i)}onTabKeyDown(e){const i=this.gos.get("enableRtl"),t=e.shiftKey;(this.headerNavigationService.navigateHorizontally(t!==i?2:3,!0,e)||!t&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(t))&&e.preventDefault()}handleKeyDown(e){let i=null;switch(e.key){case le.LEFT:i=2;case le.RIGHT:Fe(i)||(i=3),this.headerNavigationService.navigateHorizontally(i,!1,e)&&e.preventDefault();break;case le.UP:i=0;case le.DOWN:Fe(i)||(i=1),this.headerNavigationService.navigateVertically(i,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:i}=e;!i&&this.eGui.contains(ai(this.gos))||this.eGui.contains(i)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,i,t){if(!e&&!t||!this.menuService.isHeaderContextMenuEnabled())return;const{target:o}=e??i;(o===this.eGui||o===this.ctrlsService.getHeaderRowContainerCtrl()?.getViewportElement())&&this.menuService.showHeaderContextMenu(void 0,e,t)}mockContextMenuForIPad(e){if(!Tr())return;const i=new Dr(this.eGui);this.addManagedListeners(i,{longTap:o=>{e(void 0,o.touchStart,o.touchEvent)}}),this.addDestroyFunc(()=>i.destroy())}},kh=class extends fe{constructor(e,i=!1){super(),this.callback=e,this.addSpacer=i}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=Ki(this.gos,"print"),i=this.visibleColsService.getBodyContainerWidth(),t=this.visibleColsService.getColsLeftWidth(),o=this.visibleColsService.getDisplayedColumnsRightWidth();let r;e?r=i+t+o:(r=i,this.addSpacer&&0===(this.gos.get("enableRtl")?t:o)&&this.scrollVisibleService.isVerticalScrollShowing()&&(r+=this.scrollVisibleService.getScrollbarWidth())),this.callback(r)}},c3=class extends fe{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const i=e.dragItem.columns;i&&i.forEach(t=>{t.isPrimary()&&(t.isAnyFunctionActive()||(t.isAllowValue()?this.columnsToAggregate.push(t):t.isAllowRowGroup()?this.columnsToGroup.push(t):t.isAllowPivot()&&this.columnsToPivot.push(t)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function Lm(e){const{isFromHeader:i,fromLeft:t,xPosition:o,fromEnter:r,fakeEvent:s,pinned:a,gos:l,columnModel:c,columnMoveService:d,visibleColsService:h}=e;let{allMovingColumns:g}=e;if(i){const K=[];g.forEach(ne=>{let V=null,N=ne.getParent();for(;null!=N&&1===N.getDisplayedLeafColumns().length;)V=N,N=N.getParent();null!=V?(V.getColGroupDef()?.marryChildren?V.getProvidedColumnGroup().getLeafColumns():V.getLeafColumns()).forEach(L=>{K.includes(L)||K.push(L)}):K.includes(ne)||K.push(ne)}),g=K}const m=g.slice();c.sortColsLikeCols(m);const f=function g3(e){const{movingCols:i,draggingRight:t,xPosition:o,pinned:r,gos:s,columnModel:a,visibleColsService:l}=e;if(s.get("suppressMovableColumns")||i.some(E=>E.getColDef().suppressMovable))return[];const d=function h3(e,i){switch(i){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}(l,r),h=a.getCols(),g=d.filter(E=>rs(i,E)),m=d.filter(E=>!rs(i,E)),f=h.filter(E=>!rs(i,E));let S,y=0,b=o;if(t){let E=0;g.forEach(G=>E+=G.getActualWidth()),b-=E}if(b>0){for(let E=0;E<m.length&&(b-=m[E].getActualWidth(),!(b<0));E++)y++;t&&y++}y>0?S=f.indexOf(m[y-1])+1:(S=f.indexOf(m[0]),-1===S&&(S=0));const _=[S],k=(E,G)=>E-G;if(t){let E=S+1;const G=h.length-1;for(;E<=G;)_.push(E),E++;_.sort(k)}else{let E=S;const G=h.length-1;let K=h[E];for(;E<=G&&d.indexOf(K)<0;)E++,_.push(E),K=h[E];E=S-1;const ne=0;for(;E>=ne;)_.push(E),E--;_.sort(k).reverse()}return _}({movingCols:m,draggingRight:t,xPosition:o,pinned:a,gos:l,columnModel:c,visibleColsService:h}),y=function d3(e,i){const t=i.getCols(),o=function ZC(e){return e.sort((i,t)=>i-t)}(e.map(c=>t.indexOf(c))),r=o[0];return Tt(o)-r!=o.length-1?null:r}(m,c);if(0===f.length)return;const b=f[0];let S=null!==y&&!r;if(i&&(S=null!==y),S&&!s&&(!t&&b>=y||t&&b<=y))return;const _=h.getAllCols(),k=[];let E=null;for(let K=0;K<f.length;K++){const ne=f[K],V=d.getProposedColumnOrder(m,ne);if(!d.doesOrderPassRules(V))continue;const N=V.filter(ve=>_.includes(ve));if(null===E)E=N;else if(!nr(N,E))break;const X=u3(V);k.push({move:ne,fragCount:X})}if(0===k.length)return;k.sort((K,ne)=>K.fragCount-ne.fragCount);const G=k[0].move;return G>c.getCols().length-g.length?void 0:{columns:g,toIndex:G}}function Th(e){const{columns:i,toIndex:t}=Lm(e)||{},{finished:o,columnMoveService:r}=e;return i&&null!=t?(r.moveColumns(i,t,"uiColumnMoved",o),o?null:{columns:i,toIndex:t}):null}function u3(e){function i(o){const r=[];let s=o.getOriginalParent();for(;null!=s;)r.push(s),s=s.getOriginalParent();return r}let t=0;for(let o=0;o<e.length-1;o++){let r=i(e[o]),s=i(e[o+1]);[r,s]=r.length>s.length?[r,s]:[s,r],r.forEach(a=>{-1===s.indexOf(a)&&t++})}return t}function Oc(e){const{pinned:i,fromKeyboard:t,gos:o,ctrlsService:r,useHeaderRow:s,skipScrollPadding:a}=e;let l=r.getHeaderRowContainerCtrl(i)?.getViewportElement(),{x:c}=e;return l?(t&&(c-=l.getBoundingClientRect().left),o.get("enableRtl")&&(s&&(l=l.querySelector(".ag-header-row")),c=l.clientWidth-c),null==i&&!a&&(c+=r.get("center").getCenterViewportScrollLeft()),c):0}function js(e,i){for(const t of e)t.setMoving(i,"uiColumnMoved")}var m3=class extends fe{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!Fe(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const e=this.lastDraggingEvent?.dragItem.columns??[];for(const i of e){const t=i.getPinned();if(i.getColDef().lockPinned){if(t==this.pinned)return"move"}else{if(t===this.pinned||!this.pinned)return"move";if(!t&&this.pinned)return"pinned"}}return"notAllowed"}onDragEnter(e){const i=e.dragItem.columns;if(0===e.dragSource.type)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const o=e.dragItem.visibleState,r=(i||[]).filter(s=>o[s.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,i=!1,t=!1,o=!1){const r=this.gos.get("suppressMoveWhenColumnDragging");if(o&&!r)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!o&&kt(e.hDirection))return;const{pinned:s,gos:a,ctrlsService:l}=this,c=Oc({x:e.x,pinned:s,gos:a,ctrlsService:l});i||this.checkCenterForScrolling(c),r?this.handleColumnDragWhileSuppressingMovement(e,i,t,c,o):this.handleColumnDragWhileAllowingMovement(e,i,t,c,o)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,i,t){if(!e)return;const o=e.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColsVisible(o,i,t)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:i}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,i,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,i,t,o,r){const s=this.getAllMovingColumns(e,!0);if(r){const a=this.isAttemptingToPin(s);a&&this.attemptToPinColumns(s,void 0,!0);const{fromLeft:l,xPosition:c}=this.getNormalisedXPositionInfo(s,a)||{};if(null==l||null==c)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:s,xPosition:c,fromEnter:i,fakeEvent:t,fromLeft:l})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(s,o)}}handleColumnDragWhileAllowingMovement(e,i,t,o,r){const s=this.getAllMovingColumns(e),a=1===this.normaliseDirection(e.hDirection),d=Th({...this.getMoveColumnParams({allMovingColumns:s,isFromHeader:1===e.dragSource.type,xPosition:o,fromLeft:a,fromEnter:i,fakeEvent:t}),finished:r});d&&(this.lastMovedInfo=d)}getAllMovingColumns(e,i=!1){const t=e.dragSource.getDragItem();let o=null;return i?(o=t.columnsInSplit,o||(o=t.columns)):o=t.columns,o?o.filter(s=>!s.getColDef().lockPinned||s.getPinned()==this.pinned):[]}getMoveColumnParams(e){const{allMovingColumns:i,isFromHeader:t,xPosition:o,fromLeft:r,fromEnter:s,fakeEvent:a}=e,{pinned:l,gos:c,columnModel:d,columnMoveService:h,visibleColsService:g}=this;return{allMovingColumns:i,isFromHeader:t,fromLeft:r,xPosition:o,pinned:l,fromEnter:s,fakeEvent:a,gos:c,columnModel:d,columnMoveService:h,visibleColsService:g}}findFirstAndLastMovingColumns(e){const i=e.length;let t,o;for(let r=0;r<=i;r++){if(!t){const s=e[r];null!=s.getLeft()&&(t=s)}if(!o){const s=e[i-1-r];null!=s.getLeft()&&(o=s)}if(t&&o)break}return{firstMovingCol:t,lastMovingCol:o}}highlightHoveredColumn(e,i){const{gos:t,columnModel:o}=this,r=t.get("enableRtl"),s=o.getCols().filter(h=>h.isVisible()&&h.getPinned()===this.pinned);let d,a=null,l=null,c=null;for(const h of s){if(l=h.getActualWidth(),a=this.getNormalisedColumnLeft(h,0,r),null!=a&&a<=i&&a+l>=i){c=h;break}a=null,l=null}if(c)-1!==e.indexOf(c)&&(c=null);else{for(let h=s.length-1;h>=0;h--){const g=s[h],m=s[h].getParent();if(!m){c=g;break}const f=m?.getDisplayedLeafColumns();if(f.length){c=Tt(f);break}}if(!c)return;a=this.getNormalisedColumnLeft(c,0,r),l=c.getActualWidth()}this.lastHighlightedColumn?.column!==c&&this.clearHighlighted(),null!=c&&null!=a&&null!=l&&(d=i-a<l/2!==r?0:1,c.setHighlighted(d),this.lastHighlightedColumn={column:c,position:d})}getNormalisedXPositionInfo(e,i){const{gos:t,visibleColsService:o}=this,r=t.get("enableRtl"),{firstMovingCol:s,column:a,position:l}=this.getColumnMoveAndTargetInfo(e,i,r);if(!s||!a||null==l)return;const c=o.getAllCols(),d=c.indexOf(s),h=c.indexOf(a),g=0===l!==r,m=d<h||d===h&&!g;let f=0;if(g?m&&(f-=1):m||(f+=1),h+f===d)return;const y=c[h+f];return y?{fromLeft:m,xPosition:this.getNormalisedColumnLeft(y,20,r)}:void 0}getColumnMoveAndTargetInfo(e,i,t){const o=this.lastHighlightedColumn||{},{firstMovingCol:r,lastMovingCol:s}=this.findFirstAndLastMovingColumns(e);if(!r||!s||o.column||!i)return{firstMovingCol:r,...o};const l="left"===this.getPinDirection();return{firstMovingCol:r,position:l?1:0,column:l!==t?r:s}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,i,t){const{gos:o,ctrlsService:r}=this,s=e.getLeft();if(null==s)return null;const a=e.getActualWidth();return Oc({x:t?s+a-i:s+i,pinned:e.getPinned(),useHeaderRow:t,skipScrollPadding:!0,gos:o,ctrlsService:r})}isAttemptingToPin(e){return(this.needToMoveLeft||this.needToMoveRight)&&this.failedMoveAttempts>7||e.some(o=>o.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:i,xPosition:t,fromEnter:o,fakeEvent:r,fromLeft:s}=e,a=this.getMoveColumnParams({allMovingColumns:i,isFromHeader:!0,xPosition:t,fromLeft:s,fromEnter:o,fakeEvent:r}),{columns:l,toIndex:c}=Lm(a)||{};l&&null!=c&&(this.lastMovedInfo={columns:l,toIndex:c}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const i=this.ctrlsService.get("center"),t=i.getCenterViewportScrollLeft(),o=t+i.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<t+50,this.needToMoveLeft=e>o-50):(this.needToMoveLeft=e<t+50,this.needToMoveRight=e>o-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let i=null;const t=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?i=t.scrollHorizontally(-e):this.needToMoveRight&&(i=t.scrollHorizontally(e)),0!==i)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=8)return;if(this.dragAndDropService.getDragAndDropImageComponent()?.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const o=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(o,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,i,t=!1){const o=(e||[]).filter(r=>!r.getColDef().lockPinned);return o.length?(t&&(i=this.getPinDirection()),this.columnModel.setColsPinned(o,i,"uiColumnDragged"),t&&this.dragAndDropService.nudge(),o.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},v3=class extends fe{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,i){super(),this.pinned=e,this.eContainer=i}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]]}}),this.moveColumnFeature=this.createManagedBean(new m3(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new c3(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},C3=class extends fe{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,i,t,o,r){super(),this.pinned=e,this.column=i,this.eResize=t,this.comp=o,this.ctrl=r}postConstruct(){const e=[];let i,t;const o=()=>{if(li(this.eResize,i),!i)return;const a=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(a),t){const l=this.gos.get("skipHeaderOnAutoSize"),c=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",l)};this.eResize.addEventListener("dblclick",c);const d=new Dr(this.eResize);d.addEventListener("doubleTap",c),e.push(()=>{this.eResize.removeEventListener("dblclick",c),d.removeEventListener("doubleTap",c),d.destroy()})}},r=()=>{e.forEach(a=>a()),e.length=0},s=()=>{const a=this.column.isResizable(),l=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(a!==i||l!==t)&&(i=a,t=l,r(),o())};s(),this.addDestroyFunc(r),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,i){const{column:t,lastResizeAmount:o,resizeStartWidth:r}=this,s=this.normaliseResizeAmount(i),l=[{key:t,newWidth:r+s}];this.column.getPinned()&&this.pinnedWidthService.getPinnedLeftWidth()+this.pinnedWidthService.getPinnedRightWidth()+(s-o)>rl(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50||(this.lastResizeAmount=s,this.columnSizeService.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1))}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let i=e;const t="left"!==this.pinned,o="right"===this.pinned;return this.gos.get("enableRtl")?t&&(i*=-1):o&&(i*=-1),i}},w3=class extends fe{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){const e=i=>{i&&"string"!=typeof i&&(this.selectionOptions=i)};e(this.gos.get("rowSelection")),this.addManagedPropertyListener("rowSelection",i=>e(i.currentValue))}onSpaceKeyDown(e){const i=this.cbSelectAll;i.isDisplayed()&&!i.getGui().contains(ai(this.gos))&&(e.preventDefault(),i.setValue(!i.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new Rc),this.cbSelectAll.addCssClass("ag-header-select-all"),Dn(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),Uu(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const i=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!i),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),o=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.headerCellCtrl.setAriaDescriptionProperty("selectAll",this.cbSelectAllVisible?`${o} (${t})`:null),this.cbSelectAll.setInputAriaLabel(`${o} (${t})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return!!Mu(this.gos)||(pe(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return!(!gi(this.gos)&&!ir(this.gos)&&(pe(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),1))}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),i=this.isFilteredOnly(),t=this.isCurrentPageOnly();let o="uiSelectAll";t?o="uiSelectAllCurrentPage":i&&(o="uiSelectAllFiltered");const r={source:o,justFiltered:i,justCurrentPage:t};e?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){const e=this.selectionOptions,i=e&&mc(e)&&Hs(this.column),t=this.column.getColDef().headerCheckboxSelection;let o=!1;return o=!!i||("function"==typeof t?t(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):!!t),o&&this.checkRightRowModelType(i?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(i?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.selectionOptions;return void 0!==e?"multiRow"===e.mode&&"filtered"===e.selectAll:!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.selectionOptions;return void 0!==e?"multiRow"===e.mode&&"currentPage"===e.selectAll:!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},y3=class extends Lc{constructor(e,i,t){super(e,i,t),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,i,t,o,r){this.comp=e,r=il(this,this.beans.context,r),this.setGui(i,r),this.updateState(),this.setupWidth(r),this.setupMovingCss(r),this.setupMenuClass(r),this.setupSortableClass(r),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:o,checkMeasuringCallback:a=>this.setRefreshFunction("measuring",a),compBean:r}),this.addColumnHoverListener(r),this.setupFilterClass(r),this.setupClassesFromColDef(),this.setupTooltip(r),this.addActiveHeaderMouseListeners(r),this.setupSelectAll(r),this.setupUserComp(r),this.refreshAria(),this.resizeFeature=r.createManagedBean(new C3(this.getPinned(),this.column,t,e,this)),r.createManagedBean(new Sh([this.column],i)),r.createManagedBean(new bh(this.column,i,this.beans)),r.createManagedBean(new ds(i,{shouldStopEventPropagation:a=>this.shouldStopEventPropagation(a),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(r),r.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(r)),r.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(r)}),r.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const s=()=>this.checkDisplayName(r);r.addManagedEventListeners({columnValueChanged:s,columnRowGroupChanged:s,columnPivotChanged:s,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),r.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,i){if(!this.column.isResizable())return;const t=this.column.getActualWidth(),o=this.column.getMinWidth(),r=this.column.getMaxWidth(),s=Math.min(Math.max(t+e,o),r);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:s}],i,!0,"uiColumnResized")}moveHeader(e){const{eGui:i,beans:t,column:o,ctrlsService:r}=this,{gos:s,columnModel:a,columnMoveService:l,visibleColsService:c}=t,d=this.getPinned(),h=i.getBoundingClientRect().left,g=o.getActualWidth(),y=Oc({x:0===e!==s.get("enableRtl")?h-20:h+g+20,pinned:d,fromKeyboard:!0,gos:s,ctrlsService:r}),b=this.focusService.getFocusedHeader();Th({allMovingColumns:[o],isFromHeader:!0,fromLeft:1===e,xPosition:y,pinned:d,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:a,columnMoveService:l,visibleColsService:c,finished:!0}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&b&&this.restoreFocus(b)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const i=this.lookupUserCompDetails(e);this.setCompDetails(i)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const i=this.createParams(e),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,i)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,o)=>{this.beans.sortController.setSortForColumn(this.column,t,!!o,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,o)=>{this.setupTooltip(e,t,o)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new w3(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===le.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===le.ENTER&&this.onEnterKeyDown(e),e.key===le.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortController.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,i){const t=this.comp.getUserCompInstance();!t||!(t instanceof dh)||t.onMenuKeyboardShortcut(i)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const i=this.getRowIndex();this.focusService.setFocusedHeader(i,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,i,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const o="whenTruncated"===this.gos.get("tooltipShowMode"),r=this.eGui,s=this.column.getColDef();!t&&o&&!s.headerComponent&&(t=()=>{const c=r.querySelector(".ag-header-cell-text");return!c||c.scrollWidth>c.clientWidth});const l=e.createManagedBean(new Us({getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>i??this.column.getColDef().headerTooltip,shouldDisplayTooltip:t}));this.setRefreshFunction("tooltip",()=>l.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=xm(this.column.getColDef(),this.gos,this.column,null),o=this.userHeaderClasses;this.userHeaderClasses=new Set(t),t.forEach(r=>{o.has(r)?o.delete(r):this.comp.addOrRemoveCssClass(r,!0)}),o.forEach(r=>this.comp.addOrRemoveCssClass(r,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:i,beans:t,displayName:o,dragAndDropService:r,gos:s}=this,{columnModel:a}=t;let l=!this.gos.get("suppressDragLeaveHidesColumns");const c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",getDragItem:()=>this.createDragItem(i),dragItemName:o,onDragStarted:()=>{l=!s.get("suppressDragLeaveHidesColumns"),js([i],!0)},onDragStopped:()=>js([i],!1),onDragCancelled:()=>js([i],!1),onGridEnter:d=>{if(l){const h=d?.columns?.filter(g=>!g.getColDef().lockVisible)||[];a.setColsVisible(h,!0,"uiColumnMoved")}},onGridExit:d=>{if(l){const h=d?.columns?.filter(g=>!g.getColDef().lockVisible)||[];a.setColsVisible(h,!1,"uiColumnMoved")}}};r.addDragSource(c,!0)}createDragItem(e){const i={};return i[e.getId()]=e.isVisible(),{columns:[e],visibleState:i}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,i){this.refreshFunctions[e]=i}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(i=>i())}refreshHeaderComp(e){const i=this.lookupUserCompDetails(e);null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==i.componentClass&&this.attemptHeaderCompRefresh(i.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(i)}attemptHeaderCompRefresh(e){const i=this.comp.getUserCompInstance();return!(!i||!i.refresh)&&i.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!(this.gos.get("suppressMovableColumns")||e.suppressMovable||e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const i=()=>{const t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};e.addManagedListeners(this.column,{widthChanged:i}),i()}setupMovingCss(e){const i=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:i}),i()}setupMenuClass(e){const i=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:i}),i()}setupSortableClass(e){const i=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};i(),this.setRefreshFunction("updateSortable",i),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const i=()=>{const t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:i}),i()}setupWrapTextClass(){const e=()=>{const i=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",i)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=1===e;this.comp.addOrRemoveCssClass("ag-header-highlight-before",0===e),this.comp.addOrRemoveCssClass("ag-header-highlight-after",t)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:i,comp:t,beans:o}=this;if(!i.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),t.addOrRemoveCssClass("ag-header-span-height",!1),void t.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:r,isSpanningTotal:s}=this.column.getColumnGroupPaddingInfo();t.addOrRemoveCssClass("ag-header-span-height",r>0);const{columnModel:a}=o,l=a.getColumnHeaderRowHeight();if(0===r)return t.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height",`${l}px`);t.addOrRemoveCssClass("ag-header-span-total",s);const c=this.beans.columnModel.getGroupRowsHeight();let d=0;for(let h=0;h<r;h++)d+=c[c.length-1-h];e.style.setProperty("top",-d+"px"),e.style.setProperty("height",`${l+d}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),i=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(function bw(e){let i;return i="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",i}(i)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,i){null!=i?this.ariaDescriptionProperties.set(e,i):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(ai(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((i,t)=>"filter"===i?-1:t.charCodeAt(0)-i.charCodeAt(0)).map(i=>this.ariaDescriptionProperties.get(i)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const i=()=>{if(!this.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};e.addManagedEventListeners({columnHoverChanged:i}),i()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const i=r=>this.handleMouseOverChange("mouseenter"===r.type);e.addManagedListeners(this.getGui(),{mouseenter:i,mouseleave:i,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),contextmenu:r=>this.handleContextMenuMouseEvent(r,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const i=this.comp.getUserCompInstance();return i instanceof dh?i.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},b3=class extends fe{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,i,t,o){super(),this.eResize=i,this.comp=e,this.pinned=t,this.columnGroup=o}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const i=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const t=[];this.columnGroup.getDisplayedLeafColumns().forEach(r=>{r.getColDef().suppressAutoSize||t.push(r.getColId())}),t.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const i=this.getInitialValues(e);this.storeLocalValues(i),this.toggleColumnResizing(!0)}onResizing(e,i,t="uiColumnResized"){const o=this.normaliseDragChange(i);this.resizeColumnsFromLocalValues(this.resizeStartWidth+o,t,e)}getInitialValues(e){const i=this.getColumnsToResize(),t=this.getInitialSizeOfColumns(i),r={columnsToResize:i,resizeStartWidth:t,resizeRatios:this.getSizeRatiosOfColumns(i,t)};let s=null;if(e&&(s=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),s){const a=s.getDisplayedLeafColumns(),l=r.groupAfterColumns=a.filter(d=>d.isResizable()),c=r.groupAfterStartWidth=this.getInitialSizeOfColumns(l);r.groupAfterRatios=this.getSizeRatiosOfColumns(l,c)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}storeLocalValues(e){const{columnsToResize:i,resizeStartWidth:t,resizeRatios:o,groupAfterColumns:r,groupAfterStartWidth:s,groupAfterRatios:a}=e;this.resizeCols=i,this.resizeStartWidth=t,this.resizeRatios=o,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=a}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const i=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),t=this.getInitialValues();i>t.resizeStartWidth&&this.resizeColumns(t,i,e,!0)}resizeColumnsFromLocalValues(e,i,t=!0){this.resizeCols&&this.resizeRatios&&this.resizeColumns({columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0},e,i,t)}resizeColumns(e,i,t,o=!0){const{columnsToResize:r,resizeStartWidth:s,resizeRatios:a,groupAfterColumns:l,groupAfterStartWidth:c,groupAfterRatios:d}=e,h=[];h.push({columns:r,ratios:a,width:i}),l&&h.push({columns:l,ratios:d,width:c-(i-s)}),this.columnSizeService.resizeColumnSets({resizeSets:h,finished:o,source:t}),o&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(i=>i.isResizable())}getInitialSizeOfColumns(e){return e.reduce((i,t)=>i+t.getActualWidth(),0)}getSizeRatiosOfColumns(e,i){return e.map(t=>t.getActualWidth()/i)}normaliseDragChange(e){let i=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(i*=-1):"right"===this.pinned&&(i*=-1),i}destroy(){super.destroy(),this.clearLocalValues()}},S3=class extends fe{constructor(e,i){super(),this.removeChildListenersFuncs=[],this.columnGroup=i,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(i=>{i.addEventListener("widthChanged",e),i.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{i.removeEventListener("widthChanged",e),i.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}},_3=class extends Lc{constructor(e,i,t){super(e,i,t),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const o=this.getGui();this.setDragSource(o)}},this.column=e}setComp(e,i,t,o,r){this.comp=e,r=il(this,this.beans.context,r),this.setGui(i,r),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(r),this.setupExpandable(r),this.setupTooltip(r),this.setupAutoHeight({wrapperElement:o,compBean:r}),this.setupUserComp(r),this.addHeaderMouseListeners(r);const s=this.getParentRowCtrl().getPinned(),a=this.column.getProvidedColumnGroup().getLeafColumns();r.createManagedBean(new Sh(a,i)),r.createManagedBean(new bh(this.column,i,this.beans)),r.createManagedBean(new S3(e,this.column)),this.resizeFeature=r.createManagedBean(new b3(e,t,s,this.column)),r.createManagedBean(new ds(i,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(r,a),r.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(r),r.addDestroyFunc(()=>this.clearComponent())}addHighlightListeners(e,i){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const t of i)e.addManagedListeners(t,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,t)})}onLeafColumnHighlightChanged(e){const i=this.column.getDisplayedLeafColumns(),t=i[0]===e,o=Tt(i)===e;if(!t&&!o)return;const r=e.getHighlighted();let a=!1,l=!1;if(this.getParentRowCtrl().findHeaderCellCtrl(c=>c.getColumnGroupChild().isMoving())){const c=this.beans.gos.get("enableRtl"),d=1===r,h=0===r;t&&(c?l=d:a=h),o&&(c?a=h:l=d)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",a),this.comp.addOrRemoveCssClass("ag-header-highlight-after",l)}getColumn(){return this.column}resizeHeader(e,i){if(!this.resizeFeature)return;const t=this.resizeFeature.getInitialValues(i);this.resizeFeature.resizeColumns(t,t.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:i,eGui:t,column:o,ctrlsService:r}=this,{gos:s,columnModel:a,columnMoveService:l,visibleColsService:c}=i,d=s.get("enableRtl"),h=0===e,g=this.getPinned(),m=t.getBoundingClientRect(),f=m.left,b=Oc({x:h!==d?f-20:f+m.width+20,pinned:g,fromKeyboard:!0,gos:s,ctrlsService:r}),S=o.getGroupId(),_=this.focusService.getFocusedHeader();Th({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:1===e,xPosition:b,pinned:g,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:a,columnMoveService:l,visibleColsService:c,finished:!0});const k=o.getDisplayedLeafColumns(),E=h?k[0]:Tt(k);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(E,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&_&&this.restoreFocus(S,o,_)}restoreFocus(e,i,t){const o=i.getLeafColumns();if(!o.length)return;const r=o[0].getParent();if(!r)return;const s=this.findGroupWidthId(r,e);s&&this.focusService.focusHeaderPosition({headerPosition:{...t,column:s}})}findGroupWidthId(e,i){for(;e;){if(e.getGroupId()===i)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const i=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:o=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),o,"gridInitializing")},setTooltip:(o,r)=>{this.setupTooltip(e,o,r)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(i);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(e){const i=r=>this.handleMouseOverChange("mouseenter"===r.type);e.addManagedListeners(this.getGui(),{mouseenter:i,mouseleave:i,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:r=>this.handleContextMenuMouseEvent(r,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,i,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const o=this.column.getColGroupDef(),r="whenTruncated"===this.gos.get("tooltipShowMode"),s=this.eGui;!t&&r&&!o?.headerGroupComponent&&(t=()=>{const l=s.querySelector(".ag-header-group-text");return!l||l.scrollWidth>l.clientWidth});const a={getColumn:()=>this.column,getGui:()=>s,getLocation:()=>"headerGroup",getTooltipValue:()=>i??(o&&o.headerTooltip),shouldDisplayTooltip:t};o&&(a.getColDef=()=>o),e.createManagedBean(new Us(a))}setupExpandable(e){const i=this.column.getProvidedColumnGroup();this.refreshExpanded();const t=this.refreshExpanded.bind(this);e.addManagedListeners(i,{expandedChanged:t,expandableChanged:t})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const i=e.isExpanded();this.comp.setAriaExpanded(this.expandable?i?"true":"false":void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),i=xm(e,this.gos,null,this.column);this.column.isPadding()?(i.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(o=>o.isSpanHeaderHeight())&&i.push("ag-header-span-height")):(i.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&i.push("ag-header-cell-wrap-text")),i.forEach(t=>this.comp.addOrRemoveCssClass(t,!0))}setupMovingCss(e){const t=this.column.getProvidedColumnGroup().getLeafColumns(),o=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(r=>{e.addManagedListeners(r,{movingChanged:o})}),o()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const i=this.getRowIndex();this.beans.focusService.setFocusedHeader(i,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const i=this.getWrapperHasFocus();if(this.expandable&&i&&e.key===le.ENTER){const t=this.column,o=!t.isExpanded();this.beans.columnModel.setColumnGroupOpened(t.getProvidedColumnGroup(),o,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:i,column:t,displayName:o,gos:r,dragAndDropService:s}=this,{columnModel:a}=i,l=t.getProvidedColumnGroup().getLeafColumns();let c=!r.get("suppressDragLeaveHidesColumns");const d=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>c?"hide":"notAllowed",dragItemName:o,getDragItem:()=>this.getDragItemForGroup(t),onDragStarted:()=>{c=!r.get("suppressDragLeaveHidesColumns"),js(l,!0)},onDragStopped:()=>js(l,!1),onDragCancelled:()=>js(l,!1),onGridEnter:h=>{if(c){const{columns:g=[],visibleState:m}=h??{},f=g.filter(y=>!y.getColDef().lockVisible&&(!m||m[y.getColId()]));a.setColsVisible(f,!0,"uiColumnMoved")}},onGridExit:h=>{if(c){const g=h?.columns?.filter(m=>!m.getColDef().lockVisible)||[];a.setColsVisible(g,!1,"uiColumnMoved")}}};s.addDragSource(d,!0)}getDragItemForGroup(e){const i=e.getProvidedColumnGroup().getLeafColumns(),t={};i.forEach(a=>t[a.getId()]=a.isVisible());const o=[];this.beans.visibleColsService.getAllCols().forEach(a=>{i.indexOf(a)>=0&&(o.push(a),mn(i,a))}),i.forEach(a=>o.push(a));const r=[],s=e.getLeafColumns();for(const a of o)-1!==s.indexOf(a)&&r.push(a);return{columns:o,columnsInSplit:r,visibleState:t}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(t=>{(t.getColDef().suppressMovable||t.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},x3=0,Fh=class extends fe{constructor(e,i,t){super(),this.instanceId=x3++,this.rowIndex=e,this.pinned=i,this.type=t,this.headerRowClass="ag-header-row "+("group"==t?"ag-header-row-column-group":"filter"==t?"ag-header-row-column-filter":"ag-header-row-column")}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=Ki(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.getHeaderCellCtrls().every(e=>null!=e.getGui())}setComp(e,i,t=!0){this.comp=e,i=il(this,this.beans.context,i),t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(i)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const i=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:t=>this.onVirtualColumnsChanged(t.afterScroll),columnGroupHeaderHeightChanged:i,columnHeaderHeightChanged:i,gridStylesChanged:i,advancedFilterEnabledChanged:i}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",t=>this.isEnsureDomOrder=t.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],i)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return uc(this.headerCellCtrls).find(i=>i.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=Ki(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;return this.isPrintLayout?null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:i}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(i+"px")}getTopAndHeight(){const{columnModel:e,filterManager:i}=this.beans,t=[],o=e.getGroupRowsHeight(),r=e.getColumnHeaderRowHeight();t.push(...o),t.push(r),i?.hasFloatingFilters()&&t.push(e.getFloatingFiltersHeight());let s=0;for(let l=0;l<this.rowIndex;l++)s+=t[l];return{topOffset:s,rowHeight:t[this.rowIndex]}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const i=this.getHeaderCtrls();this.comp.setHeaderCtrls(i,this.isEnsureDomOrder||this.isPrintLayout,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const i=this.getColumnsInViewport();for(const o of i)this.recycleAndCreateHeaderCtrls(o,e);const t=o=>{const{focusService:r,visibleColsService:s}=this.beans;return!!r.isHeaderWrapperFocused(o)&&s.isVisible(o.getColumnGroupChild())};if(e)for(const[o,r]of e)t(r)?this.headerCellCtrls.set(o,r):this.destroyBean(r);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,i){if(!this.headerCellCtrls||e.isEmptyGroup())return;const t=e.getUniqueId();let o;if(i&&(o=i.get(t),i.delete(t)),o&&o.getColumnGroupChild()!=e&&(this.destroyBean(o),o=void 0),null==o)switch(this.type){case"filter":o=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break;case"group":o=this.createBean(new _3(e,this.beans,this));break;default:o=this.createBean(new y3(e,this.beans,this))}this.headerCellCtrls.set(t,o)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const i=this.getActualDepth(),{columnViewportService:t}=this.beans;return["left",null,"right"].forEach(o=>{const r=t.getHeadersToRender(o,i);e=e.concat(r)}),e}getActualDepth(){return"filter"==this.type?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;let t;return t=this.getHeaderCellCtrls().find("function"==typeof e?e:o=>o.getColumnGroupChild()==e),t}focusHeader(e,i){const t=this.findHeaderCellCtrl(e);return!!t&&t.focus(i)}destroy(){this.headerCellCtrls?.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},A3=class extends fe{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,i){this.comp=e,this.eViewport=i,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const t=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:t,advancedFilterEnabledChanged:t}),this.ctrlsService.register(`${"string"==typeof this.pinned?this.pinned:"center"}Header`,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const i=new Vs,t=this.focusService.getFocusHeaderToUseAfterRefresh();(()=>{const l=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let c=0;c<l;c++){const d=this.createBean(new Fh(i.next(),this.pinned,"group"));this.groupsRowCtrls.push(d)}})(),(()=>{const l=i.next(),c=!(this.hidden||null!=this.columnsRowCtrl&&e&&this.columnsRowCtrl.getRowIndex()===l);(c||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),c&&(this.columnsRowCtrl=this.createBean(new Fh(l,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;const l=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void l();const c=i.next();if(this.filtersRowCtrl){const d=this.filtersRowCtrl.getRowIndex()!==c;(!e||d)&&l()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Fh(c,this.pinned,"filter")))})();const a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(t)}getHeaderCtrlForColumn(e){if(kr(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(0!==this.groupsRowCtrls.length)for(let i=0;i<this.groupsRowCtrls.length;i++){const t=this.groupsRowCtrls[i].getHeaderCellCtrl(e);if(t)return t}}getHtmlElementForColumnHeader(e){const i=this.getHeaderCtrlForColumn(e);return i?i.getGui():null}getRowType(e){const t=this.getAllCtrls()[e];return t?t.getType():void 0}focusHeader(e,i,t){const r=this.getAllCtrls()[e];return!!r&&r.focusHeader(i,t)}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const i=new v3(this.pinned,e);this.createManagedBean(i)}restoreFocusOnHeader(e){if(!e)return;const{column:i}=e;i.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new kh(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(null==this.pinned)return;const e="left"===this.pinned,i="right"===this.pinned;this.hidden=!0;const t=()=>{const o=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(null==o)return;const r=0==o,s=this.hidden!==r,a=this.gos.get("enableRtl"),l=this.scrollVisibleService.getScrollbarWidth(),d=this.scrollVisibleService.isVerticalScrollShowing()&&(a&&e||!a&&i)?o+l:o;this.comp.setPinnedContainerWidth(`${d}px`),this.comp.setDisplayed(!r),s&&(this.hidden=r,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:t,rightPinnedWidthChanged:t,scrollVisibilityChanged:t,scrollbarWidthChanged:t})}},Rh=class extends Mt{constructor(e){super(),this.eCenterContainer=Ne,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:t=>this.setDisplayed(t),setCtrls:t=>this.setCtrls(t),setCenterWidth:t=>this.eCenterContainer.style.width=t,setViewportScrollLeft:t=>this.getGui().scrollLeft=t,setPinnedContainerWidth:t=>{const o=this.getGui();o.style.width=t,o.style.maxWidth=t,o.style.minWidth=t}};this.createManagedBean(new A3(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){this.setTemplate("left"==this.pinned?'<div class="ag-pinned-left-header" role="rowgroup"></div>':"right"==this.pinned?'<div class="ag-pinned-right-header" role="rowgroup"></div>':'<div class="ag-header-viewport" role="presentation">\n        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>\n    </div>'),this.eRowContainer=this.eCenterContainer!==Ne?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const i=this.headerRowComps;let t;this.headerRowComps={},this.rowCompsList=[];const o=r=>{const s=r.getGui();s.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(s),t&&zf(this.eRowContainer,s,t),t=s};e.forEach(r=>{const s=r.instanceId,a=i[s];delete i[s];const l=a||this.createBean(new r3(r));this.headerRowComps[s]=l,this.rowCompsList.push(l),o(l)}),Ar(i).forEach(r=>this.destroyRowComp(r))}},R3={selector:"AG-HEADER-ROOT",component:class extends Mt{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){const e={addOrRemoveCssClass:(o,r)=>this.addOrRemoveCssClass(o,r),setHeightAndMinHeight:o=>{this.getGui().style.height=o,this.getGui().style.minHeight=o}};this.createManagedBean(new l3).setComp(e,this.getGui(),this.getFocusableElement());const t=o=>{this.createManagedBean(o),this.appendChild(o)};t(new Rh("left")),t(new Rh(null)),t(new Rh("right"))}}},Mh=class extends fe{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),i={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e};this.view.updateLayoutClasses(i.autoHeight?"ag-layout-auto-height":i.print?"ag-layout-print":"ag-layout-normal",i)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return-1===["normal","print","autoHeight"].indexOf(e)?(pe(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},P3={selector:"AG-OVERLAY-WRAPPER",component:class extends Mt{constructor(){super('\n            <div class="ag-overlay" role="presentation">\n                <div class="ag-overlay-panel" role="presentation">\n                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>\n                </div>\n            </div>'),this.eOverlayWrapper=Ne,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==le.TAB||e.defaultPrevented||or(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let t=!1;t=e.shiftKey?this.focusService.focusGridView(Tt(this.visibleColsService.getAllCols()),!0,!1):this.focusService.focusNextGridCoreContainer(!1),t&&e.preventDefault()}updateLayoutClasses(e,i){const t=this.eOverlayWrapper.classList;t.toggle("ag-layout-auto-height",i.autoHeight),t.toggle("ag-layout-normal",i.normal),t.toggle("ag-layout-print",i.print)}postConstruct(){this.createManagedBean(new Mh(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const i=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&i.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,i.toggle(e,!0)}showOverlay(e,i,t,o){if(this.setWrapperTypeClass(i),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),t&&this.focusService.isGridFocused()){const r=ai(this.gos);r&&!df(this.gos)&&(this.elToFocusAfter=r)}e.then(r=>{if(this.activePromise!==e)return void(this.activeOverlay!==r&&(this.destroyBean(r),r=null));if(this.activePromise=null,!r)return;if(this.activeOverlay!==r&&(this.eOverlayWrapper.appendChild(r.getGui()),this.activeOverlay=r,o)){const a=r;this.updateListenerDestroyFunc=this.addManagedPropertyListener(o,({currentValue:l})=>{a.refresh?.(this.gos.addGridCommonParams({...l??{}}))})}const s=this.focusService;t&&s.isGridFocused()&&s.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let i=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,i&&!this.focusService.isGridFocused()&&(i=null);const t=this.updateListenerDestroyFunc;t&&(t(),this.updateListenerDestroyFunc=null),this.destroyBean(e),sn(this.eOverlayWrapper),i?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}}},Om=class extends Mt{constructor(e,i){super(),this.direction=i,this.eViewport=Ne,this.eContainer=Ne,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Of()||Tr())}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=Bf(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:i,mousedown:i,touchstart:i,mouseleave:t,touchend:t})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(null!==this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){const i=this.getViewportElement();!function Ya(e,i,t=100,o){const r=(new Date).getTime();let s=null,a=!1;const l=()=>{const c=(new Date).getTime()-r>t;(e()||c)&&(i(),a=!0,null!=s&&(window.clearInterval(s),s=null),c&&o&&pe(o))};l(),a||(s=window.setInterval(l,10))}(()=>mo(i),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},I3={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:class extends Om{constructor(){super('<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>\n        </div>',"horizontal"),this.eLeftSpacer=Ne,this.eRightSpacer=Ne}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new kh(i=>this.eContainer.style.width=`${i}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let i=this.visibleColsService.getDisplayedColumnsRightWidth();const t=!this.enableRtl&&e,o=this.scrollVisibleService.getScrollbarWidth();t&&(i+=o),vo(this.eRightSpacer,i),this.eRightSpacer.classList.toggle("ag-scroller-corner",i<=o);let r=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(r+=o),vo(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=o)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),i=this.invisibleScrollbar,t=this.gos.get("suppressHorizontalScroll"),o=e&&this.scrollVisibleService.getScrollbarWidth()||0,s=t?0:0===o&&i?16:o;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),al(this.getGui(),s),al(this.eViewport,s),al(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return Tc(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){mo(this.getViewportElement())||this.attemptSettingScrollPosition(e),Dc(this.getViewportElement(),e,this.enableRtl)}}},Nm=class extends fe{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,i){super(),this.eContainer=e,this.eViewport=i}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),i=null!=e?`${e}px`:"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}},N3={selector:"AG-FAKE-VERTICAL-SCROLL",component:class extends Om{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super('<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>\n            </div>\n        </div>',"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Nm(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),i=this.invisibleScrollbar,t=e&&this.scrollVisibleService.getScrollbarWidth()||0,o=0===t&&i?16:t;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),vo(this.getGui(),o),vo(this.eViewport,o),vo(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,t=e.getGridBodyCtrl().getBodyViewportElement(),o=this.getScrollPosition(),r=t.scrollTop;o!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,i){!i&&!mo(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}}},Eh=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(Eh||{}),B3=class extends fe{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=hi(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=hi(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(Eh)){const i=this.ctrlsService.get(e);this.registerScrollPartner(i,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),i=this.gos.get("debounceVerticalScrollbar"),t=i?hi(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),o=i?hi(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:t}),this.registerScrollPartner(e,o)}registerScrollPartner(e,i){e.onScrollCallback(i)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null!=this.centerRowsCtrl&&(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const i of[...Object.values(Eh),"Viewport"])this.lastScrollSource[1]!==i&&Dc(this.getViewportForSource(i),e,this.enableRtl)}getViewportForSource(e){return"Viewport"===e?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,i){return null==this.lastScrollSource[i]?(0===i?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[i]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const i=this.centerRowsCtrl.getViewportElement(),{scrollLeft:t}=i;if(this.shouldBlockScrollUpdate(1,t,!0))return;const o=Tc(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(Math.round(o)),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let i;i="Viewport"===e?this.eBodyViewport.scrollTop:this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,i,!0)&&(this.animationFrameService.setScrollTop(i),this.nextScrollTop=i,"Viewport"===e?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(i):this.eBodyViewport.scrollTop=i,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const i=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===i||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const i={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(i),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent({...i,type:"bodyScrollEnd"})},100)}shouldBlockScrollUpdate(e,i,t=!1){return!(t&&!Tr())&&(0===e?this.shouldBlockVerticalScroll(i):this.shouldBlockHorizontalScroll(i))}shouldBlockVerticalScroll(e){const i=sh(this.eBodyViewport),{scrollHeight:t}=this.eBodyViewport;return e<0||e+i>t}shouldBlockHorizontalScroll(e){const i=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:t}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&kc()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+i>t}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,i=!1){const o=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!i&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl&&kc()?e>0?0:o:Math.min(Math.max(e,0),o)),Dc(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const i=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(i+e),this.centerRowsCtrl.getViewportElement().scrollLeft-i}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,i=null){const t=this.rowModel.getRowCount();let o=-1;for(let r=0;r<t;r++){const s=this.rowModel.getRow(r);if("function"==typeof e){if(s&&e(s)){o=r;break}}else if(e===s||e===s.data){o=r;break}}o>=0&&this.ensureIndexVisible(o,i)}ensureIndexVisible(e,i){if(Ki(this.gos,"print"))return;const t=this.rowModel.getRowCount();if("number"!=typeof e||e<0||e>=t)return void pe("Invalid row index for ensureIndexVisible: "+e);const r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{r||this.paginationService?.goToPageWithIndex(e);const s=this.ctrlsService.getGridBodyCtrl(),a=s.getStickyTopHeight(),l=s.getStickyBottomHeight(),c=this.rowModel.getRow(e);let d;do{const h=c.rowTop,g=c.rowHeight,m=this.pageBoundsService.getPixelOffset(),f=c.rowTop-m,y=f+c.rowHeight,b=this.getVScrollPosition(),S=this.heightScaler.getDivStretchOffset(),_=b.top+S,k=b.bottom+S,E=k-_,G=this.heightScaler.getScrollPositionForPixel(f),K=this.heightScaler.getScrollPositionForPixel(y-E),ne=Math.min((G+K)/2,f);let X=null;"top"===i?X=G:"bottom"===i?X=K:"middle"===i?X=ne:_+a>f?X=G-a:k-l<y&&(X=K+l),null!==X&&(this.setVerticalScrollPosition(X),this.rowRenderer.redraw({afterScroll:!0})),d=h!==c.rowTop||g!==c.rowHeight}while(d);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,i="auto"){const t=this.columnModel.getCol(e);if(!t||t.isPinned()||!this.visibleColsService.isColDisplayed(t))return;const o=this.getPositionedHorizontalScroll(t,i);this.getFrameworkOverrides().wrapIncoming(()=>{null!==o&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,i){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,i){const{columnBeforeStart:t,columnAfterEnd:o}=this.isColumnOutsideViewport(e),r=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),a=this.enableRtl;let l=(a?t:o)||r,c=a?o:t;"auto"!==i&&(l="start"===i,c="end"===i);const d="middle"===i;if(l||c||d){const{colLeft:h,colMiddle:g,colRight:m}=this.getColumnBounds(e);return d?g-s/2:l?a?m:h:a?h-s:m-s}return null}isColumnOutsideViewport(e){const{start:i,end:t}=this.getViewportBounds(),{colLeft:o,colRight:r}=this.getColumnBounds(e),s=this.enableRtl;return{columnBeforeStart:s?i>r:t<r,columnAfterEnd:s?t<o:i>o}}getColumnBounds(e){const i=this.enableRtl,t=this.visibleColsService.getBodyContainerWidth(),o=e.getActualWidth(),r=e.getLeft(),s=i?-1:1,a=i?t-r:r;return{colLeft:a,colMiddle:a+o/2*s,colRight:a+o*s}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),i=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:i,end:e+i,width:e}}},Z3=class extends fe{wireBeans(e){this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const i=rl(this.gridBodyCtrl.getBodyViewportElement());if(i<=50)return;let t=this.getPinnedColumnsOverflowingViewport(i-50);const o=this.gos.getCallback("processUnpinnedColumns");t.length&&(o&&(t=o({columns:t,viewportWidth:i})),this.columnModel.setColsPinned(t,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const o=this.pinnedWidthService.getPinnedRightWidth()+this.pinnedWidthService.getPinnedLeftWidth();if(o<e)return[];const r=[...this.visibleColsService.getLeftCols()],s=[...this.visibleColsService.getRightCols()];let a=0,l=0;const d=[];let h=o-0-e;for(;(l<r.length||a<s.length)&&h>0;){if(a<s.length){const g=s[a++];h-=g.getActualWidth(),d.push(g)}if(l<r.length&&h>0){const g=r[l++];h-=g.getActualWidth(),d.push(g)}}return d}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const i=sh(this.gridBodyCtrl.getBodyViewportElement());this.bodyHeight!==i&&(this.bodyHeight=i,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),i=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,i)}},G3=class extends fe{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){this.rangeService&&(this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Oo(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),Oo(this.gos)&&this.enableFeature())}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},H3=class extends Mt{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[uh]),this.eCheckbox=Ne}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),i=this.rowNode.isSelected(),t=Wu(e,i),[o,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],s=e(o,r);this.eCheckbox.setValue(i,!0),this.eCheckbox.setInputAriaLabel(`${s} (${t})`)}onClicked(e,i,t){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:t.shiftKey,groupSelectsFiltered:i,event:t,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:o=>Gs(o),click:o=>{Gs(o);const r="filteredDescendants"===Eu(this.gos),s=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(s,r)?0===this.onClicked(!0,r,o||{})&&this.onClicked(!1,r,o):s?this.onClicked(!1,r,o):this.onClicked(!0,r,o||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),Ru(this.gos)||"function"==typeof this.getIsVisible()){const o=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:o}),this.addManagedListeners(this.rowNode,{dataChanged:o,cellChanged:o}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,i){return i&&(void 0===this.eCheckbox.getPreviousValue()||void 0===e)&&gi(this.gos)}showOrHideSelect(){let e=this.rowNode.selectable;const i=this.getIsVisible();if(e)if("function"==typeof i){const r=this.overrides?.callbackParams;if(this.column){const s=this.column.createColumnFunctionCallbackParams(this.rowNode);e=i({...r,...s})}else e=i({...r,node:this.rowNode,data:this.rowNode.data})}else e=i??!1;const t=this.gos.get("rowSelection");if(t&&"string"!=typeof t?!function EC(e){return e?.hideDisabledCheckboxes??!1}(t):this.column?.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!e),this.setVisible(!0),void this.setDisplayed(!0);this.overrides?.removeHidden?this.setDisplayed(e):this.setVisible(e)}getIsVisible(){if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&"string"!=typeof e?Zs(e):this.column?.getColDef()?.checkboxSelection}},q3=class extends Mt{constructor(e,i,t){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=i,this.eCell=t}postConstruct(){this.getGui().appendChild(Gn("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",i=>{i.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const i=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0),i?i(this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e})):(()=>{try{const o=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",o),e.dataTransfer.setData("text/plain",o)}catch{}})()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},z3=class extends fe{constructor(e,i){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=i,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:i}=e,t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(i===this.cellClassRules?void 0:this.cellClassRules,i,t,o=>this.cellComp.addOrRemoveCssClass(o,!0),o=>this.cellComp.addOrRemoveCssClass(o,!1)),this.cellClassRules=i}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let i;if("function"==typeof e.cellStyle){const t=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});i=(0,e.cellStyle)(t)}else i=e.cellStyle;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){const e=this.column.getColDef(),i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(t=>this.cellComp.addOrRemoveCssClass(t,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,i),this.staticClasses.length&&this.staticClasses.forEach(t=>this.cellComp.addOrRemoveCssClass(t,!0))}destroy(){super.destroy()}},V3=class extends fe{constructor(e,i,t,o,r){super(),this.cellCtrl=e,this.beans=i,this.rowNode=o,this.rowCtrl=r}setComp(e){this.eGui=e}onKeyDown(e){const i=e.key;switch(i){case le.ENTER:this.onEnterKeyDown(e);break;case le.F2:this.onF2KeyDown(e);break;case le.ESCAPE:this.onEscapeKeyDown(e);break;case le.TAB:this.onTabKeyDown(e);break;case le.BACKSPACE:case le.DELETE:this.onBackspaceOrDeleteKeyDown(i,e);break;case le.DOWN:case le.UP:case le.RIGHT:case le.LEFT:this.onNavigationKeyDown(e,i)}}onNavigationKeyDown(e,i){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,i,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const i=this.beans.rangeService.extendLatestRangeInDirection(e);i&&this.beans.navigationService.ensureCellVisible(i)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,i){const{cellCtrl:t,beans:o,rowNode:r}=this,{gos:s,rangeService:a,eventService:l}=o;if(!t.isEditing()){if(l.dispatchEvent({type:"keyShortcutChangedCellStart"}),function hy(e,i=!1){return e===le.DELETE||!i&&e===le.BACKSPACE&&Of()}(e,s.get("enableCellEditingOnBackspace"))){if(a&&Oo(s))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(t.isCellEditable()){const c=t.getColumn(),d=this.beans.valueService.getDeleteValue(c,r);r.setDataValue(c,d,"cellClear")}}else t.startRowOrCellEdit(e,i);l.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey):this.beans.gos.get("enterNavigatesVertically")?this.beans.navigationService.navigateToNextCell(null,e.shiftKey?le.UP:le.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit(le.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault())}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(le.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const o=e.key;" "===o?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(o,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:i}=this.beans;if(!this.cellCtrl.isEditing()&&hc(i)){const t=this.rowNode.isSelected(),o=!t,r="filteredDescendants"===Eu(i),s=this.rowNode.setSelectedParams({newValue:o,rangeSelect:e.shiftKey,groupSelectsFiltered:r,event:e,source:"spaceKey"});void 0===t&&0===s&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:r,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},U3=class extends fe{constructor(e,i,t){super(),this.cellCtrl=e,this.beans=i,this.column=t}onMouseEvent(e,i){if(!or(i))switch(e){case"click":this.onCellClicked(i);break;case"mousedown":case"touchstart":this.onMouseDown(i);break;case"dblclick":this.onCellDoubleClicked(i);break;case"mouseout":this.onMouseOut(i);break;case"mouseover":this.onMouseOver(i)}}onCellClicked(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();const{eventService:i,rangeService:t,gos:o}=this.beans;t&&(e.ctrlKey||e.metaKey)&&t.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&t.intersectLastRange(!0);const s=this.cellCtrl.createEvent(e,"cellClicked");i.dispatchEvent(s);const a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{a.onCellClicked(s)})},0),(o.get("singleClickEdit")||a.singleClickEdit)&&!o.get("suppressClickEdit")&&(!e.shiftKey||0==t?.getCellRanges().length)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Tr()||yf("dblclick"))return!1;const e=(new Date).getTime(),i=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,i}onCellDoubleClicked(e){const{column:i,beans:t,cellCtrl:o}=this,{eventService:r,frameworkOverrides:s,gos:a}=t,l=i.getColDef(),c=o.createEvent(e,"cellDoubleClicked");r.dispatchEvent(c),"function"==typeof l.onCellDoubleClicked&&window.setTimeout(()=>{s.wrapOutgoing(()=>{l.onCellDoubleClicked(c)})},0),!a.get("singleClickEdit")&&!a.get("suppressClickEdit")&&o.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:i,metaKey:t,shiftKey:o}=e,r=e.target,{cellCtrl:s,beans:a}=this,{eventService:l,rangeService:c,focusService:d,gos:h}=a;if(this.isRightClickInExistingRange(e))return;const g=c&&0!=c.getCellRanges().length;if(!o||!g){const f=h.get("enableCellTextSelection")&&e.defaultPrevented,y=(Bo()||f)&&!s.isEditing()&&!rh(r);s.focusCell(y)}if(o&&g&&!d.isCellFocused(s.getCellPosition())){e.preventDefault();const m=d.getFocusedCell();if(m){const{column:f,rowIndex:y,rowPinned:b}=m,_=a.rowRenderer.getRowByPosition({rowIndex:y,rowPinned:b})?.getCellCtrl(f);_?.isEditing()&&_.stopEditing(),d.setFocusedCell({column:f,rowIndex:y,rowPinned:b,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(c){const m=this.cellCtrl.getCellPosition();o?c.extendLatestRangeToCell(m):c.setRangeToCell(m,i||t)}l.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:i}=this.beans;if(i){const t=i.isCellInAnyRange(this.cellCtrl.getCellPosition()),o=2===e.button||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(t&&o)return!0}return!1}containsWidget(e){return zs(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const i=this.cellCtrl.getGui(),t=i.contains(e.target),o=i.contains(e.relatedTarget);return t&&o}destroy(){super.destroy()}},W3=class extends fe{constructor(e,i){super(),this.cellCtrl=e,this.beans=i,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();nr(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,i)=>e+i.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),i=[];if(1===e)i.push(this.column);else{let t=this.column;const o=this.column.getPinned();for(let r=0;t&&r<e&&(i.push(t),t=this.beans.visibleColsService.getColAfter(t),t&&!kt(t)&&o===t.getPinned());r++);}return i}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?Tt(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return e;const i=this.beans.visibleColsService.getColsLeftWidth();return"right"===this.column.getPinned()?i+this.beans.visibleColsService.getBodyContainerWidth()+(e||0):i+(e||0)}applyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=is(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${t}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},gl="ag-cell-range-selected",gb=0,Bm=class ef extends fe{constructor(i,t,o,r){super(),this.column=i,this.rowNode=t,this.beans=o,this.rowCtrl=r,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=i.getId()+"-"+gb++,this.colIdSanitised=No(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new W3(this,this.beans),this.cellCustomStyleFeature=new z3(this,this.beans),this.cellMouseListenerFeature=new U3(this,this.beans,this.column),this.cellKeyboardListenerFeature=new V3(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&Oo(this.beans.gos)&&(this.cellRangeFeature=new class{constructor(e,i){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=i}setComp(e,i){this.cellComp=e,this.eGui=i,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(gl,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(`${gl}-1`,1===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${gl}-2`,2===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${gl}-3`,3===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${gl}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),Sc(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),i=this.isSingleCell(),o=!i&&e.right,r=!i&&e.bottom,s=!i&&e.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",!i&&e.top),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",o),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",r),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",s)}isSingleCell(){const{rangeService:e}=this.beans;return 1===this.rangeCount&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const i=e.getCellRanges();return i.length>0&&i.every(t=>rs([1,0],t.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let i=!1,t=!1,o=!1,r=!1;const s=this.cellCtrl.getCellPosition().column,a=this.beans.visibleColsService;let l,c;e?(l=a.getColAfter(s),c=a.getColBefore(s)):(l=a.getColBefore(s),c=a.getColAfter(s));const d=this.rangeService.getCellRanges().filter(h=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),h));l||(r=!0),c||(t=!0);for(let h=0;h<d.length&&!(i&&t&&o&&r);h++){const g=d[h],m=this.rangeService.getRangeStartRow(g),f=this.rangeService.getRangeEndRow(g);!i&&this.beans.rowPositionUtils.sameRow(m,this.cellCtrl.getCellPosition())&&(i=!0),!o&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(o=!0),!r&&l&&g.columns.indexOf(l)<0&&(r=!0),!t&&c&&g.columns.indexOf(c)<0&&(t=!0)}return{top:i,right:t,bottom:o,left:r}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,i=this.rangeService.getCellRanges(),t=i.length;if(this.rangeCount<1||t<1)return!1;const o=Tt(i),r=this.cellCtrl.getCellPosition(),s=pf(e)&&!this.cellCtrl.isSuppressFillHandle(),a=function OC(e){const i=e.get("cellSelection");return void 0!==i?"boolean"!=typeof i&&"range"===i.handle?.mode:e.get("enableRangeHandle")}(e);let l=1===t&&!this.cellCtrl.isEditing()&&(s||a);if(this.hasChartRange){const d=1===i[0].type&&this.rangeService.isCellInSpecificRange(r,i[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",d),l=0===o.type}return l&&null!=o.endRow&&this.rangeService.isContiguousRange(o)&&this.rangeService.isBottomRightCell(o,r)}addSelectionHandle(){const e=Tt(this.rangeService.getCellRanges()).type,t=pf(this.beans.gos)&&kt(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(t)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}}(this.beans,this))}removeFeatures(){const i=this.beans.context;this.cellPositionFeature=i.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=i.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=i.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=i.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=i.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(i,t){const r="whenTruncated"===this.beans.gos.get("tooltipShowMode");!t&&r&&!this.isCellRenderer()&&(t=()=>{const a=this.getGui(),l=0===a.children.length?a:a.querySelector(".ag-cell-value");return!l||l.scrollWidth>l.clientWidth}),this.tooltipFeature=new Us({getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:null!=i?()=>i:()=>{const a=this.column.getColDef(),l=this.rowNode.data;if(a.tooltipField&&Fe(l))return Xa(l,a.tooltipField,this.column.isTooltipFieldContainsDots());const c=a.tooltipValueGetter;return c?c(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:t},this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(i,t,o,r,s,a){this.cellComp=i,this.eGui=t,this.printLayout=r,a??(a=this),this.addDomData(a),this.addFeatures(),a.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(o,a),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(t),this.cellCustomStyleFeature?.setComp(i),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(i,t),s&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(l=>l()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(i,t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!i)return;const o=i.parentElement,r=_r(this.beans.gos,this.rowNode).height,s=c=>{if(this.editing||!this.isAlive()||!t.isAlive())return;const{paddingTop:d,paddingBottom:h,borderBottomWidth:g,borderTopWidth:m}=ls(o),b=i.offsetHeight+(d+h+g+m);if(c<5){const _=ki(this.beans.gos);if(!_||!_.contains(i)||0==b)return void window.setTimeout(()=>s(c+1),0)}const S=Math.max(b,r);this.rowNode.setRowAutoHeight(S,this.column)},a=()=>s(0);a();const l=this.beans.resizeObserverService.observeResize(i,a);t.addDestroyFunc(()=>{l(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const i=this.column.getColDef();return null!=i.cellRenderer||null!=i.cellRendererSelector}getValueToDisplay(){return this.valueFormatted??this.value}showValue(i=!1){const t=this.getValueToDisplay();let o;if(this.rowNode.stub&&null==this.rowNode.groupData?.[this.column.getId()]){const s=this.createCellRendererParams();o=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),s)}else if(this.isCellRenderer()){const s=this.createCellRendererParams();o=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),s)}this.cellComp.setRenderDetails(o,t,i),this.cellRangeFeature?.refreshHandle()}setupControlComps(){const i=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(i)),this.includeRowDrag=this.isIncludeControl(i.rowDrag),this.includeDndSource=this.isIncludeControl(i.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(i){return null==this.rowNode.rowPinned&&("function"==typeof i||!0===i)}isCheckboxSelection(i){const{rowSelection:t}=this.beans.gridOptions;return i.checkboxSelection||Hs(this.column)&&t&&"string"!=typeof t&&Zs(t)}refreshShouldDestroy(){const i=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(i)),o=this.includeRowDrag!=this.isIncludeControl(i.rowDrag),r=this.includeDndSource!=this.isIncludeControl(i.dndSource),s=this.isAutoHeight!=this.column.isAutoHeight();return t||o||r||s}startEditing(i=null,t=!1,o=null){const{editService:r}=this.beans;return!(this.isCellEditable()&&!this.editing&&r)||(this.cellComp?r.startEditing(this,i,t,o):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(i,t,o)}),!0))}setEditing(i,t){this.editCompDetails=t,this.editing!==i&&(this.editing=i,this.cellRangeFeature?.refreshHandle())}stopRowOrCellEdit(i=!1){"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.stopEditing(i):this.stopEditing(i)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(i=!1){this.onCellEditorAttachedFuncs=[];const{editService:t}=this.beans;return!(!this.editing||!t)&&t.stopEditing(this,i)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:t=>this.beans.valueService.setValue(this.rowNode,this.column,t),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(t,o,r,s)=>this.registerRowDragger(t,o,s),setTooltip:(t,o)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(t,o),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(i){i.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(i){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(i)}refreshCell(i){if(this.suppressRefreshCell||this.editing)return;const t=this.column.getColDef(),o=null!=i&&!!i.newData,r=null!=i&&!!i.suppressFlash||!!t.suppressCellFlash,a=i&&i.forceRefresh||null==t.field&&null==t.valueGetter&&null==t.showRowGroup||o,l=!!this.cellComp,c=this.updateAndFormatValue(l);if(l){if(a||c){this.showValue(o);const h=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!r&&!h&&(this.beans.gos.get("enableCellChangeFlash")||t.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(i=!1,t=!1){this.beans.editService?.stopEditingAndFocus(this,i,t)}flashCell(i){this.animateCell("data-changed",i?.flashDuration??i?.flashDelay,i?.fadeDuration??i?.fadeDelay)}animateCell(i,t,o){if(!this.cellComp)return;const{gos:r}=this.beans;if(t||(t=r.get("cellFlashDuration")),0===t)return;Fe(o)||(o=r.get("cellFadeDuration"));const s=`ag-cell-${i}`,a=`ag-cell-${i}-animation`;this.cellComp.addOrRemoveCssClass(s,!0),this.cellComp.addOrRemoveCssClass(a,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.cellComp.addOrRemoveCssClass(a,!0),this.eGui.style.transition=`background-color ${o}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(a,!1),this.eGui.style.transition="")},o))},t)})}onFlashCells(i){if(!this.cellComp)return;const t=this.beans.cellPositionUtils.createId(this.getCellPosition());i.cells[t]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(i){return this.callValueFormatter(i)??i}callValueFormatter(i){return this.beans.valueService.formatValue(this.column,this.rowNode,i)}updateAndFormatValue(i){const t=this.value,o=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),!i||!this.valuesAreEqual(t,this.value)||this.valueFormatted!=o}valuesAreEqual(i,t){const o=this.column.getColDef();return o.equals?o.equals(i,t):i===t}getComp(){return this.cellComp}getValue(){return this.value}addDomData(i){const t=this.getGui();ns(this.beans.gos,t,ef.DOM_DATA_KEY_CELL_CTRL,this),i.addDestroyFunc(()=>ns(this.beans.gos,t,ef.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(i,t){return this.beans.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:i,rowIndex:this.rowNode.rowIndex})}processCharacter(i){this.cellKeyboardListenerFeature?.processCharacter(i)}onKeyDown(i){this.cellKeyboardListenerFeature?.onKeyDown(i)}onMouseEvent(i,t){this.cellMouseListenerFeature?.onMouseEvent(i,t)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:i,column:t,beans:o}=this;Am(i,t,o.visibleColsService)}refreshAriaColIndex(){const i=this.beans.visibleColsService.getAriaColIndex(this.column);Lf(this.getGui(),i)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(i,t=null){return this.cellComp?"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.startRowEditing(i,this):this.startEditing(i,!0,t):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(i,t)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return null!=this.cellRangeFeature}focusCell(i=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:i})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(i){this.eGui&&Xn(this.eGui,"tabindex",i?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const i=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",i)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const i=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",i)}onCellFocused(i){if(this.beans.focusService.isCellFocusSuppressed())return;const t=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp)return void(t&&i?.forceBrowserFocus&&(this.focusEventToRestore=i));if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",t),t&&i&&i.forceBrowserFocus){let r=this.cellComp.getFocusableElement();if(this.editing){const s=this.beans.focusService.findFocusableElements(r,null,!0);s.length&&(r=s[0])}r.focus({preventScroll:!!i.preventScrollOnBrowserFocus})}const o="fullRow"===this.beans.gos.get("editType");!t&&!o&&this.editing&&this.stopRowOrCellEdit(),t&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:tr(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const i=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",i),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!i)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",i)}onColDefChanged(){this.cellComp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const i=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",i)}dispatchCellContextMenuEvent(i){const t=this.column.getColDef(),o=this.createEvent(i,"cellContextMenu");this.beans.eventService.dispatchEvent(o),t.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(o)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const i=new H3;return this.beans.context.createBean(i),i.init({rowNode:this.rowNode,column:this.column}),i}createDndSource(){const i=new q3(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(i),i}registerRowDragger(i,t,o){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(i,t);const r=this.createRowDragComp(i,t,o);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(i,t,o){const r=this.beans.gos.get("pagination"),s=this.beans.gos.get("rowDragManaged"),a=gi(this.beans.gos);if(s){if(!a)return void pe("managed row dragging is only allowed in the Client Side Row Model");if(r)return void pe("managed row dragging is not possible when doing pagination")}const l=new gh(()=>this.value,this.rowNode,this.column,i,t,o);return this.beans.context.createBean(l),l}setSuppressRefreshCell(i){this.suppressRefreshCell=i}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(i){this.onCellEditorAttachedFuncs.push(i)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(i=>i()),this.onCellEditorAttachedFuncs=[]}};Bm.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var hs=Bm,pb=0,Zm=class tf extends fe{constructor(i,t,o,r,s){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=t,this.gos=t.gos,this.rowNode=i,this.paginationPage=t.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=r,this.printLayout=s,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=i.id+"-"+pb++,this.rowId=No(i.id),this.initRowBusinessKey(),this.rowFocused=t.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(o),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!=typeof this.businessKeyForNodeFunc)return;const i=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=No(i)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(i,t){"left"===i?this.leftGui=t:"right"===i?this.rightGui=t:"fullWidth"===i?this.fullWidthGui=t:this.centerGui=t}setComp(i,t,o,r){const s={rowComp:i,element:t,containerType:o,compBean:r=il(this,this.beans.context,r)};this.allRowGuis.push(s),this.updateGui(o,s),this.initialiseRowComp(s),"FullWidthLoading"!==this.rowType&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(i){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==i),this.updateGui(i,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(i){const t=i?"none":"";this.allRowGuis.forEach(o=>o.element.style.display=t)}initialiseRowComp(i){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(i),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(i),this.updateRowIndexes(i),this.setFocusedClasses(i),this.setStylesFromGridOptions(!1,i),hc(t)&&this.rowNode.selectable&&this.onRowSelected(i),this.updateColumnLists(!this.useAnimationFrameForCreate);const o=i.rowComp;this.getInitialRowClasses(i.containerType).forEach(s=>o.addOrRemoveCssClass(s,!0)),this.executeSlideAndFadeAnimations(i),this.rowNode.group&&bc(i.element,1==this.rowNode.expanded),this.setRowCompRowId(o),this.setRowCompRowBusinessKey(o),ns(t,i.element,tf.DOM_DATA_KEY_ROW_CTRL,this),i.compBean.addDestroyFunc(()=>ns(t,i.element,tf.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,i),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(i),this.isFullWidth()&&this.setupFullWidth(i),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(i),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&i.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(i){null!=this.businessKeySanitised&&i.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(i){this.rowId=No(this.rowNode.id),null!=this.rowId&&i.setRowId(this.rowId)}executeSlideAndFadeAnimations(i){const{containerType:t}=i;this.slideInAnimation[t]&&(on(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(on(()=>{i.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(i){if(Oo(this.gos))return void pe("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");const t=this.beans.localeService.getLocaleTextFunc(),o=new gh(()=>`1 ${t("rowDragRow","row")}`,this.rowNode,void 0,i.element,void 0,!0),r=this.createBean(o,this.beans.context);this.rowDragComps.push(r),i.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(s=>s!==r),this.destroyBean(r,this.beans.context)})}setupFullWidth(i){const t=this.getPinnedForContainer(i.containerType);if("FullWidthDetail"==this.rowType&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const o=this.createFullWidthCompDetails(i.element,t);i.rowComp.showFullWidth(o)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(i=>i?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(i){const t=this.getCellCtrl(i);return t?t.getGui():null}executeProcessRowPostCreateFunc(){const i=this.gos.getCallback("processRowPostCreate");i&&this.areAllContainersReady()&&i({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const i=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),t=!!this.centerGui,o=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return i&&t&&o}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const i=this.beans.gos.getCallback("isFullWidthRow");return!!i&&i({rowNode:this.rowNode})}setRowType(){const i=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),o=this.gos.get("masterDetail")&&this.rowNode.detail,r=this.beans.columnModel.isPivotMode(),a=!!this.rowNode.group&&!this.rowNode.footer&&fc(this.gos,r);this.rowType=i?"FullWidthLoading":o?"FullWidthDetail":t?"FullWidth":a?"FullWidthGroup":"Normal"}updateColumnLists(i=!1,t=!1){this.isFullWidth()||(i||this.gos.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0))}createCellCtrls(i,t,o=null){const r={list:[],map:{}},s=(a,l)=>{r.list.push(l),r.map[a]=l};return t.forEach(a=>{const l=a.getInstanceId();let c=i.map[l];c||(c=new hs(a,this.rowNode,this.beans,this)),s(l,c)}),i.list.forEach(a=>{const l=a.getColumn().getInstanceId();null==r.map[l]&&(this.isCellEligibleToBeRemoved(a,o)?a.destroy():s(l,a))}),r}updateColumnListsImpl(i){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(i)}setCellCtrls(i){this.allRowGuis.forEach(t=>{const o=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(o,i)})}getCellCtrlsForContainer(i){switch(i){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const i=this.beans.columnViewportService,t=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const o=i.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,o);const r=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,r,"left");const s=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}}isCellEligibleToBeRemoved(i,t){if(i.getColumn().getPinned()!=t)return!0;const a=i.isEditing(),l=this.beans.focusService.isCellFocused(i.getCellPosition());if(a||l){const d=i.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(d)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Ki(this.gos,"print")}listenOnDomOrder(i){i.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],()=>{i.rowComp.setDomOrder(this.getDomOrder())})}setAnimateFlags(i){if(this.isSticky()||!i)return;const t=Fe(this.rowNode.oldRowTop),o=this.beans.visibleColsService.isPinningLeft(),r=this.beans.visibleColsService.isPinningRight();if(t){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=o,this.slideInAnimation.right=r}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=o,this.fadeInAnimation.right=r}}isEditing(){return this.editingRow}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const i=(l,c)=>!l||l.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(l.element,c).params),t=i(this.fullWidthGui,null),o=i(this.centerGui,null),r=i(this.leftGui,"left"),s=i(this.rightGui,"right");return t&&o&&r&&s}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{this.gos.get("rowDragEntireRow")?this.allRowGuis.forEach(t=>{this.addRowDraggerToRow(t)}):this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(i=>i.onRowIndexChanged())},cellChanged:i=>{this.getAllCellCtrls().forEach(t=>t.onCellChanged(i))}})}onRowNodeDataChanged(i){this.isFullWidth()===!!this.isNodeFullWidthCell()?this.isFullWidth()?this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode):(this.getAllCellCtrls().forEach(o=>o.refreshCell({suppressFlash:!i.update,newData:!i.update})),this.allRowGuis.forEach(o=>{this.setRowCompRowId(o.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(o.rowComp)}),this.onRowSelected(),this.postProcessCss()):this.beans.rowRenderer.redrawRow(this.rowNode)}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const i=this.rowNode.highlighted;this.allRowGuis.forEach(t=>{const r=1===i;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",0===i),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",r)})}postProcessRowDragging(){const i=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",i))}updateExpandedCss(){const i=this.rowNode.isExpandable(),t=1==this.rowNode.expanded;this.allRowGuis.forEach(o=>{o.rowComp.addOrRemoveCssClass("ag-row-group",i),o.rowComp.addOrRemoveCssClass("ag-row-group-expanded",i&&t),o.rowComp.addOrRemoveCssClass("ag-row-group-contracted",i&&!t),bc(o.element,i&&t)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:tr(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(i){return this.allRowGuis.find(t=>t.element.contains(i))}onKeyboardNavigate(i){const t=this.findFullWidthRowGui(i.target);if((t?t.element:null)!==i.target)return;const s=this.rowNode,a=this.beans.focusService.getFocusedCell(),l={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:a?.column??this.getColumnForFullWidth(t)};this.beans.navigationService.navigateToNextCell(i,i.key,l,!0),i.preventDefault()}onTabKeyDown(i){if(i.defaultPrevented||or(i))return;const t=this.allRowGuis.find(c=>c.element.contains(i.target)),o=t?t.element:null,r=o===i.target,s=ai(this.gos);let a=!1;o&&s&&(a=o.contains(s)&&s.classList.contains("ag-cell"));let l=null;!r&&!a&&(l=this.beans.focusService.findNextFocusableElement(o,!1,i.shiftKey)),(this.isFullWidth()&&r||!l)&&this.beans.navigationService.onTabKeyDown(this,i)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const i=this.allRowGuis.find(t=>mo(t.element))?.element;return i?i.getBoundingClientRect().top:0}onSuppressCellFocusChanged(i){const t=this.isFullWidth()&&i?void 0:-1;this.allRowGuis.forEach(o=>{Xn(o.element,"tabindex",t)})}onFullWidthRowFocused(i){const t=this.rowNode,o=!!i&&this.isFullWidth()&&i.rowIndex===t.rowIndex&&i.rowPinned==t.rowPinned,r=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;r&&(r.classList.toggle("ag-full-width-focus",o),o&&i?.forceBrowserFocus&&r.focus({preventScroll:!0}))}recreateCell(i){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,i),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,i),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,i),i.destroy(),this.updateColumnLists()}removeCellCtrl(i,t){const o={list:[],map:{}};return i.list.forEach(r=>{r!==t&&(o.list.push(r),o.map[r.getColumn().getInstanceId()]=r)}),o}onMouseEvent(i,t){switch(i){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(i,t){return this.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:t})}createRowEventWithSource(i,t){const o=this.createRowEvent(i,t);return o.source=this,o}onRowDblClick(i){or(i)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",i))}getColumnForFullWidth(i){const{visibleColsService:t}=this.beans;switch(i?.containerType){case"center":return t.getCenterCols()[0];case"left":return t.getLeftCols()[0];case"right":return t.getRightCols()[0];default:return t.getAllCols()[0]}}onRowMouseDown(i){if(this.lastMouseDownOnDragger=zs(i.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const o=this.findFullWidthRowGui(i.target),r=o?.element,s=i.target;let a=!0;r&&r.contains(s)&&rh(s)&&(a=!1),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:this.getColumnForFullWidth(o),rowPinned:t.rowPinned,forceBrowserFocus:a})}onRowClick(i){if(or(i)||this.lastMouseDownOnDragger)return;const{gos:o}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",i));const r=i.ctrlKey||i.metaKey,s=i.shiftKey,a=this.rowNode.isSelected();if(os(o)&&this.rowNode.group||this.isRowSelectionBlocked()||!function NC(e){const i=ff(e);return!0===i||"enableSelection"===i}(o)&&!a||!Fu(o)&&a)return;const c=function BC(e){const i=e.get("rowSelection");return"string"==typeof i?e.get("rowMultiSelectWithClick"):i?.enableSelectionWithoutKeys??!1}(o),d=Fu(o),h="rowClicked";a?c?this.rowNode.setSelectedParams({newValue:!1,event:i,source:h}):r?d&&this.rowNode.setSelectedParams({newValue:!1,event:i,source:h}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:i,source:h}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!c&&!r,rangeSelect:s,event:i,source:h})}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!hc(this.gos)}setupDetailRowAutoHeight(i){if("FullWidthDetail"!==this.rowType||!this.gos.get("detailRowAutoHeight"))return;const t=()=>{const r=i.clientHeight;null!=r&&r>0&&window.setTimeout(()=>{this.rowNode.setRowHeight(r),(gi(this.gos)||ir(this.gos))&&this.beans.rowModel.onRowHeightChanged()},0)},o=this.beans.resizeObserverService.observeResize(i,t);this.addDestroyFunc(o),t()}createFullWidthCompDetails(i,t){const{gos:o,rowNode:r}=this,s=o.addGridCommonParams({fullWidth:!0,data:r.data,node:r,value:r.key,valueFormatted:r.key,eGridCell:i,eParentOfValue:i,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(l,c,d,h)=>this.addFullWidthRowDragging(l,c,d,h),setTooltip:(l,c)=>this.refreshRowTooltip(l,c)}),a=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return a.getFullWidthDetailCellRendererDetails(s);case"FullWidthGroup":return a.getFullWidthGroupCellRendererDetails(s);case"FullWidthLoading":return a.getFullWidthLoadingCellRendererDetails(s);default:return a.getFullWidthCellRendererDetails(s)}}refreshRowTooltip(i,t){if(!this.fullWidthGui)return;const o={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:t};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Us(o,this.beans))}addFullWidthRowDragging(i,t,o="",r){if(!this.isFullWidth())return;const s=new gh(()=>o,this.rowNode,void 0,i,t,r);this.createBean(s,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(s,this.beans.context)})}onUiLevelChanged(){const i=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=i){const t="ag-row-level-"+i,o="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass(t,!0),r.rowComp.addOrRemoveCssClass(o,!1)})}this.rowLevel=i}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const i=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==i&&(this.firstRowOnPage=i,this.allRowGuis.forEach(o=>o.rowComp.addOrRemoveCssClass("ag-row-first",i))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(o=>o.rowComp.addOrRemoveCssClass("ag-row-last",t)))}stopEditing(i=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,i)}setInlineEditingCss(){const i=this.editingRow||this.getAllCellCtrls().some(t=>t.isEditing());this.allRowGuis.forEach(t=>{t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",i),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!i)})}setEditingRow(i){this.editingRow=i}startRowEditing(i=null,t=null,o=null){return!!this.editingRow||(this.beans.rowEditService?.startEditing(this,i,t,o)??!0)}getAllCellCtrls(){return 0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const i=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!i||!i.length||i.forEach(t=>{this.allRowGuis.forEach(o=>o.rowComp.addOrRemoveCssClass(t,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,i=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(i,!0))},i=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(i,!1))})}setStylesFromGridOptions(i,t){i&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,o=>o.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(i){return"left"===i||"right"===i?i:null}getInitialRowClasses(i){const t=this.getPinnedForContainer(i),o={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[i],rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(o)}processStylesFromGridOptions(){const i=this.gos.get("rowStyle");if(i&&"function"==typeof i)return void pe("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");const t=this.gos.getCallback("getRowStyle");let o;return t&&(o=t({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex})),o||i?Object.assign({},i,o):this.emptyStyle}onRowSelected(i){const t=!!this.rowNode.isSelected();this.forEachGui(i,o=>{o.rowComp.addOrRemoveCssClass("ag-row-selected",t),Sc(o.element,t),o.element.contains(ai(this.gos))&&(o===this.centerGui||o===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const i=this.rowNode.isSelected();if(i&&!Fu(this.gos))return;const o=this.beans.localeService.getLocaleTextFunc()(i?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${i?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(o,"rowSelection")}addHoverFunctionality(i){if(!this.active)return;const{element:t,compBean:o}=i,{rowNode:r,beans:s,gos:a}=this;o.addManagedListeners(t,{mouseenter:()=>r.onMouseEnter(),mouseleave:()=>r.onMouseLeave()}),o.addManagedListeners(r,{mouseEnter:()=>{!s.dragService.isDragging()&&!a.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),r.setHovered(!0))},mouseLeave:()=>{t.classList.remove("ag-row-hover"),r.setHovered(!1)}})}roundRowTopToBounds(i){const t=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),o=this.applyPaginationOffset(t.top,!0)-100,r=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(o,i),r)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(i,t){i?t(i):this.allRowGuis.forEach(t)}onRowHeightChanged(i){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,o=this.beans.environment.getDefaultRowHeight(),s=lf(this.gos)?_r(this.gos,this.rowNode).height:void 0,a=s?Math.min(o,s)-2+"px":void 0;this.forEachGui(i,l=>{l.element.style.height=`${t}px`,a&&l.element.style.setProperty("--ag-line-height",a)})}addEventListener(i,t){super.addEventListener(i,t)}removeEventListener(i,t){super.removeEventListener(i,t)}destroyFirstPass(i=!1){if(this.active=!1,!i&&Ns(this.gos)&&!this.isSticky())if(null!=this.rowNode.rowTop){const r=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(r)}else this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const t=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(t),this.beans.eventService.dispatchEvent(t),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const i=t=>(t.list.forEach(o=>o.destroy()),{list:[],map:{}});this.centerCellCtrls=i(this.centerCellCtrls),this.leftCellCtrls=i(this.leftCellCtrls),this.rightCellCtrls=i(this.rightCellCtrls)}setFocusedClasses(i){this.forEachGui(i,t=>{t.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),t.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const i=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);i!==this.rowFocused&&(this.rowFocused=i,this.setFocusedClasses()),!i&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const i=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==i&&(this.paginationPage=i,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(i,t=!1){return this.rowNode.isRowPinned()||this.rowNode.sticky?i:i+this.beans.pageBoundsService.getPixelOffset()*(t?1:-1)}setRowTop(i){if(!this.printLayout&&Fe(i)){const t=this.applyPaginationOffset(i),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeightService.getRealPixelPosition(t)}px`;this.setRowTopStyle(s)}}getInitialRowTop(i){return this.suppressRowTransform?this.getInitialRowTopShared(i):void 0}getInitialTransform(i){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(i)})`}getInitialRowTopShared(i){if(this.printLayout)return"";const t=this.rowNode;let o;if(this.isSticky())o=t.stickyRowTop;else{const r=this.slideInAnimation[i]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,s=this.applyPaginationOffset(r);o=t.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s)}return o+"px"}setRowTopStyle(i){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(i):t.rowComp.setTransform(`translateY(${i})`))}getRowNode(){return this.rowNode}getCellCtrl(i){let t=null;return this.getAllCellCtrls().forEach(o=>{o.getColumn()==i&&(t=o)}),null!=t||this.getAllCellCtrls().forEach(o=>{o.getColSpanningList().indexOf(i)>=0&&(t=o)}),t}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(i){const t=this.rowNode.getRowIndexString();if(null===t)return;const o=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),r=this.rowNode.rowIndex%2==0,s=o+this.rowNode.rowIndex+1;this.forEachGui(i,a=>{a.rowComp.setRowIndex(t),a.rowComp.addOrRemoveCssClass("ag-row-even",r),a.rowComp.addOrRemoveCssClass("ag-row-odd",!r),Pf(a.element,s)})}setStoppingRowEdit(i){this.stoppingRowEdit=i}};Zm.DOM_DATA_KEY_ROW_CTRL="renderedRow";var gs=Zm,fb=class extends fe{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",i=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:i})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",yf("touchstart")?"touchstart":"mousedown"].forEach(t=>{const o=this.processMouseEvent.bind(this,t);this.addManagedElementListeners(this.element,{[t]:o})})}processMouseEvent(e,i){if(!this.mouseEventService.isEventFromThisGrid(i)||or(i))return;const t=this.getRowForEvent(i),o=this.mouseEventService.getRenderedCellForEvent(i);"contextmenu"===e?this.handleContextMenuMouseEvent(i,void 0,t,o):(o&&o.onMouseEvent(e,i),t&&t.onMouseEvent(e,i))}mockContextMenuForIPad(){if(!Tr())return;const e=new Dr(this.element);this.addManagedListeners(e,{longTap:t=>{const o=this.getRowForEvent(t.touchEvent),r=this.mouseEventService.getRenderedCellForEvent(t.touchEvent);this.handleContextMenuMouseEvent(void 0,t.touchEvent,o,r)}}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let i=e.target;for(;i;){const t=Ja(this.gos,i,gs.DOM_DATA_KEY_ROW_CTRL);if(t)return t;i=i.parentElement}return null}handleContextMenuMouseEvent(e,i,t,o){const r=t?t.getRowNode():null,s=o?o.getColumn():null;let a=null;s&&(o.dispatchCellContextMenuEvent((e||i)??null),a=this.valueService.getValue(s,r));const l=this.ctrlsService.getGridBodyCtrl(),c=o?o.getGui():l.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,rowNode:r,column:s,value:a,anchorToElement:c})}getControlsForEventTarget(e){return{cellCtrl:Iu(this.gos,e,hs.DOM_DATA_KEY_CELL_CTRL),rowCtrl:Iu(this.gos,e,gs.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,i){const{cellCtrl:t,rowCtrl:o}=this.getControlsForEventTarget(i.target);i.defaultPrevented||(t?this.processCellKeyboardEvent(t,e,i):o&&o.isFullWidth()&&this.processFullWidthRowKeyboardEvent(o,e,i))}processCellKeyboardEvent(e,i,t){const o=e.getRowNode(),r=e.getColumn(),s=e.isEditing();!mh(this.gos,t,o,r,s)&&"keydown"===i&&(!s&&this.navigationService.handlePageScrollingKey(t)||e.onKeyDown(t),this.doGridOperations(t,e.isEditing()),um(t)&&e.processCharacter(t)),"keydown"===i&&this.eventService.dispatchEvent(e.createEvent(t,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,i,t){const o=e.getRowNode(),r=this.focusService.getFocusedCell();if(!mh(this.gos,t,o,r&&r.column,!1)&&"keydown"===i)switch(t.key){case le.PAGE_HOME:case le.PAGE_END:case le.PAGE_UP:case le.PAGE_DOWN:this.navigationService.handlePageScrollingKey(t,!0);break;case le.UP:case le.DOWN:e.onKeyboardNavigate(t);break;case le.TAB:e.onTabKeyDown(t)}"keydown"===i&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",t))}doGridOperations(e,i){if(!e.ctrlKey&&!e.metaKey||i||!this.mouseEventService.isEventFromThisGrid(e))return;const t=function uy(e){const{keyCode:i}=e;let t;switch(i){case 65:t=le.A;break;case 67:t=le.C;break;case 86:t=le.V;break;case 68:t=le.D;break;case 90:t=le.Z;break;case 89:t=le.Y;break;default:t=e.code}return t}(e);return t===le.A?this.onCtrlAndA(e):t===le.C?this.onCtrlAndC(e):t===le.D?this.onCtrlAndD(e):t===le.V?this.onCtrlAndV(e):t===le.X?this.onCtrlAndX(e):t===le.Y?this.onCtrlAndY():t===le.Z?this.onCtrlAndZ(e):void 0}onCtrlAndA(e){const{pinnedRowModel:i,rowModel:t,rangeService:o}=this;if(o&&t.isRowsToRender()){const[r,s]=[i.isEmpty("top"),i.isEmpty("bottom")],a=r?null:"top";let l,c;s?(l=null,c=t.getRowCount()-1):(l="bottom",c=i.getPinnedBottomRowCount()-1);const d=this.visibleColsService.getAllCols();if(Tn(d))return;o.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:c,rowEndPinned:l,columnStart:d[0],columnEnd:Tt(d)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:i,rowCtrl:t}=this.getControlsForEventTarget(e.target);i?.isEditing()||t?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:i,rowCtrl:t}=this.getControlsForEventTarget(e.target);i?.isEditing()||t?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:i,rowCtrl:t}=this.getControlsForEventTarget(e.target);i?.isEditing()||t?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},mb=class extends fe{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth();li(this.element,e>0),vo(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},vb=class extends fe{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth();li(this.element,e>0),vo(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},Bc=e=>e.getTopRowCtrls(),Zc=e=>e.getStickyTopRowCtrls(),Gc=e=>e.getStickyBottomRowCtrls(),Hc=e=>e.getBottomRowCtrls(),qc=e=>e.getCentreRowCtrls(),Cb={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:qc},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:qc},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:qc},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:qc},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Bc},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Bc},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Bc},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Bc},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Zc},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Zc},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Zc},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Zc},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Gc},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Gc},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Gc},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Gc},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:Hc},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Hc},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Hc},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:Hc}};function Ys(e){return Cb[e]}var Sb=["center","left","right","fullWidth"],_b=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],xb=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Ab=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],Gm=["stickyTopCenter","stickyTopLeft","stickyTopRight"],Hm=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],kb=[...Gm,"stickyTopFullWidth",...Hm,"stickyBottomFullWidth"],Tb=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...Gm,...Hm],Db=class extends fe{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=Ys(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new Z3(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,i){e.indexOf(this.name)>=0&&i()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,i,t){this.comp=e,this.eContainer=i,this.eViewport=t,this.createManagedBean(new fb(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const o=()=>this.onPinnedWidthChanged();this.forContainers(xb,()=>{this.pinnedWidthFeature=this.createManagedBean(new mb(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:o})}),this.forContainers(Ab,()=>{this.pinnedWidthFeature=this.createManagedBean(new vb(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:o})}),this.forContainers(Sb,()=>this.createManagedBean(new Nm(this.eContainer,"center"===this.name?t:void 0))),this.forContainers(Tb,()=>this.createManagedBean(new G3(this.eContainer))),this.forContainers(_b,()=>this.createManagedBean(new kh(r=>this.comp.setContainerWidth(`${r}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(kb.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const i=()=>{const t=this.gos.get("ensureDomOrder"),o=Ki(this.gos,"print");this.comp.setDomOrder(t||o)};this.addManagedPropertyListener("domLayout",i),i()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=i=>{this.dragService.isDragging()&&i.cancelable&&i.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const i=this.getCenterWidth(),t=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(i,t,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return rl(this.eViewport)}getCenterViewportScrollLeft(){return Tc(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const i=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>i())}isViewportInTheDOMTree(){return qf(this.eViewport)}getViewportScrollLeft(){return Tc(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||function qw(e){return e.clientWidth<e.scrollWidth}(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Dc(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const i=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||0===i.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const t=Ki(this.gos,"print"),r=this.gos.get("embedFullWidthRows")||t,s=i.filter(a=>{const l=a.isFullWidth();return this.options.fullWidth?!r&&l:r||!l});this.comp.setRowCtrls({rowCtrls:s,useFlushSync:e})}},qm="ag-force-vertical-scroll",Mb=class extends fe{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,i,t,o,r,s,a){this.comp=e,this.eGridBody=i,this.eBodyViewport=t,this.eTop=o,this.eBottom=r,this.eStickyTop=s,this.eStickyBottom=a,this.eCenterColsViewport=t.querySelector(`.${Ys("center").viewport}`),this.eFullWidthContainer=t.querySelector(`.${Ys("fullWidth").container}`),this.eStickyTopFullWidthContainer=s.querySelector(`.${Ys("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=a.querySelector(`.${Ys("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",l=>this.setCellTextSelection(l.currentValue)),this.createManagedBean(new Mh(this.comp)),this.bodyScrollFeature=this.createManagedBean(new B3(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,t,r,s,a]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvancedFilterHeaderComp(o),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(i=>{this.addManagedElementListeners(i,{focusin:t=>{const{target:o}=t,r=zs(o,"ag-root",i);i.classList.toggle("ag-has-focus",!r)},focusout:t=>{const{target:o,relatedTarget:r}=t,s=i.contains(r),a=zs(r,"ag-root",i);zs(o,"ag-root",i)||(!s||a)&&i.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss("ag-selectable",e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const o=`calc(100% + ${(e&&this.scrollVisibleService.getScrollbarWidth()||0)+(Bf()?16:0)}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(o)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=t=>{const o=t.relatedTarget;if(null===oh(o))return void this.rowRenderer.stopEditing();let r=i.some(s=>s.contains(o))&&this.mouseEventService.isElementInThisGrid(o);if(!r){const s=this.popupService;r=s.getActivePopups().some(a=>a.contains(o))||s.isElementWithinCustomPopup(o)}r||this.rowRenderer.stopEditing()},i=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];i.forEach(t=>this.addManagedElementListeners(t,{focusout:e}))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),i=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1;this.comp.setRowCount(-1===i?-1:e+i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){this.comp.setPinnedTopBottomOverflowY(e?"scroll":"hidden")}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),i=e?qm:null,t=Ki(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(i,e),e||t&&function zw(e){return e.clientHeight<e.scrollHeight}(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const i=()=>{const t=e&&Ns(this.gos)&&!this.rowContainerHeightService.isStretching();this.comp.setRowAnimationCssOnBodyViewport(t?"ag-row-animation":"ag-row-no-animation",t)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,i())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:i,deltaY:t,shiftKey:o}=e;(o||Math.abs(i)>Math.abs(t))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:i,deltaY:t,shiftKey:o}=e,r=o||Math.abs(i)>Math.abs(t),s=e.target;r?(this.eStickyTopFullWidthContainer.contains(s)||this.eStickyBottomFullWidthContainer.contains(s))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(t))}scrollGridBodyToMatchEvent(e){const{deltaX:i,deltaY:t}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:i||t})}onBodyViewportContextMenu(e,i,t){if(!e&&!t)return;this.gos.get("preventDefaultOnContextMenu")&&(e||t).preventDefault();const{target:o}=e||i;(o===this.eBodyViewport||o===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Tr())return;const i=new Dr(this.eBodyViewport);this.addManagedListeners(i,{longTap:o=>{e(void 0,o.touchStart,o.touchEvent)}}),this.addDestroyFunc(()=>i.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const i=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(i+e),this.eBodyViewport.scrollTop-i}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new V2(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,i=e.getPinnedTopTotalHeight(),t=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(i),this.comp.setBottomHeight(t),this.comp.setTopDisplay(i?"inherit":"none"),this.comp.setBottomDisplay(t?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(e){const i=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${i}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${i}px)`)}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const i=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),t=this.pinnedRowModel.getPinnedTopTotalHeight();let o=0;i>0&&(o+=i),t>0&&(o+=t),o>0&&(o+=1),this.comp.setStickyTopTop(`${o}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight(),t=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0;this.comp.setStickyBottomBottom(`${e+t}px`)}sizeColumnsToFit(e,i){const o=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,s=rl(this.eGridBody)-o;s>0?this.columnSizeService.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e):void 0===i?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):100===i?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):500===i?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):pe("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},Eb=class extends Mt{constructor(e,i,t,o,r){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=i.getColumn(),this.rowNode=i.getRowNode(),this.rowCtrl=i.getRowCtrl(),this.eRow=o,this.cellCtrl=i;const s=document.createElement("div");s.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(s);const a=this.getGui();this.forceWrapper=i.isForceWrapper(),this.refreshWrapper(!1),Dn(a,i.getCellAriaRole()),a.setAttribute("col-id",i.colIdSanitised),i.setComp({addOrRemoveCssClass:(c,d)=>this.addOrRemoveCssClass(c,d),setUserStyles:c=>Uf(a,c),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:c=>this.includeSelection=c,setIncludeRowDrag:c=>this.includeRowDrag=c,setIncludeDndSource:c=>this.includeDndSource=c,setRenderDetails:(c,d,h)=>this.setRenderDetails(c,d,h),setEditDetails:(c,d,h)=>this.setEditDetails(c,d,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()},this.getGui(),this.eCellWrapper,t,r,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,i,t){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=null==this.firstRender;const r=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!t&&!r&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(i))}setEditDetails(e,i,t){e?this.createCellEditorInstance(e,i,t):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const i=this.includeRowDrag||this.includeDndSource||this.includeSelection,t=i||this.forceWrapper,o=t&&null==this.eCellWrapper;if(o){const d=document.createElement("div");d.setAttribute("role","presentation"),d.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=d,this.getGui().appendChild(this.eCellWrapper)}const r=!t&&null!=this.eCellWrapper;r&&(fo(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!t);const s=!e&&t,a=s&&null==this.eCellValue;if(a){const d=document.createElement("span");d.setAttribute("role","presentation"),d.setAttribute("class","ag-cell-value"),this.eCellValue=d,this.eCellWrapper.appendChild(this.eCellValue)}const l=!s&&null!=this.eCellValue;l&&(fo(this.eCellValue),this.eCellValue=void 0);const c=o||r||a||l;return c&&this.removeControls(),e||i&&this.addControls(),c}addControls(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,i,t){const o=this.editorVersion,r=e.newAgStackInstance();if(null==r)return;const{params:s}=e;r.then(l=>this.afterCellEditorCreated(o,l,s,i,t)),kt(this.cellEditor)&&s.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const i=this.getParentOfValue();sn(i);const t=null!=e?No(e,!0):null;null!=t&&(i.textContent=t)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),fo(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),fo(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh||this.cellRendererClass!==e.componentClass)return!1;const i=this.cellRenderer.refresh(e.params);return!0===i||void 0===i}createCellRendererInstance(e){const t=!this.beans.gos.get("suppressAnimationFrame"),o=this.rendererVersion,{componentClass:r}=e,s=()=>{if(this.rendererVersion!==o||!this.isAlive())return;const l=e.newAgStackInstance(),c=this.afterCellRendererCreated.bind(this,o,r);l&&l.then(c)};t&&this.firstRender?this.beans.animationFrameService.createTask(s,this.rowNode.rowIndex,"createTasksP2"):s()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,i,t){if(this.isAlive()&&e===this.rendererVersion){if(this.cellRenderer=t,this.cellRendererClass=i,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){const r=this.getParentOfValue();sn(r),r.appendChild(this.cellRendererGui)}}else this.beans.context.destroyBean(t)}afterCellEditorCreated(e,i,t,o,r){if(e!==this.editorVersion)return void this.beans.context.destroyBean(i);if(i.isCancelBeforeStart&&i.isCancelBeforeStart())return this.beans.context.destroyBean(i),void this.cellCtrl.stopEditing(!0);if(!i.getGui)return pe(`cellEditor for column ${this.column.getId()} is missing getGui() method`),void this.beans.context.destroyBean(i);this.cellEditor=i,this.cellEditorGui=i.getGui();const l=o||void 0!==i.isPopup&&i.isPopup();l?this.addPopupCellEditor(t,r):this.addInCellEditor(),this.refreshEditStyles(!0,l),i.afterGuiAttached&&i.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,i){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!i),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!i),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!i),this.rowCtrl?.setInlineEditingCss()}addInCellEditor(){const e=this.getGui();e.contains(ai(this.beans.gos))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,i){"fullRow"===this.beans.gos.get("editType")&&pe("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const t=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));const o=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&o.appendChild(this.cellEditorGui);const r=this.beans.popupService,s=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),a=i??t.getPopupPosition?.()??"over",l=this.beans.gos.get("enableRtl"),c={ePopup:o,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:l?"right":"left",keepWithinBounds:!0},d=r.positionPopupByComponent.bind(r,c),h=this.beans.localeService.getLocaleTextFunc(),g=r.addPopup({modal:s,eChild:o,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:d,ariaLabel:h("ariaLabelCellEditor","Cell Editor")});g&&(this.hideEditorPopup=g.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui();e.contains(ai(this.beans.gos))&&nh()&&e.focus({preventScroll:!0}),sn(this.getParentOfValue())}},Pb=class extends Mt{constructor(e,i,t){super(),this.cellComps={},this.beans=i,this.rowCtrl=e;const o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),o.setAttribute("style",this.getInitialStyle(t)),this.setTemplateFromElement(o);const r=this.getGui(),s=r.style;this.domOrder=this.rowCtrl.getDomOrder(),Dn(r,"row"),e.setComp({setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>Uf(r,l),setTop:l=>s.top=l,setTransform:l=>s.transform=l,setRowIndex:l=>r.setAttribute("row-index",l),setRowId:l=>r.setAttribute("row-id",l),setRowBusinessKey:l=>r.setAttribute("row-business-key",l),refreshFullWidth:l=>this.fullWidthCellRenderer?.refresh?.(l())??!1},this.getGui(),t,void 0),this.addDestroyFunc(()=>{e.unsetComp(t)})}getInitialStyle(e){const i=this.rowCtrl.getInitialTransform(e);return i?`transform: ${i}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){const t=e.newAgStackInstance();t?.then(o=>{if(this.isAlive()){const r=o.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(o)}else this.beans.context.destroyBean(o)})}setCellCtrls(e){const i=Object.assign({},this.cellComps);e.forEach(o=>{const r=o.instanceId;null==this.cellComps[r]?this.newCellComp(o):i[r]=null});const t=Ar(i).filter(o=>null!=o);this.destroyCells(t),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const i=[];e.forEach(t=>{const o=this.cellComps[t.instanceId];o&&i.push(o.getGui())}),Vf(this.getGui(),i)}newCellComp(e){const i=new Eb(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.instanceId]=i,this.getGui().appendChild(i.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=Ar(this.cellComps).filter(i=>null!=i);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&pt("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){e.forEach(i=>{if(!i)return;const t=i.getCtrl().instanceId;this.cellComps[t]===i&&(i.detach(),i.destroy(),this.cellComps[t]=null)})}},Ob={selector:"AG-ROW-CONTAINER",component:class extends Mt{constructor(){super(),this.eViewport=Ne,this.eContainer=Ne,this.rowComps={},this.name=Mt.elementGettingCreated.getAttribute("name"),this.options=Ys(this.name),this.setTemplate(function Lb(e){let i;return i="center"===e.type?`<div class="${e.viewport}" data-ref="eViewport" role="presentation">\n                <div class="${e.container}" data-ref="eContainer"></div>\n            </div>`:`<div class="${e.container}" data-ref="eContainer"></div>`,i}(this.options))}wireBeans(e){this.beans=e}postConstruct(){const e={setHorizontalScroll:t=>this.eViewport.scrollLeft=t,setViewportHeight:t=>this.eViewport.style.height=t,setRowCtrls:({rowCtrls:t})=>this.setRowCtrls(t),setDomOrder:t=>{this.domOrder=t},setContainerWidth:t=>this.eContainer.style.width=t,setOffsetTop:t=>this.eContainer.style.transform=`translateY(${t})`};this.createManagedBean(new Db(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(e){const i={...this.rowComps};this.rowComps={},this.lastPlacedElement=null,e.forEach(o=>{const r=o.instanceId,s=i[r];if(s)this.rowComps[r]=s,delete i[r],this.ensureDomOrder(s.getGui());else{if(!o.getRowNode().displayed)return;const a=new Pb(o,this.beans,this.options.type);this.rowComps[r]=a,this.appendRow(a.getGui())}}),Ar(i).forEach(o=>{this.eContainer.removeChild(o.getGui()),o.destroy()}),Dn(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?function Hw(e,i,t){t?t.insertAdjacentElement("afterend",i):e.firstChild?e.insertAdjacentElement("afterbegin",i):e.appendChild(i)}(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(zf(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}}};function pl(e){return e.map(i=>`<ag-row-container name="${i}"></ag-row-container>`).join("")}var Nb=`<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root></ag-header-root>\n        <div class="ag-floating-top" data-ref="eTop" role="presentation">\n            ${pl(["topLeft","topCenter","topRight","topFullWidth"])}\n        </div>\n        <div class="ag-body" data-ref="eBody" role="presentation">\n            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">\n            ${pl(["left","center","right","fullWidth"])}\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">\n            ${pl(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}\n        </div>\n        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">\n            ${pl(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}\n        </div>\n        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">\n            ${pl(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>`,Zb={selector:"AG-GRID-BODY",component:class extends Mt{constructor(){super(Nb,[P3,I3,N3,R3,Ob]),this.eBodyViewport=Ne,this.eStickyTop=Ne,this.eStickyBottom=Ne,this.eTop=Ne,this.eBottom=Ne,this.eBody=Ne}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){const e=(t,o)=>{const r=`${t}px`;o.style.minHeight=r,o.style.height=r},i={setRowAnimationCssOnBodyViewport:(t,o)=>this.setRowAnimationCssOnBodyViewport(t,o),setColumnCount:t=>function Rw(e,i){Qn(e,"colcount",i)}(this.getGui(),t),setRowCount:t=>function Fw(e,i){Qn(e,"rowcount",i)}(this.getGui(),t),setTopHeight:t=>e(t,this.eTop),setBottomHeight:t=>e(t,this.eBottom),setTopDisplay:t=>this.eTop.style.display=t,setBottomDisplay:t=>this.eBottom.style.display=t,setStickyTopHeight:t=>this.eStickyTop.style.height=t,setStickyTopTop:t=>this.eStickyTop.style.top=t,setStickyTopWidth:t=>this.eStickyTop.style.width=t,setStickyBottomHeight:t=>{this.eStickyBottom.style.height=t,this.eStickyBottom.classList.toggle("ag-hidden","0px"===t)},setStickyBottomBottom:t=>this.eStickyBottom.style.bottom=t,setStickyBottomWidth:t=>this.eStickyBottom.style.width=t,setColumnMovingCss:(t,o)=>this.addOrRemoveCssClass(t,o),updateLayoutClasses:(t,o)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(s=>{s.toggle("ag-layout-auto-height",o.autoHeight),s.toggle("ag-layout-normal",o.normal),s.toggle("ag-layout-print",o.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",o.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",o.normal),this.addOrRemoveCssClass("ag-layout-print",o.print)},setAlwaysVerticalScrollClass:(t,o)=>this.eBodyViewport.classList.toggle(qm,o),registerBodyViewportResizeListener:t=>{const o=this.resizeObserverService.observeResize(this.eBodyViewport,t);this.addDestroyFunc(()=>o())},setPinnedTopBottomOverflowY:t=>this.eTop.style.overflowY=this.eBottom.style.overflowY=t,setCellSelectableCss:(t,o)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(r=>r.classList.toggle(t,o))},setBodyViewportWidth:t=>this.eBodyViewport.style.width=t};this.ctrl=this.createManagedBean(new Mb),this.ctrl.setComp(i,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&Oo(this.gos)||Mu(this.gos))&&function Dw(e,i){Qn(e,"multiselectable",i)}(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,i){const t=this.eBodyViewport.classList;t.toggle("ag-row-animation",i),t.toggle("ag-row-no-animation",!i)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}}},Gb=class extends fe{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const i={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(i),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),i=e.hasHorizontalScrollGap(),t=e.hasVerticalScrollGap();(this.horizontalScrollGap!==i||this.verticalScrollGap!==t)&&(this.horizontalScrollGap=i,this.verticalScrollGap=t,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"==typeof e&&e>=0?e:function Bw(){return null==Xu&&Nf(),Xu}();null!=t&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},zm="__ag_grid_instance",Vm=class TC extends fe{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=TC.gridInstanceSequence.next()}wireBeans(i){this.ctrlsService=i.ctrlsService}stampTopLevelGridCompWithGridInstance(i){i[zm]=this.gridInstanceId}getRenderedCellForEvent(i){return Iu(this.gos,i.target,hs.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(i){return this.isElementInThisGrid(i.target)}isElementInThisGrid(i){let t=i;for(;t;){const o=t[zm];if(Fe(o))return o===this.gridInstanceId;t=t.parentElement}return!1}getCellPositionForEvent(i){const t=this.getRenderedCellForEvent(i);return t?t.getCellPosition():null}getNormalisedPosition(i){const t=Ki(this.gos,"normal");let r,s;if(null!=i.clientX||null!=i.clientY?(r=i.clientX,s=i.clientY):(r=i.x,s=i.y),t){const a=this.ctrlsService.getGridBodyCtrl(),l=a.getScrollFeature().getVScrollPosition();r+=a.getScrollFeature().getHScrollPosition().left,s+=l.top}return{x:r,y:s}}};Vm.gridInstanceSequence=new Vs;var Hb=Vm,qb=class extends fe{constructor(){super(),this.beanName="navigationService",this.onPageDown=Os(this.onPageDown,100),this.onPageUp=Os(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,i=!1){const t=e.key,o=e.altKey,r=e.ctrlKey||e.metaKey,s=!!this.rangeService&&e.shiftKey,a=this.mouseEventService.getCellPositionForEvent(e);let l=!1;switch(t){case le.PAGE_HOME:case le.PAGE_END:!r&&!o&&(this.onHomeOrEndKey(t),l=!0);break;case le.LEFT:case le.RIGHT:case le.UP:case le.DOWN:if(!a)return!1;r&&!o&&!s&&(this.onCtrlUpDownLeftRight(t,a),l=!0);break;case le.PAGE_DOWN:case le.PAGE_UP:!r&&!o&&(l=this.handlePageUpDown(t,a,i))}return l&&e.preventDefault(),l}handlePageUpDown(e,i,t){return t&&(i=this.focusService.getFocusedCell()),!!i&&(e===le.PAGE_UP?this.onPageUp(i):this.onPageDown(i),!0)}navigateTo(e){const{scrollIndex:i,scrollType:t,scrollColumn:o,focusIndex:r,focusColumn:s}=e;Fe(o)&&!o.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(o),Fe(i)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,t),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(r),this.focusService.setFocusedCell({rowIndex:r,column:s,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:r,rowPinned:null,column:s})}onPageDown(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.getViewportHeight(),r=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRowIndexAtPixel(t.top+o+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a):this.navigateToNextPage(e,a)}onPageUp(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.pageBoundsService.getPixelOffset(),s=this.rowModel.getRowIndexAtPixel(t.top+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,s,!0):this.navigateToNextPage(e,s,!0)}navigateToNextPage(e,i,t=!1){const o=this.getViewportHeight(),r=this.pageBoundsService.getFirstRow(),s=this.pageBoundsService.getLastRow(),a=this.pageBoundsService.getPixelOffset(),l=this.rowModel.getRow(e.rowIndex),c=t?l?.rowHeight-o-a:o-a;let g,h=this.rowModel.getRowIndexAtPixel(l?.rowTop+c+a);h===e.rowIndex&&(i=h=e.rowIndex+(t?-1:1)),t?(g="bottom",h<r&&(h=r),i<r&&(i=r)):(g="top",h>s&&(h=s),i>s&&(i=s)),this.isRowTallerThanView(h)&&(i=h,g="top"),this.navigateTo({scrollIndex:i,scrollType:g,scrollColumn:null,focusIndex:h,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,i,t=!1){this.navigateTo({scrollIndex:i,scrollType:t?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column}),setTimeout(()=>{const o=this.getNextFocusIndexForAutoHeight(e,t);this.navigateTo({scrollIndex:i,scrollType:t?"bottom":"top",scrollColumn:null,focusIndex:o,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,i=!1){const t=i?-1:1,o=this.getViewportHeight(),r=this.pageBoundsService.getLastRow();let s=0,a=e.rowIndex;for(;a>=0&&a<=r;){const l=this.rowModel.getRow(a);if(l){const c=l.rowHeight??0;if(s+c>o)break;s+=c}a+=t}return Math.max(0,Math.min(a,r))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.scrollVisibleService.getScrollbarWidth();let t=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(t-=i),t}isRowTallerThanView(e){const i=this.rowModel.getRow(e);if(!i)return!1;const t=i.rowHeight;return"number"==typeof t&&t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,i){const t=this.cellNavigationService.getNextCellToFocus(e,i,!0),{rowIndex:o}=t,r=t.column;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:r,focusIndex:o,focusColumn:r})}onHomeOrEndKey(e){const i=e===le.PAGE_HOME,t=this.visibleColsService.getAllCols(),o=i?t[0]:Tt(t),r=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:o,focusIndex:r,focusColumn:o})}onTabKeyDown(e,i){const t=i.shiftKey,o=this.tabToNextCellCommon(e,t,i);if(!1===o)if(t){const{rowIndex:r,rowPinned:s}=e.getRowPosition();(s?0===r:r===this.pageBoundsService.getFirstRow())&&(0===this.gos.get("headerHeight")||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(i.preventDefault(),this.focusService.focusPreviousFromFirstCell(i)))}else e instanceof hs&&e.focusCell(!0),(!t&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(t))&&i.preventDefault();else o?i.preventDefault():null===o&&this.focusService.allowFocusForNextGridCoreContainer(t)}tabToNextCell(e,i){const t=this.focusService.getFocusedCell();if(!t)return!1;let o=this.getCellByPosition(t);return!!(o||(o=this.rowRenderer.getRowByPosition(t),o&&o.isFullWidth()))&&!!this.tabToNextCellCommon(o,e,i)}tabToNextCellCommon(e,i,t){let r,o=e.isEditing();if(!o&&e instanceof hs){const a=e.getRowCtrl();a&&(o=a.isEditing())}return r=o?"fullRow"===this.gos.get("editType")?this.moveToNextEditingRow(e,i,t):this.moveToNextEditingCell(e,i,t):this.moveToNextCellNotEditing(e,i),null===r?r:r||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,i,t=null){const o=e.getCellPosition();e.getGui().focus(),e.stopEditing();const r=this.findNextCellToFocusOn(o,i,!0);return!1===r?null:null!=r&&(r.startEditing(null,!0,t),r.focusCell(!1),!0)}moveToNextEditingRow(e,i,t=null){const o=e.getCellPosition(),r=this.findNextCellToFocusOn(o,i,!0);if(!1===r)return null;if(null==r)return!1;const s=r.getCellPosition(),a=this.isCellEditable(o),l=this.isCellEditable(s),c=s&&o.rowIndex===s.rowIndex&&o.rowPinned===s.rowPinned;return a&&e.setFocusOutOnEditor(),c||(e.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,t)),l?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(e,i){const t=this.visibleColsService.getAllCols();let o;o=e instanceof gs?{...e.getRowPosition(),column:i?t[0]:Tt(t)}:e.getCellPosition();const r=this.findNextCellToFocusOn(o,i,!1);if(!1===r)return null;if(r instanceof hs)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),i);return Fe(r)}findNextCellToFocusOn(e,i,t){let o=e;for(;;){e!==o&&(e=o),i||(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextTabbedCell(o,i);const r=this.gos.getCallback("tabToNextCell");if(Fe(r)){const c=r({backwards:i,editing:t,previousCellPosition:e,nextCellPosition:o||null});if(!0===c||null===c)null===c&&pe("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),o=e;else{if(!1===c)return!1;o={rowIndex:c.rowIndex,column:c.column,rowPinned:c.rowPinned}}}if(!o)return null;if(o.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+o.rowIndex,column:o.column},fromCell:!0}),null}const s="fullRow"===this.gos.get("editType");if(t&&!s&&!this.isCellEditable(o))continue;this.ensureCellVisible(o);const a=this.getCellByPosition(o);if(!a){const l=this.rowRenderer.getRowByPosition(o);if(!l||!l.isFullWidth()||t)continue;return l}if(!a.isSuppressNavigable())return this.rangeService?.setRangeToCell(o),a}}isCellEditable(e){const i=this.lookupRowNodeForCell(e);return!!i&&e.column.isCellEditable(i)}getCellByPosition(e){const i=this.rowRenderer.getRowByPosition(e);return i?i.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return"top"===e.rowPinned?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):"bottom"===e.rowPinned?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,i,t,o){let r=t,s=!1;for(;r&&(r===t||!this.isValidNavigateCell(r));)this.gos.get("enableRtl")?i===le.LEFT&&(r=this.getLastCellOfColSpan(r)):i===le.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(i,r),s=kt(r);if(s&&e&&e.key===le.UP&&(r={rowIndex:-1,rowPinned:null,column:t.column}),o){const l=this.gos.getCallback("navigateToNextCell");if(Fe(l)){const d=l({key:i,previousCellPosition:t,nextCellPosition:r||null,event:e});r=Fe(d)?{rowPinned:d.rowPinned,rowIndex:d.rowIndex,column:d.column}:null}}if(!r)return;if(r.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+r.rowIndex,column:t.column},event:e||void 0,fromCell:!0})}const a=this.getNormalisedPosition(r);a?this.focusPosition(a):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(e){this.ensureCellVisible(e);const i=this.getCellByPosition(e);return i?(e=i.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,i){const t=this.visibleColsService.getAllCols(),o=this.rowRenderer.getRowByPosition(e);if(!o||!o.isFullWidth())return!1;const r=this.focusService.getFocusedCell(),s={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(i?Tt(t):t[0])};this.focusPosition(s);const a=i??(null!=r&&this.rowPositionUtils.before(s,r));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:s.column,isFullWidthCell:!0,fromBelow:a}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const i=this.getCellByPosition(e);if(!i)return e;const t=i.getColSpanningList();return 1===t.length?e:{rowIndex:e.rowIndex,column:Tt(t),rowPinned:e.rowPinned}}ensureCellVisible(e){const i=pc(this.gos),t=this.rowModel.getRow(e.rowIndex);!(i&&t?.sticky)&&kt(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},zb=class extends fe{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const i={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(i),()=>this.dragService.removeDragSource(i)}onDragStart(e,i){this.dragStartX=i.clientX,this.setResizeIcons();const t=i instanceof MouseEvent&&!0===i.shiftKey;e.onResizeStart(t)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,i){this.resizeAmount=i.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},Vb=class extends fe{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,i,t){this.showPopup(e,o=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:t,mouseEvent:i,ePopup:o})},t,i.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,i,t){let o=-1,r="left";const s=this.menuService.isLegacyMenuEnabled();!s&&this.gos.get("enableRtl")&&(o=1,r="right");const a=s?void 0:4*o,l=s?void 0:4;this.showPopup(e,c=>{this.popupService.positionPopupByComponent({type:t,eventSource:i,ePopup:c,nudgeX:a,nudgeY:l,alignSide:r,keepWithinBounds:!0,position:"under",column:e})},t,i,s)}showPopup(e,i,t,o,r){const s=e?this.createBean(new J2(e,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!s?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const a=document.createElement("div");let l;Dn(a,"presentation"),a.classList.add("ag-menu"),r||a.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(a,{keydown:y=>this.trapFocusWithin(y,a)}),a.appendChild(s?.getGui());const d=this.menuService.isColumnMenuAnchoringEnabled()?o??this.ctrlsService.getGridBodyCtrl().getGui():void 0,g=this.localeService.getLocaleTextFunc(),m=r&&"columnFilter"!==t?g("ariaLabelColumnMenu","Column Menu"):g("ariaLabelColumnFilter","Column Filter"),f=this.popupService.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:y=>{e.setMenuVisible(!1,"contextMenu");const b=y instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),b&&o&&mo(o)){const S=this.focusService.findTabbableParent(o);S&&S.focus()}s?.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,t,e)},positionCallback:()=>i(a),anchorToElement:d,ariaLabel:m});f&&(this.hidePopup=l=f.hideFunc),s.afterInit().then(()=>{i(a),s.afterGuiAttached({container:t,hidePopup:l})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,t,e)}trapFocusWithin(e,i){e.key!==le.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(i,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(i,e.shiftKey))}dispatchVisibleChangedEvent(e,i,t){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:i,column:t??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},Ub=class extends fe{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,i){const o=cf(this.gos).ResizeObserver,r=o?new o(i):null;return r?.observe(e),()=>r?.disconnect()}},Wb=class extends fe{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){const i=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,i&&0===e){const t=this.paginationService?.getCurrentPage()??0;t!==this.lastPage&&(this.lastPage=t,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){!1===this.useAnimationFrame&&pe(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,i,t){this.verifyAnimationFrameOn(t);const o={task:e,index:i,createOrder:++this.taskCount};this.addTaskToList(this[t],o),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,i){e.list.push(i),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const i=this.scrollGoingDown?1:-1;e.list.sort((t,o)=>t.index!==o.index?i*(o.index-t.index):o.createOrder-t.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const i=this.createTasksP1,t=i.list,o=this.createTasksP2,r=o.list,s=this.destroyTasks,a=(new Date).getTime();let l=(new Date).getTime()-a;const c=e<=0,d=this.ctrlsService.getGridBodyCtrl();for(;c||l<e;){if(!d.getScrollFeature().scrollGridIfNeeded()){let g;if(t.length)this.sortTaskList(i),g=t.pop().task;else if(r.length)this.sortTaskList(o),g=r.pop().task;else{if(!s.length){this.cancelledTasks.clear();break}g=s.pop()}this.cancelledTasks.has(g)||g()}l=(new Date).getTime()-a}t.length||r.length||s.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const i=cf(this.gos);i.requestAnimationFrame?i.requestAnimationFrame(e):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(e):i.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let i=!1;return()=>{this.isOn()?i||(i=!0,this.addDestroyTask(()=>{i=!1,e()})):window.setTimeout(e,0)}}},Yb=class extends fe{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=gi(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const i=new Set(e);this.rowModel.forEachNode(t=>{t.id&&i.has(t.id)&&(t.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:i,id:t})=>{i&&t&&e.push(t)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,i,t,o){e&&(t&&e.parent&&-1!==e.parent.level&&this.setRowNodeExpanded(e.parent,i,t,o),e.setExpanded(i,void 0,o))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},$b=class extends fe{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const i=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(i,e,e.containerType,!0)}showHeaderContextMenu(e,i,t){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,i,t)}getContextMenuPosition(e,i){const t=this.getRowCtrl(e),o=this.getCellGui(t,i);if(!o)return t?{x:0,y:t.getRowYPosition()}:{x:0,y:0};const r=o.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(e){const{rowNode:i}=e,t=e.column;let{anchorToElement:o,value:r}=e;i&&t&&null==r&&(r=this.valueService.getValueForDisplay(t,i)),null==o&&(o=this.getContextMenuAnchorElement(i,t)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,i??null,t??null,r,o)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:i,suppressHeaderMenuButton:t}=e.getColDef();return!(t??i)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&kr(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&"new"===this.getColumnMenuType()}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Tr()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!(!this.filterManager?.isFilterAllowed(e)||this.isLegacyMenuEnabled()||this.isFilterMenuInHeaderEnabled(e)||this.isFloatingFilterButtonDisplayed(e))}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return"new"===this.getColumnMenuType()}isLegacyMenuEnabled(){return"legacy"===this.getColumnMenuType()}isFloatingFilterButtonEnabled(e){const i=e.getColDef(),t=i.floatingFilterComponentParams?.suppressFilterButton;return null!=t&&pe("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),null==i.suppressFloatingFilterButton?!t:!i.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?!!this.gos.exists("suppressMenuHide")&&e:e}showColumnMenuCommon(e,i,t,o){const{positionBy:r}=i,s=i.column;if("button"===r){const{buttonElement:a}=i;e.showMenuAfterButtonClick(s,a,t,o)}else if("mouse"===r){const{mouseEvent:a}=i;e.showMenuAfterMouseEvent(s,a,t,o)}else s&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const a=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned())?.getHeaderCtrlForColumn(s);a&&e.showMenuAfterButtonClick(s,a.getAnchorElementForMenu(o),t,!0)}))}getRowCtrl(e){const{rowIndex:i,rowPinned:t}=e||{};if(null!=i)return this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:t})||void 0}getCellGui(e,i){return e&&i&&e.getCellCtrl(i)?.getGui()||void 0}getContextMenuAnchorElement(e,i){const t=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),o=this.getRowCtrl(e);return o?this.getCellGui(o,i)||(o.isFullWidth()?o.getFullWidthElement():t):t}},Kb={selector:"AG-INPUT-TEXT-AREA",component:class extends cs{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,i){const t=super.setValue(e,i);return this.eInput.value=e,t}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},Xb=class extends Ws{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){ns(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),i=this.params;this.addManagedElementListeners(e,{keydown:o=>{mh(this.gos,o,i.node,i.column,!0)||i.onKeyDown(o)}})}},zc=class extends Ws{constructor(e){super(`\n            <div class="ag-cell-edit-wrapper">\n                ${e.getTemplate()}\n            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=Ne}init(e){this.params=e;const{cellStartedEdit:i,eventKey:t,suppressPreventDefault:o}=e,r=this.eInput;this.cellEditorInput.init(r,e);let s,a=!0;i?(this.focusAfterAttached=!0,t===le.BACKSPACE||t===le.DELETE?s="":t&&1===t.length?o?a=!1:s=t:(s=this.cellEditorInput.getStartValue(),t!==le.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,s=this.cellEditorInput.getStartValue()),a&&null!=s&&r.setStartValue(s),this.addManagedElementListeners(r.getGui(),{keydown:l=>{const{key:c}=l;(c===le.PAGE_UP||c===le.PAGE_DOWN)&&l.preventDefault()}})}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc(),i=this.eInput;if(i.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Bo()||i.getFocusableElement().focus();const t=i.getInputElement();this.highlightAllOnFocus?t.select():this.cellEditorInput.setCaret?.()}focusIn(){const e=this.eInput,i=e.getFocusableElement(),t=e.getInputElement();i.focus(),t.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},Um=class extends zc{constructor(){super(new class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[Pc]}init(e,i){this.eInput=e,this.params=i,null!=i.maxLength&&e.setMaxLength(i.maxLength)}getValue(){const e=this.eInput.getValue();return Fe(e)||Fe(this.params.value)?this.params.parseValue(e):this.params.value}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),i=Fe(e)&&e.length||0;i&&this.eInput.getInputElement().setSelectionRange(i,i)}})}},Wm={selector:"AG-INPUT-DATE-FIELD",component:class extends us{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Bo();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){ai(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const i=e instanceof Date?eo(e??null,!1)??void 0:e;return this.min===i||(this.min=i,Xn(this.eInput,"min",i)),this}setMax(e){const i=e instanceof Date?eo(e??null,!1)??void 0:e;return this.max===i||(this.max=i,Xn(this.eInput,"max",i)),this}setStep(e){return this.step===e||(this.step=e,Xn(this.eInput,"step",e)),this}getDate(){if(this.eInput.validity.valid)return Fn(this.getValue())??void 0}setDate(e,i){this.setValue(eo(e??null,!1),i)}}},fl=class{constructor(e){this.cellValueChanges=e}},Ph=class extends fl{constructor(e,i,t,o){super(e),this.initialRange=i,this.finalRange=t,this.ranges=o}},jm=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};function Ym(e,i,t="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,t),"ensureVisible")}function $m(e,i,t){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(i,t),"ensureVisible")}var ps={version:lt,moduleName:"@ag-grid-community/edit-core",beans:[class extends fe{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,i=null,t=!1,o=null){const r=this.createCellEditorParams(e,i,t),s=e.getColumn().getColDef(),a=this.userComponentFactory.getCellEditorDetails(s,r),l=null!=a?.popupFromSelector?a.popupFromSelector:!!s.cellEditorPopup,c=null!=a?.popupPositionFromSelector?a.popupPositionFromSelector:s.cellEditorPopupPosition;return e.setEditing(!0,a),e.getComp().setEditDetails(a,l,c,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(o,"cellEditingStarted")),!a?.params?.suppressPreventDefault}stopEditing(e,i){const t=e.getComp(),{newValue:o,newValueExists:r}=this.takeValueFromCellEditor(i,t),s=e.getRowNode(),a=e.getColumn(),l=this.valueService.getValueForDisplay(a,s);let c=!1;return r&&(c=this.saveNewValue(e,l,o,s,a)),e.setEditing(!1,void 0),t.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:l,newValue:o,valueChanged:c}),c}handleColDefChanged(e){const i=e.getCellEditor();if(i?.refresh){const{eventKey:t,cellStartedEdit:o}=e.getEditCompDetails().params,r=this.createCellEditorParams(e,t,o),s=e.getColumn().getColDef(),a=this.userComponentFactory.getCellEditorDetails(s,r);i.refresh(a.params)}}setFocusOutOnEditor(e){const i=e.getComp().getCellEditor();i&&i.focusOut&&i.focusOut()}setFocusInOnEditor(e){const i=e.getComp(),t=i.getCellEditor();t?.focusIn?t.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>i.getCellEditor()?.focusIn?.()))}stopEditingAndFocus(e,i=!1,t=!1){e.stopRowOrCellEdit(),e.focusCell(!0),i||this.navigateAfterEdit(t,e.getCellPosition())}createPopupEditorWrapper(e){return new Xb(e)}takeValueFromCellEditor(e,i){const t={newValueExists:!1};if(e)return t;const o=i.getCellEditor();return!o||o.isCancelAfterEnd&&o.isCancelAfterEnd()?t:{newValue:o.getValue(),newValueExists:!0}}saveNewValue(e,i,t,o,r){if(t===i)return!1;e.setSuppressRefreshCell(!0);const s=o.setDataValue(r,t,"edit");return e.setSuppressRefreshCell(!1),s}createCellEditorParams(e,i,t){const o=e.getColumn(),r=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(o,r),eventKey:i,column:o,colDef:o.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:r,data:r.data,cellStartedEdit:t,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:s=>this.valueService.parseValue(o,r,s,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,i){this.gos.get("enterNavigatesVerticallyAfterEdit")&&this.navigationService.navigateToNextCell(null,e?le.UP:le.DOWN,i,!1)}}]},AS={version:lt,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:function fS(e){e.undoRedoService?.undo("api")},redoCellEditing:function mS(e){e.undoRedoService?.redo("api")},getCellEditorInstances:function vS(e,i={}){return e.rowRenderer.getCellEditorInstances(i).map(cl)},getEditingCells:function CS(e){return e.rowRenderer.getEditingCells()},stopEditing:function wS(e,i=!1){e.rowRenderer.stopEditing(i)},startEditingCell:function yS(e,i){const t=e.columnModel.getCol(i.colKey);if(!t)return void pe(`no column found for ${i.colKey}`);const o={rowIndex:i.rowIndex,rowPinned:i.rowPinned||null,column:t};null==i.rowPinned&&$m(e,i.rowIndex),Ym(e,i.colKey);const s=e.navigationService.getCellByPosition(o);if(!s)return;const{focusService:a,gos:l}=e,d=l.get("stopEditingWhenCellsLoseFocus")&&(()=>{const h=ai(l),g=s.getGui();return h!==g&&g.contains(h)})();(d||!a.isCellFocused(o))&&a.setFocusedCell({...o,forceBrowserFocus:d,preventScrollOnBrowserFocus:!0}),s.startRowOrCellEdit(i.key)},getCurrentUndoSize:function bS(e){return e.undoRedoService?.getCurrentUndoStackSize()??0},getCurrentRedoSize:function SS(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}},dependantModules:[ps]},kS={version:lt,moduleName:"@ag-grid-community/undo-redo-edit",beans:[class extends fe{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const i={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},t=null!==this.activeCellEdit&&this.cellPositionUtils.equals(this.activeCellEdit,i),o=null!==this.activeRowEdit&&this.rowPositionUtils.sameRow(this.activeRowEdit,i);if(!(t||o||this.isPasting||this.isRangeInAction))return;const{rowPinned:s,rowIndex:a,column:l,oldValue:c,value:d}=e,h={rowPinned:s,rowIndex:a,columnId:l.getColId(),newValue:d,oldValue:c};this.cellValueChanges.push(h)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new jm(e),this.redoStack=new jm(e),this.addListeners();const i=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:t=>{t.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:i,newColumnsLoaded:i,columnGroupOpened:i,columnRowGroupChanged:i,columnMoved:i,columnPinned:i,columnVisible:i,rowDragEnd:i}),this.ctrlsService.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:i})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:i})}undoRedo(e,i,t,o,r){if(!e)return!1;const s=e.pop();return!(!s||!s.cellValueChanges||(this.processAction(s,a=>a[o],r),s instanceof Ph?this.processRange(this.rangeService,s.ranges||[s[t]]):this.processCell(s.cellValueChanges),i.push(s),0))}processAction(e,i,t){e.cellValueChanges.forEach(o=>{const{rowIndex:r,rowPinned:s,columnId:a}=o,c=this.rowPositionUtils.getRowNode({rowIndex:r,rowPinned:s});c.displayed&&c.setDataValue(a,i(o),t)})}processRange(e,i){let t;e.removeAllCellRanges(!0),i.forEach((o,r)=>{if(!o)return;const s=o.startRow,a=o.endRow;r===i.length-1&&(t={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:o.startColumn.getColId()},this.setLastFocusedCell(t)),e.addCellRange({rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:a.rowIndex,rowEndPinned:a.rowPinned,columnStart:o.startColumn,columns:o.columns})})}processCell(e){const i=e[0],{rowIndex:t,rowPinned:o}=i,s=this.rowPositionUtils.getRowNode({rowIndex:t,rowPinned:o});this.setLastFocusedCell({rowPinned:i.rowPinned,rowIndex:s.rowIndex,columnId:i.columnId},this.rangeService)}setLastFocusedCell(e,i){const{rowIndex:t,columnId:o,rowPinned:r}=e,s=this.gridBodyCtrl.getScrollFeature(),a=this.columnModel.getCol(o);if(!a)return;s.ensureIndexVisible(t),s.ensureColumnVisible(a);const l={rowIndex:t,column:a,rowPinned:r};this.focusService.setFocusedCell({...l,forceBrowserFocus:!0}),i?.setRangeToCell(l)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new fl(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const t=new fl(this.cellValueChanges);this.pushActionsToUndoStack(t)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new fl(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const i=new Ph(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(i),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;e=this.rangeService&&Oo(this.gos)?new Ph(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):new fl(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}],dependantModules:[ps]},TS={version:lt,moduleName:"@ag-grid-community/full-row-edit",beans:[class extends fe{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,i=null,t=null,o=null){let r=!0;return e.getAllCellCtrls().reduce((a,l)=>{const c=l===t;return c?r=l.startEditing(i,c,o):l.startEditing(null,c,o),!!a||l.isEditing()},!1)&&this.setEditing(e,!0),r}stopEditing(e,i=!1){const t=e.getAllCellCtrls(),o=e.isEditing();e.setStoppingRowEdit(!0);let r=!1;for(const s of t){const a=s.stopEditing(i);o&&!i&&!r&&a&&(r=!0)}r&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),o&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,i){e.setEditingRow(i),e.forEachGui(void 0,o=>o.rowComp.addOrRemoveCssClass("ag-row-editing",i));const t=e.createRowEvent(i?"rowEditingStarted":"rowEditingStopped");this.eventService.dispatchEvent(t)}}],dependantModules:[ps]},Jm={version:lt,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:Um}],dependantModules:[ps]},DS={version:lt,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:Um},{name:"agNumberCellEditor",classImp:class extends zc{constructor(){super(new class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[gy]}init(e,i){this.eInput=e,this.params=i,null!=i.max&&e.setMax(i.max),null!=i.min&&e.setMin(i.min),null!=i.precision&&e.setPrecision(i.precision),null!=i.step&&e.setStep(i.step);const t=e.getInputElement();i.preventStepping?e.addManagedElementListeners(t,{keydown:this.preventStepping}):i.showStepperButtons&&t.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===le.UP||e.key===le.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!Fe(e)&&!Fe(this.params.value))return this.params.value;let i=this.params.parseValue(e);if(null==i)return i;if("string"==typeof i){if(""===i)return null;i=Number(i)}return isNaN(i)?null:i}getStartValue(){return this.params.value}setCaret(){Bo()&&this.eInput.getInputElement().focus({preventScroll:!0})}})}},params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:class extends zc{constructor(){super(new class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[Wm]}init(e,i){this.eInput=e,this.params=i,null!=i.min&&e.setMin(i.min),null!=i.max&&e.setMax(i.max),null!=i.step&&e.setStep(i.step)}getValue(){const e=this.eInput.getDate();return Fe(e)||Fe(this.params.value)?e??null:this.params.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return eo(e,!1)}})}}},{name:"agDateStringCellEditor",classImp:class extends zc{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[Wm]}init(e,i){this.eInput=e,this.params=i,null!=i.min&&e.setMin(i.min),null!=i.max&&e.setMax(i.max),null!=i.step&&e.setStep(i.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return Fe(e)||Fe(this.params.value)?this.params.parseValue(e??""):this.params.value}getStartValue(){return eo(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const i=this.getDataTypeService();return i?i.getDateParserFunction(this.params.column)(e):Fn(e)??void 0}formatDate(e){const i=this.getDataTypeService();return i?i.getDateFormatterFunction(this.params.column)(e):eo(e??null,!1)??void 0}}(()=>this.dataTypeService))}}},{name:"agCheckboxCellEditor",classImp:class extends Ws{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[uh]),this.eCheckbox=Ne}init(e){this.params=e;const i=e.value??void 0;this.eCheckbox.setValue(i),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:o=>this.setAriaLabel(o.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const i=this.localeService.getLocaleTextFunc(),t=Wu(i,e),o=i("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${o} (${t})`)}}}],dependantModules:[Jm]},FS={version:lt,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:class extends Ws{constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>\n            </div>',[ny]),this.eSelect=Ne,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:i,valueService:t,gos:o}=this,{values:r,value:s,eventKey:a}=e;if(kt(r))return void pe("no values found for select cellEditor");this.startedByEnter=null!=a&&a===le.ENTER;let l=!1;r.forEach(g=>{const m={value:g},f=t.formatValue(e.column,null,g);m.text=null!=f?f:g,i.addOption(m),l=l||s===g}),l?i.setValue(e.value,!0):e.values.length&&i.setValue(e.values[0],!0);const{valueListGap:c,valueListMaxWidth:d,valueListMaxHeight:h}=e;null!=c&&i.setPickerGap(c),null!=h&&i.setPickerMaxHeight(h),null!=d&&i.setPickerMaxWidth(d),"fullRow"!==o.get("editType")&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}}],dependantModules:[ps]},RS={version:lt,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:class extends Ws{constructor(){super('<div class="ag-large-text">\n        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',[Kb]),this.eTextArea=Ne}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),Fe(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const i=e.key;(i===le.LEFT||i===le.UP||i===le.RIGHT||i===le.DOWN||e.shiftKey&&i===le.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return Fe(e)||Fe(this.params.value)?this.params.parseValue(e):this.params.value}}}],dependantModules:[ps]},ES={version:lt,moduleName:"@ag-grid-community/editing",dependantModules:[ps,kS,TS,{version:lt,moduleName:"@ag-grid-community/all-editors",dependantModules:[Jm,DS,FS,RS]},AS]},PS=class extends fe{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,i){const t=this.getHeaderCellForColumn(e);if(!t)return-1;const o=this.rowRenderer.getAllCellsForColumn(e);return i||o.push(t),this.addElementsToContainerAndGetWidth(o)}getPreferredWidthForColumnGroup(e){const i=this.getHeaderCellForColumn(e);return i?this.addElementsToContainerAndGetWidth([i]):-1}addElementsToContainerAndGetWidth(e){const i=document.createElement("form");i.style.position="fixed";const t=this.centerRowContainerCtrl.getContainerElement();e.forEach(s=>this.cloneItemIntoDummy(s,i)),t.appendChild(i);const o=i.offsetWidth;return t.removeChild(i),o+this.getAutoSizePadding()}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let i=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>{const o=t.getHtmlElementForColumnHeader(e);null!=o&&(i=o)}),i}cloneItemIntoDummy(e,i){const t=e.cloneNode(!0);t.style.width="",t.style.position="static",t.style.left="";const o=document.createElement("div"),r=o.classList;["ag-header-cell","ag-header-group-cell"].some(l=>t.classList.contains(l))?(r.add("ag-header","ag-header-row"),o.style.position="static"):r.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(c=>a.classList.contains(c))){for(let c=0;c<a.classList.length;c++){const d=a.classList[c];"ag-row-position-absolute"!=d&&r.add(d)}break}a=a.parentElement}o.appendChild(t),i.appendChild(o)}},LS=class extends fe{constructor(e,i){super(),this.createRowCon=e,this.destroyRowCtrls=i,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=gi(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.childStore?.getStoreBounds();return e.footer&&(t=e.sibling.childStore?.getStoreBounds()),(t?.heightPx??0)+(t?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&0===e.rowIndex)return Number.MAX_SAFE_INTEGER;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let o=e.footer?e.sibling:e;for(;o.isExpandable()&&o.expanded;)if(o.master)o=o.detailNode;else if(o.childrenAfterSort){if(0===o.childrenAfterSort.length)break;o=Tt(o.childrenAfterSort)}return o.rowTop+o.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const i="top"===e;let t=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,t);const o=i?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,r=new Set,s=d=>{if(r.add(d),i){const h=this.getLastPixelOfGroup(d),g=o+t+d.rowHeight;d.stickyRowTop=h<g?t+(h-g):t}else{const h=this.getFirstPixelOfGroup(d),g=o-(t+d.rowHeight);d.stickyRowTop=h>g?t-(h-g):t}t=0,r.forEach(h=>{const g=h.stickyRowTop+h.rowHeight;t<g&&(t=g)})},a=this.areFooterRowsStickySuppressed(),l=this.gos.get("suppressGroupRowsSticky"),c=d=>!!d.displayed&&(d.footer?!(!0===a||"grand"===a&&-1===d.level||"group"===a&&d.level>-1)&&!("bottom"===e&&d.sibling.rowIndex&&d.sibling.rowIndex+1===d.rowIndex||r.has(d)):!!d.isExpandable()&&!0!==l&&"bottom"!==e&&!r.has(d)&&d.expanded);for(let d=0;d<100;d++){let h=o+t;i||(h=o-t);const g=this.rowModel.getRowIndexAtPixel(h),m=this.rowModel.getRow(g);if(null==m)break;const y=this.getStickyAncestors(m).find(S=>(i?S.rowIndex<g:S.rowIndex>g)&&c(S));if(y)s(y);else{if(!(i?m.rowTop<h:m.rowTop+m.rowHeight>h)||!c(m))break;s(m)}}return i||r.forEach(d=>{d.stickyRowTop=t-(d.stickyRowTop+d.rowHeight)}),this.refreshNodesAndContainerHeight(e,r,t)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(!0===e)return!0;const i=!!this.gos.get("groupIncludeFooter")||"group"===e,t=!!this.gos.get("groupIncludeTotalFooter")||"grand"===e;return!(!i||!t)||(t?"grand":!!i&&"group")}canRowsBeSticky(){const e=pc(this.gos),i=this.areFooterRowsStickySuppressed(),t=this.gos.get("suppressGroupRowsSticky");return e&&(!i||!t)}getStickyAncestors(e){const i=[];let t=e.footer?e.sibling:e.parent;for(;t;)t.sibling&&i.push(t.sibling),i.push(t),t=t.parent;return i.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),i=this.updateStickyRows("bottom");return e||i}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const i=new Set;if(this.stickyTopRowCtrls.some(t=>t.getRowNode()===e)){for(let t=0;t<this.stickyTopRowCtrls.length;t++){const o=this.stickyTopRowCtrls[t].getRowNode();o!==e&&i.add(o)}this.refreshNodesAndContainerHeight("top",i,this.topContainerHeight)&&this.checkStickyRows()}else{for(let t=0;t<this.stickyBottomRowCtrls.length;t++){const o=this.stickyBottomRowCtrls[t].getRowNode();o!==e&&i.add(o)}this.refreshNodesAndContainerHeight("bottom",i,this.bottomContainerHeight)&&this.checkStickyRows()}}refreshNodesAndContainerHeight(e,i,t){const o="top"===e,r=o?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,s={},a=[];for(let m=0;m<r.length;m++){const f=r[m].getRowNode();i.has(f)?a.push(r[m]):(s[f.id]=r[m],f.sticky=!1)}const l=new Set;for(let m=0;m<a.length;m++)l.add(a[m].getRowNode());const c=[];i.forEach(m=>{l.has(m)||(m.sticky=!0,c.push(this.createRowCon(m,!1,!1)))});let d=!!c.length||a.length!==r.length;o?this.topContainerHeight!==t&&(this.topContainerHeight=t,this.gridBodyCtrl.setStickyTopHeight(t),d=!0):this.bottomContainerHeight!==t&&(this.bottomContainerHeight=t,this.gridBodyCtrl.setStickyBottomHeight(t),d=!0),this.destroyRowCtrls(s,!1);const h=[...a,...c];h.sort((m,f)=>f.getRowNode().rowIndex-m.getRowNode().rowIndex),o||h.reverse(),h.forEach(m=>m.setRowTop(m.getRowNode().stickyRowTop));let g=0;return o?(i.forEach(m=>{m.rowIndex<this.pageBoundsService.getFirstRow()&&(g+=m.rowHeight)}),g>this.topContainerHeight&&(g=this.topContainerHeight),this.setOffsetTop(g)):(i.forEach(m=>{m.rowIndex>this.pageBoundsService.getLastRow()&&(g+=m.rowHeight)}),g>this.bottomContainerHeight&&(g=this.bottomContainerHeight),this.setOffsetBottom(g)),!!d&&(o?this.stickyTopRowCtrls=h:this.stickyBottomRowCtrls=h,!0)}ensureRowHeightsValid(){let e=!1;const i=t=>{const o=t.getRowNode();if(o.rowHeightEstimated){const r=_r(this.gos,o);o.setRowHeight(r.height),e=!0}};return this.stickyTopRowCtrls.forEach(i),this.stickyBottomRowCtrls.forEach(i),e}},IS=class extends fe{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(s=>s.onCellSelectionChanged())},i=()=>{this.getAllCellCtrls().forEach(s=>s.updateRangeBordersIfRangeCount())},t=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",i),this.eventService.addEventListener("columnPinned",i),this.eventService.addEventListener("columnVisible",i)},o=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",i),this.eventService.removeEventListener("columnPinned",i),this.eventService.removeEventListener("columnVisible",i)};this.addDestroyFunc(()=>o()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Oo(this.gos)?t():o()}),Oo(this.gos)&&t()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),pc(this.gos)&&(gi(this.gos)||ir(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new LS(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Ki(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount();this.cachedRowCtrls=new OS(e??3)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=Ar(this.rowCtrlsByRowIndex),i=Ar(this.zombieRowCtrls),t=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=i.length>0||t.length>0?[...e,...i,...t]:e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(i=>i.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(i=>i.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(i=>i.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(i=>i.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(i=>i.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(i=>{const t=c=>{this.getAllCellCtrls().forEach(d=>{d.getColumn()===i&&c(d)})},o=()=>{t(c=>c.onLeftChanged())},r=()=>{t(c=>c.onWidthChanged())},s=()=>{t(c=>c.onFirstRightPinnedChanged())},a=()=>{t(c=>c.onLastLeftPinnedChanged())},l=()=>{t(c=>c.onColDefChanged())};i.addEventListener("leftChanged",o),i.addEventListener("widthChanged",r),i.addEventListener("firstRightPinnedChanged",s),i.addEventListener("lastLeftPinnedChanged",a),i.addEventListener("colDefChanged",l),this.destroyFuncsForColumnListeners.push(()=>{i.removeEventListener("leftChanged",o),i.removeEventListener("widthChanged",r),i.removeEventListener("firstRightPinnedChanged",s),i.removeEventListener("lastLeftPinnedChanged",a),i.removeEventListener("colDefChanged",l)})})}onDomLayoutChanged(){const e=Ki(this.gos,"print"),i=e||this.gos.get("embedFullWidthRows"),t=i!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=i,t&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){this.redrawAfterModelUpdate({recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0})}getAllCellsForColumn(e){const i=[];return this.getAllRowCtrls().forEach(t=>{const o=t.getCellElement(e);o&&i.push(o)}),i}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,i){const{pinnedRowModel:t,beans:o,printLayout:r}=this,s=Object.fromEntries(e.map(l=>[l.getRowNode().id,l]));t.forEachPinnedRow(i,(l,c)=>{const d=e[c];d&&void 0===t.getPinnedRowById(d.getRowNode().id,i)&&(d.destroyFirstPass(),d.destroySecondPass()),l.id in s?(e[c]=s[l.id],delete s[l.id]):e[c]=new gs(l,o,!1,!1,r)});const a="top"===i?t.getPinnedTopRowCount():t.getPinnedBottomRowCount();e.length=a}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,i=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{if(this.cachedRowCtrls?.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=o=>{const r=o[e.rowIndex];r&&r.getRowNode()===e&&(r.destroyFirstPass(),r.destroySecondPass(),o[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}i||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return e?.forEach(t=>this.redrawRow(t,!0)),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const i=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==i)return null;const t=ai(this.gos),o=Ja(this.gos,t,hs.DOM_DATA_KEY_CELL_CTRL),r=Ja(this.gos,t,gs.DOM_DATA_KEY_ROW_CTRL);return o||r?i:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const i=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const t=!e.domLayoutChanged&&!!e.recycleRows,o=e.animate&&Ns(this.gos),r=t?this.getRowsToRecycle():null;if(t||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const s=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();s&&this.updateContainerHeights(s)}this.recycleRows(r,o),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=i&&this.restoreFocusedCell(i),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const i=e.newData||e.newPage,t=this.gos.get("suppressScrollOnNewData");i&&!t&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout)return void this.rowContainerHeightService.setModelHeight(null);let i=this.pageBoundsService.getCurrentPageHeight();0===i&&(i=1),this.rowContainerHeightService.setModelHeight(i+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(i=>{i.stopEditing(e)})}getAllCellCtrls(){const e=[],i=this.getAllRowCtrls(),t=i.length;for(let o=0;o<t;o++){const r=i[o].getAllCellCtrls(),s=r.length;for(let a=0;a<s;a++)e.push(r[a])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],i=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],t=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...i];for(const o in this.rowCtrlsByRowIndex)t.push(this.rowCtrlsByRowIndex[o]);return t}addRenderedRowListener(e,i,t){const o=this.rowCtrlsByRowIndex[i];o&&o.addEventListener(e,t)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>i.flashCell(e))}refreshCells(e={}){const i={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const t of this.getCellCtrls(e.rowNodes,e.columns))t.refreshOrDestroyCell(i);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let i=null;this.stickyRowFeature&&nh()&&(i=this.getCellToRestoreFocusToAfterRefresh()||null);for(const t of this.getRowCtrls(e))t.isFullWidth()&&(t.refreshFullWidth()||this.redrawRow(t.getRowNode(),!0));this.dispatchDisplayedRowsChanged(!1),i&&this.restoreFocusedCell(i)}getCellRendererInstances(e){const i=this.getCellCtrls(e.rowNodes,e.columns).map(r=>r.getCellRenderer()).filter(r=>null!=r);if(e.columns?.length)return i;const t=[],o=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(r=>{if(o&&!this.isRowInMap(r.getRowNode(),o)||!r.isFullWidth())return;const s=r.getFullWidthCellRenderers();for(let a=0;a<s.length;a++){const l=s[a];null!=l&&t.push(l)}}),[...t,...i]}getCellEditorInstances(e){const i=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>{const o=t.getCellEditor();o&&i.push(o)}),i}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(i=>{if(i.isEditing()){const t=i.getCellPosition();e.push(t)}}),e}mapRowNodes(e){if(!e)return;const i={top:{},bottom:{},normal:{}};return e.forEach(t=>{const o=t.id;switch(t.rowPinned){case"top":i.top[o]=t;break;case"bottom":i.bottom[o]=t;break;default:i.normal[o]=t}}),i}isRowInMap(e,i){const t=e.id;switch(e.rowPinned){case"top":return null!=i.top[t];case"bottom":return null!=i.bottom[t];default:return null!=i.normal[t]}}getRowCtrls(e){const i=this.mapRowNodes(e),t=this.getAllRowCtrls();return e&&i?t.filter(o=>{const r=o.getRowNode();return this.isRowInMap(r,i)}):t}getCellCtrls(e,i){let t;Fe(i)&&(t={},i.forEach(r=>{const s=this.columnModel.getCol(r);Fe(s)&&(t[s.getId()]=!0)}));const o=[];return this.getRowCtrls(e).forEach(r=>{r.getAllCellCtrls().forEach(s=>{const a=s.getColumn().getId();t&&!t[a]||o.push(s)})}),o}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const i=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(i,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];$n(this.rowCtrlsByRowIndex,(t,o)=>{null==o.getRowNode().id&&e.push(t)}),this.removeRowCtrls(e);const i={};return $n(this.rowCtrlsByRowIndex,(t,o)=>{const r=o.getRowNode();i[r.id]=o}),this.rowCtrlsByRowIndex={},i}removeRowCtrls(e,i=!1){e.forEach(t=>{const o=this.rowCtrlsByRowIndex[t];o&&(o.destroyFirstPass(i),o.destroySecondPass()),delete this.rowCtrlsByRowIndex[t]})}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:i}=e;let t;this.stickyRowFeature&&nh()&&(t=this.getCellToRestoreFocusToAfterRefresh()||void 0);const o=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let s=!1;if(this.stickyRowFeature){s=this.stickyRowFeature.checkStickyRows();const l=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();l&&this.updateContainerHeights(l)}if((!i||s||this.firstRenderedRow!==o||this.lastRenderedRow!==r)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!s),null!=t)){const l=this.getCellToRestoreFocusToAfterRefresh();null!=t&&null==l&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(t))}}removeRowCompsNotToDraw(e,i){const t={};e.forEach(s=>t[s]=!0);const r=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!t[s]);this.removeRowCtrls(r,i)}calculateIndexesToDraw(e){const i=function my(e,i){const t=[];for(let o=e;o<=i;o++)t.push(o);return t}(this.firstRenderedRow,this.lastRenderedRow),t=(r,s)=>{const a=s.getRowNode().rowIndex;null!=a&&(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(s)&&i.push(a)};$n(this.rowCtrlsByRowIndex,t),$n(e,t),i.sort((r,s)=>r-s);const o=[];for(let r=0;r<i.length;r++){const s=i[r],a=this.rowModel.getRow(s);a&&!a.sticky&&o.push(s)}return o}recycleRows(e,i=!1,t=!1){const o=this.calculateIndexesToDraw(e);(this.printLayout||t)&&(i=!1),this.removeRowCompsNotToDraw(o,!i);const r=[];o.forEach(s=>{const a=this.createOrUpdateRowCtrl(s,e,i,t);Fe(a)&&r.push(a)}),e&&(!t||this.gos.get("suppressAnimationFrame")||this.printLayout?this.destroyRowCtrls(e,i):this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,i),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),i=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||i!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(i=>{const t=i.getRowNode().rowIndex;e.push(t.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const i=this.mapRowNodes(e);return this.getAllRowCtrls().filter(t=>{if(!t.isFullWidth())return!1;const o=t.getRowNode();return!(null!=i&&!this.isRowInMap(o,i))})}createOrUpdateRowCtrl(e,i,t,o){let r,s=this.rowCtrlsByRowIndex[e];if(s||(r=this.rowModel.getRow(e),Fe(r)&&Fe(i)&&i[r.id]&&r.alreadyRendered&&(s=i[r.id],i[r.id]=null)),!s){if(r||(r=this.rowModel.getRow(e)),!Fe(r))return;s=this.createRowCon(r,t,o)}return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s,s}destroyRowCtrls(e,i){const t=[];$n(e,(o,r)=>{if(r){if(this.cachedRowCtrls&&r.isCacheable())return void this.cachedRowCtrls.addRow(r);if(r.destroyFirstPass(!i),i){const s=r.instanceId;this.zombieRowCtrls[s]=r,t.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[s]})}else r.destroySecondPass()}}),i&&(t.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),function go(e){!function po(e,i=0){e.length>0&&window.setTimeout(()=>e.forEach(t=>t()),i)}(e,400)}(t))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*is(this.gos)}workOutFirstAndLastRowsToRender(){let e,i;if(this.rowContainerHeightService.updateOffset(),this.rowModel.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();else{const l=this.getRowBufferInPixels(),c=this.ctrlsService.getGridBodyCtrl(),d=this.gos.get("suppressRowVirtualisation");let g,m,h=!1;do{const _=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:k,pageLastPixel:E}=this.pageBoundsService.getCurrentPagePixelRange(),G=this.rowContainerHeightService.getDivStretchOffset(),K=c.getScrollFeature().getVScrollPosition(),ne=K.top,V=K.bottom;d?(g=k+G,m=E+G):(g=Math.max(ne+_-l,k)+G,m=Math.min(V+_+l,E)+G),this.firstVisibleVPixel=Math.max(ne+_,k)+G,this.lastVisibleVPixel=Math.min(V+_,E)+G,h=this.ensureAllRowsInRangeHaveHeightsCalculated(g,m)}while(h);let f=this.rowModel.getRowIndexAtPixel(g),y=this.rowModel.getRowIndexAtPixel(m);const b=this.pageBoundsService.getFirstRow(),S=this.pageBoundsService.getLastRow();f<b&&(f=b),y>S&&(y=S),e=f,i=y}else e=0,i=-1;const t=Ki(this.gos,"normal"),o=this.gos.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);t&&!o&&i-e>r&&(i=e+r),(e!==this.firstRenderedRow||i!==this.lastRenderedRow)&&(this.firstRenderedRow=e,this.lastRenderedRow=i,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:i}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,i){const t=this.pinnedRowModel?.ensureRowHeightsValid(),o=this.stickyRowFeature?.ensureRowHeightsValid(),r=this.rowModel.ensureRowHeightsValid(e,i,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(r||o)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),!!(o||r||t)&&(this.updateContainerHeights(),!0)}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const o=e.getRowNode(),r=this.focusService.isRowNodeFocused(o),s=e.isEditing();return!!(r||s||o.detail)&&!!this.isRowPresent(o)}isRowPresent(e){return!!this.rowModel.isRowPresent(e)&&(!this.paginationService||this.paginationService.isRowPresent(e))}createRowCon(e,i,t){const o=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(o)return o;const r=this.gos.get("suppressAnimationFrame");return new gs(e,this.beans,i,t&&!r&&!this.printLayout,this.printLayout)}getRenderedNodes(){return Object.values(this.rowCtrlsByRowIndex).map(i=>i.getRowNode())}getRowByPosition(e){let i;const{rowIndex:t}=e;switch(e.rowPinned){case"top":i=this.topRowCtrls[t];break;case"bottom":i=this.bottomRowCtrls[t];break;default:i=this.rowCtrlsByRowIndex[t],i||(i=this.getStickyTopRowCtrls().find(o=>o.getRowNode().rowIndex===t)||null,i||(i=this.getStickyBottomRowCtrls().find(o=>o.getRowNode().rowIndex===t)||null))}return i}isRangeInRenderedViewport(e,i){return null!=e&&null!=i&&!(i<this.firstRenderedRow||e>this.lastRenderedRow)}},OS=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const i=this.entriesList[0];i.destroyFirstPass(),i.destroySecondPass(),this.removeFromCache(i)}}getRow(e){if(null==e||null==e.id)return null;const i=this.entriesMap[e.id];return i?(this.removeFromCache(i),i.setCached(!1),i.getRowNode()!=e?null:i):null}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const i=e.id,t=this.entriesMap[i];delete this.entriesMap[i],mn(this.entriesList,t)}removeFromCache(e){const i=e.getRowNode().id;delete this.entriesMap[i],mn(this.entriesList,e)}getEntries(){return this.entriesList}},NS=class extends fe{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new Km,this.pinnedBottomRows=new Km}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return("top"===e?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const i=t=>{t.setRowHeight(t.rowHeight,!0)};this.pinnedBottomRows.forEach(i),this.pinnedTopRows.forEach(i)}}ensureRowHeightsValid(){let e=!1,i=0;const t=o=>{if(o.rowHeightEstimated){const r=_r(this.gos,o);o.setRowTop(i),o.setRowHeight(r.height),i+=r.height,e=!0}};return this.pinnedBottomRows?.forEach(t),i=0,this.pinnedTopRows?.forEach(t),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,i){this.updateNodesFromRowData(e,i),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,i){const t="top"===i?this.pinnedTopRows:this.pinnedBottomRows;if(void 0===e)return void t.clear();const o=Bs(this.gos),r="top"===i?lr.ID_PREFIX_TOP_PINNED:lr.ID_PREFIX_BOTTOM_PINNED,s=t.getIds(),a=[],l=new Set;let c=0,d=-1;for(const h of e){const g=o?.({data:h,level:0,rowPinned:i})??r+this.nextId++;if(l.has(g)){pe("Duplicate ID",g,"found for pinned row with data",h,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}d++,l.add(g),a.push(g);const m=t.getById(g);if(void 0!==m)m.data!==h&&m.setData(h),c+=this.setRowTopAndRowIndex(m,c,d),s.delete(g);else{const f=new lr(this.beans);f.id=g,f.data=h,f.rowPinned=i,c+=this.setRowTopAndRowIndex(f,c,d),t.push(f)}}s.forEach(h=>{t.getById(h)?.clearRowTopAndRowIndex()}),t.removeAllById(s),t.setOrder(a)}setRowTopAndRowIndex(e,i,t){return e.setRowTop(i),e.setRowHeight(_r(this.gos,e).height),e.setRowIndex(t),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,i){return"top"===i?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,i){return"top"===e?this.pinnedTopRows.forEach(i):this.pinnedBottomRows.forEach(i)}getTotalHeight(e){const i=e.getSize();if(0===i)return 0;const t=e.getByIndex(i-1);return void 0===t?0:t.rowTop+t.rowHeight}},Km=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){return this.cache[this.ordering[e]]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const i of e)delete this.cache[i];this.ordering=this.ordering.filter(i=>!e.has(i))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((i,t)=>{const o=this.cache[i];o&&e(o,t)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return 0===this.ordering.length}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},ZS=class extends fe{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,i){this.successCommon(e,i)}pageLoaded(e,i,t){this.successCommon(e,{rowData:i,rowCount:t})}isRequestMostRecentAndLive(e){const i=e===this.version,t=this.isAlive();return i&&t}successCommon(e,i){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(i))}dispatchLoadCompleted(e=!0){this.dispatchLocalEvent({type:"loadComplete",success:e,block:this})}},HS={version:lt,moduleName:"@ag-grid-community/row-node-block",beans:[class extends fe{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=hi(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");return null==e?2:e<=0?void 0:e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){mn(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),0==this.activeBlockLoadsCount&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void(this.gos.get("debug")&&Ht("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded"));const e=this.getAvailableLoadingCount(),i=this.blocks.filter(t=>"needsLoading"===t.getState()).slice(0,e);this.registerLoads(i.length),i.forEach(t=>t.load()),this.printCacheStatus()}getBlockState(){if(ir(this.gos))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(i=>{const{id:t,state:o}=i.getBlockStateJson();e[t]=o}),e}printCacheStatus(){this.gos.get("debug")&&Ht(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}}]},zS=class extends fe{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,i,t,o){this.processClassRules(void 0,e.cellClassRules,i,t,o),this.processStaticCellClasses(e,i,t)}processClassRules(e,i,t,o,r){if(null==i&&null==e)return;const s={},a={},l=(c,d)=>{c.split(" ").forEach(h=>{""!=h.trim()&&d(h)})};if(i){const c=Object.keys(i);for(let d=0;d<c.length;d++){const h=c[d],g=i[h];let m;"string"==typeof g?m=this.expressionService.evaluate(g,t):"function"==typeof g&&(m=g(t)),l(h,f=>{m?s[f]=!0:a[f]=!0})}}e&&r&&Object.keys(e).forEach(c=>l(c,d=>{s[d]||(a[d]=!0)})),r&&Object.keys(a).forEach(r),Object.keys(s).forEach(o)}getStaticCellClasses(e,i){const{cellClass:t}=e;if(!t)return[];let o;return o="function"==typeof t?t(i):t,"string"==typeof o&&(o=[o]),o||[]}processStaticCellClasses(e,i,t){this.getStaticCellClasses(e,i).forEach(r=>{t(r)})}},WS=class extends fe{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:i,eTopGuard:t,eBottomGuard:o,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:a,focusInnerElement:l,onFocusIn:c,onFocusOut:d,shouldStopEventPropagation:h,onTabKeyDown:g,handleKeyDown:m,eFocusableElement:f}=e;this.comp=i,this.eTopGuard=t,this.eBottomGuard=o,this.providedFocusInnerElement=l,this.eFocusableElement=f,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!a,this.providedFocusIn=c,this.providedFocusOut=d,this.providedShouldStopEventPropagation=h,this.providedOnTabKeyDown=g,this.providedHandleKeyDown=m}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new ds(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty&&0===this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const i=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(i):this.focusInnerElement(i)}findNextElementOutsideAndFocus(e){const i=ki(this.gos),t=this.focusService.findFocusableElements(i.body,null,!0),o=t.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===o)return;let r,s;e?(r=0,s=o):(r=o+1,s=t.length);const a=t.slice(r,s),l=this.gos.get("tabIndex");a.sort((c,d)=>{const h=parseInt(c.getAttribute("tabindex")||"0"),g=parseInt(d.getAttribute("tabindex")||"0");return g===l?1:h===l?-1:0===h?1:0===g?-1:h-g}),a[e?a.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive||e.defaultPrevented)return;const i=this.tabGuardsAreActive();i&&this.deactivateTabGuards();const t=this.getNextFocusableElement(e.shiftKey);i&&setTimeout(()=>this.activateTabGuards(),0),t&&(t.focus(),e.preventDefault())}focusInnerElement(e=!1){const i=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(i.splice(0,1),i.splice(i.length-1,1)),i.length&&i[e?i.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const i=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,i.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,i){return e===this.eTopGuard&&!i||e===this.eBottomGuard&&(i??!0)}setAllowFocus(e){this.allowFocus=e}},jS=class extends fe{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:i,eBottomGuard:t,eFocusableElement:o}=this,r=[i,t],s={setTabIndex:b=>{r.forEach(S=>null!=b?S.setAttribute("tabindex",b):S.removeAttribute("tabindex"))}};this.addTabGuards(i,t);const{focusTrapActive:a=!1,onFocusIn:l,onFocusOut:c,focusInnerElement:d,handleKeyDown:h,onTabKeyDown:g,shouldStopEventPropagation:m,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:y}=e;this.tabGuardCtrl=this.createManagedBean(new WS({comp:s,focusTrapActive:a,eTopGuard:i,eBottomGuard:t,eFocusableElement:o,onFocusIn:l,onFocusOut:c,focusInnerElement:d,handleKeyDown:h,onTabKeyDown:g,shouldStopEventPropagation:m,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:y}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const i=ki(this.gos).createElement("div");return i.classList.add("ag-tab-guard","top"===e?"ag-tab-guard-top":"ag-tab-guard-bottom"),Dn(i,"presentation"),i}addTabGuards(e,i){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",i)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];sn(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,i,t){lh(i)||(i=i.getGui());const{eBottomGuard:o}=this;o?o.insertAdjacentElement("beforebegin",i):e(i,t)}},Qm=class extends Mt{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new jS(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,i){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,i)}},YS=0,JS=class extends fe{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){return this.gos.get("popupParent")||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:i,ePopup:t}=e,o=this.getPopupIndex(t);-1!==o&&(this.popupList[o].alignedToElement=i);const r=i.getBoundingClientRect(),s=this.getParentRect(),a=this.keepXYWithinBounds(t,r.top-s.top,0),l=t.clientWidth>0?t.clientWidth:200;t.style.minWidth=`${l}px`;const d=s.right-s.left-l;let h;function g(){return r.right-s.left-2}function m(){return r.left-s.left-l}this.gos.get("enableRtl")?(h=m(),h<0&&(h=g(),this.setAlignedStyles(t,"left")),h>d&&(h=0,this.setAlignedStyles(t,"right"))):(h=g(),h>d&&(h=m(),this.setAlignedStyles(t,"right")),h<0&&(h=0,this.setAlignedStyles(t,"left"))),t.style.left=`${h}px`,t.style.top=`${a}px`}positionPopupUnderMouseEvent(e){const{ePopup:i,nudgeX:t,nudgeY:o,skipObserver:r}=e;this.positionPopup({ePopup:i,nudgeX:t,nudgeY:o,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const i=this.getParentRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}positionPopupByComponent(e){const{ePopup:i,nudgeX:t,nudgeY:o,keepWithinBounds:r,eventSource:s,alignSide:a="left",position:l="over",column:c,rowNode:d,type:h}=e,g=s.getBoundingClientRect(),m=this.getParentRect(),f=this.getPopupIndex(i);-1!==f&&(this.popupList[f].alignedToElement=s),this.positionPopup({ePopup:i,nudgeX:t,nudgeY:o,keepWithinBounds:r,updatePosition:()=>{let S,b=g.left-m.left;return"right"===a&&(b-=i.offsetWidth-g.width),"over"===l?(S=g.top-m.top,this.setAlignedStyles(i,"over")):(this.setAlignedStyles(i,"under"),S="under"===this.shouldRenderUnderOrAbove(i,g,m,e.nudgeY||0)?g.top-m.top+g.height:g.top-i.offsetHeight-2*(o||0)-m.top),{x:b,y:S}},postProcessCallback:()=>this.callPostProcessPopup(h,i,s,null,c,d)})}shouldRenderUnderOrAbove(e,i,t,o){const r=t.bottom-i.bottom,s=i.top-t.top,a=e.offsetHeight+o;return r>a?"under":s>a||s>r?"above":"under"}setAlignedStyles(e,i){const t=this.getPopupIndex(e);if(-1===t)return;const o=this.popupList[t],{alignedToElement:r}=o;!r||(["right","left","over","above","under"].forEach(a=>{r.classList.remove(`ag-has-popup-positioned-${a}`),e.classList.remove(`ag-popup-positioned-${a}`)}),!i)||(r.classList.add(`ag-has-popup-positioned-${i}`),e.classList.add(`ag-popup-positioned-${i}`))}callPostProcessPopup(e,i,t,o,r,s){const a=this.gos.getCallback("postProcessPopup");a&&a({column:r,rowNode:s,ePopup:i,type:e,eventSource:t,mouseEvent:o})}positionPopup(e){const{ePopup:i,keepWithinBounds:t,nudgeX:o,nudgeY:r,skipObserver:s,updatePosition:a}=e,l={width:0,height:0},c=(d=!1)=>{let{x:h,y:g}=a();d&&i.clientWidth===l.width&&i.clientHeight===l.height||(l.width=i.clientWidth,l.height=i.clientHeight,o&&(h+=o),r&&(g+=r),t&&(h=this.keepXYWithinBounds(i,h,1),g=this.keepXYWithinBounds(i,g,0)),i.style.left=`${h}px`,i.style.top=`${g}px`,e.postProcessCallback&&e.postProcessCallback())};if(c(),!s){const d=this.resizeObserverService.observeResize(i,()=>c(!0));setTimeout(()=>d(),200)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=ki(this.gos);let i=this.getPopupParent();return i===e.body?i=e.documentElement:"static"===getComputedStyle(i).position&&(i=i.offsetParent),Hf(i)}keepXYWithinBounds(e,i,t){const o=0===t,r=o?"clientHeight":"clientWidth",s=o?"top":"left",a=o?"height":"width",l=o?"scrollTop":"scrollLeft",c=ki(this.gos),d=c.documentElement,h=this.getPopupParent(),g=e.getBoundingClientRect(),m=h.getBoundingClientRect(),f=c.documentElement.getBoundingClientRect(),y=h===c.body,b=Math.ceil(g[a]);let _=y?(o?Gf:Ac)(d)+d[l]:h[r];y&&(_-=Math.abs(f[s]-m[s]));const k=_-b;return Math.min(Math.max(i,0),Math.abs(k))}addPopup(e){const i=ki(this.gos),{eChild:t,ariaLabel:o,alwaysOnTop:r,positionCallback:s,anchorToElement:a}=e;if(!i)return pe("could not find the document, document is empty"),{hideFunc:()=>{}};const l=this.getPopupIndex(t);if(-1!==l)return{hideFunc:this.popupList[l].hideFunc};this.initialisePopupPosition(t);const c=this.createPopupWrapper(t,o,!!r),d=this.addEventListenersToPopup({...e,wrapperEl:c});return s&&s(),this.addPopupToPopupList(t,c,d,a),{hideFunc:d}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();Fe(e.style.top)||(e.style.top=-1*t.top+"px"),Fe(e.style.left)||(e.style.left=-1*t.left+"px")}createPopupWrapper(e,i,t){const o=this.getPopupParent(),r=document.createElement("div");return this.environment.applyThemeClasses(r),r.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Dn(e,"dialog"),qs(e,i),r.appendChild(e),o.appendChild(r),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),r}handleThemeChange(e){if(e.themeChanged)for(const i of this.popupList)this.environment.applyThemeClasses(i.wrapper)}addEventListenersToPopup(e){const i=ki(this.gos),t=this.getPopupParent(),{wrapperEl:o,eChild:r,closedCallback:s,afterGuiAttached:a,closeOnEsc:l,modal:c}=e;let d=!1;const h=y=>{o.contains(ai(this.gos))&&y.key===le.ESCAPE&&!or(y)&&f({keyboardEvent:y})},g=y=>f({mouseEvent:y}),m=y=>f({touchEvent:y}),f=(y={})=>{const{mouseEvent:b,touchEvent:S,keyboardEvent:_,forceHide:k}=y;!k&&(this.isEventFromCurrentPopup({mouseEvent:b,touchEvent:S},r)||d)||(d=!0,t.removeChild(o),i.removeEventListener("keydown",h),i.removeEventListener("mousedown",g),i.removeEventListener("touchstart",m),i.removeEventListener("contextmenu",g),this.eventService.removeEventListener("dragStarted",g),s&&s(b||S||_),this.removePopupFromPopupList(r))};return a&&a({hidePopup:f}),window.setTimeout(()=>{l&&i.addEventListener("keydown",h),c&&(i.addEventListener("mousedown",g),this.eventService.addEventListener("dragStarted",g),i.addEventListener("touchstart",m),i.addEventListener("contextmenu",g))},0),f}addPopupToPopupList(e,i,t,o){this.popupList.push({element:e,wrapper:i,hideFunc:t,instanceId:YS++,isAnchored:!!o}),o&&this.setPopupPositionRelatedToElement(e,o)}getPopupIndex(e){return this.popupList.findIndex(i=>i.element===e)}setPopupPositionRelatedToElement(e,i){const t=this.getPopupIndex(e);if(-1===t)return;const o=this.popupList[t];if(o.stopAnchoringPromise&&o.stopAnchoringPromise.then(s=>s&&s()),o.stopAnchoringPromise=void 0,o.isAnchored=!1,!i)return;const r=this.keepPopupPositionedRelativeTo({element:i,ePopup:e,hidePopup:o.hideFunc});return o.stopAnchoringPromise=r,o.isAnchored=!0,r}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(i=>i.element!==e)}keepPopupPositionedRelativeTo(e){const i=this.getPopupParent(),t=i.getBoundingClientRect(),{element:o,ePopup:r}=e,s=o.getBoundingClientRect(),a=g=>parseInt(g.substring(0,g.length-1),10),l=(g,m)=>{const f=t[g]-s[g],y=a(r.style[g]);return{initialDiff:f,lastDiff:f,initial:y,last:y,direction:m}},c=l("top",0),d=l("left",1),h=this.getFrameworkOverrides();return new Hn(g=>{h.wrapIncoming(()=>{h.setInterval(()=>{const m=i.getBoundingClientRect(),f=o.getBoundingClientRect();if(0==f.top&&0==f.left&&0==f.height&&0==f.width)return void e.hidePopup();const b=(S,_)=>{const k=a(r.style[_]);S.last!==k&&(S.initial=k,S.last=k);const E=m[_]-f[_];if(E!=S.lastDiff){const G=this.keepXYWithinBounds(r,S.initial+S.initialDiff-E,S.direction);r.style[_]=`${G}px`,S.last=G}S.lastDiff=E};b(c,"top"),b(d,"left")},200).then(m=>{g(()=>{null!=m&&window.clearInterval(m)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,i){const{mouseEvent:t,touchEvent:o}=e,r=t||o;if(!r)return!1;const s=this.getPopupIndex(i);if(-1===s)return!1;for(let a=s;a<this.popupList.length;a++)if(VC(this.popupList[a].element,r))return!0;return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(e){const i=ki(this.gos);for(;e&&e!==i.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,i){const t=this.getWrapper(e);t&&(t.classList.toggle("ag-always-on-top",!!i),i&&this.bringPopupToFront(t))}bringPopupToFront(e){const i=this.getPopupParent(),t=Array.prototype.slice.call(i.querySelectorAll(".ag-popup")),o=t.length,r=Array.prototype.slice.call(i.querySelectorAll(".ag-popup.ag-always-on-top")),s=r.length,a=this.getWrapper(e);if(!a||o<=1||!i.contains(e))return!1;const l=t.indexOf(a),c=a.querySelectorAll("div"),d=[];c.forEach(g=>{0!==g.scrollTop&&d.push([g,g.scrollTop])});let h=!1;for(s?a.classList.contains("ag-always-on-top")?l!==o-1&&(Tt(r).insertAdjacentElement("afterend",a),h=!0):l!==o-s-1&&(r[0].insertAdjacentElement("beforebegin",a),h=!0):l!==o-1&&(Tt(t).insertAdjacentElement("afterend",a),h=!0);d.length;){const g=d.pop();g[0].scrollTop=g[1]}return h}},KS=["touchstart","touchend","touchmove","touchcancel"],Xm=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=i=>i(),this.wrapOutgoing=i=>i()}setInterval(e,i){return new Hn(t=>{t(window.setInterval(e,i))})}addEventListener(e,i,t,o){const r=rs(KS,i);e.addEventListener(i,t,{capture:!!o,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${"solid"===this.frameworkName?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},QS=class extends fe{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,i,t=!1){return t?this.getNextCellToFocusWithCtrlPressed(e,i):this.getNextCellToFocusWithoutCtrlPressed(e,i)}getNextCellToFocusWithCtrlPressed(e,i){const t=e===le.UP,r=e===le.LEFT;let s,a;if(t||e===le.DOWN)a=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),s=i.column;else{const l=this.visibleColsService.getAllCols(),c=this.gos.get("enableRtl");a=i.rowIndex,s=r!==c?l[0]:Tt(l)}return{rowIndex:a,rowPinned:null,column:s}}getNextCellToFocusWithoutCtrlPressed(e,i){let t=i,o=!1;for(;!o;){switch(e){case le.UP:t=this.getCellAbove(t);break;case le.DOWN:t=this.getCellBelow(t);break;case le.RIGHT:t=this.gos.get("enableRtl")?this.getCellToLeft(t):this.getCellToRight(t);break;case le.LEFT:t=this.gos.get("enableRtl")?this.getCellToRight(t):this.getCellToLeft(t);break;default:t=null,pe("unknown key for navigation ",e)}o=!t||this.isCellGoodToFocusOn(t)}return t}isCellGoodToFocusOn(e){const i=e.column;let t;switch(e.rowPinned){case"top":t=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":t=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:t=this.rowModel.getRow(e.rowIndex)}return!!t&&!i.isSuppressNavigable(t)}getCellToLeft(e){if(!e)return null;const i=this.visibleColsService.getColBefore(e.column);return i?{rowIndex:e.rowIndex,column:i,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const i=this.visibleColsService.getColAfter(e.column);return i?{rowIndex:e.rowIndex,column:i,rowPinned:e.rowPinned}:null}getRowBelow(e){const i=e.rowIndex,t=e.rowPinned;let o=!1;if(this.isLastRowInContainer(e))switch(t){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else t&&(o=!0);const r=this.rowModel.getRow(e.rowIndex);return(o?void 0:this.getNextStickyPosition(r))||{rowIndex:i+1,rowPinned:t}}getNextStickyPosition(e,i){if(!pc(this.gos)||!e||!e.sticky)return;let o=[];o=this.rowRenderer.getStickyTopRowCtrls().some(l=>l.getRowNode().rowIndex===e.rowIndex)?[...this.rowRenderer.getStickyTopRowCtrls()].sort((l,c)=>l.getRowNode().rowIndex-c.getRowNode().rowIndex):[...this.rowRenderer.getStickyBottomRowCtrls()].sort((l,c)=>c.getRowNode().rowIndex-l.getRowNode().rowIndex);const r=i?-1:1,s=o.findIndex(l=>l.getRowNode().rowIndex===e.rowIndex),a=o[s+r];return a?{rowIndex:a.getRowNode().rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const i=this.getRowBelow(e);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}isLastRowInContainer(e){const i=e.rowPinned,t=e.rowIndex;return"top"===i?this.pinnedRowModel.getPinnedTopRowCount()-1<=t:"bottom"===i?this.pinnedRowModel.getPinnedBottomRowCount()-1<=t:this.pageBoundsService.getLastRow()<=t}getRowAbove(e){const i=e.rowIndex,t=e.rowPinned;let r=!1;if(t?0===i:i===this.pageBoundsService.getFirstRow())return"top"===t?null:t&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;t&&(r=!0);const s=this.rowModel.getRow(e.rowIndex);return(r?void 0:this.getNextStickyPosition(s,!0))||{rowIndex:i-1,rowPinned:t}}getCellAbove(e){if(!e)return null;const i=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,i){return i?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const i=this.visibleColsService.getAllCols();let t=e.rowIndex,o=e.rowPinned,r=this.visibleColsService.getColAfter(e.column);if(!r){r=i[0];const s=this.getRowBelow(e);if(kt(s)||!s.rowPinned&&!(this.paginationService?.isRowInPage(s)??1))return null;t=s?s.rowIndex:null,o=s?s.rowPinned:null}return{rowIndex:t,column:r,rowPinned:o}}getNextTabbedCellBackwards(e){const i=this.visibleColsService.getAllCols();let t=e.rowIndex,o=e.rowPinned,r=this.visibleColsService.getColBefore(e.column);if(!r){r=Tt(i);const s=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(kt(s)||!s.rowPinned&&!(this.paginationService?.isRowInPage(s)??1))return null;t=s?s.rowIndex:null,o=s?s.rowPinned:null}return{rowIndex:t,column:r,rowPinned:o}}},wn=(e,i)=>{for(const t in i)i[t]=e;return i},ev={...wn("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...wn("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...wn("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...wn("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...wn("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...wn("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...wn("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...wn("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...wn("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...wn("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...wn("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...wn("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...wn("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...wn("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...wn("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},Lh={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},XS=(e,i)=>e.eventService.dispatchEvent(i),tv=class{};Reflect.defineProperty(tv,"name",{value:"GridApi"});var e_=class extends fe{constructor(){super(),this.beanName="apiFunctionService",this.api=new tv,this.fns={...Lh,dispatchEvent:XS},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const i in ev)e[i]=this.makeApi(i)[i]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,i){const{fns:t,beans:o}=this;t!==Lh&&(t[e]=o?.validationService?.validateApiFunction(e,i)??i)}makeApi(e){return{[e]:(...i)=>{const{beans:t,fns:{[e]:o}}=this;return o?o(t,...i):this.apiNotFound(e)}}}apiNotFound(e){const{beans:i,gos:t,preDestroyLink:o}=this;if(i){const r=ev[e];t.assertModuleRegistered(r,`api.${e}`)&&pe(`API function '${e}' not registered to module '${r}'`)}else pe(`Grid API function ${e}() cannot be called as the grid has been destroyed.\nEither clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\nTo run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${o}`)}destroy(){super.destroy(),this.fns=Lh,this.beans=null}};function t_(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var i_=class extends fe{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,i,t){const o=[],r={};return e.forEach(s=>{let l=!0,c=this.createDefFromColumn(s,i,t),d=s.getOriginalParent(),h=null;for(;d;){let g=null;if(d.isPadding()){d=d.getOriginalParent();continue}const m=r[d.getGroupId()];if(m){m.children.push(c),l=!1;break}if(g=this.createDefFromGroup(d),g&&(g.children=[c],r[g.groupId]=g,c=g,d=d.getOriginalParent()),null!=d&&h===d){l=!1;break}h=d}l&&o.push(c)}),o}createDefFromGroup(e){const i=Gu(e.getColGroupDef(),["children"]);return i&&(i.groupId=e.getGroupId()),i}createDefFromColumn(e,i,t){const o=Gu(e.getColDef());return o.colId=e.getColId(),o.width=e.getActualWidth(),o.rowGroup=e.isRowGroupActive(),o.rowGroupIndex=e.isRowGroupActive()?i.indexOf(e):null,o.pivot=e.isPivotActive(),o.pivotIndex=e.isPivotActive()?t.indexOf(e):null,o.aggFunc=e.isValueActive()?e.getAggFunc():null,o.hide=!e.isVisible()||void 0,o.pinned=e.isPinned()?e.getPinned():null,o.sort=e.getSort()?e.getSort():null,o.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,o}},n_=class extends fe{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:1===e.length?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,i){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:1===e.length?e[0]:null,source:i})}genericColumnEvent(e,i,t){this.eventService.dispatchEvent({type:e,columns:i,column:1===i.length?i[0]:null,source:t})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:i,source:t,toIndex:o,finished:r}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:i,column:i&&1===i.length?i[0]:null,toIndex:o,finished:r,source:t})}columnPinned(e,i){if(!e.length)return;const t=1===e.length?e[0]:null,o=this.getCommonValue(e,r=>r.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:o??null,columns:e,column:t,source:i})}columnVisible(e,i){if(!e.length)return;const t=1===e.length?e[0]:null,o=this.getCommonValue(e,r=>r.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:o,columns:e,column:t,source:i})}getCommonValue(e,i){if(!e||0==e.length)return;const t=i(e[0]);for(let o=1;o<e.length;o++)if(t!==i(e[o]))return;return t}columnChanged(e,i,t){this.eventService.dispatchEvent({type:e,columns:i,column:i&&1==i.length?i[0]:null,source:t})}columnResized(e,i,t,o=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:1===e.length?e[0]:null,flexColumns:o,finished:i,source:t})}},o_=class extends fe{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){if(kt(this.columnModel.getColDefCols())||!this.columnModel.isAlive())return[];const t=this.columnModel.getAllCols().map(o=>this.createStateItemFromColumn(o));return this.orderColumnStateList(t),t}createStateItemFromColumn(e){const i=this.funcColsService.getRowGroupColumns(),t=this.funcColsService.getPivotColumns(),o=e.isRowGroupActive()?i.indexOf(e):null,r=e.isPivotActive()?t.indexOf(e):null,s=e.isValueActive()?e.getAggFunc():null,a=null!=e.getSort()?e.getSort():null,l=null!=e.getSortIndex()?e.getSortIndex():null,c=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:a,sortIndex:l,aggFunc:s,rowGroup:e.isRowGroupActive(),rowGroupIndex:o,pivot:e.isPivotActive(),pivotIndex:r,flex:c}}orderColumnStateList(e){const i=this.columnModel.getCols(),t=new Map(i.map((o,r)=>[o.getColId(),r]));e.sort((o,r)=>(t.has(o.colId)?t.get(o.colId):-1)-(t.has(r.colId)?t.get(r.colId):-1))}},r_=class extends fe{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[];return sr(null,this.columnModel.getColTree(),t=>{vn(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}resetColumnGroupState(e){const i=this.columnModel.getColDefColTree();if(!i)return;const t=[];sr(null,i,o=>{if(vn(o)){const r=o.getColGroupDef(),s={groupId:o.getGroupId(),open:r?r.openByDefault:void 0};t.push(s)}}),this.setColumnGroupState(t,e)}setColumnGroupState(e,i){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const o=[];e.forEach(r=>{const a=r.open,l=this.columnModel.getProvidedColGroup(r.groupId);l&&l.isExpanded()!==a&&(l.setExpanded(a),o.push(l))}),this.visibleColsService.refresh(i,!0),o.length&&this.eventDispatcher.groupOpened(o),this.columnAnimationService.finish()}},s_=class extends fe{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,i,t=!1){const o=this.visibleColsService.isBodyWidthDirty();if(e!==this.scrollWidth||i!==this.scrollPosition||o){if(this.scrollWidth=e,this.scrollPosition=i,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const s=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=s-this.scrollPosition-this.scrollWidth,this.viewportRight=s-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(t)}}getHeadersToRender(e,i){let t;switch(e){case"left":t=this.rowsOfHeadersToRenderLeft[i];break;case"right":t=this.rowsOfHeadersToRenderRight[i];break;default:t=this.rowsOfHeadersToRenderCenter[i]}return t||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!this.isAnyParentAutoHeaderHeight(e))||this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const i=e.getLeft()||0,t=i+e.getActualWidth(),o=this.viewportLeft-200,r=this.viewportRight+200;return!(i<o&&t<o||i>r&&t>r)}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(i)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),o=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,o,t,r=>{const s=r.getLeft();return Fe(s)&&s>this.viewportLeft})}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},i=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(i).concat(t).forEach(s=>e[s.getId()]=!0);const r=(s,a,l)=>{let c=!1;for(let d=0;d<s.length;d++){const h=s[d];let g=!1;if(kr(h))g=!0===e[h.getId()];else{const f=h.getDisplayedChildren();f&&(g=r(f,a,l+1))}g&&(c=!0,a[l]||(a[l]=[]),a[l].push(h))}return c};r(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),r(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),r(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){this.extractViewportColumns();const i=this.getViewportColumns().map(o=>`${o.getId()}-${o.getPinned()||"normal"}`).join("#"),t=this.colsWithinViewportHash!==i;return t&&(this.colsWithinViewportHash=i,this.calculateHeaderRows()),t}},a_=class extends fe{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,i){const t=this.componentMetadataProvider.retrieve(e);return t&&t.functionAdapter?t.functionAdapter(i):null}adaptCellRendererFunction(e){return class i{refresh(){return!1}getGui(){return this.eGui}init(o){const r=e(o),s=typeof r;this.eGui="string"!==s&&"number"!==s&&"boolean"!==s?null!=r?r:sl("<span></span>"):sl("<span>"+r+"</span>")}}}doesImplementIComponent(e){return!!e&&e.prototype&&"getGui"in e.prototype}},l_=class extends fe{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},iv=Object.fromEntries(["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"].map((e,i)=>[e,i]));function d_(e,i){return((e.beanName?iv[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER)-((i.beanName?iv[i.beanName]:void 0)??Number.MAX_SAFE_INTEGER)}function u_(e,i){return"gridDestroyService"===e?.beanName?-1:0}var h_=class extends fe{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...i){const t=this.registry[e];if(null!=t)return new t(...i)}},g_=class extends fe{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){this.runReadyCallbacksAsync=e.frameworkOverrides.runWhenReadyAsync?.()??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>e?.isAlive()??!1)}whenReady(e,i){this.ready?i(this.params):this.readyCallbacks.push(i),e.addDestroyFunc(()=>{const t=this.readyCallbacks.indexOf(i);t>=0&&this.readyCallbacks.splice(t,1)})}register(e,i){this.params[e]=i,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),i.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:i,rightHeader:t}=this.params;return[e,t,i]}getHeaderRowContainerCtrl(e){const i=this.params;switch(e){case"left":return i.leftHeader;case"right":return i.rightHeader;default:return i.centerHeader}}},p_=class extends fe{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:i,rowPinned:t,column:o}=e;return this.createIdFromValues({rowIndex:i,column:o,rowPinned:t})}createIdFromValues(e){const{rowIndex:i,rowPinned:t,column:o}=e;return`${i}.${t??"null"}.${o.getId()}`}equals(e,i){return e.column===i.column&&e.rowPinned===i.rowPinned&&e.rowIndex===i.rowIndex}},f_=class extends fe{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){gi(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,i){if(null==this.clientSideRowModel)return void this.eventService.dispatchEvent(e);this.events.push(e);const t=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(o=>this.eventService.dispatchEvent(o)),this.events=[]};i?t():(null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(t)),this.dispatchExpandedDebounced())}},m_=class extends fe{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let i,e=0;return this.pinnedRowModel.getPinnedTopRowCount()?i="top":this.rowModel.getRowCount()?(i=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(i="bottom"),void 0===i?null:{rowIndex:e,rowPinned:i}}getLastRow(){let e,i=null;const t=this.pinnedRowModel.getPinnedBottomRowCount(),o=this.pinnedRowModel.getPinnedTopRowCount();return t?(i="bottom",e=t-1):this.rowModel.getRowCount()?(i=null,e=this.pageBoundsService.getLastRow()):o&&(i="top",e=o-1),void 0===e?null:{rowIndex:e,rowPinned:i}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,i){return!e&&!i||!(e&&!i||!e&&i)&&e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned}before(e,i){switch(e.rowPinned){case"top":if("top"!==i.rowPinned)return!0;break;case"bottom":if("bottom"!==i.rowPinned)return!1;break;default:if(Fe(i.rowPinned))return"top"!==i.rowPinned}return e.rowIndex<i.rowIndex}},nv={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},ov={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},rv={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},v_=class extends fe{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(nv),this.getSizeEl(ov),this.getSizeEl(rv)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(nv)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(ov)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(rv)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){return this.gridTheme?.getCssClass()||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const i=this.getThemeClasses();for(const t of Array.from(e.classList))t.startsWith("ag-theme-")&&!i.includes(t)&&e.classList.remove(t);e.classList.add(...i)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(null==i||isNaN(i)||!isFinite(i))return null!==e&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const t=`${i}px`;return e!=t?(this.eGridDiv.style.setProperty("--ag-line-height",t),i):""!=e?parseFloat(e):-1}getCSSVariablePixelValue(e){const i=this.lastKnownValues.get(e);if(null!=i)return i;const t=this.measureSizeEl(e);return"detached"===t||"no-styles"===t?e.defaultValue:(this.lastKnownValues.set(e,t),t)}measureSizeEl(e){const i=this.getSizeEl(e);if(null==i.offsetParent)return"detached";const t=i.offsetWidth;return t===sv?"no-styles":(this.sizesMeasured=!0,t)}getSizeEl(e){let i=this.sizeEls.get(e);if(i)return i;let t=this.eMeasurementContainer;t||(t=this.eMeasurementContainer=document.createElement("div"),t.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(t),this.eGridDiv.appendChild(t)),i=document.createElement("div"),i.style.width=`var(${e.cssName}, ${sv}px)`,t.appendChild(i),this.sizeEls.set(e,i);let o=this.measureSizeEl(e);"no-styles"===o&&pe(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const r=this.resizeObserverService.observeResize(i,()=>{const s=this.measureSizeEl(e);"detached"===s||"no-styles"===s||(this.lastKnownValues.set(e,s),s!==o&&(o=s,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),i}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver(()=>{const t=this.readAncestorThemeClasses();C_(t,this.ancestorThemeClasses)||(this.ancestorThemeClasses=t,this.fireGridStylesChangedEvent("themeChanged"))});let i=this.eGridDiv;for(;i;)e.observe(i||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),i=i.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv;const i=[];for(;e;){const t=Array.from(e.classList).filter(o=>o.startsWith("ag-theme-"));for(const o of t)i.includes(o)||i.unshift(o);e=e.parentElement}return Object.freeze(i)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:i,gridTheme:t}=this,o=e.get("theme")||null;o!==t&&(t?.stopUse(),this.gridTheme=o,o?.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),i&&this.applyThemeClasses(i),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){this.gridTheme?.stopUse(),this.gridTheme=null}},C_=(e,i)=>e.length===i.length&&-1===e.findIndex((t,o)=>e[o]!==i[o]),sv=15538,w_=class extends fe{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new rt}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=gc(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,i,t){this.globalEventService.addEventListener(e,i,t)}removeEventListener(e,i,t){this.globalEventService.removeEventListener(e,i,t)}addGlobalListener(e,i=!1){this.globalEventService.addGlobalListener(e,i)}removeGlobalListener(e,i=!1){this.globalEventService.removeGlobalListener(e,i)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},Ih=class ho extends fe{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(i){this.eGridDiv=i.eGridDiv,this.columnModel=i.columnModel,this.visibleColsService=i.visibleColsService,this.headerNavigationService=i.headerNavigationService,this.headerPositionUtils=i.headerPositionUtils,this.rowRenderer=i.rowRenderer,this.rowPositionUtils=i.rowPositionUtils,this.cellPositionUtils=i.cellPositionUtils,this.navigationService=i.navigationService,this.ctrlsService=i.ctrlsService,this.filterManager=i.filterManager,this.rangeService=i.rangeService,this.advancedFilterService=i.advancedFilterService,this.overlayService=i.overlayService}static addKeyboardModeEvents(i){this.instanceCount>0||(i.addEventListener("keydown",ho.toggleKeyboardMode),i.addEventListener("mousedown",ho.toggleKeyboardMode))}static removeKeyboardModeEvents(i){this.instanceCount>0||(i.removeEventListener("keydown",ho.toggleKeyboardMode),i.removeEventListener("mousedown",ho.toggleKeyboardMode))}static toggleKeyboardMode(i){const o="keydown"===i.type;o&&(i.ctrlKey||i.metaKey||i.altKey)||ho.keyboardModeActive!==o&&(ho.keyboardModeActive=o)}postConstruct(){const i=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:i,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:i,columnRowGroupChanged:i}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,t=>{this.gridCtrl=t.gridCtrl})}registerKeyboardFocusEvents(){const i=ki(this.gos);ho.addKeyboardModeEvents(i),ho.instanceCount++,this.addDestroyFunc(()=>{ho.instanceCount--,ho.removeKeyboardModeEvents(i)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const i=this.focusedCellPosition.column,t=this.columnModel.getCol(i.getId());i!==t&&this.clearFocusedCell()}isKeyboardMode(){return ho.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(ai(this.gos),gs.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(ai(this.gos),Lc.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(i,t){let o=i;for(;o;){if(Ja(this.gos,o,t))return!1;o=o.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(i){return!!this.isCellRestoreFocused(i)&&(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0)}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(i,t){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(i),t())})}isCellRestoreFocused(i){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(i,this.restoredFocusedCellPosition)}setRestoreFocusedCell(i){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=i)}getFocusEventParams(i){const{rowIndex:t,rowPinned:o,column:r}=i,s={rowIndex:t,rowPinned:o,column:r,isFullWidthCell:!1},a=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:o});return a&&(s.isFullWidthCell=a.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,null==this.focusedCellPosition)return;const i=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...i})}setFocusedCell(i){const{column:t,rowIndex:o,rowPinned:r,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:a=!1}=i,l=this.columnModel.getCol(t);l?(this.focusedCellPosition={rowIndex:o,rowPinned:tr(r),column:l},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:s,preventScrollOnBrowserFocus:a})):this.focusedCellPosition=null}isCellFocused(i){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(i,this.focusedCellPosition)}isRowNodeFocused(i){return this.isRowFocused(i.rowIndex,i.rowPinned)}isHeaderWrapperFocused(i){if(null==this.focusedHeaderPosition)return!1;const t=i.getColumnGroupChild(),o=i.getRowIndex(),r=i.getPinned(),{column:s,headerRowIndex:a}=this.focusedHeaderPosition;return t===s&&o===a&&r==s.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(i,t){this.focusedHeaderPosition={headerRowIndex:i,column:t}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(i){if(this.isHeaderFocusSuppressed())return!1;const{direction:t,fromTab:o,allowUserOverride:r,event:s,fromCell:a,rowWithoutSpanValue:l}=i;let{headerPosition:c}=i;if(a&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(c);if(r){const d=this.getFocusedHeader(),h=this.headerNavigationService.getHeaderRowCount();if(o){const g=this.gos.getCallback("tabToNextHeader");g&&(c=this.getHeaderPositionFromUserFunc({userFunc:g,direction:t,currentPosition:d,headerPosition:c,headerRowCount:h}))}else{const g=this.gos.getCallback("navigateToNextHeader");g&&s&&(c=g({key:s.key,previousHeaderPosition:d,nextHeaderPosition:c,headerRowCount:h,event:s}))}}return!!c&&this.focusProvidedHeaderPosition({headerPosition:c,direction:t,event:s,fromCell:a,rowWithoutSpanValue:l})}focusHeaderPositionFromUserFunc(i){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:t,headerPosition:o,direction:r,event:s}=i,a=this.getFocusedHeader(),l=this.headerNavigationService.getHeaderRowCount(),c=this.getHeaderPositionFromUserFunc({userFunc:t,direction:r,currentPosition:a,headerPosition:o,headerRowCount:l});return!!c&&this.focusProvidedHeaderPosition({headerPosition:c,direction:r,event:s})}getHeaderPositionFromUserFunc(i){const{userFunc:t,direction:o,currentPosition:r,headerPosition:s,headerRowCount:a}=i,c=t({backwards:"Before"===o,previousHeaderPosition:r,nextHeaderPosition:s,headerRowCount:a});return!0===c||null===c?(null===c&&pe("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),r):!1===c?null:c}focusProvidedHeaderPosition(i){const{headerPosition:t,direction:o,fromCell:r,rowWithoutSpanValue:s,event:a}=i,{column:l,headerRowIndex:c}=t;if(-1===c)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView(l);this.headerNavigationService.scrollToColumn(l,o);const h=this.ctrlsService.getHeaderRowContainerCtrl(l.getPinned())?.focusHeader(t.headerRowIndex,l,a)||!1;return h&&(null!=s||r)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(s??-1),h}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let i=this.visibleColsService.getAllCols()[0];if(!i)return!1;i.getParent()&&(i=this.visibleColsService.getColGroupAtLevel(i,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(i,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(i){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const t=this.headerNavigationService.getHeaderRowCount()-1,o=Tt(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:o},rowWithoutSpanValue:-1,event:i})}focusPreviousFromFirstCell(i){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(i)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(i,t){return null!=this.focusedCellPosition&&this.focusedCellPosition.rowIndex===i&&this.focusedCellPosition.rowPinned===tr(t)}findFocusableElements(i,t,o=!1){let s=Zf;t&&(s+=", "+t),o&&(s+=', [tabindex="-1"]');const a=Array.prototype.slice.apply(i.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter(d=>mo(d)),l=Array.prototype.slice.apply(i.querySelectorAll(s));return l.length?(h=l,a.filter(g=>-1===h.indexOf(g))):a;var h}focusInto(i,t=!1,o=!1){const r=this.findFocusableElements(i,null,o),s=t?Tt(r):r[0];return!!s&&(s.focus({preventScroll:!0}),!0)}findFocusableElementBeforeTabGuard(i,t){if(!t)return null;const o=this.findFocusableElements(i),r=o.indexOf(t);if(-1===r)return null;let s=-1;for(let a=r-1;a>=0;a--)if(o[a].classList.contains("ag-tab-guard-top")){s=a;break}return s<=0?null:o[s-1]}findNextFocusableElement(i=this.eGridDiv,t,o){const r=this.findFocusableElements(i,t?':not([tabindex="-1"])':null),s=ai(this.gos);let a;a=t?r.findIndex(c=>c.contains(s)):r.indexOf(s);const l=a+(o?-1:1);return l<0||l>=r.length?null:r[l]}isTargetUnderManagedComponent(i,t){if(!t)return!1;const o=i.querySelectorAll(`.${ds.FOCUS_MANAGED_CLASS}`);if(!o.length)return!1;for(let r=0;r<o.length;r++)if(o[r].contains(t))return!0;return!1}findTabbableParent(i,t=5){let o=0;for(;i&&null===oh(i)&&++o<=t;)i=i.parentElement;return null===oh(i)?null:i}focusOverlay(i){const t=this.overlayService.isVisible()&&this.overlayService.getOverlayWrapper()?.getGui();return!!t&&this.focusInto(t,i)}focusGridViewFailed(i,t){return t&&this.focusOverlay(i)||i&&this.focusLastHeader()}focusGridView(i,t=!1,o=!0){if(this.overlayService.isExclusive())return o&&this.focusOverlay(t);if(this.isCellFocusSuppressed())return t&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():!(!o||!this.focusOverlay(t))||this.focusNextGridCoreContainer(!1);const r=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(r){const{rowIndex:s,rowPinned:a}=r;if(i??(i=this.getFocusedHeader()?.column),i&&null!=s)return this.navigationService.ensureCellVisible({rowIndex:s,column:i,rowPinned:a}),t&&this.rowRenderer.getRowByPosition(r)?.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(r,t)||(this.setFocusedCell({rowIndex:s,column:i,rowPinned:tr(a),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:s,rowPinned:a,column:i})),!0}return!!(o&&this.focusOverlay(t)||t&&this.focusLastHeader())}isGridFocused(){const i=ai(this.gos);return!!i&&this.eGridDiv.contains(i)}focusNextGridCoreContainer(i,t=!1){return!(t||!this.gridCtrl.focusNextInnerContainer(i))||((t||!i&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(i),!1)}focusAdvancedFilter(i){return this.advancedFilterFocusColumn=i?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(i,t){const o=(t?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return i?this.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(o)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(i){this.gridCtrl.addFocusableContainer(i)}removeFocusableContainer(i){this.gridCtrl.removeFocusableContainer(i)}focusGridInnerElement(i){return this.gridCtrl.focusInnerElement(i)}allowFocusForNextGridCoreContainer(i){this.gridCtrl.allowFocusForNextCoreContainer(i)}};Ih.keyboardModeActive=!1,Ih.instanceCount=0;var y_=Ih,b_=class extends fe{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=Ki(this.gos,"print"),i=e?0:this.visibleColsService.getColsLeftWidth(),t=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();i!=this.leftWidth&&(this.leftWidth=i,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),t!=this.rightWidth&&(this.rightWidth=t,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},S_=class extends fe{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,i,t){this.view=e,this.eGridHostDiv=i,this.eGui=t,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:o,mouseEventService:r,ctrlsService:s,resizeObserverService:a}=this.beans,l={getContainer:()=>this.eGui,isInterestedIn:d=>1===d||0===d,getIconName:()=>"notAllowed"};o.addDropTarget(l),this.addDestroyFunc(()=>o.removeDropTarget(l)),r.stampTopLevelGridCompWithGridInstance(i),this.createManagedBean(new Mh(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const c=a.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>c()),s.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const i=this.getFocusableContainers(),{indexWithFocus:t,nextIndex:o}=this.getNextFocusableIndex(i,e);if(o<0||o>=i.length)return!1;if(0===o){if(t>0){const s=Tt(this.visibleColsService.getAllCols());if(this.focusService.focusGridView(s,!0))return!0}return!1}return this.focusContainer(i[o],e)}focusInnerElement(e){const i=this.gos.getCallback("focusGridInnerElement");if(i&&i({fromBottom:!!e}))return!0;const t=this.getFocusableContainers(),o=this.visibleColsService.getAllCols();if(e){if(t.length>1)return this.focusContainer(Tt(t),!0);const r=Tt(o);if(this.focusService.focusGridView(r,!0))return!0}if(0===this.gos.get("headerHeight")||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(o[0]))return!0;for(let r=1;r<t.length;r++)if(this.focusService.focusInto(t[r].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const i=this.view.getFocusableContainers(),{nextIndex:t,indexWithFocus:o}=this.getNextFocusableIndex(i,e);if(-1===o||t<0||t>=i.length)return;const r=i[t];r.setAllowFocus?.(!0),setTimeout(()=>{r.setAllowFocus?.(!1)})}getNextFocusableIndex(e,i){const t=ai(this.gos),o=e.findIndex(s=>s.getGui().contains(t));return{indexWithFocus:o,nextIndex:o+(i?-1:1)}}focusContainer(e,i){e.setAllowFocus?.(!0);const t=this.focusService.focusInto(e.getGui(),i);return e.setAllowFocus?.(!1),t}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},av=class extends Qm{constructor(e){super(),this.gridBody=Ne,this.sideBar=Ne,this.pagination=Ne,this.rootWrapperBody=Ne,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:s=>this.addCssClass(s),setGridThemeClass:s=>this.addCssClass(s),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:s=>{this.getGui().style.userSelect=s??"",this.getGui().style.webkitUserSelect=s??""},setCursor:s=>{this.getGui().style.cursor=s??""}},i=this.createManagedBean(new S_),t=i.getOptionalSelectors(),o=this.createTemplate(t),r=[Zb,...Object.values(t).filter(s=>!!s)];this.setTemplate(o,r),i.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>i.focusInnerElement(s),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&Ht("Grid removed from DOM")})}updateLayoutClasses(e,i){const t=this.rootWrapperBody.classList;t.toggle("ag-layout-auto-height",i.autoHeight),t.toggle("ag-layout-normal",i.normal),t.toggle("ag-layout-print",i.print),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)}createTemplate(e){return`<div class="ag-root-wrapper" role="presentation">\n                ${e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":""}\n                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body data-ref="gridBody"></ag-grid-body>\n                    ${e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':""}\n                </div>\n                ${e.statusBarSelector?"<ag-status-bar></ag-status-bar>":""}\n                ${e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':""}\n                ${e.watermarkSelector?"<ag-watermark></ag-watermark>":""}\n            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){e||!this.pagination?.isDisplayed()?super.forceFocusOutOfContainer(e):this.pagination.forceFocusOutOfContainer(e)}getFocusableContainers(){const e=[this.gridBody];return[this.sideBar,this.pagination].forEach(i=>{i&&e.push(i)}),e.filter(i=>mo(i.getGui()))}},x_={version:lt,moduleName:"@ag-grid-community/aligned-grid",beans:[class extends fe{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const i="function"==typeof e;"function"==typeof e&&(e=e());const t=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(r=>{if(!r)return pt("alignedGrids contains an undefined option."),i||pt('You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"'),void pt(t());if(this.isGridApi(r))return r;const s=r;return"current"in s?s.current?.api:(s.api||pt(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${t()}`),s.api)}).filter(r=>!!r&&!r.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:i})=>this.onColumnEvent(i),alignedGridScroll:({event:i})=>this.onScrollEvent(i)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(i=>{i.isDestroyed()||i.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,i){const t=[];return e.columns?e.columns.forEach(o=>{t.push(i(o))}):e.column&&t.push(i(e.column)),t}getMasterColumns(e){return this.extractDataFromEvent(e,i=>i)}getColumnIds(e){return this.extractDataFromEvent(e,i=>i.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":pe("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})}processGroupOpenedEvent(e){const{columnModel:i}=this;e.columnGroups.forEach(t=>{let o=null;t&&(o=i.getProvidedColGroup(t.getGroupId())),(!t||o)&&i.setColumnGroupOpened(o,t.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){const i=e.column;let t=null;if(i&&(t=this.columnModel.getColDefCol(i.getColId())),i&&!t)return;const o=this.getMasterColumns(e),{columnApplyStateService:r,columnSizeService:s,ctrlsService:a}=this;switch(e.type){case"columnMoved":{const h=e.api.getColumnState().map(g=>({colId:g.colId}));r.applyColumnState({state:h,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const h=e.api.getColumnState().map(g=>({colId:g.colId,hide:g.hide}));r.applyColumnState({state:h},"alignedGridChanged")}break;case"columnPinned":{const h=e.api.getColumnState().map(g=>({colId:g.colId,pinned:g.pinned}));r.applyColumnState({state:h},"alignedGridChanged")}break;case"columnResized":{const d=e,h={};o.forEach(g=>{h[g.getId()]={key:g.getColId(),newWidth:g.getActualWidth()}}),d.flexColumns?.forEach(g=>{h[g.getId()]&&delete h[g.getId()]}),s.setColumnWidths(Object.values(h),!1,d.finished,"alignedGridChanged");break}}const c=a.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(d=>{d.setGridOption("alwaysShowVerticalScroll",c)})}}]},m5={version:lt,moduleName:"@ag-grid-community/data-type",beans:[class extends fe{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(ss(e.source))})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const i=o=>r=>{const{column:s,node:a,value:l}=r;let c=s.getColDef().valueFormatter;return c===o.groupSafeValueFormatter&&(c=o.valueFormatter),this.valueService.formatValue(s,a,l,c)};Object.entries(e).forEach(([o,r])=>{const s={...r,groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)};this.dataTypeDefinitions[o]=s,this.formatValueFuncs[o]=i(s)});const t=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(t).forEach(([o,r])=>{const s=this.processDataTypeDefinition(r,t,[o],e);s&&(this.dataTypeDefinitions[o]=s,r.dataTypeMatcher&&(this.dataTypeMatchers[o]=r.dataTypeMatcher),this.formatValueFuncs[o]=i(s))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(o=>{const r=this.dataTypeMatchers[o];r&&delete this.dataTypeMatchers[o],this.dataTypeMatchers[o]=r??e[o].dataTypeMatcher})}mergeDataTypeDefinitions(e,i){const t={...e,...i};return e.columnTypes&&i.columnTypes&&i.appendColumnTypes&&(t.columnTypes=[...yc(e.columnTypes),...yc(i.columnTypes)]),t}processDataTypeDefinition(e,i,t,o){let r;const s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let a=o[s];const l=i[s];if(a&&l&&(a=l),!this.validateDataTypeDefinition(e,a,s))return;r=this.mergeDataTypeDefinitions(a,e)}else{if(t.includes(s))return void pe('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');const a=i[s];if(!this.validateDataTypeDefinition(e,a,s))return;const l=this.processDataTypeDefinition(a,i,[...t,s],o);if(!l)return;r=this.mergeDataTypeDefinitions(l,e)}return{...r,groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)}}validateDataTypeDefinition(e,i,t){return i?i.baseDataType===e.baseDataType||(pe('The "baseDataType" property of a data type definition must match that of its parent.'),!1):(pe(`The data type definition ${t} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return i=>{if(i.node?.group){const t=(i.colDef.pivotValueColumn??i.column).getAggFunc();if(t){if("first"===t||"last"===t)return e.valueFormatter(i);if("number"===e.baseDataType&&"count"!==t){if("number"==typeof i.value)return e.valueFormatter(i);if("object"==typeof i.value){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter({...i,value:i.value.toNumber()});if("value"in i.value)return e.valueFormatter({...i,value:i.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||"groupRows"===this.gos.get("groupDisplayType"))&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&i.column.isRowGroupActive()&&"string"==typeof i.value&&!e.dataTypeMatcher?.(i.value))return;return e.valueFormatter(i)}}updateColDefAndGetColumnType(e,i,t){let{cellDataType:o}=i;const{field:r}=i;if(void 0===o&&(o=e.cellDataType),(null==o||!0===o)&&(o=!!this.canInferCellDataType(e,i)&&this.inferCellDataType(r,t)),!o)return void(e.cellDataType=!1);const s=this.dataTypeDefinitions[o];if(s)return e.cellDataType=o,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,o,s,t),s.columnTypes;pe(`Missing data type definition - "${o}"`)}addColumnListeners(e){if(!this.isWaitingForRowData)return;const i=this.columnStateUpdatesPendingInference[e.getColId()];if(!i)return;const t=o=>{i.add(o.key)};e.addEventListener("columnStateUpdated",t),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",t))}canInferCellDataType(e,i){if(!gi(this.gos))return!1;const t={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(i,t))return!1;const o=null===i.type?e.type:i.type;if(o){const r=this.gos.get("columnTypes")??{};if(yc(o).some(a=>{const l=r[a.trim()];return l&&this.doColDefPropsPreventInference(l,t)}))return!1}return!this.doColDefPropsPreventInference(e,t)}doColDefPropsPreventInference(e,i){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([t,o])=>this.doesColDefPropPreventInference(e,i,t,o))}doesColDefPropPreventInference(e,i,t,o){if(!i[t])return!1;const r=e[t];return null===r?(i[t]=!1,!1):void 0===o?!!r:r===o}inferCellDataType(e,i){if(!e)return;let t;const o=this.getInitialData();if(o){const s=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");t=Xa(o,e,s)}else this.initWaitForRowData(i);if(null==t)return;const[r]=Object.entries(this.dataTypeMatchers).find(([s,a])=>a(t))??["object"];return r}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const i=this.rowModel.getRootNode().allLeafChildren;if(i?.length)return i[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const i=this.isColumnTypeOverrideInDataTypeDefinitions;i&&this.columnModel.queueResizeOperations();const[t]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{const{firstRowData:r}=o;r&&(t?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(r,i),this.columnStateUpdatesPendingInference={},i&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,i){this.initialData=e;const t=[];this.destroyColumnStateUpdateListeners();const o={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([s,a])=>{const l=this.columnModel.getCol(s);if(!l)return;const c=l.getColDef();if(!this.columnModel.resetColDefIntoCol(l,"cellDataTypeInferred"))return;const d=l.getColDef();if(i&&d.type&&d.type!==c.type){const h=this.getUpdatedColumnState(l,a);h.rowGroup&&null==h.rowGroupIndex&&(o[s]=h),h.pivot&&null==h.pivotIndex&&(r[s]=h),t.push(h)}}),i&&t.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(o,r)),t.length&&this.columnApplyStateService.applyColumnState({state:t},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,i){const t=this.columnApplyStateService.getColumnStateFromColDef(e);return i.forEach(o=>{delete t[o],"rowGroup"===o?delete t.rowGroupIndex:"pivot"===o&&delete t.pivotIndex}),t}checkObjectValueHandlers(e){const i=this.dataTypeDefinitions.object,t=e.object;this.hasObjectValueParser=i.valueParser!==t.valueParser,this.hasObjectValueFormatter=i.valueFormatter!==t.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const i=e.getColDef();if(i.cellDataType)return this.dataTypeDefinitions[i.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,i){if(null==i)return!0;const t=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!t||t(i)}validateColDef(e){const i=t=>pe(`Cell data type is "object" but no Value ${t} has been provided. Please either provide an object data type definition with a Value ${t}, or set "colDef.value${t}"`);"object"===e.cellDataType&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&i("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&i("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,i,t,o){const r=this.formatValueFuncs[i];switch(t.baseDataType){case"number":e.cellEditor="agNumberCellEditor";break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=s=>!!s.colDef.editable&&s.event.key===le.SPACE;break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=r;break;case"dateString":e.cellEditor="agDateStringCellEditor",e.keyCreator=r;break;case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(s,a)=>{const l=this.columnModel.getColDefCol(o),c=l?.getColDef();if(!l||!c)return 0;const d=null==s?"":r({column:l,node:null,value:s}),h=null==a?"":r({column:l,node:null,value:a});return d===h?0:d>h?1:-1},e.keyCreator=r}this.filterManager?.setColDefPropertiesForDataType(e,t,r)}getDefaultDataTypes(){const e=t=>!!t.match("^\\d{4}-\\d{2}-\\d{2}$"),i=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>""===t.newValue?.trim?.()?null:Number(t.newValue),valueFormatter:t=>null==t.value?"":"number"!=typeof t.value||isNaN(t.value)?i("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>"number"==typeof t},text:{baseDataType:"text",valueParser:t=>""===t.newValue?null:xu(t.newValue),dataTypeMatcher:t=>"string"==typeof t},boolean:{baseDataType:"boolean",valueParser:t=>null==t.newValue?t.newValue:""===t.newValue?.trim?.()?null:"true"===String(t.newValue).toLowerCase(),valueFormatter:t=>null==t.value?"":String(t.value),dataTypeMatcher:t=>"boolean"==typeof t},date:{baseDataType:"date",valueParser:t=>Fn(null==t.newValue?null:String(t.newValue)),valueFormatter:t=>null==t.value?"":t.value instanceof Date&&!isNaN(t.value.getTime())?eo(t.value,!1)??"":i("invalidDate","Invalid Date"),dataTypeMatcher:t=>t instanceof Date},dateString:{baseDataType:"dateString",dateParser:t=>Fn(t)??void 0,dateFormatter:t=>eo(t??null,!1)??void 0,valueParser:t=>e(String(t.newValue))?t.newValue:null,valueFormatter:t=>e(String(t.value))?t.value:"",dataTypeMatcher:t=>"string"==typeof t&&e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>xu(t.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}]},v5={version:lt,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:function A_(e,i){const t=e.columnModel.getColDefCol(i);return t?t.getColDef():null},getColumnDefs:function k_(e){return e.columnModel.getColumnDefs()},sizeColumnsToFit:function T_(e,i){"number"==typeof i?e.columnSizeService.sizeColumnsToFit(i,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(i)},setColumnGroupOpened:function D_(e,i,t){e.columnModel.setColumnGroupOpened(i,t,"api")},getColumnGroup:function F_(e,i,t){return e.visibleColsService.getColumnGroup(i,t)},getProvidedColumnGroup:function R_(e,i){return e.columnModel.getProvidedColGroup(i)},getDisplayNameForColumn:function M_(e,i,t){return e.columnNameService.getDisplayNameForColumn(i,t)||""},getDisplayNameForColumnGroup:function E_(e,i,t){return e.columnNameService.getDisplayNameForColumnGroup(i,t)||""},getColumn:function P_(e,i){return e.columnModel.getColDefCol(i)},getColumns:function L_(e){return e.columnModel.getColDefCols()},applyColumnState:function I_(e,i){return e.columnApplyStateService.applyColumnState(i,"api")},getColumnState:function O_(e){return e.columnGetStateService.getColumnState()},resetColumnState:function N_(e){e.columnApplyStateService.resetColumnState("api")},getColumnGroupState:function B_(e){return e.columnGroupStateService.getColumnGroupState()},setColumnGroupState:function Z_(e,i){e.columnGroupStateService.setColumnGroupState(i,"api")},resetColumnGroupState:function G_(e){e.columnGroupStateService.resetColumnGroupState("api")},isPinning:function H_(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()},isPinningLeft:function q_(e){return e.visibleColsService.isPinningLeft()},isPinningRight:function z_(e){return e.visibleColsService.isPinningRight()},getDisplayedColAfter:function V_(e,i){return e.visibleColsService.getColAfter(i)},getDisplayedColBefore:function U_(e,i){return e.visibleColsService.getColBefore(i)},setColumnVisible:function W_(e,i,t){e.columnModel.setColsVisible([i],t,"api")},setColumnsVisible:function j_(e,i,t){e.columnModel.setColsVisible(i,t,"api")},setColumnPinned:function Y_(e,i,t){e.columnModel.setColsPinned([i],t,"api")},setColumnsPinned:function $_(e,i,t){e.columnModel.setColsPinned(i,t,"api")},getAllGridColumns:function J_(e){return e.columnModel.getCols()},getDisplayedLeftColumns:function K_(e){return e.visibleColsService.getLeftCols()},getDisplayedCenterColumns:function Q_(e){return e.visibleColsService.getCenterCols()},getDisplayedRightColumns:function X_(e){return e.visibleColsService.getRightCols()},getAllDisplayedColumns:function e5(e){return e.visibleColsService.getAllCols()},getAllDisplayedVirtualColumns:function t5(e){return e.columnViewportService.getViewportColumns()},moveColumn:function n5(e,i,t){e.columnMoveService.moveColumns([i],t,"api")},moveColumnByIndex:function o5(e,i,t){e.columnMoveService.moveColumnByIndex(i,t,"api")},moveColumns:function r5(e,i,t){e.columnMoveService.moveColumns(i,t,"api")},setColumnWidth:function s5(e,i,t,o=!0,r="api"){e.columnSizeService.setColumnWidths([{key:i,newWidth:t}],!1,o,r)},setColumnWidths:function a5(e,i,t=!0,o="api"){e.columnSizeService.setColumnWidths(i,!1,t,o)},getLeftDisplayedColumnGroups:function l5(e){return e.visibleColsService.getTreeLeft()},getCenterDisplayedColumnGroups:function c5(e){return e.visibleColsService.getTreeCenter()},getRightDisplayedColumnGroups:function d5(e){return e.visibleColsService.getTreeRight()},getAllDisplayedColumnGroups:function u5(e){return e.visibleColsService.getAllTrees()},autoSizeColumn:function h5(e,i,t){return e.columnAutosizeService.autoSizeCols({colKeys:[i],skipHeader:t,source:"api"})},autoSizeColumns:function g5(e,i,t){e.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,source:"api"})},autoSizeAllColumns:function p5(e,i){e.columnAutosizeService.autoSizeAllColumns("api",i)}}},b5={version:lt,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:function C5(e,i){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(i)},removeRowDropZone:function w5(e,i){const t=e.dragAndDropService.findExternalZone(i);t&&e.dragAndDropService.removeDropTarget(t)},getRowDropZoneParams:function y5(e,i){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(i)}}},k5={version:lt,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:function S5(e){return e.pinnedRowModel.getPinnedTopRowCount()},getPinnedBottomRowCount:function _5(e){return e.pinnedRowModel.getPinnedBottomRowCount()},getPinnedTopRow:function x5(e,i){return e.pinnedRowModel.getPinnedTopRow(i)},getPinnedBottomRow:function A5(e,i){return e.pinnedRowModel.getPinnedBottomRow(i)}}},R5={version:lt,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:function T5(e){e.overlayService.showLoadingOverlay()},showNoRowsOverlay:function D5(e){e.overlayService.showNoRowsOverlay()},hideOverlay:function F5(e){e.overlayService.hideOverlay()}}},Z5={version:lt,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:function M5(e,i,t){if(!i)return;const o=e.ctrlsService.getGridBodyCtrl().getGui(),r=`aria-${i}`;null===t?o.removeAttribute(r):o.setAttribute(r,t)},refreshCells:function E5(e,i={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(i))},flashCells:function P5(e,i={}){const t=o=>pe(`Since v31.1 api.flashCells parameter '${o}Delay' is deprecated. Please use '${o}Duration' instead.`);Fe(i.fadeDelay)&&t("fade"),Fe(i.flashDelay)&&t("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(i))},refreshHeader:function L5(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>i.refresh()))},isAnimationFrameQueueEmpty:function I5(e){return e.animationFrameService.isQueueEmpty()},flushAllAnimationFrames:function O5(e){e.animationFrameService.flushAllFrames()},getSizesForCurrentTheme:function N5(e){return{rowHeight:is(e.gos),headerHeight:e.columnModel.getHeaderHeight()}},getCellRendererInstances:function B5(e,i={}){return e.rowRenderer.getCellRendererInstances(i).map(cl)}}};function lv(e,i){const{colKey:t,rowNode:o,useFormatter:r}=i,s=e.columnModel.getColDefCol(t)??e.columnModel.getCol(t);if(kt(s))return null;const a=e.valueService.getValueForDisplay(s,o);return r?e.valueService.formatValue(s,o,a)??No(a,!0):a}function cv(e,i){e.gos.updateGridOptions({options:i})}function dv(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function uv(e){return e.rowRenderer.getLastVirtualRenderedRow()}var D6={version:lt,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:function q5(e){return e.context.getGridId()},destroy:function z5(e){e.gridDestroyService.destroy()},isDestroyed:function V5(e){return e.gridDestroyService.isDestroyCalled()},getGridOption:function U5(e,i){return e.gos.get(i)},setGridOption:function W5(e,i,t){cv(e,{[i]:t})},updateGridOptions:cv}},F6={version:lt,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:function C6(e,i){if(!i.nodes.every(l=>l.rowPinned?(pe("cannot select pinned rows"),!1):void 0!==l.id||(pe("cannot select node until id for node is known"),!1)))return;const{nodes:o,source:r,newValue:s}=i;e.selectionService.setNodesSelected({nodes:o,source:r??"api",newValue:s})},selectAll:function w6(e,i="apiSelectAll"){e.selectionService.selectAllRowNodes({source:i})},deselectAll:function y6(e,i="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:i})},selectAllFiltered:function b6(e,i="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:i,justFiltered:!0})},deselectAllFiltered:function S6(e,i="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:i,justFiltered:!0})},selectAllOnCurrentPage:function _6(e,i="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:i,justCurrentPage:!0})},deselectAllOnCurrentPage:function x6(e,i="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:i,justCurrentPage:!0})},getSelectedNodes:function A6(e){return e.selectionService.getSelectedNodes()},getSelectedRows:function k6(e){return e.selectionService.getSelectedRows()}}},R6={version:lt,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:function a6(e,i={}){const t=i?i.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(t))},setRowNodeExpanded:function l6(e,i,t,o,r){e.expansionService.setRowNodeExpanded(i,t,o,r)},getRowNode:function c6(e,i){return e.rowModel.getRowNode(i)},addRenderedRowListener:function d6(e,i,t,o){e.rowRenderer.addRenderedRowListener(i,t,o)},getRenderedNodes:function u6(e){return e.rowRenderer.getRenderedNodes()},forEachNode:function h6(e,i,t){e.rowModel.forEachNode(i,t)},getFirstDisplayedRow:function g6(e){return dv(e)},getFirstDisplayedRowIndex:dv,getLastDisplayedRow:function p6(e){return uv(e)},getLastDisplayedRowIndex:uv,getDisplayedRowAtIndex:function f6(e,i){return e.rowModel.getRow(i)},getDisplayedRowCount:function m6(e){return e.rowModel.getRowCount()},getModel:function v6(e){return e.rowModel}}},M6={version:lt,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:function hS(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()},getHorizontalPixelRange:function gS(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()},ensureColumnVisible:Ym,ensureIndexVisible:$m,ensureNodeVisible:function pS(e,i,t=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(i,t),"ensureVisible")}}},E6={version:lt,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:function K5(e){return e.focusService.getFocusedCell()},clearFocusedCell:function Q5(e){return e.focusService.clearFocusedCell()},setFocusedCell:function X5(e,i,t,o){e.focusService.setFocusedCell({rowIndex:i,column:t,rowPinned:o,forceBrowserFocus:!0})},setFocusedHeader:function i6(e,i,t=!1){const o=e.headerNavigationService.getHeaderPositionForColumn(i,t);o&&e.focusService.focusHeaderPosition({headerPosition:o})},tabToNextCell:function e6(e,i){return e.navigationService.tabToNextCell(!1,i)},tabToPreviousCell:function t6(e,i){return e.navigationService.tabToNextCell(!0,i)}}},P6={version:lt,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:function j5(e,i,t){e.apiEventService.addEventListener(i,t)},addGlobalListener:function $5(e,i){e.apiEventService.addGlobalListener(i)},removeEventListener:function Y5(e,i,t){e.apiEventService.removeEventListener(i,t)},removeGlobalListener:function J5(e,i){e.apiEventService.removeGlobalListener(i)}}},L6={version:lt,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:function G5(e){e.valueCache.expire()},getValue:function H5(e,i,t){return lv(e,{colKey:i,rowNode:t})},getCellValue:lv}},I6={version:lt,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:function n6(e,i,t){const o=e.columnModel.getCol(i);e.menuService.showColumnMenu({column:o,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:function o6(e,i,t){let o=e.columnModel.getCol(i);o||(o=e.columnModel.getColDefCol(i)),o?e.menuService.showColumnMenu({column:o,mouseEvent:t,positionBy:"mouse"}):pt(`column '${i}' not found`)},showColumnMenu:function r6(e,i){const t=e.columnModel.getCol(i);t?e.menuService.showColumnMenu({column:t,positionBy:"auto"}):pt(`column '${i}' not found`)},hidePopupMenu:function s6(e){e.menuService.hidePopupMenu()}}},O6={version:lt,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:function T6(e){e.sortController.onSortChanged("api")}}},N6={version:lt,moduleName:"@ag-grid-community/api",dependantModules:[D6,k5,F6,v5,R6,b5,M6,R5,E6,P6,Z5,L6,I6,O6]};var hv={version:lt,moduleName:"@ag-grid-community/state-core",beans:[class extends fe{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=hi(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=hi(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=hi(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=gi(this.gos),this.cachedState=this.getInitialState(),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[e,i,t]=this.addManagedEventListeners({newColumnsLoaded:({source:o})=>{"gridInitializing"===o&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{i?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return function Z6(e){return"32.1.0"===(e.version||(e.version="32.1.0"),e.version)&&(e=function G6(e){return e.cellSelection=function H6(e,i){if(e&&"object"==typeof e)return e[i]}(e,"rangeSelection"),e}(e)),e}(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const i=t=>()=>this.updateColumnState([t]);this.addManagedEventListeners({columnValueChanged:i("aggregation"),columnMoved:i("columnOrder"),columnPinned:i("columnPinning"),columnResized:i("columnSizing"),columnVisible:i("columnVisibility"),columnPivotChanged:i("pivot"),columnPivotModeChanged:i("pivot"),columnRowGroupChanged:i("rowGroup"),sortChanged:i("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:i,rowSelection:t,pagination:o}=this.getInitialState(),r=this.gos.get("advancedFilterModel");(e||r)&&this.setFilterState(e,r),i&&this.setRowGroupExpansionState(i),t&&this.setRowSelectionState(t),o&&this.setPaginationState(o),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const s=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:s,columnRowGroupChanged:s,rowDataUpdated:()=>{0!==this.gos.get("groupDefaultExpanded")&&setTimeout(()=>{s()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:a=>{(a.newPage||a.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:i,focusedCell:t,columnOrder:o}=this.getInitialState();t&&this.setFocusedCellState(t),i&&this.setCellSelectionState(i),e&&this.setScrollState(e),this.setColumnPivotState(!!o?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const r=this.getRangeSelectionState();this.updateCachedState("rangeSelection",r),this.updateCachedState("cellSelection",r),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:s=>{if(s.finished){const a=this.getRangeSelectionState();this.updateCachedState("rangeSelection",a),this.updateCachedState("cellSelection",a)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),i=[],t=[],o=[],r=[],s=[],a=[],l=[],c=[],d=[];let h=0;const g=this.columnGetStateService.getColumnState();for(let m=0;m<g.length;m++){const{colId:f,sort:y,sortIndex:b,rowGroup:S,rowGroupIndex:_,aggFunc:k,pivot:E,pivotIndex:G,pinned:K,hide:ne,width:V,flex:N}=g[m];d.push(f),y&&(i[b??h++]={colId:f,sort:y}),S&&(t[_??0]=f),"string"==typeof k&&o.push({colId:f,aggFunc:k}),E&&(r[G??0]=f),K&&("right"===K?a:s).push(f),ne&&l.push(f),(N||V)&&c.push({colId:f,flex:N??void 0,width:V})}return{sort:i.length?{sortModel:i}:void 0,rowGroup:t.length?{groupColIds:t}:void 0,aggregation:o.length?{aggregationModel:o}:void 0,pivot:r.length||e?{pivotMode:e,pivotColIds:r}:void 0,columnPinning:s.length||a.length?{leftColIds:s,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}setColumnState(e){const{sort:i,rowGroup:t,aggregation:o,pivot:r,columnPinning:s,columnVisibility:a,columnSizing:l,columnOrder:c,partialColumnState:d}=e,h={},g=S=>{let _=h[S];return _||(_={colId:S},h[S]=_,_)},m=d?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};i&&(i.sortModel.forEach(({colId:S,sort:_},k)=>{const E=g(S);E.sort=_,E.sortIndex=k}),m.sort=null,m.sortIndex=null),t&&(t.groupColIds.forEach((S,_)=>{const k=g(S);k.rowGroup=!0,k.rowGroupIndex=_}),m.rowGroup=null,m.rowGroupIndex=null),o&&(o.aggregationModel.forEach(({colId:S,aggFunc:_})=>{g(S).aggFunc=_}),m.aggFunc=null),r&&(r.pivotColIds.forEach((S,_)=>{const k=g(S);k.pivot=!0,k.pivotIndex=_}),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"}),m.pivot=null,m.pivotIndex=null),s&&(s.leftColIds.forEach(S=>{g(S).pinned="left"}),s.rightColIds.forEach(S=>{g(S).pinned="right"}),m.pinned=null),a&&(a.hiddenColIds.forEach(S=>{g(S).hide=!0}),m.hide=null),l&&(l.columnSizingModel.forEach(({colId:S,flex:_,width:k})=>{const E=g(S);E.flex=_??null,E.width=k}),m.flex=null);const f=c?.orderedColIds,y=!!f?.length,b=y?f.map(S=>g(S)):Object.values(h);b.length&&(this.columnStates=b,this.columnApplyStateService.applyColumnState({state:b,applyOrder:y,defaultState:m},"gridInitializing"))}setColumnPivotState(e){const i=this.columnStates;this.columnStates=void 0;const t=this.columnGroupStates;if(this.columnGroupStates=void 0,this.pivotResultColsService.isPivotResultColsPresent()){if(i){const o=[];for(const r of i)this.pivotResultColsService.getPivotResultCol(r.colId)&&o.push(r);this.columnApplyStateService.applyColumnState({state:o,applyOrder:e},"gridInitializing")}t&&this.columnGroupStateService.setColumnGroupState(t,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),i=[];return e.forEach(({groupId:t,open:o})=>{o&&i.push(t)}),i.length?{openColumnGroupIds:i}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const i=new Set(e.columnGroup?.openColumnGroupIds),o=this.columnGroupStateService.getColumnGroupState().map(({groupId:r})=>{const s=i.has(r);return s&&i.delete(r),{groupId:r,open:s}});i.forEach(r=>{o.push({groupId:r,open:!0})}),o.length&&(this.columnGroupStates=o),this.columnGroupStateService.setColumnGroupState(o,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&0===Object.keys(e).length&&(e=void 0);const i=this.filterManager?.getAdvancedFilterModel()??void 0;return e||i?{filterModel:e,advancedFilterModel:i}:void 0}setFilterState(e,i){const{filterModel:t,advancedFilterModel:o}=e??{advancedFilterModel:i};t&&this.filterManager?.setFilterModel(t,"columnFilter"),o&&this.filterManager?.setAdvancedFilterModel(o)}getRangeSelectionState(){const e=this.rangeService?.getCellRanges().map(i=>{const{id:t,type:o,startRow:r,endRow:s,columns:a,startColumn:l}=i;return{id:t,type:o,startRow:r,endRow:s,colIds:a.map(c=>c.getColId()),startColId:l.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:i,rangeService:t,columnModel:o,visibleColsService:r}=this;if(!Oo(i)||!t)return;const s=[];if(e.cellRanges.forEach(a=>{const l=[];if(a.colIds.forEach(d=>{const h=o.getCol(d);h&&l.push(h)}),!l.length)return;let c=o.getCol(a.startColId);if(!c){const d=r.getAllCols(),h=new Set(l);c=d.find(g=>h.has(g))}s.push({...a,columns:l,startColumn:c})}),function LC(e){return void 0!==e.get("cellSelection")}(i)&&function IC(e){const i=e.get("cellSelection");return void 0!==i?"boolean"!=typeof i&&(i?.suppressMultiRanges??!1):e.get("suppressMultiRangeSelection")}(i)&&s.length>1)return pe("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");t.setCellRanges(s)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:i}=e?.getHScrollPosition()??{left:0},{top:t}=e?.getVScrollPosition()??{top:0};return t||i?{top:t,left:i}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:i,left:t}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(i,t)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:i,rowIndex:t,rowPinned:o}=e;return{colId:i.getColId(),rowIndex:t,rowPinned:o}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:i,rowIndex:t,rowPinned:o}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(i),rowIndex:t,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),i=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();return e||i?{page:e,pageSize:i}:void 0}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),"number"==typeof e.page&&this.paginationService.setPage(e.page))}getRowSelectionState(){const e=this.selectionService.getSelectionState();return e&&(Array.isArray(e)||!1!==e.selectAll&&!1!==e.selectAllChildren||e?.toggledNodes?.length)?e:void 0}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const i=this.getColumnState();let t=!1;Object.entries(i).forEach(([o,r])=>{$a(r,this.cachedState[o])||(t=!0)}),this.cachedState={...this.cachedState,...i},t&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,i){const t=this.cachedState[e];this.setCachedStateValue(e,i),$a(i,t)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,i){this.cachedState={...this.cachedState,[e]:i}}refreshStaleState(){this.staleStateKeys.forEach(e=>{"rowSelection"===e&&this.setCachedStateValue(e,this.getRowSelectionState())}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(i=>this.queuedUpdateSources.add(i)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}}]},z6={version:lt,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:function B6(e){return e.stateService?.getState()??{}}},dependantModules:[hv]},V6={version:lt,moduleName:"@ag-grid-community/state",dependantModules:[hv,z6]},ml="paginationPageSizeSelector",ox={selector:"AG-PAGE-SIZE-SELECTOR",component:class extends Mt{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const i=Number(e);isNaN(i)||i<1||i===this.paginationService.getPageSize()||(this.paginationService.setPageSize(i,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(ml,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const i=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(i)?this.selectPageSizeComp.setValue(i.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&this.reloadPageSizesSelector()}reset(){sn(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(ml)}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),i=this.paginationService.getPageSize(),t=!i||!e.includes(i);if(t){const r=this.gos.exists("paginationPageSize"),s=!0!==this.gos.get(ml);pe(`'paginationPageSize=${i}'${r?"":" (default value)"}, but ${i} is not included in${s?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),s||pe(`Either set '${ml}' to an array that includes ${i} or to 'false' to disable the page size selector.`),e.unshift("")}const o=String(t?"":i);this.selectPageSizeComp?(nr(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(o,!0)):this.createPageSizeSelectorComp(e,o),this.hasEmptyOption=t}createPageSizeSelectOptions(e){return e.map(i=>({value:String(i)}))}createPageSizeSelectorComp(e,i){const t=this.localeService.getLocaleTextFunc(),o=t("pageSizeSelectorLabel","Page Size:"),r=t("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new fh).addOptions(this.createPageSizeSelectOptions(e)).setValue(i).setAriaLabel(r).setLabel(o).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const i=this.gos.get(ml);return!Array.isArray(i)||Tn(i)?[20,50,100]:[...i].sort((t,o)=>t-o)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}},sx={selector:"AG-PAGINATION",component:class extends Qm{constructor(){super(),this.btFirst=Ne,this.btPrevious=Ne,this.btNext=Ne,this.btLast=Ne,this.lbRecordCount=Ne,this.lbFirstRowOnPage=Ne,this.lbLastRowOnPage=Ne,this.lbCurrent=Ne,this.lbTotal=Ne,this.pageSizeComp=Ne,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[ox]);const{btFirst:i,btPrevious:t,btNext:o,btLast:r}=this;this.activateTabIndex([i,t,o,r]),i.insertAdjacentElement("afterbegin",Gn(e?"last":"first",this.gos)),t.insertAdjacentElement("afterbegin",Gn(e?"next":"previous",this.gos)),o.insertAdjacentElement("afterbegin",Gn(e?"previous":"next",this.gos)),r.insertAdjacentElement("afterbegin",Gn(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(s):this.focusService.focusGridInnerElement(s)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const i=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(i),i&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:i,fn:t}=e;this.addManagedListeners(i,{click:t,keydown:o=>{(o.key===le.ENTER||o.key===le.SPACE)&&(o.preventDefault(),t())}})}),function ix(e,i,t){e.addManagedElementListeners(i,{keydown:o=>{if(!o.defaultPrevented&&o.key===le.TAB){const r=o.shiftKey;t.findNextFocusableElement(i,!1,r)||t.focusNextGridCoreContainer(r)&&o.preventDefault()}}})}(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const i=this.gos.getCallback("paginationNumberFormatter");if(i)return i({value:e});const t=this.localeService.getLocaleTextFunc();return function Cm(e,i,t){return"number"!=typeof e?"":e.toString().replace(".",t).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}(e,t("thousandSeparator",","),t("decimalSeparator","."))}getTemplate(){const e=this.localeService.getLocaleTextFunc(),i=e("page","Page"),t=e("to","to"),o=e("of","of"),r=e("firstPage","First Page"),s=e("previousPage","Previous Page"),a=e("nextPage","Next Page"),l=e("lastPage","Last Page"),c=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${c}">\n                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel">\n                    <span id="ag-${c}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${c}-to">${t}</span>\n                    <span id="ag-${c}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${c}-of">${o}</span>\n                    <span id="ag-${c}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>\n                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>\n                    <span class="ag-paging-description">\n                        <span id="ag-${c}-start-page">${i}</span>\n                        <span id="ag-${c}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-${c}-of-page">${o}</span>\n                        <span id="ag-${c}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>\n                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${l}"></div>\n                </span>\n            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),i=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const o=this.isZeroPagesToDisplay();this.nextButtonDisabled=e===t-1||o,this.lastButtonDisabled=!i||o||e===t-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,i){(function Aw(e,i){Kn(e,"disabled",i)})(e,i),e.classList.toggle("ag-disabled",i)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();return e&&0===i}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages(),t=this.paginationService.getMasterRowCount(),o=e?t:null;if(1===o){const k=this.rowModel.getRow(0);if(k&&k.group&&!k.groupData&&!k.aggData)return void this.setTotalLabelsToZero()}const r=this.paginationService.getCurrentPage(),s=this.paginationService.getPageSize();let a,l;this.isZeroPagesToDisplay()?a=l=0:(a=s*r+1,l=a+s-1,e&&l>o&&(l=o));const d=!e&&t<a+s-1,h=this.formatNumber(a);let g;this.lbFirstRowOnPage.textContent=h;const m=this.localeService.getLocaleTextFunc();g=d?m("pageLastRowUnknown","?"):this.formatNumber(l),this.lbLastRowOnPage.textContent=g;const b=this.formatNumber(i>0?r+1:0);let S,_;if(this.lbCurrent.textContent=b,e)S=this.formatNumber(i),_=this.formatNumber(o);else{const k=m("more","more");S=k,_=k}this.lbTotal.textContent=S,this.lbRecordCount.textContent=_,this.announceAriaStatus(h,g,_,b,S)}announceAriaStatus(e,i,t,o,r){const s=this.localeService.getLocaleTextFunc(),a=s("page","Page"),l=s("to","to"),c=s("of","of"),d=`${e} ${l} ${i} ${c} ${t}`,h=`${a} ${o} ${c} ${r}`;d!==this.ariaRowStatus&&(this.ariaRowStatus=d,this.ariaAnnouncementService.announceValue(d,"paginationRow")),h!==this.ariaPageStatus&&(this.ariaPageStatus=h,this.ariaAnnouncementService.announceValue(h,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}}},gv={version:lt,moduleName:"@ag-grid-community/pagination-core",beans:[class extends fe{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return sx}isPaginateChildRows(){return!(!this.gos.get("groupRemoveSingleChildren")&&!this.gos.get("groupRemoveLowestSingleChildren"))||this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||"number"!=typeof this.currentPage||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const i=this.getPageForIndex(e);this.goToPage(i)}isRowInPage(e){return!this.active||this.getPageForIndex(e.rowIndex)===this.currentPage}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),i=Math.floor(e/this.pageSize);this.goToPage(i)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Fe(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Fe(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Fe(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Fe(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,i){const t=this.pageSize;switch(i){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}t!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*(this.currentPage+1)-1;if(t>e&&(t=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(this.pageSize*this.currentPage),t===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const o=this.rowModel.getTopLevelRowDisplayedIndex(t+1);this.bottomDisplayedRowIndex=o-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),0===this.masterRowCount)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:i=!1,newPage:t=!1,newPageSize:o=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:t,newPageSize:o,keepRenderedRows:i})}},class extends fe{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;const i=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:i,scrollVisibilityChanged:i}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const i=()=>{const t=Math.max(is(this.gos),1),o=Math.floor(e/t);this.paginationService.setPageSize(o,"autoCalculated")};this.isBodyRendered?hi(()=>i(),50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}]},lx={version:lt,moduleName:"@ag-grid-community/pagination-api",dependantModules:[gv],apiFunctions:{paginationIsLastPageFound:function U6(e){return e.rowModel.isLastRowIndexKnown()},paginationGetPageSize:function W6(e){return e.paginationService?.getPageSize()??100},paginationGetCurrentPage:function j6(e){return e.paginationService?.getCurrentPage()??0},paginationGetTotalPages:function Y6(e){return e.paginationService?.getTotalPages()??1},paginationGetRowCount:function $6(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()},paginationGoToNextPage:function J6(e){e.paginationService?.goToNextPage()},paginationGoToPreviousPage:function K6(e){e.paginationService?.goToPreviousPage()},paginationGoToFirstPage:function Q6(e){e.paginationService?.goToFirstPage()},paginationGoToLastPage:function X6(e){e.paginationService?.goToLastPage()},paginationGoToPage:function ex(e,i){e.paginationService?.goToPage(i)}}},cx={version:lt,moduleName:"@ag-grid-community/pagination",dependantModules:[gv,lx]},Rn="clientSide",yn="serverSide",$s="infinite",dx={onGroupExpandedOrCollapsed:[Rn],refreshClientSideRowModel:[Rn],isRowDataEmpty:[Rn],forEachLeafNode:[Rn],forEachNodeAfterFilter:[Rn],forEachNodeAfterFilterAndSort:[Rn],resetRowHeights:[Rn],applyTransaction:[Rn],applyTransactionAsync:[Rn],flushAsyncTransactions:[Rn],getBestCostNodeSelection:[Rn],getServerSideSelectionState:[yn],setServerSideSelectionState:[yn],applyServerSideTransaction:[yn],applyServerSideTransactionAsync:[yn],applyServerSideRowData:[yn],retryServerSideLoads:[yn],flushServerSideAsyncTransactions:[yn],refreshServerSide:[yn],getServerSideGroupLevelState:[yn],refreshInfiniteCache:[$s],purgeInfiniteCache:[$s],getInfiniteRowCount:[$s],isLastRowIndexKnown:[$s,yn],expandAll:[Rn,yn],collapseAll:[Rn,yn],onRowHeightChanged:[Rn,yn],setRowCount:[$s,yn],getCacheBlockState:[$s,yn]},ux={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}},Rr=(e,i)=>"clientSide"===(i.rowModelType??"clientSide")?{module:"@ag-grid-enterprise/row-grouping"}:null,px={enableRowGroup:Rr,rowGroup:Rr,rowGroupIndex:Rr,enablePivot:Rr,enableValue:Rr,pivot:Rr,pivotIndex:Rr,aggFunc:Rr,cellEditor:e=>"agRichSelect"===e.cellEditor||"agRichSelectCellEditor"===e.cellEditor?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{const i=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(t=>i.includes(t))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:i})=>"multiple"===i?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:i})=>"multiple"===i?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:i})=>"multiple"===i?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Js},Js={objectName:"colDef",allProperties:Object.keys({headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0}),docsUrl:"column-properties/",deprecations:{columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},validations:px},Cx={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},Sx={version:lt,moduleName:"@ag-grid-community/core"},_x={version:lt,moduleName:"@ag-grid-community/core-validations",beans:[class extends fe{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,{objectName:"gridOptions",allProperties:[...el.ALL_PROPERTIES,...tl.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}},validations:{sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const i=e.rowModelType??"clientSide";switch(i){case"clientSide":return e.getDataPath?null:`treeData requires 'getDataPath' in the ${i} row model.`;case"serverSide":return e.isServerSideGroup&&e.getServerSideGroupKey?null:`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const i=e.paginationPageSizeSelector;return"boolean"==typeof i||null==i||i.length?null:"'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false."}},rowSelection:{validate:({rowSelection:e})=>e&&"string"==typeof e?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':null},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>Js,defaultColDef:()=>Js,defaultColGroupDef:()=>Js,autoGroupColumnDef:()=>Js,selectionColumnDef:()=>Js}})}validateApiFunction(e,i){return function hx(e,i,t){const o=ux[e];if(o){const{version:s,new:a,old:l,message:c}=o,d=l??e;return(...h)=>(pe(`Since ${s} api.${d} is deprecated. ${a?`Please use ${a} instead. `:""}${c??""}`),i.apply(i,h))}const r=dx[e];return r?(...s)=>{const a=t.rowModel.getType();if(r.includes(a))return i.apply(i,s);pt(`api.${e} can only be called when gridOptions.rowModelType is ${r.join(" or ")}`)}:i}(e,i,this.beans)}processOptions(e,i){const{validations:t,deprecations:o,allProperties:r,propertyExceptions:s,objectName:a,docsUrl:l}=i;r&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...s??[],...Object.keys(o)],r,a,l);const c=new Set;Object.keys(e).forEach(h=>{const g=o[h];if(g)if("renamed"in g){const{renamed:E,version:G}=g;c.add(`As of v${G}, ${String(h)} is deprecated. Please use ${String(E)} instead.`),e[E]=e[h]}else{const{message:E,version:G}=g;c.add(`As of v${G}, ${String(h)} is deprecated. ${E??""}`)}const m=e[h];if(null==m||!1===m)return;const f=t[h];let y;if(!f)return;if("function"==typeof f){const E=f(e,this.gridOptions);if(!E)return;if("objectName"in E){const G=e[h];return Array.isArray(G)?void G.forEach(K=>{this.processOptions(K,E)}):void this.processOptions(e[h],E)}y=E}else y=f;const{module:b,dependencies:S,validate:_,supportedRowModels:k}=y;if(k){const E=this.gridOptions.rowModelType??"clientSide";if(!k.includes(E))return void c.add(`${String(h)} is not supported with the '${E}' row model.`)}if(b){const E=Array.isArray(b)?b:[b];let G=!0;if(E.forEach(K=>{this.gos.assertModuleRegistered(K,String(h))||(G=!1,c.add(`${String(h)} is only available when ${K} is loaded.`))}),!G)return}if(S){const E=this.checkForRequiredDependencies(h,S,e);if(E)return void c.add(E)}if(_){const E=_(e,this.gridOptions);if(E)return void c.add(E)}}),c.size>0&&c.forEach(h=>{pe(h)})}checkForRequiredDependencies(e,i,t){const r=Object.entries(i).find(([l,c])=>!c.includes(t[l]));if(!r)return null;const[s,a]=r;return a.length>1?`'${String(e)}' requires '${s}' to be one of [${a.join(", ")}].`:`'${String(e)}' requires '${s}' to be ${a[0]}.`}checkProperties(e,i,t,o,r){const a=function f2(e,i,t){const o={},r=e.filter(s=>!i.some(a=>a===s));return r.length>0&&r.forEach(s=>o[s]=Xf(s,t).values),o}(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...i,...t],t);if($n(a,(l,c)=>{let d=`invalid ${o} property '${l}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;t.includes("context")&&(d+=`\nIf you are trying to annotate ${o} with application data, use the '${o}.context' property instead.`),pe(d)}),Object.keys(a).length>0&&r){const l=this.getFrameworkOverrides().getDocLink(r);pe(`to see all the valid ${o} properties please check: ${l}`)}}}]},pv={version:lt,moduleName:"@ag-grid-community/core-community-features",dependantModules:[Sx,_x,ES,Xy,V6,m5,x_,cx,N6]},xx=class extends fe{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}}),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},Vc=new Set(["gridPreDestroyed","fillStart","pasteStart"]),kx=new Map([...el.BOOLEAN_PROPERTIES.map(e=>[e,ku]),...el.NUMBER_PROPERTIES.map(e=>[e,vm]),["groupAggFiltering",e=>"function"==typeof e?e:ku(e)],["pageSize",Zo(1)],["autoSizePadding",Zo(0)],["keepDetailRowsCount",Zo(1)],["rowBuffer",Zo(0)],["infiniteInitialRowCount",Zo(1)],["cacheOverflowSize",Zo(1)],["cacheBlockSize",Zo(1)],["serverSideInitialRowCount",Zo(1)],["viewportRowModelPageSize",Zo(1)],["viewportRowModelBufferSize",Zo(0)]]);function fv(e,i){const t=kx.get(e);return t?t(i):i}var mv=class DC extends fe{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new rt,this.globalEventHandlerFactory=i=>(t,o)=>{if(!this.isAlive())return;const r=Vc.has(t);if(r&&!i||!r&&i)return;const s=tl.getCallbackForEvent(t),a=this.gridOptions[s];"function"==typeof a&&this.frameworkOverrides.wrapOutgoing(()=>{a(o)})}}wireBeans(i){this.gridOptions=i.gridOptions,this.eGridDiv=i.eGridDiv,this.validationService=i.validationService,this.environment=i.environment,this.api=i.gridApi,this.gridId=i.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const i=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),i),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:t})=>{this.updateGridOptions({options:t,force:!0,source:"gridOptionsUpdated"})}})}get(i){return this.gridOptions[i]??Cx[i]}getCallback(i){return this.mergeGridCommonParams(this.gridOptions[i])}exists(i){return Fe(this.gridOptions[i])}mergeGridCommonParams(i){return i&&(o=>{const r=o;return r.api=this.api,r.context=this.gridOptionsContext,i(r)})}updateGridOptions({options:i,force:t,source:o="api"}){const r={id:DC.changeSetId++,properties:[]},s=[];Object.entries(i).forEach(([a,l])=>{"api"===o&&vw[a]&&pe(`${a} is an initial property and cannot be updated.`);const c=fv(a,l),h=this.gridOptions[a];(t||"object"==typeof c&&"api"===o||h!==c)&&(this.gridOptions[a]=c,s.push({type:a,currentValue:c,previousValue:h,changeSet:r,source:o}))}),this.validationService?.processGridOptions(this.gridOptions),r.properties=s.map(a=>a.type),s.forEach(a=>{this.gridOptions.debug&&Ht(`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propertyEventService.dispatchEvent(a)})}addPropertyEventListener(i,t){this.propertyEventService.addEventListener(i,t)}removePropertyEventListener(i,t){this.propertyEventService.removeEventListener(i,t)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(i){const t=i;return t.api=this.api,t.context=this.gridOptionsContext,t}assertModuleRegistered(i,t){return ar.__assertRegistered(i,t,this.gridId)}isModuleRegistered(i){return ar.__isRegistered(i,this.gridId)}};mv.changeSetId=0;var Dx=mv,Fx=class extends fe{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,i){let t,o;if(Ti(e.column)?t=this.visibleColsService.getGroupAtDirection(e.column,i):(o=`getCol${i}`,t=this.visibleColsService[o](e.column)),!t)return;const{headerRowIndex:r}=e;if("filter"!==this.getHeaderRowType(r)){const l=[t];for(;t.getParent();)t=t.getParent(),l.push(t);t=l[l.length-1-r]}const{column:s,headerRowIndex:a}=this.getHeaderIndexToFocus(t,r);return{column:s,headerRowIndex:a}}getHeaderIndexToFocus(e,i){let t;if(Ti(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const o=e;t=o.getLeafColumns()[0];let r=t;for(;r!==o;)i++,r=r.getParent()}return{column:t||e,headerRowIndex:i}}isAnyChildSpanningHeaderHeight(e){return!!e&&e.getLeafColumns().some(i=>i.isSpanHeaderHeight())}getColumnVisibleParent(e,i){const t=this.getHeaderRowType(i),r="column"===t;let s="filter"===t?e:e.getParent(),a=i-1,l=a;if(r&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;s&&s.isPadding();)s=s.getParent(),a--;l=a,a<0&&(s=e,a=i,l=void 0)}return{column:s,headerRowIndex:a,headerRowIndexWithoutSpan:l}}getColumnVisibleChild(e,i,t="After"){let r=e,s=i+1;const a=s;if("group"===this.getHeaderRowType(i)){const l=e.getDisplayedLeafColumns(),c="After"===t?l[0]:Tt(l),d=[];let h=c;for(;h.getParent()!==e;)h=h.getParent(),d.push(h);if(r=c,c.isSpanHeaderHeight())for(let g=d.length-1;g>=0;g--){const m=d[g];if(!m.isPadding()){r=m;break}s++}else r=Tt(d),r||(r=c)}return{column:r,headerRowIndex:s,headerRowIndexWithoutSpan:a}}getHeaderRowType(e){const i=this.ctrlsService.getHeaderRowContainerCtrl();if(i)return i.getRowType(e)}findColAtEdgeForHeaderRow(e,i){const t=this.visibleColsService.getAllCols(),o=t["start"===i?0:t.length-1];if(!o)return;const s=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned())?.getRowType(e);return"group"==s?{headerRowIndex:e,column:this.visibleColsService.getColGroupAtLevel(o,e)}:{headerRowIndex:null==s?-1:e,column:o}}},Rx=class extends fe{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(t,o,r)=>e({key:t,defaultValue:o,variableValues:r});const i=this.gos.get("localeText");return(t,o,r)=>{let s=i&&i[t];if(s&&r&&r.length){let a=0;for(;!(a>=r.length||-1===s.indexOf("${variable}"));)s=s.replace("${variable}",r[a++])}return s??o}}},Mx=class extends fe{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new Bu(this.getFrameworkOverrides())}addEventListener(e,i){const t=this.frameworkEventWrappingService.wrap(i),o=gc(this.gos)&&!Vc.has(e),r=o?this.asyncEventListeners:this.syncEventListeners;r.has(e)||r.set(e,new Set),r.get(e).add(t),this.eventService.addEventListener(e,t,o)}removeEventListener(e,i){const t=this.frameworkEventWrappingService.unwrap(i),r=!!this.asyncEventListeners.get(e)?.delete(t);r||this.syncEventListeners.get(e)?.delete(t),this.eventService.removeEventListener(e,t,r)}addGlobalListener(e){const i=this.frameworkEventWrappingService.wrapGlobal(e);if(gc(this.gos)){const o=(s,a)=>{Vc.has(s)&&i(s,a)},r=(s,a)=>{Vc.has(s)||i(s,a)};this.globalEventListenerPairs.set(e,{syncListener:o,asyncListener:r}),this.eventService.addGlobalListener(o,!1),this.eventService.addGlobalListener(r,!0)}else this.syncGlobalEventListeners.add(i),this.eventService.addGlobalListener(i,!1)}removeGlobalListener(e){const i=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(i)){const{syncListener:o,asyncListener:r}=this.globalEventListenerPairs.get(i);this.eventService.removeGlobalListener(o,!1),this.eventService.removeGlobalListener(r,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(i),this.eventService.removeGlobalListener(i,!1)}destroyEventListeners(e,i){e.forEach((t,o)=>{t.forEach(r=>this.eventService.removeEventListener(o,r,i)),t.clear()}),e.clear()}destroyGlobalListeners(e,i){e.forEach(t=>this.eventService.removeGlobalListener(t,i)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:i})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(i,!0)}),this.globalEventListenerPairs.clear()}},Ex=class extends fe{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},Px=class extends fe{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return kt(this.topRowBounds)||kt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}}calculateBounds(e,i){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(i),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=i),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=Fe(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},Lx=class extends fe{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=hi(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=ki(this.gos),i=this.descriptionContainer=e.createElement("div");i.classList.add("ag-aria-description-container"),Ef(i,"polite"),function xw(e,i){Kn(e,"relevant",i)}(i,"additions text"),function _w(e,i){Kn(e,"atomic",i)}(i,!0),this.eGridDiv.appendChild(i)}announceValue(e,i){this.pendingAnnouncements.set(i,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(sn(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},Ix=class extends fe{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,i){if(0===this.executeNextFuncs.length&&0===this.executeLaterFuncs.length)return e(),void i();const t=o=>{for(;o.length;){const r=o.pop();r&&r()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),t(this.executeNextFuncs)},0),window.setTimeout(()=>{i(),t(this.executeLaterFuncs)},200)})}},Ox=class extends fe{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},Nx=class extends fe{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=gi(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return 0!==this.state&&!!this.overlayWrapperComp}isExclusive(){return 1===this.state&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");!e&&(void 0!==e||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!this.gos.get("loading")&&!this.gos.get("suppressNoRowsOverlay")&&this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")?pe("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead."):this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp)return void(this.state=0);let e=this.gos.get("loading");this.showInitialOverlay&&void 0===e&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?1!==this.state&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?2!==this.state&&this.doShowNoRowsOverlay():0!==this.state&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,i,t){const o=e.newAgStackInstance();this.overlayWrapperComp?.showOverlay(o,i,this.isExclusive(),t),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;2===this.state?e=this.ctrlsService.get("gridHeaderCtrl")?.getHeaderHeight()||0:0!==this.wrapperPadding&&(e=0),this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},Bx=class extends fe{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const i=[];return Fe(e.extraCssClass)&&i.push(e.extraCssClass),i.push("ag-row"),i.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&i.push("ag-opacity-zero"),i.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&i.push("ag-row-pinned"),e.rowNode.isSelected()&&i.push("ag-row-selected"),e.rowNode.footer&&i.push("ag-row-footer"),i.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&i.push("ag-row-loading"),e.fullWidthRow&&i.push("ag-full-width-row"),e.expandable&&(i.push("ag-row-group"),i.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&i.push("ag-row-dragging"),Cf(i,this.processClassesFromGridOptions(e.rowNode)),Cf(i,this.preProcessRowClassRules(e.rowNode)),i.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&i.push("ag-row-first"),e.lastRowOnPage&&i.push("ag-row-last"),e.fullWidthRow&&("left"===e.pinned&&i.push("ag-cell-last-left-pinned"),"right"===e.pinned&&i.push("ag-cell-first-right-pinned")),i}processClassesFromGridOptions(e){const i=[],t=s=>{"string"==typeof s?i.push(s):Array.isArray(s)&&s.forEach(a=>i.push(a))},o=this.gos.get("rowClass");if(o){if("function"==typeof o)return pe("rowClass should not be a function, please use getRowClass instead"),[];t(o)}const r=this.gos.getCallback("getRowClass");return r&&t(r({data:e.data,node:e,rowIndex:e.rowIndex})),i}preProcessRowClassRules(e){const i=[];return this.processRowClassRules(e,t=>{i.push(t)},()=>{}),i}processRowClassRules(e,i,t){const o=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),o,i,t)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},Zx=class extends fe{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function Iw(){if(void 0!==eh)return eh;if(!document.body)return-1;let e=1e6;const i=ih()?6e6:1e9,t=document.createElement("div");for(document.body.appendChild(t);;){const o=2*e;if(t.style.height=o+"px",o>i||t.clientHeight!==o)break;e=o}return document.body.removeChild(t),eh=e,e}(),this.gos.get("debug")&&Ht("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(i!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=i,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,i=e*this.pixelsToShave;this.gos.get("debug")&&Ht(`RowContainerHeightService - Div Stretch Offset = ${i} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(i)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const i="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==i&&(this.divStretchOffset=i,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return i.bottom-i.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const i=this.modelHeight-this.getUiBodyHeight();return this.maxScrollY*(e/i)}},Gx=class extends fe{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Io(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Io(this.gos))}doFullSort(e,i){const o=e.map((r,s)=>({currentPos:s,rowNode:r}));return o.sort(this.compareRowNodes.bind(this,i)),o.map(r=>r.rowNode)}compareRowNodes(e,i,t){const o=i.rowNode,r=t.rowNode;for(let s=0,a=e.length;s<a;s++){const l=e[s],c="desc"===l.sort,d=this.getValue(o,l.column),h=this.getValue(r,l.column);let g;const m=this.getComparator(l,o);if(g=m?m(d,h,o,r,c):FC(d,h,this.isAccentedSort),!isNaN(g)&&0!==g)return"asc"===l.sort?g:-1*g}return i.currentPos-t.currentPos}getComparator(e,i){const t=e.column,o=t.getColDef().comparator;if(null!=o)return o;if(!t.getColDef().showRowGroup)return;const r=!i.group&&t.getColDef().field;if(!r)return;const s=this.columnModel.getColDefCol(r);return s?s.getColDef().comparator:void 0}getValue(e,i){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(i,e,!1,!1);if(e.rowGroupColumn===i){if(fc(this.gos,this.columnModel.isPivotActive())){const s=e.allLeafChildren?.[0];return s?this.valueService.getValue(i,s,!1,!1):void 0}const r=this.showRowGroupColsService?.getShowRowGroupCol(i.getId());return r?e.groupData?.[r.getId()]:void 0}return e.group&&i.getColDef().showRowGroup?void 0:this.valueService.getValue(i,e,!1,!1)}},Uc=class{constructor(e,i){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:i,children:null},this.mapToItems[i.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,i){if(e.children)for(let t=0;t<e.children.length;t++)this.depthFirstSearchChangedPath(e.children[t],i);i(e.rowNode)}depthFirstSearchEverything(e,i,t){if(e.childrenAfterGroup)for(let o=0;o<e.childrenAfterGroup.length;o++){const r=e.childrenAfterGroup[o];r.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[o],i,t):t&&i(r)}i(e)}forEachChangedNodeDepthFirst(e,i=!1,t=!1){this.active&&!t?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,i)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let i=e,t=0;for(;!this.mapToItems[i.id];)this.mapToItems[i.id]={rowNode:i,children:null},t++,i=i.parent;return t}populateColumnsMap(e,i){if(!this.keepingColumns||!i)return;let t=e;for(;t;)this.nodeIdsToColumns[t.id]||(this.nodeIdsToColumns[t.id]={}),i.forEach(o=>this.nodeIdsToColumns[t.id][o.getId()]=!0),t=t.parent}linkPathItems(e,i){let t=e;for(let o=0;o<i;o++){const r=this.mapToItems[t.id],s=this.mapToItems[t.parent.id];s.children||(s.children=[]),s.children.push(r),t=t.parent}}addParentNode(e,i){if(!e||e.isRowPinned())return;const t=this.createPathItems(e);this.linkPathItems(e,t),this.populateColumnsMap(e,i)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,i){if(!this.keepingColumns)return i;const t=this.nodeIdsToColumns[e.id];return i.filter(r=>t[r.getId()])}getNotValueColumnsForNode(e,i){if(!this.keepingColumns)return null;const t=this.nodeIdsToColumns[e.id];return i.filter(r=>!t[r.getId()])}},vv=class extends fe{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){const e=this.getRoot(),i=this.getEnd();if(null==e||null==i)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,i)}return this.cachedRange}isInRange(e){return null!==this.root&&this.getRange().some(i=>i.id===e.id)}getRoot(){return this.root&&null===this.root?.key&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&null===this.end?.key&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const i=this.getRange();if(0===i.length)return{keep:[],discard:[]};const t=i[0].id===this.root.id,o=i.findIndex(r=>r.id===e.id);if(o>-1){const r=i.slice(0,o),s=i.slice(o+1);return this.setEndRange(e),t?{keep:r,discard:s}:{keep:s,discard:r}}return{keep:i,discard:[]}}extend(e,i=!1){const t=this.getRoot();if(null==t){const r=this.getRange().slice();return i&&e.depthFirstSearch(s=>!s.group&&r.push(s)),r.push(e),this.setRoot(e),{keep:r,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(t,e).find(r=>r.id===this.end?.id))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const r=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:r}}}},this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:i,onRowSelected:t}=this;this.selectionCtx.init(i),this.rowSelectionMode=vc(e),this.groupSelectsChildren=os(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{const o=os(e),r=vc(e);(o!==this.groupSelectsChildren||r!==this.rowSelectionMode)&&(this.groupSelectsChildren=o,this.rowSelectionMode=r,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:t.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return"multiRow"===this.rowSelectionMode}overrideSelectionValue(e,i){if(!(e=>"checkboxSelected"===e||"rowClicked"===e||"spaceKey"===e||"uiSelectAll"===e||"uiSelectAllCurrentPage"===e||"uiSelectAllFiltered"===e)(i))return e;const t=this.selectionCtx.getRoot();return!t||(t.isSelected()??!1)}setNodesSelected(e){const{newValue:i,clearSelection:t,suppressFinishActions:o,rangeSelect:r,nodes:s,event:a,source:l}=e;if(0===s.length)return 0;if(s.length>1&&!this.isMultiSelect())return pe("cannot multi select unless selection mode is 'multiRow'"),0;const c=this.groupSelectsChildren&&!0===e.groupSelectsFiltered,d=s.map(g=>g.footer?g.sibling:g);if(r){if(d.length>1)return pe("cannot range select while selecting multiple rows"),0;const g=d[0],m=this.overrideSelectionValue(i,l);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(g)){const f=this.selectionCtx.truncate(g);return m&&this.selectRange(f.discard,!1,l),this.selectRange(f.keep,m,l)}if(this.selectionCtx.getRoot()!==g){const b=this.selectionCtx.extend(g,this.groupSelectsChildren);return m&&this.selectRange(b.discard,!1,l),this.selectRange(b.keep,m,l)}}}o||this.selectionCtx.setRoot(d[0]);let h=0;for(let g=0;g<d.length;g++){const m=d[g];c&&m.group||m.selectThisNode(i,a,l)&&h++,this.groupSelectsChildren&&m.childrenAfterGroup?.length&&(h+=this.selectChildren(m,i,c,l))}return o||(i&&(t||!this.isMultiSelect())&&(h+=this.clearOtherNodes(d[0],l)),h>0&&(this.updateGroupsFromChildrenSelections(l),this.dispatchSelectionChanged(l))),h}selectRange(e,i,t){let o=0;return e.forEach(r=>{r.group&&this.groupSelectsChildren||r.selectThisNode(i,void 0,t)&&o++}),o>0&&(this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)),o}selectChildren(e,i,t,o){const r=t?e.childrenAfterAggFilter:e.childrenAfterGroup;return kt(r)?0:this.setNodesSelected({newValue:i,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:t,source:o,nodes:r})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(i=>{i&&e.push(i)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(i=>{i&&i.data&&e.push(i.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const i=new Map;this.selectedNodes.forEach((t,o)=>{t&&e(t)&&i.set(o,t)}),this.selectedNodes=i}updateGroupsFromChildrenSelections(e,i){if(!this.groupSelectsChildren||!gi(this.gos))return!1;const o=this.rowModel.getRootNode();i||(i=new Uc(!0,o)).setInactive();let r=!1;return i.forEachChangedNodeDepthFirst(s=>{if(s!==o){const a=s.calculateSelectedFromChildren();r=s.selectThisNode(null!==a&&a,void 0,e)||r}}),r}clearOtherNodes(e,i){const t=new Map;let o=0;return this.selectedNodes.forEach(r=>{if(r&&r.id!==e.id){const s=this.selectedNodes.get(r.id);o+=s.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:i}),this.groupSelectsChildren&&r.parent&&t.set(r.parent.id,r.parent)}}),t.forEach(r=>{const s=r.calculateSelectedFromChildren();r.selectThisNode(null!==s&&s,void 0,i)}),o}onRowSelected(e){const i=e.node;this.groupSelectsChildren&&i.group||(i.isSelected()?this.selectedNodes.set(i.id,i):this.selectedNodes.delete(i.id))}syncInRowNode(e,i){this.syncInOldRowNode(e,i),this.syncInNewRowNode(e)}syncInOldRowNode(e,i){Fe(i)&&e.id!==i.id&&i&&this.selectedNodes.get(i.id)==e&&this.selectedNodes.set(i.id,i)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const i=this.getSelectionCount();this.resetNodes(),i&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(!gi(this.gos))return;const i=this.rowModel.getTopLevelNodes();if(null===i)return;const t=[];return function o(r){for(let s=0,a=r.length;s<a;s++){const l=r[s];l.isSelected()?t.push(l):l.group&&l.children&&o(l.children)}}(i),t}isEmpty(){let e=0;return this.selectedNodes.forEach(i=>{i&&e++}),0===e}deselectAllRowNodes(e){const i=a=>a.selectThisNode(!1,void 0,o),t=gi(this.gos),{source:o,justFiltered:r,justCurrentPage:s}=e;if(s||r){if(!t)return void pt("selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(r,s).forEach(i)}else this.selectedNodes.forEach(a=>{a&&i(a)}),this.reset(o);this.selectionCtx.reset(),t&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o)}getSelectedCounts(e,i){let t=0,o=0;return this.getNodesToSelect(e,i).forEach(s=>{this.groupSelectsChildren&&s.group||(s.isSelected()?t++:s.selectable&&o++)}),{selectedCount:t,notSelectedCount:o}}getSelectAllState(e,i){const{selectedCount:t,notSelectedCount:o}=this.getSelectedCounts(e,i);return(0!==t||0!==o)&&(t>0&&o>0?null:t>0)}hasNodesToSelect(e=!1,i=!1){return this.getNodesToSelect(e,i).filter(t=>t.selectable).length>0}getNodesToSelect(e=!1,i=!1){this.validateSelectAllType();const t=[];if(i)return this.forEachNodeOnPage(r=>{if(r.group)if(r.expanded)this.groupSelectsChildren||t.push(r);else{const s=a=>{t.push(a),a.childrenAfterFilter?.length&&a.childrenAfterFilter.forEach(s)};s(r)}else t.push(r)}),t;const o=this.rowModel;return e?(o.forEachNodeAfterFilter(r=>{t.push(r)}),t):(o.forEachNode(r=>{t.push(r)}),t)}forEachNodeOnPage(e){const i=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();for(let o=i;o<=t;o++){const r=this.rowModel.getRow(o);r&&e(r)}}selectAllRowNodes(e){if(function PC(e){return"string"!=typeof e.get("rowSelection")}(this.gos)&&!Mu(this.gos))return pe("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:i,justFiltered:t,justCurrentPage:o}=e,r=this.getNodesToSelect(t,o);r.forEach(s=>s.selectThisNode(!0,void 0,i)),this.selectionCtx.setRoot(r[0]??null),this.selectionCtx.setEndRange(Tt(r)??null),gi(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)}getSelectionState(){const e=[];return this.selectedNodes.forEach(i=>{i?.id&&e.push(i.id)}),e.length?e:null}setSelectionState(e,i){if(!Array.isArray(e))return pt("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const t=new Set(e),o=[];this.rowModel.forEachNode(r=>{t.has(r.id)&&o.push(r)}),this.setNodesSelected({newValue:!0,nodes:o,source:i})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!gi(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},Hx=class extends fe{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const{gos:i}=this,t=hc(i),o=Ru(i);if(!t||!o)return;const r=os(i),s=gi(i)&&r,a=[],l=c=>{if(e&&!c.group)return;if(s&&c.group){const h=c.childrenAfterGroup.some(g=>!0===g.selectable);return void c.setRowSelectable(h,!0)}const d=o?.(c)??!0;c.setRowSelectable(d,!0),!d&&c.isSelected()&&a.push(c)};s?new Uc(!1,this.rowModel.getRootNode()).forEachChangedNodeDepthFirst(l,!0,!0):this.rowModel.forEachNode(l),a.length&&this.selectionService.setNodesSelected({nodes:a,newValue:!1,source:"selectableChanged"}),s&&this.selectionService instanceof vv&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},Cv=["asc","desc",null],qx=class extends fe{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,i,t){const o=this.getNextSortDirection(e);this.setSortForColumn(e,o,i,t)}setSortForColumn(e,i,t,o){"asc"!==i&&"desc"!==i&&(i=null);let s=[e];if(Io(this.gos)&&e.getColDef().showRowGroup){const d=this.funcColsService.getSourceColumnsForGroupColumn(e)?.filter(h=>h.isSortable());d&&(s=[e,...d])}s.forEach(c=>c.setSort(i,o));const l=[];if(!t&&!this.gos.get("alwaysMultiSort")||this.gos.get("suppressMultiSort")){const c=this.clearSortBarTheseColumns(s,o);l.push(...c)}this.updateSortIndex(e),l.push(...s),this.dispatchSortChangedEvents(o,l)}updateSortIndex(e){const i=Io(this.gos),t=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),o=i&&t||e,r=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(l=>l.setSortIndex(null));const s=r.filter(l=>!(i&&l.getColDef().showRowGroup||l===o));(o.getSort()?[...s,o]:s).forEach((l,c)=>{l.setSortIndex(c)})}onSortChanged(e,i){this.dispatchSortChangedEvents(e,i)}isSortActive(){const i=this.columnModel.getAllCols().filter(t=>!!t.getSort());return i&&i.length>0}dispatchSortChangedEvents(e,i){const t={type:"sortChanged",source:e};i&&(t.columns=i),this.eventService.dispatchEvent(t)}clearSortBarTheseColumns(e,i){const t=[];return this.columnModel.getAllCols().forEach(o=>{e.includes(o)||(o.getSort()&&t.push(o),o.setSort(void 0,i))}),t}getNextSortDirection(e){let i;if(i=e.getColDef().sortingOrder?e.getColDef().sortingOrder:this.gos.get("sortingOrder")?this.gos.get("sortingOrder"):Cv,!Array.isArray(i)||i.length<=0)return pe(`sortingOrder must be an array with at least one element, currently it's ${i}`),null;const t=i.indexOf(e.getSort());let s;return s=t<0||t==i.length-1?i[0]:i[t+1],Cv.indexOf(s)<0?(pe("invalid sort type ",s),null):s}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(s=>!!s.getSort());if(this.columnModel.isPivotMode()){const s=Io(this.gos);e=e.filter(a=>{const l=!!a.getAggFunc(),c=!a.isPrimary(),d=s?this.showRowGroupColsService?.getShowRowGroupCol(a.getId()):a.getColDef().showRowGroup;return l||c||d})}const i=this.funcColsService.getRowGroupColumns().filter(s=>!!s.getSort()),t={};e.forEach((s,a)=>t[s.getId()]=a),e.sort((s,a)=>{const l=s.getSortIndex(),c=a.getSortIndex();return null!=l&&null!=c?l-c:null==l&&null==c?t[s.getId()]>t[a.getId()]?1:-1:null==c?-1:1});const o=Io(this.gos)&&!!i.length;o&&(e=[...new Set(e.map(s=>this.showRowGroupColsService?.getShowRowGroupCol(s.getId())??s))]);const r=new Map;return e.forEach((s,a)=>r.set(s,a)),o&&i.forEach(s=>{const a=this.showRowGroupColsService.getShowRowGroupCol(s.getId());r.set(s,r.get(a))}),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,i],[t,o])=>i-o).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const i=Io(this.gos),t=!!e.getColDef().showRowGroup;return i&&t}getDisplaySortForColumn(e){const i=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!i?.length)return e.getSort();const o=null!=e.getColDef().field||e.getColDef().valueGetter?[e,...i]:i,r=o[0].getSort();return o.every(a=>a.getSort()==r)?r:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},zx=class extends fe{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&Ht(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const i=this.gos.get("columnDefs");if(i){if(this.waitingForColumns)return this.waitingForColumns=!1,void this.setColumnsAndData(i);this.columnModel.setColumnDefs(i,ss(e.source))}}},Ux=class extends fe{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){gi(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){"paste"!==e.source&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,i){if(this.gos.get("suppressChangeDetection"))return;const t=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const o=this.gos.get("aggregateOnlyChangedColumns"),r=new Uc(o,this.clientSideRowModel.getRootNode());r.addParentNode(e.parent,[i]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst(s=>{t.push(s)})}this.rowRenderer.refreshCells({rowNodes:t})}},Wx=class extends fe{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,i){if("string"==typeof e)return this.evaluateExpression(e,i);pt("value should be either a string or a function",e)}evaluateExpression(e,i){try{return this.createExpressionFunction(e)(i.value,i.context,i.oldValue,i.newValue,i.value,i.node,i.data,i.colDef,i.rowIndex,i.api,i.getValue,i.column,i.columnGroup)}catch(t){return Ht("Processing of the expression failed"),Ht("Expression = ",e),Ht("Params = ",i),Ht("Exception = ",t),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const i=this.createFunctionBody(e),t=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return this.expressionToFunctionCache[e]=t,t}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},jx=class extends fe{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,i,t){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[i]=t)}getValue(e,i){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[i]}},Yx=class extends fe{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=ir(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t),i=gc(this.gos);this.eventService.addEventListener("cellValueChanged",e,i),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,i)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,i){const t=i.leafGroup&&this.columnModel.isPivotMode(),o=i.group&&i.expanded&&!i.footer&&!t,r=this.gos.get("groupSuppressBlankHeader");if(!o||r)return this.getValue(e,i);let s=!1;const a=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");return s="function"!=typeof a?!!a:!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this}),this.getValue(e,i,!1,o&&s)}getValue(e,i,t=!1,o=!1){if(this.initialised||this.init(),!i)return;const r=e.getColDef(),s=r.field,a=e.getColId(),l=i.data;let c;const d=i.groupData&&void 0!==i.groupData[a],h=!o&&i.aggData&&void 0!==i.aggData[a],g=this.isSsrm&&o&&!!e.getColDef().aggFunc,m=this.isSsrm&&i.footer&&i.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===i.field);if(t&&r.filterValueGetter?c=this.executeFilterValueGetter(r.filterValueGetter,l,e,i):this.isTreeData&&h?c=i.aggData[a]:this.isTreeData&&r.valueGetter?c=this.executeValueGetter(r.valueGetter,l,e,i):this.isTreeData&&s&&l?c=Xa(l,s,e.isFieldContainsDots()):d?c=i.groupData[a]:h?c=i.aggData[a]:r.valueGetter?c=this.executeValueGetter(r.valueGetter,l,e,i):m?c=Xa(l,i.field,e.isFieldContainsDots()):s&&l&&!g&&(c=Xa(l,s,e.isFieldContainsDots())),this.cellExpressions&&"string"==typeof c&&0===c.indexOf("=")){const f=c.substring(1);c=this.executeValueGetter(f,l,e,i)}if(null==c){const f=this.getOpenedGroup(i,e);if(null!=f)return f}return c}parseValue(e,i,t,o){const r=e.getColDef(),s=r.valueParser;if(Fe(s)){const a=this.gos.addGridCommonParams({node:i,data:i?.data,oldValue:o,newValue:t,colDef:r,column:e});return"function"==typeof s?s(a):this.expressionService.evaluate(s,a)}return t}getDeleteValue(e,i){return Fe(e.getColDef().valueParser)?this.parseValue(e,i,"",this.getValueForDisplay(e,i))??null:null}formatValue(e,i,t,o,r=!0){let a,s=null;const l=e.getColDef();if(o?a=o:r&&(a=l.valueFormatter),a){const c=this.gos.addGridCommonParams({value:t,node:i,data:i?i.data:null,colDef:l,column:e});s="function"==typeof a?a(c):this.expressionService.evaluate(a,c)}else if(l.refData)return l.refData[t]||"";return null==s&&Array.isArray(t)&&(s=t.join(", ")),s}getOpenedGroup(e,i){if(!this.gos.get("showOpenedGroup")||!i.getColDef().showRowGroup)return;const o=i.getColDef().showRowGroup;let r=e.parent;for(;null!=r;){if(r.rowGroupColumn&&(!0===o||o===r.rowGroupColumn.getColId()))return r.key;r=r.parent}}setValue(e,i,t,o){const r=this.columnModel.getColDefCol(i);if(!e||!r)return!1;kt(e.data)&&(e.data={});const{field:s,valueSetter:a}=r.getColDef();if(kt(s)&&kt(a))return pe("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(r,t))return pe("Data type of the new value does not match the cell data type of the column"),!1;const l=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(r,e),newValue:t,colDef:r.getColDef(),column:r});let c;if(l.newValue=t,c=Fe(a)?"function"==typeof a?a(l):this.expressionService.evaluate(a,l):this.setValueUsingField(e.data,s,t,r.isFieldContainsDots()),void 0===c&&(c=!0),!c)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const d=this.getValue(r,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:l.column,colDef:l.colDef,data:e.data,node:e,oldValue:l.oldValue,newValue:d,value:d,source:o}),!0}callColumnCellValueChangedHandler(e){const i=e.colDef.onCellValueChanged;"function"==typeof i&&this.getFrameworkOverrides().wrapOutgoing(()=>{i({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,i,t,o){if(!i)return!1;let r=!1;if(o){const s=i.split(".");let a=e;for(;s.length>0&&a;){const l=s.shift();0===s.length?(r=a[l]===t,r||(a[l]=t)):a=a[l]}}else r=e[i]===t,r||(e[i]=t);return!r}executeFilterValueGetter(e,i,t,o){const r=this.gos.addGridCommonParams({data:i,node:o,column:t,colDef:t.getColDef(),getValue:this.getValueCallback.bind(this,o)});return"function"==typeof e?e(r):this.expressionService.evaluate(e,r)}executeValueGetter(e,i,t,o){const r=t.getColId(),s=this.valueCache.getValue(o,r);if(void 0!==s)return s;const a=this.gos.addGridCommonParams({data:i,node:o,column:t,colDef:t.getColDef(),getValue:this.getValueCallback.bind(this,o)});let l;return l="function"==typeof e?e(a):this.expressionService.evaluate(e,a),this.valueCache.setValue(o,r,l),l}getValueCallback(e,i){const t=this.columnModel.getColDefCol(i);return t?this.getValue(t,e):null}getKeyForNode(e,i){const t=this.getValue(e,i),o=e.getColDef().keyCreator;let r=t;return o&&(r=o(this.gos.addGridCommonParams({value:t,colDef:e.getColDef(),column:e,node:i,data:i.data}))),"string"==typeof r||null==r||(r=String(r),"[object Object]"===r&&pe("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}},Oh=class Is{static applyGlobalGridOptions(i){if(!Is.gridOptions)return i;let t={};return Cn(t,Is.gridOptions,!0,!0),"deep"===Is.mergeStrategy?Cn(t,i,!0,!0):t={...t,...i},Is.gridOptions.context&&(t.context=Is.gridOptions.context),i.context&&("deep"===Is.mergeStrategy&&t.context&&Cn(i.context,t.context,!0,!0),t.context=i.context),t}};Oh.gridOptions=void 0,Oh.mergeStrategy="shallow";var Wc=Oh,Jx=1,yv=class extends fe{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}},nA={version:lt,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:function Kx(e){e.expansionService.expandAll(!0)},collapseAll:function Qx(e){e.expansionService.expandAll(!1)},onRowHeightChanged:function Xx(e){const i=e.rowModelHelperService?.getClientSideRowModel(),t=e.rowModelHelperService?.getServerSideRowModel();i?i.onRowHeightChanged():t&&t.onRowHeightChanged()}}},oA={version:lt,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:function eA(e,i,t){const o=e.rowModelHelperService?.getServerSideRowModel();if(o)return e.funcColsService.isRowGroupEmpty()?void o.setRowCount(i,t):void pt("setRowCount cannot be used while using row grouping.");const r=e.rowModelHelperService?.getInfiniteRowModel();r&&r.setRowCount(i,t)},getCacheBlockState:function tA(e){return e.rowNodeBlockLoader?.getBlockState()??{}},isLastRowIndexKnown:function iA(e){return e.rowModel.isLastRowIndexKnown()}}},rA=class{wrap(e,i,t=[],o){const r=this.createWrapper(e,o);return i.forEach(s=>{this.createMethod(r,s,!0)}),t.forEach(s=>{this.createMethod(r,s,!1)}),r}createMethod(e,i,t){e.addMethod(i,this.createMethodProxy(e,i,t))}createMethodProxy(e,i,t){return function(){return e.hasMethod(i)?e.callMethod(i,arguments):(t&&pe("Framework component is missing the method "+i+"()"),null)}}},Nh=class{};Nh.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"},Nh.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"],Nh.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var Ks=typeof global>"u"?{}:global;Ks.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement,Ks.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement,Ks.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement,Ks.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement,Ks.Node=typeof Node>"u"?{}:Node,Ks.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Zh="32.2.1",bv={version:Zh,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[class extends fe{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=hi(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),i=!this.gos.get("suppressAnimationFrame"),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:i});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new lr(this.beans),this.nodeManager=new class{constructor(e,i,t,o,r,s){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=i,this.eventService=t,this.funcColsService=o,this.beans=s,this.selectionService=r,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id="ROOT_NODE_ID",this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return Sf(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if("string"==typeof e)return void pe("rowData must be an array.");this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const i=this.rootNode,t=this.rootNode.sibling;i.childrenAfterFilter=null,i.childrenAfterGroup=null,i.childrenAfterAggFilter=null,i.childrenAfterSort=null,i.childrenMapped=null,i.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?i.allLeafChildren=e.map((o,r)=>this.createNode(o,this.rootNode,0,r)):(i.allLeafChildren=[],i.childrenAfterGroup=[]),t&&(t.childrenAfterFilter=i.childrenAfterFilter,t.childrenAfterGroup=i.childrenAfterGroup,t.childrenAfterAggFilter=i.childrenAfterAggFilter,t.childrenAfterSort=i.childrenAfterSort,t.childrenMapped=i.childrenMapped,t.allLeafChildren=i.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const i={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},t=[];return this.executeRemove(e,i,t),this.executeUpdate(e,i,t),this.executeAdd(e,i),this.updateSelection(t,"rowDataChanged"),i}updateRowOrderFromRowData(e){const i=this.rootNode.allLeafChildren,t=i?.length??0,o=new Map;let r=-1,s=-1;for(let a=0;a<t;++a){const l=i[a],c=l.data;c!==e[a]&&(s<0&&(r=a),s=a,o.set(c,l))}if(r<0)return!1;for(let a=r;a<=s;++a){const l=o.get(e[a]);void 0!==l&&(i[a]=l,l.sourceRowIndex=a)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}updateSelection(e,i){const t=e.length>0;t&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:i}),this.selectionService.updateGroupsFromChildrenSelections(i),t&&this.eventService.dispatchEvent({type:"selectionChanged",source:i})}executeAdd(e,i){const t=e.add;if(Tn(t))return;const o=this.rootNode.allLeafChildren;let r=o.length;if("number"==typeof e.addIndex&&(r=this.sanitizeAddIndex(e.addIndex),r>0&&this.gos.get("treeData")))for(let c=0;c<o.length;c++)if(o[c]?.rowIndex==r-1){r=c+1;break}const s=t.map((l,c)=>this.createNode(l,this.rootNode,0,r+c));if(r<o.length){const l=o.slice(0,r),c=o.slice(r,o.length),d=l.length+s.length;for(let h=0,g=c.length;h<g;++h)c[h].sourceRowIndex=d+h;this.rootNode.allLeafChildren=[...l,...s,...c],i.rowsInserted=!0}else this.rootNode.allLeafChildren=o.concat(s);const a=this.rootNode.sibling;a&&(a.allLeafChildren=o),i.rowNodeTransaction.add=s}sanitizeAddIndex(e){const i=this.rootNode.allLeafChildren?.length??0;return e<0||e>=i||Number.isNaN(e)?i:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:i},t){const{remove:o}=e;if(Tn(o))return;const r={};o.forEach(a=>{const l=this.lookupRowNode(a);l&&(l.isSelected()&&t.push(l),l.clearRowTopAndRowIndex(),r[l.id]=!0,delete this.allNodesMap[l.id],i.remove.push(l))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(a=>!r[a.id])??null,this.rootNode.allLeafChildren?.forEach((a,l)=>{a.sourceRowIndex=l});const s=this.rootNode.sibling;s&&(s.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:i},t){const{update:o}=e;Tn(o)||o.forEach(r=>{const s=this.lookupRowNode(r);s&&(s.updateData(r),!s.selectable&&s.isSelected()&&t.push(s),this.setMasterForRow(s,r,0,!1),i.update.push(s))})}lookupRowNode(e){const i=Bs(this.gos);let t;if(i){const o=i({data:e,level:0});if(t=this.allNodesMap[o],!t)return pt(`could not find row id=${o}, data item was not found for this id`),null}else if(t=this.rootNode.allLeafChildren?.find(o=>o.data===e),!t)return pt("could not find data item as object was not found",e),pt("Consider using getRowId to help the Grid find matching row data"),null;return t||null}createNode(e,i,t,o){const r=new lr(this.beans);return r.sourceRowIndex=o,r.group=!1,this.setMasterForRow(r,e,t,!0),i&&(r.parent=i),r.level=t,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&pe(`duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,i,t,o){if(this.gos.get("treeData"))e.setMaster(!1),o&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const a=this.gos.get("isRowMaster");e.setMaster(!a||a(i))}else e.setMaster(!1);if(o){const a=this.funcColsService.getRowGroupColumns();e.expanded=!!e.master&&this.isExpanded(t+(a?a.length:0))}}}isExpanded(e){const i=this.gos.get("groupDefaultExpanded");return-1===i||e<i}}(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),i=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),t=new Set(["excludeChildrenWhenTreeDataFiltering"]),o=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),s=new Set(["postSortRows","groupDisplayType","accentedSort"]),a=new Set([]),l=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),c=[...e,...i,...t,...o,...o,...r,...s,...a,...l];this.addManagedPropertyListeners(c,d=>{const h=d.changeSet?.properties;if(!h)return;const g=m=>h.some(f=>m.has(f));g(e)?this.setRowData(this.rootNode.allLeafChildren.map(m=>m.data)):g(i)?this.refreshModel({step:"group"}):g(t)?this.refreshModel({step:"filter"}):g(o)?this.refreshModel({step:"pivot"}):g(r)?this.refreshModel({step:"aggregate"}):g(s)?this.refreshModel({step:"sort"}):g(a)?this.refreshModel({step:"filter_aggregates"}):g(l)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,i,t,o){let r,s=!1;do{r=!1;const a=this.getRowIndexAtPixel(e),l=this.getRowIndexAtPixel(i),c=Math.max(a,t),d=Math.min(l,o);for(let h=c;h<=d;h++){const g=this.getRow(h);if(g.rowHeightEstimated){const m=_r(this.gos,g);g.setRowHeight(m.height),r=!0,s=!0}}r&&this.setRowTopAndRowIndex()}while(r);return s}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let i=0;const t=new Set,o=Ki(this.gos,"normal");for(let r=0;r<this.rowsToDisplay.length;r++){const s=this.rowsToDisplay[r];if(null!=s.id&&t.add(s.id),null==s.rowHeight){const a=_r(this.gos,s,o,e);s.setRowHeight(a.height,a.estimated)}s.setRowTop(i),s.setRowIndex(r),i+=s.rowHeight}return t}clearRowTopAndRowIndex(e,i){const t=e.isActive(),o=s=>{s&&null!=s.id&&!i.has(s.id)&&s.clearRowTopAndRowIndex()},r=s=>{o(s),o(s.detailNode),o(s.sibling),s.hasChildren()&&s.childrenAfterGroup&&(t&&-1!=s.level&&!s.expanded||s.childrenAfterGroup.forEach(r))};r(this.rootNode)}ensureRowsAtPixel(e,i,t=0){const o=this.getRowIndexAtPixel(i),r=this.getRow(o),s=!this.gos.get("suppressAnimationFrame");if(r===e[0])return!1;const a=this.rootNode.allLeafChildren;return e.forEach(l=>{mn(a,l)}),e.forEach((l,c)=>{Qa(a,l,Math.max(o+t,0)+c)}),e.forEach((l,c)=>{l.sourceRowIndex=c}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:s,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,i){const t=null!=i?this.getRowIndexAtPixel(i):null,o=null!=t?this.getRow(t):null;if(!o||!e||o===e||null==i)return void(this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null));const r=this.getHighlightPosition(i,o);this.lastHighlightedRow&&this.lastHighlightedRow!==o&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),o.setHighlighted(r),this.lastHighlightedRow=o}getHighlightPosition(e,i){if(!i){const r=this.getRowIndexAtPixel(e);if(!(i=this.getRow(r||0)))return 1}const{rowTop:t,rowHeight:o}=i;return e-t<o/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(0===this.rowsToDisplay.length)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const i=this.rootNode.childrenAfterAggFilter;return(i?i.length:0)+(this.rootNode.sibling?1:0)}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let t=e;if(this.rowsToDisplay[0].footer){if(0===e)return 0;t-=1}const o=this.rowsToDisplay[this.rowsToDisplay.length-1];if(o.footer&&t>=this.rootNode.childrenAfterSort.length)return o.rowIndex;let s=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;s.expanded&&s.childrenAfterSort&&s.childrenAfterSort.length>0;)s=s.childrenAfterSort[0];return s.rowIndex}getRowBounds(e){if(kt(this.rowsToDisplay))return null;const i=this.rowsToDisplay[e];return i?{rowTop:i.rowTop,rowHeight:i.rowHeight}:null}onRowGroupOpened(){const e=Ns(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const i=Ns(this.gos),o=0===e.columns.length||e.columns.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:o,keepRenderedRows:!0,animate:i})}onSortChanged(){const e=Ns(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const i=Tn(e),t=new Uc(!1,this.rootNode);return i&&t.setInactive(),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||null==e.rowNodeTransactions)return!1;const i=e.rowNodeTransactions.filter(o=>null!=o.add&&o.add.length>0||null!=o.remove&&o.remove.length>0);return null==i||0==i.length}buildRefreshModelParams(e){let i="group";const t={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(Fe(e)&&(i=t[e]),!kt(i))return{step:i,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gos.get("suppressAnimationFrame")};pt(`invalid step ${e}, available steps are ${Object.keys(t).join(", ")}`)}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const i="object"==typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(!i||this.isSuppressModelUpdateAfterUpdateTransaction(i))return;const t=this.createChangePath(i.rowNodeTransactions);switch(this.isRefreshingModel=!0,i.step){case"group":this.doRowGrouping(i.rowNodeTransactions,t,!!i.rowNodesOrderChanged,!!i.afterColumnsChanged);case"filter":this.doFilter(t);case"pivot":this.doPivot(t);case"aggregate":this.doAggregate(t);case"filter_aggregates":this.doFilterAggregates(t);case"sort":this.doSort(i.rowNodeTransactions,t);case"map":this.doRowsToDisplay()}const o=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(t,o),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:i.animate,keepRenderedRows:i.keepRenderedRows,newData:i.newData,newPage:!1,keepUndoRedoStack:i.keepUndoRedoStack})}isEmpty(){const e=kt(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return kt(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return Fe(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,i){let t=!1,o=!1;const r=[],s=os(this.gos);return this.forEachNodeAfterFilterAndSort(a=>{if(!o)if(t&&(a===i||a===e)&&(o=!0,a.group&&s))r.push(...a.allLeafChildren);else{if(!t){if(a!==i&&a!==e)return;t=!0}a.group&&s||r.push(a)}}),r}setDatasource(e){pt("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;let i=0,t=this.rowsToDisplay.length-1;if(e<=0)return 0;if(Tt(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let r=-1,s=-1;for(;;){const a=Math.floor((i+t)/2),l=this.rowsToDisplay[a];if(this.isRowInPixel(l,e)||(l.rowTop<e?i=a+1:l.rowTop>e&&(t=a-1),r===i&&s===t))return a;r=i,s=t}}isRowInPixel(e,i){return e.rowTop<=i&&e.rowTop+e.rowHeight>i}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((i,t)=>e(i,t))}forEachNode(e,i=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:i})}forEachNodeAfterFilter(e,i=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:i})}forEachNodeAfterFilterAndSort(e,i=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:i})}forEachPivotNode(e,i=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:i})}recursivelyWalkNodesAndCallback(e){const{nodes:i,callback:t,recursionType:o,includeFooterNodes:r}=e;let{index:s}=e;const a=l=>{const c=i[0]?.parent;if(!c)return;const d=r&&uf(this.gos),h=hf(this.gos),g=r&&h({node:c});c!==this.rootNode?g===l&&(c.createFooter(),t(c.sibling,s++)):d===l&&(c.createFooter(),t(c.sibling,s++))};a("top");for(let l=0;l<i.length;l++){const c=i[l];if(t(c,s++),c.hasChildren()&&!c.footer){let d=null;switch(o){case 0:d=c.childrenAfterGroup;break;case 1:d=c.childrenAfterAggFilter;break;case 2:d=c.childrenAfterSort;break;case 3:d=c.leafGroup?null:c.childrenAfterSort}d&&(s=this.recursivelyWalkNodesAndCallback({nodes:[...d],callback:t,recursionType:o,index:s,includeFooterNodes:r}))}}return a("bottom"),s}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const i=this.gos.get("treeData"),t=this.columnModel.isPivotActive(),o=r=>{r&&r.forEach(s=>{const a=()=>{s.expanded=e,o(s.childrenAfterGroup)};i?Fe(s.childrenAfterGroup)&&a():t?!s.leafGroup&&a():s.group&&a()})};this.rootNode&&o(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,i){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:i})}doRowGrouping(e,i,t,o){if(this.groupStage)this.groupStage.execute(e?{rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:t,changedPath:i}:{rowNode:this.rootNode,changedPath:i,afterColumnsChanged:o}),os(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",i)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{const r=this.rootNode,s=r.sibling;r.childrenAfterGroup=r.allLeafChildren,s&&(s.childrenAfterGroup=r.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if("string"==typeof e&&0==e.indexOf(lr.ID_PREFIX_ROW_GROUP)){let t;return this.forEachNode(o=>{o.id===e&&(t=o)}),t}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,i){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const t=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},t)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:i})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],i=[];let t=!1;this.rowDataTransactionBatch?.forEach(o=>{const{rowNodeTransaction:r,rowsInserted:s}=this.nodeManager.updateRowData(o.rowDataTransaction);s&&(t=!0),i.push(r),o.callback&&e.push(o.callback.bind(null,r))}),this.commonUpdateRowData(i,t),e.length>0&&window.setTimeout(()=>{e.forEach(o=>o())},0),i.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:i}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:i,rowsInserted:t}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([i],t),i}afterImmutableDataChange(e,i){this.commonUpdateRowData([e],i)}commonUpdateRowData(e,i){if(!this.hasStarted)return;const t=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:i,keepRenderedRows:!0,keepEditingRows:!0,animate:t})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(i=>{i.setRowHeight(i.rowHeight,!0);const t=i.detailNode;t&&t.setRowHeight(t.rowHeight,!0),i.sibling&&i.sibling.setRowHeight(i.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}},class extends fe{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:i}=e;this.filter(i)}filter(e){const i=!!this.filterManager?.isChildFilterPresent();this.filterNodes(i,e)}filterNodes(e,i){const t=(o,r)=>{o.childrenAfterFilter=o.hasChildren()&&e&&!r?o.childrenAfterGroup.filter(s=>{const a=s.childrenAfterFilter&&s.childrenAfterFilter.length>0,l=s.data&&this.filterManager.doesRowPassFilter({rowNode:s});return a||l}):o.childrenAfterGroup,o.sibling&&(o.sibling.childrenAfterFilter=o.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const o=(s,a)=>{if(s.childrenAfterGroup)for(let l=0;l<s.childrenAfterGroup.length;l++){const c=s.childrenAfterGroup[l],d=a||this.filterManager.doesRowPassFilter({rowNode:c});c.childrenAfterGroup?o(s.childrenAfterGroup[l],d):t(c,d)}t(s,a)};i.executeFromRootNode(s=>o(s,!1))}else i.forEachChangedNodeDepthFirst(r=>t(r,!1),!0)}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},class extends fe{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const i=this.sortController.getSortOptions(),t=Fe(i)&&i.length>0,o=t&&Fe(e.rowNodeTransactions)&&this.gos.get("deltaSort"),r=i.some(s=>Io(this.gos)?s.column.isPrimary()&&s.column.isRowGroupActive():!!s.column.getColDef().showRowGroup);this.sortService.sort(i,t,o,e.rowNodeTransactions,e.changedPath,r)}},class extends fe{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const i=e.rowNode,t=[],o=this.columnModel.isPivotMode(),r=o&&i.leafGroup,s=r?[i]:i.childrenAfterSort,a=this.getFlattenDetails();return this.recursivelyAddToRowsToDisplay(a,s,t,o,0),!r&&t.length>0&&a.grandTotalRow&&(i.createFooter(),this.addRowNodeToRowsToDisplay(a,i.sibling,t,0,"top"===a.grandTotalRow)),t}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:gf(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:uf(this.gos),groupTotalRow:hf(this.gos)}}recursivelyAddToRowsToDisplay(e,i,t,o,r){if(!Tn(i))for(let s=0;s<i.length;s++){const a=i[s],l=a.hasChildren(),d=e.groupRemoveSingleChildren&&l&&1===a.childrenAfterGroup.length,h=e.groupRemoveLowestSingleChildren&&l&&a.leafGroup&&1===a.childrenAfterGroup.length;if(!(o&&!l)&&!(e.hideOpenParents&&a.expanded&&!a.master&&(!o||!a.leafGroup))&&!d&&!h&&this.addRowNodeToRowsToDisplay(e,a,t,r),!o||!a.leafGroup)if(l){const y=d||h;if(a.expanded||y){const b=e.groupTotalRow({node:a});b||a.destroyFooter();const S=y?r:r+1;"top"===b&&(a.createFooter(),this.addRowNodeToRowsToDisplay(e,a.sibling,t,S)),this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,t,o,S),"bottom"===b&&(a.createFooter(),this.addRowNodeToRowsToDisplay(e,a.sibling,t,S))}}else if(a.master&&a.expanded){const y=this.createDetailNode(a);this.addRowNodeToRowsToDisplay(e,y,t,r)}}}addRowNodeToRowsToDisplay(e,i,t,o,r){r?t.unshift(i):t.push(i),i.setUiLevel(e.isGroupMultiAutoColumn?0:o)}createDetailNode(e){if(Fe(e.detailNode))return e.detailNode;const i=new lr(this.beans);return i.detail=!0,i.selectable=!1,i.parent=e,Fe(e.id)&&(i.id="detail_"+e.id),i.data=e.data,i.level=e.level+1,e.detailNode=i,i}},class extends fe{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,i,t,o,r,s){const a=this.gos.get("groupMaintainOrder"),l=this.columnModel.getCols().some(m=>m.isRowGroupActive());let c={};t&&o&&(c=this.calculateDirtyNodes(o));const d=this.columnModel.isPivotMode(),h=this.gos.getCallback("postSortRows");r&&r.forEachChangedNodeDepthFirst(m=>{this.pullDownGroupDataForHideOpenParents(m.childrenAfterAggFilter,!0);const f=d&&m.leafGroup;if(a&&l&&!m.leafGroup&&!s){const S=null===this.funcColsService.getRowGroupColumns()?.[m.level+1]?.getSort(),_=m.childrenAfterAggFilter.slice(0);if(m.childrenAfterSort&&!S){const k={};m.childrenAfterSort.forEach((E,G)=>{k[E.id]=G}),_.sort((E,G)=>(k[E.id]??0)-(k[G.id]??0))}m.childrenAfterSort=_}else m.childrenAfterSort=!i||f?m.childrenAfterAggFilter.slice(0):t?this.doDeltaSort(m,c,r,e):this.rowNodeSorter.doFullSort(m.childrenAfterAggFilter,e);m.sibling&&(m.sibling.childrenAfterSort=m.childrenAfterSort),this.updateChildIndexes(m),h&&h({nodes:m.childrenAfterSort})}),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(e){const i={},t=o=>{o&&o.forEach(r=>i[r.id]=!0)};return e&&e.forEach(o=>{t(o.add),t(o.update),t(o.remove)}),i}doDeltaSort(e,i,t,o){const r=e.childrenAfterAggFilter,s=e.childrenAfterSort;if(!s)return this.rowNodeSorter.doFullSort(r,o);const a={},l=[];r.forEach(g=>{i[g.id]||!t.canSkip(g)?l.push(g):a[g.id]=!0});const c=s.filter(g=>a[g.id]),d=(g,m)=>({currentPos:m,rowNode:g}),h=l.map(d).sort((g,m)=>this.rowNodeSorter.compareRowNodes(o,g,m));return this.mergeSortedArrays(o,h,c.map(d)).map(({rowNode:g})=>g)}mergeSortedArrays(e,i,t){const o=[];let r=0,s=0;for(;r<i.length&&s<t.length;)this.rowNodeSorter.compareRowNodes(e,i[r],t[s])<0?o.push(i[r++]):o.push(t[s++]);for(;r<i.length;)o.push(i[r++]);for(;s<t.length;)o.push(t[s++]);return o}updateChildIndexes(e){if(kt(e.childrenAfterSort))return;const i=e.childrenAfterSort;for(let t=0;t<i.length;t++){const o=i[t],s=t===e.childrenAfterSort.length-1;o.setFirstChild(0===t),o.setLastChild(s),o.setChildIndex(t)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return pe("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const i=t=>{this.pullDownGroupDataForHideOpenParents(t.childrenAfterSort,!1),t.childrenAfterSort.forEach(o=>{o.hasChildren()&&i(o)})};e&&e.executeFromRootNode(t=>i(t))}pullDownGroupDataForHideOpenParents(e,i){!this.gos.get("groupHideOpenParents")||kt(e)||e.forEach(t=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(r=>{const s=r.getColDef().showRowGroup;if("string"!=typeof s)return void pt("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");const l=this.columnModel.getColDefCol(s);if(l!==t.rowGroupColumn)if(i)t.setGroupValue(r.getId(),void 0);else{const d=this.getFirstChildOfFirstChild(t,l);d&&t.setGroupValue(r.getId(),d.key)}})})}getFirstChildOfFirstChild(e,i){let t=e;for(;t;){const o=t.parent;if(!o||!t.firstChild)return null;if(o.rowGroupColumn===i)return o;t=o}return null}},class extends fe{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){gi(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gos.exists("getRowId");return!this.gos.get("resetRowDataOnUpdate")&&e}setRowData(e){const i=this.createTransactionForRowData(e);if(!i)return;const t=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:o,rowsInserted:r}=t.updateRowData(i);let s=!1;this.gos.get("suppressMaintainUnsortedOrder")||(s=t.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(o,s||r)}createTransactionForRowData(e){if(!gi(this.gos))return pt("ImmutableService only works with ClientSideRowModel"),null;const i=Bs(this.gos);if(null==i)return pt("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const t=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),o=[],r=[],s=[];return Fe(e)&&e.forEach(a=>{const l=i({data:a,level:0}),c=t[l];c?(c.data!==a&&r.push(a),t[l]=void 0):s.push(a)}),$n(t,(a,l)=>{l&&o.push(l.data)}),{remove:o,update:r,add:s}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}}]},kA={version:Zh,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[yv],apiFunctions:{onGroupExpandedOrCollapsed:function dA(e){e.expansionService.onGroupExpandedOrCollapsed()},refreshClientSideRowModel:function uA(e,i){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(i)},isRowDataEmpty:function hA(e){return e.rowModelHelperService?.getClientSideRowModel()?.isEmpty()??!0},forEachLeafNode:function gA(e,i){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(i)},forEachNodeAfterFilter:function pA(e,i){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(i)},forEachNodeAfterFilterAndSort:function fA(e,i){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(i)},resetRowHeights:function mA(e){e.columnModel.isAutoRowHeightActive()?pe("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height."):e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()},applyTransaction:function vA(e,i){return e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(i))},applyTransactionAsync:function CA(e,i,t){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(i,t))},flushAsyncTransactions:function wA(e){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())},getBestCostNodeSelection:function yA(e){return e.selectionService.getBestCostNodeSelection()}},dependantModules:[bv,nA]},TA={version:Zh,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[bv,kA]},DA=class extends fe{setBeans(e){this.beans=e}getFileName(e){const i=this.getDefaultFileExtension();return(null==e||!e.length)&&(e=this.getDefaultFileName()),-1===e.indexOf(".")?`${e}.${i}`:e}getData(e){const i=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(i,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},FA=class{constructor(e){this.groupColumns=[];const{columnModel:i,funcColsService:t,columnNameService:o,valueService:r,gos:s,processCellCallback:a,processHeaderCallback:l,processGroupHeaderCallback:c,processRowGroupCallback:d}=e;this.columnModel=i,this.funcColsService=t,this.columnNameService=o,this.valueService=r,this.gos=s,this.processCellCallback=a,this.processHeaderCallback=l,this.processGroupHeaderCallback=c,this.processRowGroupCallback=d}prepare(e){this.groupColumns=e.filter(i=>!!i.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,i,t,o,r){const a=this.gos.get("groupHideOpenParents")&&!r.footer||!this.shouldRenderGroupSummaryCell(r,e,i)?this.valueService.getValue(e,r):this.createValueForGroupNode(e,r);return this.processCell({accumulatedRowIndex:t,rowNode:r,column:e,value:a,processCellCallback:this.processCellCallback,type:o})}shouldRenderGroupSummaryCell(e,i,t){if(!e||!e.group)return!1;if(-1!==this.groupColumns.indexOf(i)){if(null!=e.groupData?.[i.getId()]||ir(this.gos)&&e.group)return!0;if(e.footer&&-1===e.level){const a=i.getColDef();return null==a||!0===a.showRowGroup||a.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const s=fc(this.gos,this.columnModel.isPivotMode());return 0===t&&s}getHeaderName(e,i){return e?e(this.gos.addGridCommonParams({column:i})):this.columnNameService.getDisplayNameForColumn(i,"csv",!0)}createValueForGroupNode(e,i){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:i}));const t=this.gos.get("treeData"),o=this.gos.get("suppressGroupMaintainValueType"),r=c=>{if(t||o)return c.key;const d=c.groupData?.[e.getId()];return d&&c.rowGroupColumn&&!1!==c.rowGroupColumn.getColDef().useValueFormatterForExport?this.valueService.formatValue(c.rowGroupColumn,c,d)??d:d},s=i.footer,a=[r(i)];if(!gf(this.gos))for(;i.parent;)a.push(r(i=i.parent));const l=a.reverse().join(" -> ");return s?`Total ${l}`:l}processCell(e){const{accumulatedRowIndex:i,rowNode:t,column:o,value:r,processCellCallback:s,type:a}=e;return s?{value:s(this.gos.addGridCommonParams({accumulatedRowIndex:i,column:o,node:t,value:r,type:a,parseValue:l=>this.valueService.parseValue(o,t,l,this.valueService.getValue(o,t)),formatValue:l=>this.valueService.formatValue(o,t,l)??l}))??""}:!1!==o.getColDef().useValueFormatterForExport?{value:r??"",valueFormatted:this.valueService.formatValue(o,t,r)}:{value:r??""}}},RA=class{static download(e,i){const t=document.defaultView||window;if(!t)return void pe("There is no `window` associated with the current `document`");const o=document.createElement("a"),r=t.URL.createObjectURL(i);o.setAttribute("href",r),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:t})),document.body.removeChild(o),t.setTimeout(()=>{t.URL.revokeObjectURL(r)},0)}},MA=class extends FA{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:i,columnSeparator:t}=e;this.suppressQuotes=i,this.columnSeparator=t}addCustomContent(e){e&&("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(i=>{this.beginNewLine(),i.forEach((t,o)=>{0!==o&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t.data.value||""),t.mergeAcross&&this.appendEmptyCells(t.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,i,t,o){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i),this.appendEmptyCells(o)}appendEmptyCells(e){for(let i=1;i<=e;i++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,i){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,i,t){0!=i&&(this.result+=this.columnSeparator);const o=this.extractRowCellValue(e,i,i,"csv",t);this.result+=this.putInQuotes(o.valueFormatted??o.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null==e)return'""';let i;return"string"==typeof e?i=e:"function"==typeof e.toString?i=e.toString():(pe("unknown value type during csv conversion"),i=""),'"'+i.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}},Gh="32.2.1",_v={version:Gh,moduleName:"@ag-grid-community/csv-export-core",beans:[class extends DA{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const i=this.gos.get("defaultCsvExportParams");return Object.assign({},i,e)}export(e){if(this.isExportSuppressed())return void pe("Export cancelled. Export is not allowed as per your configuration.");const i=this.getMergedParams(e),t=this.getData(i),o=new Blob(["\ufeff",t],{type:"text/plain"}),r="function"==typeof i.fileName?i.fileName(this.gos.getGridCommonParams()):i.fileName;RA.download(this.getFileName(r),o)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,i=!1){const t=i?Object.assign({},e):this.getMergedParams(e);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:i,columnNameService:t,funcColsService:o,valueService:r,gos:s}=this,{processCellCallback:a,processHeaderCallback:l,processGroupHeaderCallback:c,processRowGroupCallback:d,suppressQuotes:h,columnSeparator:g}=e;return new MA({columnModel:i,columnNameService:t,funcColsService:o,valueService:r,gos:s,processCellCallback:a||void 0,processHeaderCallback:l||void 0,processGroupHeaderCallback:c||void 0,processRowGroupCallback:d||void 0,suppressQuotes:h||!1,columnSeparator:g||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}},class extends fe{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,i={}){const{allColumns:t,columnKeys:o,skipRowGroups:r}=i,s=this.getColumnsToExport(t,r,o);return function sf(...e){return i=>e.reduce((t,o)=>o(t),i)}(this.prepareSession(s),this.prependContent(i),this.exportColumnGroups(i,s),this.exportHeaders(i,s),this.processPinnedTopRows(i,s),this.processRows(i,s),this.processPinnedBottomRows(i,s),this.appendContent(i))(e).parse()}processRow(e,i,t,o){const r=i.shouldRowBeSkipped||(()=>!1),s=this.gos.get("groupRemoveSingleChildren"),a=this.gos.get("groupRemoveLowestSingleChildren"),c=null!=i.rowPositions||!!i.onlySelected,d=this.gos.get("groupHideOpenParents")&&!c,h=this.columnModel.isPivotMode()?o.leafGroup:!o.group,g=!!o.footer,m=a&&o.leafGroup;if(!h&&!g&&(i.skipRowGroups||1===o.allChildrenCount&&1===o.childrenAfterGroup?.length&&(s||m)||d)||i.onlySelected&&!o.isSelected()||i.skipPinnedTop&&"top"===o.rowPinned||i.skipPinnedBottom&&"bottom"===o.rowPinned||-1===o.level&&!h&&!g||r(this.gos.addGridCommonParams({node:o})))return;const S=e.onNewBodyRow(o);if(t.forEach((_,k)=>{S.onColumn(_,k,o)}),i.getCustomContentBelowRow){const _=i.getCustomContentBelowRow(this.gos.addGridCommonParams({node:o}));_&&e.addCustomContent(_)}}appendContent(e){return i=>{const t=e.appendContent;return t&&i.addCustomContent(t),i}}prependContent(e){return i=>{const t=e.prependContent;return t&&i.addCustomContent(t),i}}prepareSession(e){return i=>(i.prepare(e),i)}exportColumnGroups(e,i){return t=>{if(!e.skipColumnGroupHeaders){const o=new Ff,r=this.visibleColsService.createGroups({columns:i,idCreator:o,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(r,t,e.processGroupHeaderCallback)}return t}}exportHeaders(e,i){return t=>{if(!e.skipColumnHeaders){const o=t.onNewHeaderRow();i.forEach((r,s)=>{o.onColumn(r,s,void 0)})}return t}}processPinnedTopRows(e,i){return t=>{const o=this.processRow.bind(this,t,e,i);return e.rowPositions?e.rowPositions.filter(r=>"top"===r.rowPinned).sort((r,s)=>r.rowIndex-s.rowIndex).map(r=>this.pinnedRowModel.getPinnedTopRow(r.rowIndex)).forEach(o):this.pinnedRowModel.forEachPinnedRow("top",o),t}}processRows(e,i){return t=>{const o=this.rowModel,r=gi(this.gos),s=ir(this.gos),a=!r&&e.onlySelected,l=this.processRow.bind(this,t,e,i),{exportedRows:c="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(d=>null==d.rowPinned).sort((d,h)=>d.rowIndex-h.rowIndex).map(d=>o.getRow(d.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())r?o.forEachPivotNode(l,!0):s?o.forEachNodeAfterFilterAndSort(l,!0):o.forEachNode(l);else if(e.onlySelectedAllPages||a){const d=this.selectionService.getSelectedNodes();this.replicateSortedOrder(d),d.forEach(l)}else"all"===c?o.forEachNode(l):r||s?o.forEachNodeAfterFilterAndSort(l,!0):o.forEachNode(l);return t}}replicateSortedOrder(e){const i=this.sortController.getSortOptions(),t=(o,r)=>null!=o.rowIndex&&null!=r.rowIndex?o.rowIndex-r.rowIndex:o.level===r.level?o.parent?.id===r.parent?.id?this.rowNodeSorter.compareRowNodes(i,{rowNode:o,currentPos:o.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):t(o.parent,r.parent):o.level>r.level?t(o.parent,r):t(o,r.parent);e.sort(t)}processPinnedBottomRows(e,i){return t=>{const o=this.processRow.bind(this,t,e,i);return e.rowPositions?e.rowPositions.filter(r=>"bottom"===r.rowPinned).sort((r,s)=>r.rowIndex-s.rowIndex).map(r=>this.pinnedRowModel.getPinnedBottomRow(r.rowIndex)).forEach(o):this.pinnedRowModel.forEachPinnedRow("bottom",o),t}}getColumnsToExport(e=!1,i=!1,t){const o=this.columnModel.isPivotMode();if(t&&t.length)return this.columnModel.getColsForKeys(t);const r=this.gos.get("treeData");let s=[];return s=e&&!o?this.columnModel.getCols():this.visibleColsService.getAllCols(),i&&!r&&(s=s.filter(a=>Nu(a)||Hs(a))),s}recursivelyAddHeaderGroups(e,i,t){const o=[];e.forEach(r=>{r.getChildren&&r.getChildren().forEach(a=>o.push(a))}),e.length>0&&Ti(e[0])&&this.doAddHeaderHeader(i,e,t),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,i,t)}doAddHeaderHeader(e,i,t){const o=e.onNewHeaderGroupingRow();let r=0;i.forEach(s=>{const a=s;let l;l=t?t(this.gos.addGridCommonParams({columnGroup:a})):this.columnNameService.getDisplayNameForColumnGroup(a,"header");const c=a.getLeafColumns().reduce((d,h,g,m)=>{let f=Tt(d);return"open"===h.getColumnGroupShow()?(!f||null!=f[1])&&(f=[g],d.push(f)):f&&null==f[1]&&(f[1]=g-1),g===m.length-1&&f&&null==f[1]&&(f[1]=g),d},[]);o.onColumn(a,l||"",r++,a.getLeafColumns().length-1,c)})}}]},NA={version:Gh,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:function PA(e,i){return e.csvCreator?.getDataAsCsv(i)},exportDataAsCsv:function LA(e,i){e.csvCreator?.exportDataAsCsv(i)}},dependantModules:[_v]},BA={version:Gh,moduleName:"@ag-grid-community/csv-export",dependantModules:[_v,NA]},ZA=function(){var e=(0,ee.Z)(function*(i){let t=0;const o=[],r=new WritableStream({write:l=>{o.push(l),t+=l.length}}),s=new ReadableStream({start:l=>{const c=new FileReader;c.onload=d=>{d.target?.result&&l.enqueue(d.target.result),l.close()},c.readAsArrayBuffer(i)}}),a=new window.CompressionStream("deflate-raw");return yield s.pipeThrough(a).pipeTo(r),{size:t,content:new Blob(o)}});return function(t){return e.apply(this,arguments)}}(),GA=function(){var e=(0,ee.Z)(function*(i){const t=new Blob([i]),{size:o,content:r}=yield ZA(t);return{size:o,content:new Uint8Array(yield r.arrayBuffer())}});return function(t){return e.apply(this,arguments)}}();function an(e,i){let t="";for(let o=0;o<i;o++)t+=String.fromCharCode(255&e),e>>>=8;return t}var kv=e=>e.length?(e=>{if(!e.length)return 0;let i=-1,t=0,o=0,r=0;for(let s=0;s<e.length;s++)t=e[s],o=255&(i^t),r=zA[o],i=i>>>8^r;return-1^i})("string"==typeof e?(new TextEncoder).encode(e):e):0,zA=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),Tv=(e,i,t,o,r,s)=>{const{content:a,path:l,created:c}=e,d=(e=>{let i=e.getHours();return i<<=6,i|=e.getMinutes(),i<<=5,i|=e.getSeconds()/2,i})(c),h=(e=>{let i=e.getFullYear()-1980;return i<<=4,i|=e.getMonth()+1,i<<=5,i|=e.getDate(),i})(c),g=kv(r),m=void 0!==s?s:o,f=function lw(e){const i=String.fromCharCode;function r(g,m){return i(g>>m&63|128)}function s(g){if(!(4294967168&g))return i(g);let m="";return 4294965248&g?4294901760&g?4292870144&g||(m=i(g>>18&7|240),m+=r(g,12),m+=r(g,6)):(function o(g){if(g>=55296&&g<=57343)throw Error("Lone surrogate U+"+g.toString(16).toUpperCase()+" is not a scalar value")}(g),m=i(g>>12&15|224),m+=r(g,6)):m=i(g>>6&31|192),m+=i(63&g|128),m}const a=function t(g){const m=[];if(!g)return[];const f=g.length;let b,S,y=0;for(;y<f;)b=g.charCodeAt(y++),b>=55296&&b<=56319&&y<f?(S=g.charCodeAt(y++),56320==(64512&S)?m.push(((1023&b)<<10)+(1023&S)+65536):(m.push(b),y--)):m.push(b);return m}(e),l=a.length;let d,c=-1,h="";for(;++c<l;)d=a[c],h+=s(d);return h}(l),y=f!==l;let b="";if(y){const E=an(1,1)+an(kv(f),4)+f;b="up"+an(E.length,2)+E}const S="\x14\0"+(y?"\0\b":"\0\0")+an(i?8:0,2)+an(d,2)+an(h,2)+an(m?g:0,4)+an(s??o,4)+an(o,4)+an(f.length,2)+an(b.length,2),_="PK\x03\x04"+S+f+b,k="PK\x01\x02\x14\0"+S+"\0\0\0\0\0\0"+(a?"\0\0\0\0":"\x10\0\0\0")+an(t,4)+f+b;return{localFileHeader:Uint8Array.from(_,E=>E.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(k,E=>E.charCodeAt(0))}},Dv=e=>{let i;if("string"==typeof e){const t=atob(e.split(";base64,")[1]);i=Uint8Array.from(t,o=>o.charCodeAt(0))}else i=e;return{size:i.length,content:i}},VA=function(){var e=(0,ee.Z)(function*(i,t){const{content:o}=i,{size:r,content:s}=o?Dv(o):{size:0,content:Uint8Array.from([])};let a,l,c=!1;if("file"===i.type&&s&&r>0){const g=yield GA(s);a=g.content,l=g.size,c=!0}return{...Tv(i,c,t,r,s,l),content:a||s,isCompressed:c}});return function(t,o){return e.apply(this,arguments)}}(),UA=(e,i)=>{const{content:t}=e,{content:o}=t?Dv(t):{content:Uint8Array.from([])};return{...Tv(e,!1,i,o.length,o,void 0),content:o,isCompressed:!1}},Fv=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,i,t=!1){this.files.push({path:e,created:new Date,content:t?i:(new TextEncoder).encode(i),isBase64:t,type:"file"})}static getZipFile(e="application/zip"){var i=this;return(0,ee.Z)(function*(){const t=yield i.buildCompressedFileStream();return i.clearStream(),new Blob([t],{type:e})})()}static getUncompressedZipFile(e="application/zip"){const i=this.buildFileStream();return this.clearStream(),new Blob([i],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let i=0,t=0;for(const d of e){const{localFileHeader:h,centralDirectoryHeader:g,content:m}=d;i+=h.length+m.length,t+=g.length}const o=new Uint8Array(i),r=new Uint8Array(t);let s=0,a=0;for(const d of e){const{localFileHeader:h,centralDirectoryHeader:g,content:m}=d;o.set(h,s),s+=h.length,o.set(m,s),s+=m.length,r.set(g,a),a+=g.length}const l=((e,i,t)=>{const o="PK\x05\x06\0\0\0\0"+an(e,2)+an(e,2)+an(i,4)+an(t,4)+"\0\0";return Uint8Array.from(o,r=>r.charCodeAt(0))})(e.length,t,i),c=new Uint8Array(o.length+r.length+l.length);return c.set(o),c.set(r,o.length),c.set(l,o.length+r.length),c}static buildCompressedFileStream(){var e=this;return(0,ee.Z)(function*(){const i=[...e.folders,...e.files],t=[];let o=0;for(const r of i){const s=yield VA(r,o),{localFileHeader:a,content:l}=s;t.push(s),o+=a.length+l.length}return e.packageFiles(t)})()}static buildFileStream(){const e=[...this.folders,...this.files],i=[];let t=0;for(const o of e){const r=UA(o,t),{localFileHeader:s,content:a}=r;i.push(r),t+=s.length+a.length}return this.packageFiles(i)}};Fv.folders=[],Fv.files=[];var jA=class extends ZS{wireBeans(e){this.beans=e}constructor(e,i,t){super(e),this.parentCache=i,this.params=t,this.startRow=e*t.blockSize,this.endRow=this.startRow+t.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,i,t){Fe(i)?e.setDataAndId(i,t.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();kt(this.params.datasource.getRows)?pe("datasource is missing getRows method"):window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,i,t){this.rowNodes.forEach((o,r)=>{this.startRow+r<t&&e(o,i.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,i=!1){return i||(this.lastAccessed=this.params.lastAccessedSequence.next()),this.rowNodes[e-this.startRow]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const i=this.startRow+e,t=new lr(this.beans);t.setRowHeight(this.params.rowHeight),t.uiLevel=0,t.setRowIndex(i),t.setRowTop(this.params.rowHeight*i),this.rowNodes.push(t)}}processServerResult(e){this.rowNodes.forEach((t,o)=>{const r=e.rowData?e.rowData[o]:void 0;!t.id&&t.alreadyRendered&&r&&(this.rowNodes[o]=new lr(this.beans),this.rowNodes[o].setRowIndex(t.rowIndex),this.rowNodes[o].setRowTop(t.rowTop),this.rowNodes[o].setRowHeight(t.rowHeight),t.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[o],r,this.startRow+o)}),this.parentCache.pageLoaded(this,null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},$A=class extends fe{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,i=!1){const t=Math.floor(e/this.params.blockSize);let o=this.blocks[t];if(!o){if(i)return;o=this.createBlock(t)}return o.getRow(e)}createBlock(e){const i=this.createBean(new jA(e,this,this.params));return this.blocks[i.getId()]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),this.params.rowNodeBlockLoader.addBlock(i),i}refreshCache(){0!=this.blockCount?(this.getBlocksInOrder().forEach(i=>i.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()):this.purgeCache()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,i){this.isAlive()&&(this.gos.get("debug")&&Ht(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${i}`),this.checkRowCount(e,i),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const i=this.getBlocksInOrder().filter(a=>a!=e);i.sort((a,l)=>l.getLastAccessed()-a.getLastAccessed());const o=this.params.maxBlocksInCache>0,r=o?this.params.maxBlocksInCache-1:null;i.forEach((a,l)=>{if("needsLoading"===a.getState()&&l>=1||o&&l>=r){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){const i=this.focusService.getFocusCellToUseAfterRefresh();if(!i||null!=i.rowPinned)return!1;const t=e.getStartRow(),o=e.getEndRow();return i.rowIndex>=t&&i.rowIndex<o}isBlockCurrentlyDisplayed(e){const i=e.getStartRow(),t=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(i,t)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,i){if("number"==typeof i&&i>=0)this.rowCount=i,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const o=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,i){this.rowCount=e,Fe(i)&&(this.lastRowIndexKnown=i),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const i=new Vs;this.getBlocksInOrder().forEach(t=>t.forEachNode(e,i,this.rowCount))}getBlocksInOrder(){return Ar(this.blocks).sort((t,o)=>t.getId()-o.getId())}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(i=>{i.getId()*this.params.blockSize>=this.rowCount&&e.push(i)}),e.length>0&&e.forEach(i=>this.destroyBlock(i))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,i){const t=[];let o=-1,r=!1;const s=new Vs;let a=!1;return this.getBlocksInOrder().forEach(c=>{if(!a){if(r&&o+1!==c.getId())return void(a=!0);o=c.getId(),c.forEachNode(d=>{const h=d===e||d===i;(r||h)&&t.push(d),h&&(r=!r)},s,this.rowCount)}}),a||r?[]:t}},Hh="32.2.1",Rv={version:Hh,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[class extends fe{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){"infinite"===this.gos.get("rowModelType")&&(this.rowHeight=is(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&pe("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=is(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;e=!this.cacheParams||this.isSortModelDifferent(),e&&this.reset()}isSortModelDifferent(){return!$a(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,i){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,i):[]}reset(){this.datasource&&(null!=Bs(this.gos)||this.selectionService.reset("rowDataChanged"),this.resetCache())}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:is(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Vs},this.infiniteCache=this.createBean(new $A(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let i;return this.forEachNode(t=>{t.id===e&&(i=t)}),i}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const i=Math.floor(e/this.rowHeight),t=this.getRowCount()-1;return i>t?t:i}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()}setRowCount(e,i){this.infiniteCache&&this.infiniteCache.setRowCount(e,i)}}],dependantModules:[HS]},e4={version:Hh,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[yv],apiFunctions:{refreshInfiniteCache:function KA(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()},purgeInfiniteCache:function QA(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()},getInfiniteRowCount:function XA(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}},dependantModules:[Rv,oA]};"object"!=typeof window||!window||"object"!=typeof document||(window,document),ar.__registerModules([pv,TA,{version:Hh,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[Rv,e4]},BA],!1,void 0);let Uv=(()=>{class e extends rA{setViewContainerRef(t,o){this.viewContainerRef=t,this.angularFrameworkOverrides=o}createWrapper(t){const o=this.angularFrameworkOverrides,r=this,a=new class s extends H4{init(c){o.runInsideAngular(()=>{super.init(c),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return o.runInsideAngular(()=>r.createComponent(t))}hasMethod(c){return null!=a.getFrameworkComponentInstance()[c]}callMethod(c,d){const h=this.getFrameworkComponentInstance();return o.runInsideAngular(()=>a.getFrameworkComponentInstance()[c].apply(h,d))}addMethod(c,d){a[c]=d}};return a}createComponent(t){return this.viewContainerRef.createComponent(t)}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=n.n5z(e)))(r||e)}}();static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac})}return e})();class H4{init(i){this._params=i,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,fo(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&"function"==typeof this._frameworkComponentInstance.destroy&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}}let Wv=(()=>{class e extends Xm{constructor(t){super("angular"),this._ngZone=t,this.isRunningWithinTestZone=!1,this.wrapIncoming=(o,r)=>this.runOutside(o,r),this.wrapOutgoing=o=>this.runInsideAngular(o),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this.runOutside=this._ngZone?this.isRunningWithinTestZone?(o,r)=>"resize-observer"===r||"popupPositioning"===r?this._ngZone.runOutsideAngular(o):o():o=>this._ngZone.runOutsideAngular(o):o=>o()}get shouldWrapOutgoing(){return this._ngZone&&n.R0b.isInAngularZone()}isFrameworkComponent(t){if(!t)return!1;const o=t.prototype;return o&&"agInit"in o}runInsideAngular(t){return this._ngZone?this._ngZone.run(t):t()}runOutsideAngular(t,o){return this.runOutside(t,o)}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(n.R0b))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac})}return e})(),wo=(()=>{class e{constructor(t,o,r,s){this.viewContainerRef=o,this.angularFrameworkOverrides=r,this.frameworkComponentWrapper=s,this._initialised=!1,this._destroyed=!1,this._holdEvents=!0,this._fullyReady=new Promise(a=>{this._resolveFullyReady=a}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.enableStrictPivotColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressMoveWhenColumnDragging=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.suppressSetFilterByDefault=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.dragAndDropImageComponent=void 0,this.dragAndDropImageComponentParams=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.cellSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.selectionColumnDef=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.theme=void 0,this.loadThemeGoogleFonts=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new n.vpe,this.toolPanelSizeChanged=new n.vpe,this.columnMenuVisibleChanged=new n.vpe,this.contextMenuVisibleChanged=new n.vpe,this.cutStart=new n.vpe,this.cutEnd=new n.vpe,this.pasteStart=new n.vpe,this.pasteEnd=new n.vpe,this.columnVisible=new n.vpe,this.columnPinned=new n.vpe,this.columnResized=new n.vpe,this.columnMoved=new n.vpe,this.columnValueChanged=new n.vpe,this.columnPivotModeChanged=new n.vpe,this.columnPivotChanged=new n.vpe,this.columnGroupOpened=new n.vpe,this.newColumnsLoaded=new n.vpe,this.gridColumnsChanged=new n.vpe,this.displayedColumnsChanged=new n.vpe,this.virtualColumnsChanged=new n.vpe,this.columnEverythingChanged=new n.vpe,this.columnHeaderMouseOver=new n.vpe,this.columnHeaderMouseLeave=new n.vpe,this.columnHeaderClicked=new n.vpe,this.columnHeaderContextMenu=new n.vpe,this.componentStateChanged=new n.vpe,this.cellValueChanged=new n.vpe,this.cellEditRequest=new n.vpe,this.rowValueChanged=new n.vpe,this.cellEditingStarted=new n.vpe,this.cellEditingStopped=new n.vpe,this.rowEditingStarted=new n.vpe,this.rowEditingStopped=new n.vpe,this.undoStarted=new n.vpe,this.undoEnded=new n.vpe,this.redoStarted=new n.vpe,this.redoEnded=new n.vpe,this.cellSelectionDeleteStart=new n.vpe,this.cellSelectionDeleteEnd=new n.vpe,this.rangeDeleteStart=new n.vpe,this.rangeDeleteEnd=new n.vpe,this.fillStart=new n.vpe,this.fillEnd=new n.vpe,this.filterOpened=new n.vpe,this.filterChanged=new n.vpe,this.filterModified=new n.vpe,this.advancedFilterBuilderVisibleChanged=new n.vpe,this.chartCreated=new n.vpe,this.chartRangeSelectionChanged=new n.vpe,this.chartOptionsChanged=new n.vpe,this.chartDestroyed=new n.vpe,this.cellKeyDown=new n.vpe,this.gridReady=new n.vpe,this.firstDataRendered=new n.vpe,this.gridSizeChanged=new n.vpe,this.modelUpdated=new n.vpe,this.virtualRowRemoved=new n.vpe,this.viewportChanged=new n.vpe,this.bodyScroll=new n.vpe,this.bodyScrollEnd=new n.vpe,this.dragStarted=new n.vpe,this.dragStopped=new n.vpe,this.dragCancelled=new n.vpe,this.stateUpdated=new n.vpe,this.paginationChanged=new n.vpe,this.rowDragEnter=new n.vpe,this.rowDragMove=new n.vpe,this.rowDragLeave=new n.vpe,this.rowDragEnd=new n.vpe,this.rowDragCancel=new n.vpe,this.columnRowGroupChanged=new n.vpe,this.rowGroupOpened=new n.vpe,this.expandOrCollapseAll=new n.vpe,this.pivotMaxColumnsExceeded=new n.vpe,this.pinnedRowDataChanged=new n.vpe,this.rowDataUpdated=new n.vpe,this.asyncTransactionsFlushed=new n.vpe,this.storeRefreshed=new n.vpe,this.headerFocused=new n.vpe,this.cellClicked=new n.vpe,this.cellDoubleClicked=new n.vpe,this.cellFocused=new n.vpe,this.cellMouseOver=new n.vpe,this.cellMouseOut=new n.vpe,this.cellMouseDown=new n.vpe,this.rowClicked=new n.vpe,this.rowDoubleClicked=new n.vpe,this.rowSelected=new n.vpe,this.selectionChanged=new n.vpe,this.cellContextMenu=new n.vpe,this.rangeSelectionChanged=new n.vpe,this.cellSelectionChanged=new n.vpe,this.tooltipShow=new n.vpe,this.tooltipHide=new n.vpe,this.sortChanged=new n.vpe,this._nativeElement=t.nativeElement,this._fullyReady.then(()=>{this._holdEvents=!1})}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);const t=function Cw(e,i){"object"!=typeof e&&(e={});const t={...e};return tl.ALL_PROPERTIES_AND_CALLBACKS.forEach(r=>{const s=i[r];typeof s<"u"&&s!==tl.VUE_OMITTED_PROPERTY&&(t[r]=s)}),t}(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};const o=function $x(e,i,t){if(!i)return pt("No gridOptions provided to createGrid"),{};const o=(new class{create(e,i,t,o,r){const a=function Tx(e){const i={};return Object.entries(e).forEach(([t,o])=>{const r=fv(t,o);i[t]=r}),i}(Wc.applyGlobalGridOptions(i)),l=a.gridId??String(Jx++),c=this.getRegisteredModules(r,l),d=this.createBeansList(a.rowModelType,c,l),h=this.createProvidedBeans(e,a,r);if(!d)return void pt("Failed to create grid.");const m=new N2({providedBeanInstances:h,beanClasses:d,gridId:l,beanInitComparator:d_,beanDestroyComparator:u_,derivedBeans:[t_]});return this.registerModuleUserComponents(m,c),this.registerControllers(m,c),this.registerModuleApiFunctions(m,c),t(m),m.getBean("syncService").start(),o&&o(m),m.getBean("gridApi")}registerControllers(e,i){const t=e.getBean("ctrlsFactory");i.forEach(o=>{o.controllers&&o.controllers.forEach(r=>t.register(r))})}getRegisteredModules(e,i){const t=e?e.modules:null,o=ar.__getRegisteredModules(i),r=[],s={},a=(l,c,d)=>{var g;s[(g=c).moduleName]||(s[g.moduleName]=!0,r.push(g),ar.__register(g,l,d)),c.dependantModules&&c.dependantModules.forEach(g=>a(l,g,d))};return a(!!t?.length||!ar.__isPackageBased(),pv,void 0),t&&t.forEach(l=>a(!0,l,i)),o&&o.forEach(l=>a(!ar.__isPackageBased(),l,void 0)),r}registerModuleUserComponents(e,i){const t=this.extractModuleEntity(i,r=>r.userComponents?r.userComponents:[]),o=e.getBean("userComponentRegistry");t.forEach(({name:r,classImp:s,params:a})=>{o.registerDefaultComponent(r,s,a)})}registerModuleApiFunctions(e,i){const t=e.getBean("apiFunctionService");i.forEach(o=>{const r=o.apiFunctions;r&&Object.keys(r).forEach(a=>{t?.addFunction(a,r[a])})})}createProvidedBeans(e,i,t){let o=t?t.frameworkOverrides:null;kt(o)&&(o=new Xm);const r={gridOptions:i,eGridDiv:e,globalEventListener:t?t.globalEventListener:null,globalSyncEventListener:t?t.globalSyncEventListener:null,frameworkOverrides:o};return t&&t.providedBeanInstances&&Object.assign(r,t.providedBeanInstances),r}createBeansList(e="clientSide",i,t){const o=i.filter(c=>!c.rowModel||c.rowModel===e),r={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!r[e])return void pt("Could not find row model for rowModelType = ",e);if(!ar.__assertRegistered(r[e],`rowModelType = '${e}'`,t))return;const s=[m_,p_,Fx,xx,e_,v2,a_,l_,Ub,im,Zx,zb,Rx,NS,U2,pw,w_,Dx,JS,vv,ew,a3,Px,Ex,IS,Wx,XC,qb,jx,Yx,PS,Vb,H2,y_,Hb,v_,QS,zS,Gb,qx,Ox,Ix,Hx,Ux,Wb,i_,Bx,Gx,g_,b_,f_,h_,zx,Nx,Yb,Mx,Lx,$b,ow,n_,rw,iw,o_,r_,gw,nw,uw,s_,hw,YC],a=this.extractModuleEntity(o,c=>c.beans?c.beans:[]);s.push(...a);const l=[];return s.forEach(c=>{l.indexOf(c)<0&&l.push(c)}),l}extractModuleEntity(e,i){return[].concat(...e.map(i))}}).create(e,i,r=>{const s=new av(e);r.createBean(s)},void 0,t);if(!Object.isFrozen(i)&&!t?.frameworkOverrides){const r="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(i,"api",{get:()=>{pt(`gridOptions.api is no longer supported. See ${r}.`)},configurable:!0})}return o}(this._nativeElement,t,this.gridParams);o&&(this.api=o),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(t){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{const o={};Object.entries(t).forEach(([r,s])=>{o[r]=s.currentValue}),function ww(e,i){if(!e)return;const t={};let o=!1;if(Object.keys(e).filter(a=>tl.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)).forEach(a=>{t[a]=e[a],o=!0}),!o)return;i.dispatchEvent({type:"gridOptionsChanged",options:t});const s={type:"componentStateChanged"};$n(t,(a,l)=>{s[a]=l}),i.dispatchEvent(s)}(o,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(t){const r=this[t],s=r?.observed??r?.observers?.length>0,a=`on${t.charAt(0).toUpperCase()}${t.substring(1)}`;return s||!!this.gridOptions&&!!this.gridOptions[a]}globalEventListener(t,o){if(this._destroyed)return;const r=this[t];if(r&&this.isEmitterUsed(t)){const s=()=>this.angularFrameworkOverrides.runInsideAngular(()=>r.emit(o));this._holdEvents?this._fullyReady.then(()=>s()):s()}}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(n.SBq),n.Y36(n.s_b),n.Y36(Wv),n.Y36(Uv))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",enableStrictPivotColumnOrder:"enableStrictPivotColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressMoveWhenColumnDragging:"suppressMoveWhenColumnDragging",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",suppressSetFilterByDefault:"suppressSetFilterByDefault",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",dragAndDropImageComponent:"dragAndDropImageComponent",dragAndDropImageComponentParams:"dragAndDropImageComponentParams",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",loading:"loading",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",cellSelection:"cellSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",selectionColumnDef:"selectionColumnDef",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:"enableGroupEdit",initialState:"initialState",theme:"theme",loadThemeGoogleFonts:"loadThemeGoogleFonts",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",cellSelectionDeleteStart:"cellSelectionDeleteStart",cellSelectionDeleteEnd:"cellSelectionDeleteEnd",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",dragCancelled:"dragCancelled",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",rowDragCancel:"rowDragCancel",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",cellSelectionChanged:"cellSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},standalone:!0,features:[n._Bn([Wv,Uv]),n.TTD,n.jDz],decls:0,vars:0,template:function(o,r){},encapsulation:2})}return e})();function q4(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",15)(1,"th"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"th"),n._uU(10),n.qZA(),n.TgZ(11,"td")(12,"a",16),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.changeStatus(s))}),n._UZ(13,"span"),n.qZA()(),n.TgZ(14,"td")(15,"a"),n._UZ(16,"span",17),n.qZA()()()}if(2&e){const t=i.$implicit;n.xp6(2),n.Oqu(t.code),n.xp6(2),n.Oqu(t.name),n.xp6(2),n.Oqu(t.sType),n.xp6(2),n.Oqu(t.target),n.xp6(2),n.Oqu(t.da),n.xp6(3),n.Tol(null!=t&&t.status?"fa fa-toggle-on text-green":"fa fa-toggle-off text-red")}}let z4=(()=>{class e{constructor(t){this.api=t,this.employees=[],this.roles=[],this.changed=new n.vpe}changeStatus(t){var o=this;return(0,ee.Z)(function*(){yield o.api.putInfo("employee",{id:t.id,status:!t.status}),o.changed.emit(!0)})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-employees"]],inputs:{employees:"employees",roles:"roles"},outputs:{changed:"changed"},decls:32,vars:1,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body",2,"min-height","600px"],[1,"row"],[1,"col-sm-12"],[1,"table-container"],[1,"table","table-responsive","table-striped","table-condensed","table-hover","text-center","table-fixed-header"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],[1,"fa","fa-plus-circle","text-green"],["scope","row",4,"ngFor","ngForOf"],["scope","row"],[3,"click"],[1,"fa","fa-edit","text-blue"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7,"Employees"),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"table",10)(13,"thead")(14,"tr",11)(15,"th",12),n._uU(16,"Code"),n.qZA(),n.TgZ(17,"th",12),n._uU(18,"Full Name"),n.qZA(),n.TgZ(19,"th",12),n._uU(20,"Role"),n.qZA(),n.TgZ(21,"th",12),n._uU(22,"Target"),n.qZA(),n.TgZ(23,"th",12),n._uU(24,"Cost"),n.qZA(),n.TgZ(25,"th",12),n._uU(26,"Status"),n.qZA(),n.TgZ(27,"th",12)(28,"a"),n._UZ(29,"span",13),n.qZA()()()(),n.TgZ(30,"tbody"),n.YNc(31,q4,17,7,"tr",14),n.qZA()()()()()()()()),2&o&&(n.xp6(31),n.Q6J("ngForOf",r.employees))},dependencies:[Ee.sg]})}return e})();function V4(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.remove())}),n._uU(1,"Delete ?"),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("disabled",t.loading)}}let U4=(()=>{class e{constructor(t){this.api=t,this.kapan={},this.changed=new n.vpe,this.loading=!1}submit(){var t=this;return(0,ee.Z)(function*(){t.loading=!0;try{t.kapan?.id>0?yield t.api.putInfo("galaxy",t.kapan):yield t.api.postInfo("galaxy",t.kapan),toastr.success("Updated Successfully!"),$("#galaxy_entry_modal").modal("toggle"),t.changed.emit(!0)}catch{toastr.error("Something Went Wrong!")}t.loading=!1})()}remove(){var t=this;return(0,ee.Z)(function*(){t.loading=!0;try{(yield t.api.deleteInfo("galaxy/"+t.kapan.id))&&(toastr.success("Updated Successfully!"),$("#galaxy_entry_modal").modal("toggle"),t.changed.emit(!0))}catch{toastr.error("Something Went Wrong!")}t.loading=!1})()}onDateChange(t,o){this.kapan[o]=t.target.value?.length?new Date(t.target.value).toISOString():null}upperCase(t){this.kapan[t]=(this.kapan[t]??"")?.toUpperCase().trim()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-galaxy-entry"]],inputs:{kapan:"kapan"},outputs:{changed:"changed"},decls:42,vars:18,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-4"],["type","date","appFocusNavigate","",1,"form-control",3,"value","change"],[1,"col-sm-2","p-r-0"],["type","text","name","code","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"col-sm-2","p-l-5"],["type","text","name","employee","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange","input"],["type","number","name","than","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","weight","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button","class","btn btn-sm btn-danger",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-sm",3,"disabled","click"],["type","button",1,"btn","btn-sm","btn-danger",3,"disabled","click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),n._uU(12,"Issue Date"),n.qZA(),n.TgZ(13,"div",10)(14,"input",11),n.NdJ("change",function(a){return r.onDateChange(a,"issueDate")}),n.ALo(15,"momentDate"),n.qZA()()(),n.TgZ(16,"div",8)(17,"label",9),n._uU(18,"Cut No & Employee"),n.qZA(),n.TgZ(19,"div",12)(20,"input",13),n.NdJ("ngModelChange",function(a){return r.kapan.code=a})("input",function(){return r.upperCase("code")}),n.qZA()(),n.TgZ(21,"div",14)(22,"input",15),n.NdJ("ngModelChange",function(a){return r.kapan.employee=a})("input",function(){return r.upperCase("employee")}),n.qZA()()(),n.TgZ(23,"div",8)(24,"label",9),n._uU(25,"Than & Weight"),n.qZA(),n.TgZ(26,"div",12)(27,"input",16),n.NdJ("ngModelChange",function(a){return r.kapan.than=a}),n.qZA()(),n.TgZ(28,"div",14)(29,"input",17),n.NdJ("ngModelChange",function(a){return r.kapan.weight=a}),n.qZA()()(),n.TgZ(30,"div",8)(31,"label",9),n._uU(32,"Close Date"),n.qZA(),n.TgZ(33,"div",10)(34,"input",11),n.NdJ("change",function(a){return r.onDateChange(a,"closeDate")}),n.ALo(35,"momentDate"),n.qZA()()()()(),n.TgZ(36,"div",18)(37,"button",19),n._uU(38,"Cancel"),n.qZA(),n.YNc(39,V4,2,1,"button",20),n.TgZ(40,"button",21),n.NdJ("click",function(){return r.submit()}),n._uU(41),n.qZA()()()()),2&o&&(n.xp6(7),n.Oqu(r.kapan.id?"Edit Kapan":"Add Kapan"),n.xp6(7),n.Q6J("value",n.xi3(15,12,null==r.kapan?null:r.kapan.issueDate,"YYYY-MM-DD")),n.xp6(6),n.Q6J("ngModel",r.kapan.code),n.xp6(2),n.Q6J("ngModel",r.kapan.employee),n.xp6(5),n.Q6J("ngModel",r.kapan.than),n.xp6(2),n.Q6J("ngModel",r.kapan.weight),n.xp6(5),n.Q6J("value",n.xi3(35,15,null==r.kapan?null:r.kapan.closeDate,"YYYY-MM-DD")),n.xp6(5),n.Q6J("ngIf",(null==r.kapan?null:r.kapan.id)>0),n.xp6(1),n.Tol(r.kapan.id?"btn-success":"btn-primary"),n.Q6J("disabled",r.loading||!(null!=r.kapan&&null!=r.kapan.issueDate&&r.kapan.issueDate.length)||!(null!=r.kapan&&r.kapan.code)||!(null!=r.kapan&&r.kapan.employee)||!(null!=r.kapan&&r.kapan.than)),n.xp6(1),n.Oqu(r.kapan.id?"Update":"Submit"))},dependencies:[Ee.O5,te._Y,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ut,Rt.v]})}return e})();var Xs=Oe(2694);function W4(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",25)(1,"th"),n._uU(2),n.qZA(),n.TgZ(3,"th")(4,"a",26),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.editEmployee(s.id))}),n._uU(5),n.qZA()(),n.TgZ(6,"td",45)(7,"input",46),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.than=r)}),n.qZA()(),n.TgZ(8,"td",45)(9,"input",46),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.rate=r)}),n.qZA()(),n.TgZ(10,"td"),n._uU(11),n.ALo(12,"inr"),n.qZA()()}if(2&e){const t=i.$implicit;n.xp6(2),n.Oqu(t.sType),n.xp6(3),n.Oqu(t.code),n.xp6(2),n.MGl("name","than_emp_",t.id,""),n.Q6J("ngModel",t.than),n.xp6(2),n.MGl("name","rate_emp_",t.id,""),n.Q6J("ngModel",t.rate),n.xp6(2),n.Oqu(n.lcZ(12,7,(null==t?null:t.than)*(null==t?null:t.rate)))}}function j4(e,i){if(1&e&&(n.TgZ(0,"th",47),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t.code)}}function Y4(e,i){if(1&e&&(n.TgZ(0,"th",48),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t.code)}}const Jc=function(e){return{employeeId:e}},Go=function(e){return{date:e}};function $4(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.ALo(2,"contains"),n.ALo(3,"filter"),n.qZA()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(1),n.Oqu(o.api.getSum(n.xi3(2,1,n.xi3(3,4,o.employeeWorks,n.VKq(7,Jc,t.id)),n.VKq(9,Go,o.month)),"than",""))}}function J4(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.ALo(2,"contains"),n.ALo(3,"filter"),n.qZA()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(1),n.Oqu(o.api.getSum(n.xi3(2,1,n.xi3(3,4,o.employeeWorks,n.VKq(7,Jc,t.id)),n.VKq(9,Go,o.month)),"than",""))}}function K4(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.ALo(2,"contains"),n.ALo(3,"filter"),n.qZA()),2&e){const t=i.$implicit,o=n.oxw().$implicit,r=n.oxw();n.xp6(1),n.Oqu(r.api.getSum(n.xi3(2,1,n.xi3(3,4,r.employeeWorks,n.VKq(7,Jc,t.id)),n.VKq(9,Go,o)),"than",""))}}function Q4(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.ALo(2,"contains"),n.ALo(3,"filter"),n.qZA()),2&e){const t=i.$implicit,o=n.oxw().$implicit,r=n.oxw();n.xp6(1),n.Oqu(r.api.getSum(n.xi3(2,1,n.xi3(3,4,r.employeeWorks,n.VKq(7,Jc,t.id)),n.VKq(9,Go,o)),"than",""))}}const Wh=function(){return{sType:"STN"}},jv=function(){return{role:"STN"}},jh=function(){return{sType:"GLX"}},Yv=function(){return{role:"GLX"}};function X4(e,i){if(1&e&&(n.TgZ(0,"tr",25)(1,"th"),n._uU(2),n.ALo(3,"momentDate"),n.qZA(),n.YNc(4,K4,4,11,"td",38),n.ALo(5,"filter"),n.TgZ(6,"th"),n._uU(7),n.ALo(8,"contains"),n.ALo(9,"filter"),n.qZA(),n.YNc(10,Q4,4,11,"td",38),n.ALo(11,"filter"),n.TgZ(12,"th"),n._uU(13),n.ALo(14,"contains"),n.ALo(15,"filter"),n.qZA(),n.TgZ(16,"th"),n._uU(17),n.ALo(18,"contains"),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(n.xi3(3,6,t,"DD/MM/YYYY")),n.xp6(2),n.Q6J("ngForOf",n.xi3(5,9,o.employees,n.DdM(30,Wh))),n.xp6(3),n.Oqu(o.api.getSum(n.xi3(8,12,n.xi3(9,15,o.employeeWorks,n.DdM(31,jv)),n.VKq(32,Go,t)),"than","")),n.xp6(3),n.Q6J("ngForOf",n.xi3(11,18,o.employees,n.DdM(34,jh))),n.xp6(3),n.Oqu(o.api.getSum(n.xi3(14,21,n.xi3(15,24,o.employeeWorks,n.DdM(35,Yv)),n.VKq(36,Go,t)),"than","")),n.xp6(4),n.Oqu(o.api.getSum(n.xi3(18,27,o.employeeWorks,n.VKq(38,Go,t)),"than",""))}}const ek=function(){return{status:!0}};let tk=(()=>{class e{getRowClass(t){return t.data?.closeDate?"bg-lightgreen":""}constructor(t,o){var r=this;this.api=t,this.excel=o,this.user=JSON.parse(localStorage.getItem("user")),this.today=_e().add(-1,"days").format("YYYY-MM-DD"),this.employees=[],this.employeeWorks=[],this.list=[],this.employee={},this.report=[],this.dates=[],this.kapans=[],this.kapan={},this.month=_e().format("YYYY-MM"),this.code="",this.ncode="",this.start=_e().subtract(29,"days"),this.end=_e(),this.roles=["STN","GLX"],this.issueDate="",this.closeDate="",this.rowData=[],this.sdata=[],this.selectedRow=[],this.pinnedRow=[],this.rowSelection={mode:"multiRow"},this.gridOptions={getRowClass:this.getRowClass.bind(this)},this.defaultColDef={flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0},this.columnDefs=[{headerName:"ISSUE",field:"issueDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"CUT NO",field:"code"},{headerName:"NAME",field:"employee"},{headerName:"THAN",field:"than"},{headerName:"WEIGHT",field:"weight"},{headerName:"CLOSE",field:"closeDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"DAYS",valueGetter:s=>this.api.getDaysDiff(s.data?.issueDate,s.data?.closeDate)}],this.onSelectionChanged=s=>{var a=s?.api?.getSelectedRows();if(this.selectedRow=[],this.sdata=[],a?.length>1){var l={than:M.sumBy(a,"than"),weight:M.round(M.sumBy(a,"weight"),2),code:"Selected: "+a.length};this.selectedRow.push(l),this.sdata=a}},this.onFilterChanged=s=>{var a=[];if(this.selectedRow=[],this.sdata=[],s?.api?.forEachNodeAfterFilter(c=>{c.data&&a.push(c.data)}),a?.length!=this.rowData.length&&(console.log(a),this.selectedRow=[],a?.length>1)){var l={than:M.sumBy(a,"than"),weight:M.round(M.sumBy(a,"weight"),2),code:"Filtered: "+a.length};this.selectedRow.push(l),this.sdata=a}},this.onRowDoubleClicked=function(){var s=(0,ee.Z)(function*(a){const l=a.data;l?.id>0&&(r.kapan=yield r.api.getInfo("galaxy/"+l.id),$("#galaxy_entry_modal").modal("toggle"))});return function(a){return s.apply(this,arguments)}}()}ngOnInit(){var t=this;return(0,ee.Z)(function*(){t.dates=t.api.getMonthDays(t.month),t.reload(!0)})()}addEmployee(){this.employee={departmentHeadId:this.user.id},$("#employee_modal").modal("toggle")}editEmployee(t){var o=this;return(0,ee.Z)(function*(){o.employee=yield o.api.getInfo("employee/"+t),$("#employee_modal").modal("toggle")})()}reload(t){var o=this;return(0,ee.Z)(function*(){o.kapans=yield o.api.getInfo("galaxy"),o.rowData=o.kapans,o.pinnedRow=[];var r=[{than:M.sumBy(o.rowData,"than"),weight:M.round(M.sumBy(o.rowData,"weight"),2),code:"Total: "+o.rowData.length},{than:M.sumBy(o.rowData.filter(s=>!s?.closeDate),"than"),weight:M.round(M.sumBy(o.rowData.filter(s=>!s?.closeDate),"weight"),2),code:"Pending: "+o.rowData.filter(s=>!s?.closeDate).length}];o.pinnedRow=r,o.employeeWorks=yield o.api.postInfo("galaxy-work/query",{}),o.loadList()})()}onGridReady(t){t.api.sizeColumnsToFit()}loadList(){var t=this;return(0,ee.Z)(function*(){t.employees=yield t.api.getInfo("employee?dId="+t.user.id),t.list=t.employees.map(o=>{var r=t.employeeWorks.find(s=>s.employeeId==o.id&&s.date==t.today+"T00:00:00.000Z");return{id:o.id,code:o.code,sType:r?.role??o.sType,than:r?.than??0,rate:r?.rate??o.da,total:r?.than?M.round(r?.than*r?.rate,2):0,status:o.status}}),t.list=M.orderBy(t.list,["sType","id"],["desc","desc"])})()}download(){var r=(this.sdata.length?this.sdata:this.rowData).map(s=>[_e(s.issueDate).format("YYYY-MM-DD"),s.code,s.employee,s.than,s.weight,s?.closeDate?_e(s?.closeDate).format("YYYY-MM-DD"):""]);this.excel.generateExcel(["ISSUE DATE","CUT NO","NAME","THAN","WEIGHT","CLOSE DATE"],r,this.sdata.length?"GALAXY_FILTER":"GALAXY_TOTAL")}submit(){var t=this;return(0,ee.Z)(function*(){var o=t.list.filter(s=>s.status).map(s=>({date:t.today+"T00:00:00.000Z",than:s.than,rate:s.rate,role:s?.sType,total:M.round(s?.rate*s?.than,2),employeeId:s.id}));if(window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=t.user.pin)return void toastr.warning("Invalid PIN");try{yield t.api.postInfo("galaxy-work/bulk",o),toastr.success("Update Successfully!"),t.reload(!0)}catch{toastr.error("Something Went Wrong!")}}}})()}addKapan(){this.kapan={},$("#galaxy_entry_modal").modal("toggle")}onDateChange(t){console.log(t.target.value),t.target.value?(this.today=t.target.value,this.loadList()):this.list=[]}onMonthChange(t){console.log(t.target.value),t.target.value&&(this.month=t.target.value,this.dates=this.api.getMonthDays(this.month))}showEmployees(){$("#employees_modal").modal("toggle")}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(et.x))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-galaxy"]],decls:104,vars:76,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"nav-tabs-custom"],[1,"nav","nav-tabs"],[1,"active"],["href","#report","data-toggle","tab"],["href","#history","data-toggle","tab"],[1,"pull-right","header",2,"line-height","1.5em !important"],[1,"btn","btn-sm","btn-primary","mr-5",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-download"],[1,"tab-content",2,"min-height","500px"],["id","report",1,"tab-pane","active"],[1,"col-sm-8","p-r-0"],[1,"col-sm-12"],[1,"ag-theme-balham",2,"width","100%","height","80vh","font-weight","500",3,"rowData","columnDefs","defaultColDef","gridOptions","rowSelection","pinnedTopRowData","pinnedBottomRowData","gridReady","selectionChanged","filterChanged","rowDoubleClicked"],[1,"col-sm-4","p-l-5"],[1,"table","table-responsive","table-bordered","table-condensed","table-striped","table-striped","text-center"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto","bg-lightred","p2","jc"],["type","date",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],["scope","col",1,"col-sm-auto"],["scope","row",4,"ngFor","ngForOf"],["scope","row"],[3,"click"],[1,"fa","fa-list","text-green"],[1,"btn","btn-sm","btn-success","pull-right",3,"disabled","click"],["id","history",1,"tab-pane"],[1,"table-container"],[1,"table","table-responsive","table-bordered","table-condensed","table-striped","table-striped","text-center","table-fixed-header"],["scope","col",1,"col-sm-auto","p2","jc","bg-lightgreen",2,"width","120px !important"],["type","month",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],["scope","col","class","col-sm-auto bg-lightblue",4,"ngFor","ngForOf"],["scope","col","class","col-sm-auto bg-lightgreen",4,"ngFor","ngForOf"],["scope","col",1,"col-sm-auto","bg-lightred"],[1,"bg-lightyellow"],[4,"ngFor","ngForOf"],["id","employee_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"employee","changed"],["id","galaxy_entry_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"kapan","changed"],["id","employees_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"employees","roles","changed"],[1,"p2","jc","w90"],["appFocusNavigate","","type","number",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","name","ngModelChange"],["scope","col",1,"col-sm-auto","bg-lightblue"],["scope","col",1,"col-sm-auto","bg-lightgreen"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),n._uU(7,"Reporting"),n.qZA()(),n.TgZ(8,"li")(9,"a",7),n._uU(10,"History"),n.qZA()(),n.TgZ(11,"li",8)(12,"button",9),n.NdJ("click",function(){return r.addKapan()}),n._UZ(13,"i",10),n._uU(14,"ADD KAPAN"),n.qZA(),n.TgZ(15,"button",11),n.NdJ("click",function(){return r.download()}),n._UZ(16,"i",12),n._uU(17,"DOWNLOAD"),n.qZA()()(),n.TgZ(18,"div",13)(19,"div",14)(20,"div",2)(21,"div",15)(22,"div",16)(23,"ag-grid-angular",17),n.NdJ("gridReady",function(a){return r.onGridReady(a)})("selectionChanged",function(a){return r.onSelectionChanged(a)})("filterChanged",function(a){return r.onFilterChanged(a)})("rowDoubleClicked",function(a){return r.onRowDoubleClicked(a)}),n.qZA()()(),n.TgZ(24,"div",18)(25,"div",16)(26,"table",19)(27,"thead")(28,"tr",20)(29,"th",21)(30,"input",22),n.NdJ("change",function(a){return r.onDateChange(a)}),n.ALo(31,"momentDate"),n.qZA()(),n.TgZ(32,"th",23),n._uU(33,"NAME"),n.qZA(),n.TgZ(34,"th",23),n._uU(35,"PCS"),n.qZA(),n.TgZ(36,"th",23),n._uU(37,"Rate"),n.qZA(),n.TgZ(38,"th",23),n._uU(39,"Total"),n.qZA()()(),n.TgZ(40,"tbody"),n.YNc(41,W4,13,9,"tr",24),n.ALo(42,"filter"),n.qZA(),n.TgZ(43,"tfoot")(44,"tr",25)(45,"th")(46,"a",26),n.NdJ("click",function(){return r.showEmployees()}),n._UZ(47,"span",27),n.qZA()(),n._UZ(48,"th"),n.TgZ(49,"th"),n._uU(50),n.qZA(),n.TgZ(51,"th"),n._uU(52),n.ALo(53,"inr"),n.qZA(),n.TgZ(54,"th"),n._uU(55),n.ALo(56,"inr"),n.qZA()()()(),n.TgZ(57,"button",28),n.NdJ("click",function(){return r.submit()}),n._uU(58,"Save Changes"),n.qZA()()()()(),n.TgZ(59,"div",29)(60,"div",2)(61,"div",16)(62,"div",30)(63,"table",31)(64,"thead")(65,"tr")(66,"th",32)(67,"input",33),n.NdJ("change",function(a){return r.onMonthChange(a)}),n.qZA()(),n.YNc(68,j4,2,1,"th",34),n.ALo(69,"filter"),n.TgZ(70,"th"),n._uU(71,"STN"),n.qZA(),n.YNc(72,Y4,2,1,"th",35),n.ALo(73,"filter"),n.TgZ(74,"th"),n._uU(75,"GALAXY"),n.qZA(),n.TgZ(76,"th",36),n._uU(77,"Total"),n.qZA()(),n.TgZ(78,"tr",37)(79,"th"),n._uU(80,"Total"),n.qZA(),n.YNc(81,$4,4,11,"td",38),n.ALo(82,"filter"),n.TgZ(83,"th"),n._uU(84),n.ALo(85,"contains"),n.ALo(86,"filter"),n.qZA(),n.YNc(87,J4,4,11,"td",38),n.ALo(88,"filter"),n.TgZ(89,"th"),n._uU(90),n.ALo(91,"contains"),n.ALo(92,"filter"),n.qZA(),n.TgZ(93,"th"),n._uU(94),n.ALo(95,"contains"),n.qZA()()(),n.TgZ(96,"tbody"),n.YNc(97,X4,19,40,"tr",24),n.qZA()()()()()()()()()()(),n.TgZ(98,"div",39)(99,"app-employee",40),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()(),n.TgZ(100,"div",41)(101,"app-galaxy-entry",42),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()(),n.TgZ(102,"div",43)(103,"app-employees",44),n.NdJ("changed",function(){return r.loadList()}),n.qZA()()),2&o&&(n.xp6(23),n.Q6J("rowData",r.rowData)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("gridOptions",r.gridOptions)("rowSelection",r.rowSelection)("pinnedTopRowData",r.selectedRow)("pinnedBottomRowData",r.pinnedRow),n.xp6(7),n.Q6J("value",n.xi3(31,26,r.today,"YYYY-MM-DD")),n.xp6(11),n.Q6J("ngForOf",n.xi3(42,29,r.list,n.DdM(63,ek))),n.xp6(9),n.Oqu(r.api.getSum(r.list,"than")),n.xp6(2),n.Oqu(n.lcZ(53,32,r.api.getAvg(r.list,"than","rate"))),n.xp6(3),n.Oqu(n.lcZ(56,34,r.api.getTotalSum(r.list,"than","rate"))),n.xp6(2),n.Q6J("disabled",!r.api.getTotalSum(r.list,"than","rate")),n.xp6(10),n.Q6J("value",r.month),n.xp6(1),n.Q6J("ngForOf",n.xi3(69,36,r.employees,n.DdM(64,Wh))),n.xp6(4),n.Q6J("ngForOf",n.xi3(73,39,r.employees,n.DdM(65,jh))),n.xp6(9),n.Q6J("ngForOf",n.xi3(82,42,r.employees,n.DdM(66,Wh))),n.xp6(3),n.Oqu(r.api.getSum(n.xi3(85,45,n.xi3(86,48,r.employeeWorks,n.DdM(67,jv)),n.VKq(68,Go,r.month)),"than","")),n.xp6(3),n.Q6J("ngForOf",n.xi3(88,51,r.employees,n.DdM(70,jh))),n.xp6(3),n.Oqu(r.api.getSum(n.xi3(91,54,n.xi3(92,57,r.employeeWorks,n.DdM(71,Yv)),n.VKq(72,Go,r.month)),"than","")),n.xp6(4),n.Oqu(r.api.getSum(n.xi3(95,60,r.employeeWorks,n.VKq(74,Go,r.month)),"than","")),n.xp6(3),n.Q6J("ngForOf",r.dates),n.xp6(2),n.Q6J("employee",r.employee),n.xp6(2),n.Q6J("kapan",r.kapan),n.xp6(2),n.Q6J("employees",r.employees)("roles",r.roles))},dependencies:[Ee.sg,te.Fj,te.wV,te.JJ,te.On,Ut,wo,Ji,z4,U4,Oi.g,Xs.K,Rt.v,vi]})}return e})();function ik(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.remove())}),n._uU(1,"Delete ?"),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("disabled",t.loading)}}let nk=(()=>{class e{constructor(t){this.api=t,this.kapan={},this.changed=new n.vpe,this.loading=!1}submit(){var t=this;return(0,ee.Z)(function*(){t.loading=!0;try{t.kapan?.id>0?yield t.api.putInfo("sarin",t.kapan):yield t.api.postInfo("sarin",t.kapan),toastr.success("Updated Successfully!"),$("#sarin_entry_modal").modal("toggle"),t.changed.emit(!0)}catch{toastr.error("Something Went Wrong!")}t.loading=!1})()}remove(){var t=this;return(0,ee.Z)(function*(){t.loading=!0;try{(yield t.api.deleteInfo("sarin/"+t.kapan.id))&&(toastr.success("Updated Successfully!"),$("#sarin_entry_modal").modal("toggle"),t.changed.emit(!0))}catch{toastr.error("Something Went Wrong!")}t.loading=!1})()}onDateChange(t,o){this.kapan[o]=t.target.value?.length?new Date(t.target.value).toISOString():null}upperCase(t){this.kapan[t]=(this.kapan[t]??"")?.toUpperCase().trim()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-sarin-entry"]],inputs:{kapan:"kapan"},outputs:{changed:"changed"},decls:42,vars:18,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-4"],["type","date","appFocusNavigate","",1,"form-control",3,"value","change"],[1,"col-sm-2","p-r-0"],["type","text","name","code","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"col-sm-2","p-l-5"],["type","text","name","employee","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange","input"],["type","number","name","than","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","weight","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button","class","btn btn-sm btn-danger",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-sm",3,"disabled","click"],["type","button",1,"btn","btn-sm","btn-danger",3,"disabled","click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),n._uU(12,"Issue Date"),n.qZA(),n.TgZ(13,"div",10)(14,"input",11),n.NdJ("change",function(a){return r.onDateChange(a,"issueDate")}),n.ALo(15,"momentDate"),n.qZA()()(),n.TgZ(16,"div",8)(17,"label",9),n._uU(18,"Cut No & Employee"),n.qZA(),n.TgZ(19,"div",12)(20,"input",13),n.NdJ("ngModelChange",function(a){return r.kapan.code=a})("input",function(){return r.upperCase("code")}),n.qZA()(),n.TgZ(21,"div",14)(22,"input",15),n.NdJ("ngModelChange",function(a){return r.kapan.employee=a})("input",function(){return r.upperCase("employee")}),n.qZA()()(),n.TgZ(23,"div",8)(24,"label",9),n._uU(25,"Than & Weight"),n.qZA(),n.TgZ(26,"div",12)(27,"input",16),n.NdJ("ngModelChange",function(a){return r.kapan.than=a}),n.qZA()(),n.TgZ(28,"div",14)(29,"input",17),n.NdJ("ngModelChange",function(a){return r.kapan.weight=a}),n.qZA()()(),n.TgZ(30,"div",8)(31,"label",9),n._uU(32,"Close Date"),n.qZA(),n.TgZ(33,"div",10)(34,"input",11),n.NdJ("change",function(a){return r.onDateChange(a,"closeDate")}),n.ALo(35,"momentDate"),n.qZA()()()()(),n.TgZ(36,"div",18)(37,"button",19),n._uU(38,"Cancel"),n.qZA(),n.YNc(39,ik,2,1,"button",20),n.TgZ(40,"button",21),n.NdJ("click",function(){return r.submit()}),n._uU(41),n.qZA()()()()),2&o&&(n.xp6(7),n.Oqu(r.kapan.id?"Edit Kapan":"Add Kapan"),n.xp6(7),n.Q6J("value",n.xi3(15,12,null==r.kapan?null:r.kapan.issueDate,"YYYY-MM-DD")),n.xp6(6),n.Q6J("ngModel",r.kapan.code),n.xp6(2),n.Q6J("ngModel",r.kapan.employee),n.xp6(5),n.Q6J("ngModel",r.kapan.than),n.xp6(2),n.Q6J("ngModel",r.kapan.weight),n.xp6(5),n.Q6J("value",n.xi3(35,15,null==r.kapan?null:r.kapan.closeDate,"YYYY-MM-DD")),n.xp6(5),n.Q6J("ngIf",(null==r.kapan?null:r.kapan.id)>0),n.xp6(1),n.Tol(r.kapan.id?"btn-success":"btn-primary"),n.Q6J("disabled",r.loading||!(null!=r.kapan&&null!=r.kapan.issueDate&&r.kapan.issueDate.length)||!(null!=r.kapan&&r.kapan.code)||!(null!=r.kapan&&r.kapan.employee)||!(null!=r.kapan&&r.kapan.than)),n.xp6(1),n.Oqu(r.kapan.id?"Update":"Submit"))},dependencies:[Ee.O5,te._Y,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ut,Rt.v]})}return e})();function ok(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",23)(1,"th")(2,"a",24),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.editEmployee(s.id))}),n._uU(3),n.qZA()(),n.TgZ(4,"td",42)(5,"input",43),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.than=r)}),n.qZA()(),n.TgZ(6,"td"),n._uU(7),n.ALo(8,"inr"),n.qZA()()}if(2&e){const t=i.$implicit,o=i.index;n.xp6(3),n.AsE("",o+1,". ",t.code,""),n.xp6(2),n.MGl("name","than_emp_",t.id,""),n.Q6J("ngModel",t.than),n.xp6(2),n.Oqu(n.lcZ(8,5,t.rate*t.than))}}function rk(e,i){if(1&e&&(n.TgZ(0,"th",44),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t.code)}}const $v=function(e){return{employeeId:e}},Kc=function(e){return{date:e}};function sk(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.ALo(2,"contains"),n.ALo(3,"filter"),n.ALo(4,"momentDate"),n.qZA()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(1),n.Oqu(o.api.getSum(n.xi3(2,1,n.xi3(3,4,o.employeeWorks,n.VKq(10,$v,t.id)),n.VKq(12,Kc,n.xi3(4,7,o.month,"YYYY-MM"))),"than",""))}}function ak(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.ALo(2,"contains"),n.ALo(3,"filter"),n.qZA()),2&e){const t=i.$implicit,o=n.oxw().$implicit,r=n.oxw();n.xp6(1),n.Oqu(r.api.getSum(n.xi3(2,1,n.xi3(3,4,r.employeeWorks,n.VKq(7,$v,t.id)),n.VKq(9,Kc,o)),"than",""))}}function lk(e,i){if(1&e&&(n.TgZ(0,"tr",23)(1,"th"),n._uU(2),n.ALo(3,"momentDate"),n.qZA(),n.YNc(4,ak,4,11,"td",37),n.TgZ(5,"th"),n._uU(6),n.ALo(7,"contains"),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(n.xi3(3,3,t,"DD/MM/YYYY")),n.xp6(2),n.Q6J("ngForOf",o.employees),n.xp6(2),n.Oqu(o.api.getSum(n.xi3(7,6,o.employeeWorks,n.VKq(9,Kc,t)),"than",""))}}let ck=(()=>{class e{getRowClass(t){return t.data?.closeDate?"bg-lightgreen":""}constructor(t,o){var r=this;this.api=t,this.excel=o,this.user=JSON.parse(localStorage.getItem("user")),this.today=_e().add(-1,"days").format("YYYY-MM-DD"),this.employees=[],this.employeeWorks=[],this.scode="",this.pcode="",this.list=[],this.employee={},this.report=[],this.dates=[],this.kapans=[],this.kapan={},this.month=_e().format("YYYY-MM"),this.rowData=[],this.sdata=[],this.selectedRow=[],this.pinnedRow=[],this.rowSelection={mode:"multiRow"},this.gridOptions={getRowClass:this.getRowClass.bind(this)},this.defaultColDef={flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0},this.columnDefs=[{headerName:"ISSUE",field:"issueDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"CUT NO",field:"code"},{headerName:"NAME",field:"employee"},{headerName:"THAN",field:"than"},{headerName:"WEIGHT",field:"weight"},{headerName:"CLOSE",field:"closeDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"DAYS",valueGetter:s=>this.api.getDaysDiff(s.data?.issueDate,s.data?.closeDate)}],this.onSelectionChanged=s=>{var a=s?.api?.getSelectedRows();if(this.selectedRow=[],this.sdata=[],a?.length>1){var l={than:M.sumBy(a,"than"),weight:M.round(M.sumBy(a,"weight"),2),code:"Selected: "+a.length};this.selectedRow.push(l),this.sdata=a}},this.onFilterChanged=s=>{var a=[];if(this.selectedRow=[],this.sdata=[],s?.api?.forEachNodeAfterFilter(c=>{c.data&&a.push(c.data)}),a?.length!=this.rowData.length&&(console.log(a),this.selectedRow=[],a?.length>1)){var l={than:M.sumBy(a,"than"),weight:M.round(M.sumBy(a,"weight"),2),code:"Filtered: "+a.length};this.selectedRow.push(l),this.sdata=a}},this.onRowDoubleClicked=function(){var s=(0,ee.Z)(function*(a){const l=a.data;l?.id>0&&(r.kapan=yield r.api.getInfo("sarin/"+l.id),$("#sarin_entry_modal").modal("toggle"))});return function(a){return s.apply(this,arguments)}}()}ngOnInit(){var t=this;return(0,ee.Z)(function*(){t.reload(!0),t.dates=t.api.getMonthDays(t.month)})()}addEmployee(){this.employee={departmentHeadId:this.user.id},$("#employee_modal").modal("toggle")}editEmployee(t){var o=this;return(0,ee.Z)(function*(){o.employee=yield o.api.getInfo("employee/"+t),$("#employee_modal").modal("toggle")})()}reload(t){var o=this;return(0,ee.Z)(function*(){o.kapans=yield o.api.getInfo("sarin"),o.rowData=o.kapans,o.pinnedRow=[];var r=[{than:M.sumBy(o.rowData,"than"),weight:M.round(M.sumBy(o.rowData,"weight"),2),code:"Total: "+o.rowData.length},{than:M.sumBy(o.rowData.filter(s=>!s?.closeDate),"than"),weight:M.round(M.sumBy(o.rowData.filter(s=>!s?.closeDate),"weight"),2),code:"Pending: "+o.rowData.filter(s=>!s?.closeDate).length}];o.pinnedRow=r,o.employeeWorks=yield o.api.postInfo("sarin-work/query",{}),o.employees=yield o.api.getInfo("employee?dId="+o.user.id),o.loadList()})()}onGridReady(t){t.api.sizeColumnsToFit()}loadList(){this.list=this.employees.map(t=>{var o=this.employeeWorks.find(r=>r.employeeId==t.id&&r.date==this.today+"T00:00:00.000Z");return{id:t.id,code:t.code,sType:t.sType,than:o?.than??"",rate:o?.rate??t.da,total:o?M.round(o?.than*o?.rate,2):""}}),this.list=M.orderBy(this.list,["id"],["asc"])}submit(){var t=this;return(0,ee.Z)(function*(){var o=t.list.map(s=>({date:t.today+"T00:00:00.000Z",than:s.than,rate:s.rate,total:M.round(s.rate*s.than,2),employeeId:s.id}));if(window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=t.user.pin)return void toastr.warning("Invalid PIN");try{yield t.api.postInfo("sarin-work/bulk",o),toastr.success("Update Successfully!"),t.reload(!0)}catch{toastr.error("Something Went Wrong!")}}}})()}addKapan(){this.kapan={},$("#sarin_entry_modal").modal("toggle")}addDate(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=o.user.pin)return void toastr.warning("Invalid PIN");try{yield o.api.putInfo("sarin",{id:t.id,closeDate:_e().format("YYYY-MM-DD")+"T00:00:00.000Z",status:!0}),toastr.success("Done!"),o.kapans=yield o.api.getInfo("sarin")}catch{toastr.error("Something Went Wrong!")}}}})()}changeDate(t,o){var r=this;return(0,ee.Z)(function*(){if(t.target.value){if(window.confirm("Are you sure?")){var s=window.prompt("Enter your PIN");if(s?.length){if(s!=r.user.pin)return void toastr.warning("Invalid PIN");try{yield r.api.putInfo("sarin",{id:o.id,closeDate:t.target.value+"T00:00:00.000Z",status:!0}),toastr.success("Done!"),r.kapans=yield r.api.getInfo("sarin")}catch{toastr.error("Something Went Wrong!")}}}}else r.kapans=yield r.api.getInfo("sarin")})()}update(t){var o=this;return(0,ee.Z)(function*(){if(t.closeDate=$("#kapan_date_"+t.id).val()+"T00:00:00.000Z",console.log(t),window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=o.user.pin)return void toastr.warning("Invalid PIN");var s=Object.assign({},t);try{yield o.api.putInfo("sarin",{id:s.id,status:!0,closeDate:s.closeDate}),toastr.success("Update Successfully!"),o.kapans=yield o.api.getInfo("sarin")}catch{toastr.error("Something Went Wrong!")}}}})()}revert(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=o.user.pin)return void toastr.warning("Invalid PIN");try{yield o.api.putInfo("sarin",{id:t.id,status:!1,closeDate:null}),toastr.success("Update Successfully!"),o.kapans=yield o.api.getInfo("sarin")}catch{toastr.error("Something Went Wrong!")}}}})()}onDateChange(t){t.target.value?(this.today=t.target.value,this.loadList()):this.list=[]}onMonthChange(t){t.target.value?.length&&(this.month=t.target.value,this.dates=this.api.getMonthDays(this.month))}download(){var r=(this.sdata?.length?this.sdata:this.rowData).map(s=>[s?.issueDate?.length?_e(s.issueDate).format("YYYY-MM-DD"):"",s.code,s.employee,s.than,s.weight,s?.closeDate?.length?_e(s.closeDate).format("YYYY-MM-DD"):"",this.api.getDaysDiff(s?.issueDate,s?.closeDate)]);this.excel.generateExcel(["ISSUE DATE","CUT NO","NAME","THAN","WEIGHT","CLOSE DATE","DAYS"],r,this.sdata?.length?"RECUT_FILTER":"RECUT_TOTAL")}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(et.x))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-sarin"]],decls:80,vars:35,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"nav-tabs-custom"],[1,"nav","nav-tabs"],[1,"active"],["href","#details","data-toggle","tab"],["href","#report","data-toggle","tab"],["href","#history","data-toggle","tab"],[1,"pull-right","header",2,"line-height","1.5em !important"],[1,"btn","btn-sm","btn-primary","mr-5",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-download"],[1,"tab-content",2,"min-height","500px"],["id","report",1,"tab-pane"],[1,"col-sm-4"],[1,"table","table-responsive","table-bordered","table-condensed","table-striped","table-striped","text-center"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],["scope","col",1,"col-sm-auto","bg-lightred","p2","jc","w100"],["type","date",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],["scope","row",4,"ngFor","ngForOf"],["scope","row"],[3,"click"],[1,"fa","fa-plus-circle","text-green"],[1,"btn","btn-sm","btn-success","pull-right",3,"disabled","click"],["id","details",1,"tab-pane","active"],[1,"col-sm-12"],[1,"ag-theme-balham",2,"width","100%","height","80vh","font-weight","500",3,"rowData","columnDefs","defaultColDef","gridOptions","rowSelection","pinnedTopRowData","pinnedBottomRowData","gridReady","selectionChanged","filterChanged","rowDoubleClicked"],["id","history",1,"tab-pane"],[1,"table-container"],[1,"table","table-responsive","table-bordered","table-condensed","table-striped","table-striped","text-center","table-fixed-header"],["scope","col",1,"p2","jc","w100"],["type","month",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],["scope","col","class","col-sm-auto bg-lightblue",4,"ngFor","ngForOf"],[1,"bg-lightyellow"],[4,"ngFor","ngForOf"],["id","employee_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"employee","changed"],["id","sarin_entry_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"kapan","changed"],[1,"p2","jc","w70"],["type","number","appFocusNavigate","",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","name","ngModelChange"],["scope","col",1,"col-sm-auto","bg-lightblue"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),n._uU(7,"Kapans"),n.qZA()(),n.TgZ(8,"li")(9,"a",7),n._uU(10,"Reporting"),n.qZA()(),n.TgZ(11,"li")(12,"a",8),n._uU(13,"History"),n.qZA()(),n.TgZ(14,"li",9)(15,"button",10),n.NdJ("click",function(){return r.addKapan()}),n._UZ(16,"i",11),n._uU(17,"ADD KAPAN"),n.qZA(),n.TgZ(18,"button",12),n.NdJ("click",function(){return r.download()}),n._UZ(19,"i",13),n._uU(20,"DOWNLOAD"),n.qZA()()(),n.TgZ(21,"div",14)(22,"div",15)(23,"div",2)(24,"div",16)(25,"table",17)(26,"thead")(27,"tr",18)(28,"th",19),n._uU(29,"NAME"),n.qZA(),n.TgZ(30,"th",19),n._uU(31,"PCS"),n.qZA(),n.TgZ(32,"th",20)(33,"input",21),n.NdJ("change",function(a){return r.onDateChange(a)}),n.ALo(34,"momentDate"),n.qZA()()()(),n.TgZ(35,"tbody"),n.YNc(36,ok,9,7,"tr",22),n.qZA(),n.TgZ(37,"tfoot")(38,"tr",23)(39,"th")(40,"a",24),n.NdJ("click",function(){return r.addEmployee()}),n._UZ(41,"span",25),n.qZA()(),n.TgZ(42,"th"),n._uU(43),n.qZA(),n.TgZ(44,"th"),n._uU(45),n.ALo(46,"inr"),n.qZA()()()(),n.TgZ(47,"button",26),n.NdJ("click",function(){return r.submit()}),n._uU(48,"Save Changes"),n.qZA()()()(),n.TgZ(49,"div",27)(50,"div",2)(51,"div",28)(52,"ag-grid-angular",29),n.NdJ("gridReady",function(a){return r.onGridReady(a)})("selectionChanged",function(a){return r.onSelectionChanged(a)})("filterChanged",function(a){return r.onFilterChanged(a)})("rowDoubleClicked",function(a){return r.onRowDoubleClicked(a)}),n.qZA()()()(),n.TgZ(53,"div",30)(54,"div",2)(55,"div",28)(56,"div",31)(57,"table",32)(58,"thead")(59,"tr")(60,"th",33)(61,"input",34),n.NdJ("change",function(a){return r.onMonthChange(a)}),n.ALo(62,"momentDate"),n.qZA()(),n.YNc(63,rk,2,1,"th",35),n.TgZ(64,"th",19),n._uU(65,"Total"),n.qZA()(),n.TgZ(66,"tr",36)(67,"th"),n._uU(68,"Total"),n.qZA(),n.YNc(69,sk,5,14,"td",37),n.TgZ(70,"th"),n._uU(71),n.ALo(72,"contains"),n.ALo(73,"momentDate"),n.qZA()()(),n.TgZ(74,"tbody"),n.YNc(75,lk,8,11,"tr",22),n.qZA()()()()()()()()()()(),n.TgZ(76,"div",38)(77,"app-employee",39),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()(),n.TgZ(78,"div",40)(79,"app-sarin-entry",41),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()()),2&o&&(n.xp6(33),n.Q6J("value",n.xi3(34,19,r.today,"YYYY-MM-DD")),n.xp6(3),n.Q6J("ngForOf",r.list),n.xp6(7),n.Oqu(r.api.getSum(r.list,"than","")),n.xp6(2),n.Oqu(n.lcZ(46,22,r.api.getTotalSum(r.list,"than","rate"))),n.xp6(2),n.Q6J("disabled",!r.api.getTotalSum(r.list,"than","rate")),n.xp6(5),n.Q6J("rowData",r.rowData)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("gridOptions",r.gridOptions)("rowSelection",r.rowSelection)("pinnedTopRowData",r.selectedRow)("pinnedBottomRowData",r.pinnedRow),n.xp6(9),n.Q6J("value",n.xi3(62,24,r.month,"YYYY-MM")),n.xp6(2),n.Q6J("ngForOf",r.employees),n.xp6(6),n.Q6J("ngForOf",r.employees),n.xp6(2),n.Oqu(r.api.getSum(n.xi3(72,27,r.employeeWorks,n.VKq(33,Kc,n.xi3(73,30,r.month,"YYYY-MM"))),"than","")),n.xp6(4),n.Q6J("ngForOf",r.dates),n.xp6(2),n.Q6J("employee",r.employee),n.xp6(2),n.Q6J("kapan",r.kapan))},dependencies:[Ee.sg,te.Fj,te.wV,te.JJ,te.On,Ut,wo,Ji,nk,Oi.g,Xs.K,Rt.v,vi]})}return e})();function dk(e,i){if(1&e&&(n.TgZ(0,"tr",11)(1,"th"),n._uU(2),n.qZA(),n.TgZ(3,"th"),n._uU(4),n.qZA()()),2&e){const t=i.$implicit;n.xp6(2),n.Oqu(t.than),n.xp6(2),n.Oqu(t.weight)}}let uk=(()=>{class e{constructor(){this.laser={},this.list=[],this.changed=new n.vpe,this.loading=!1,this.item={}}submit(){this.changed.emit(this.list),$("#laser_entry_modal").modal("toggle")}onEnter(t){if(t){if(!this.item?.than||!this.item.weight)return;var o=Object.assign({},this.item);o.code=this.laser?.code,o.type=this.laser?.type,this.list.push(o),this.item={},$("#item_than").focus()}else $("#item_weight").focus()}onBackspace(t){if(!t&&!this.item?.than&&this.list.length>0)return this.item=this.list.pop(),void $("#item_weight").focus()}onKeyup(t,o){const r=t.code;"Backspace"==r&&this.onBackspace(o),("Enter"==r||"NumpadEnter"==r)&&this.onEnter(o)}static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-laser-entry"]],inputs:{laser:"laser",list:"list"},outputs:{changed:"changed"},decls:28,vars:6,consts:[[1,"modal-dialog"],[1,"modal-content","modal-sm"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body","no-padding"],[1,"table","table-responsive","table-hover","table-striped","table-bordered","table-condensed","text-center"],[1,"bg-lightred"],["scope","col",1,"col-sm-auto"],["scope","row",4,"ngFor","ngForOf"],["scope","row"],[1,"p2","jc"],["type","number","id","item_than","name","than",1,"form-control","input-sm","text-center","excel_input",3,"ngModel","ngModelChange","keyup"],["type","number","id","item_weight","name","weight",1,"form-control","input-sm","text-center","excel_input",3,"ngModel","ngModelChange","keyup"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button",1,"btn","btn-sm","btn-primary",3,"disabled","click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"table",7)(10,"thead")(11,"tr",8)(12,"th",9),n._uU(13,"Than"),n.qZA(),n.TgZ(14,"th",9),n._uU(15,"Weight"),n.qZA()()(),n.TgZ(16,"tbody"),n.YNc(17,dk,5,2,"tr",10),n.TgZ(18,"tr",11)(19,"td",12)(20,"input",13),n.NdJ("ngModelChange",function(a){return r.item.than=a})("keyup",function(a){return r.onKeyup(a,!1)}),n.qZA()(),n.TgZ(21,"td",12)(22,"input",14),n.NdJ("ngModelChange",function(a){return r.item.weight=a})("keyup",function(a){return r.onKeyup(a,!0)}),n.qZA()()()()()(),n.TgZ(23,"div",15)(24,"button",16),n._uU(25,"Cancel"),n.qZA(),n.TgZ(26,"button",17),n.NdJ("click",function(){return r.submit()}),n._uU(27,"Submit"),n.qZA()()()()),2&o&&(n.xp6(7),n.AsE("Add ",null==r.laser?null:r.laser.code," - ",null==r.laser?null:r.laser.type,""),n.xp6(10),n.Q6J("ngForOf",r.list),n.xp6(3),n.Q6J("ngModel",r.item.than),n.xp6(2),n.Q6J("ngModel",r.item.weight),n.xp6(4),n.Q6J("disabled",r.loading||!r.list.length))},dependencies:[Ee.sg,te.Fj,te.wV,te.JJ,te.On]})}return e})();function hk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",9)(1,"label",10),n._uU(2,"Issue Date"),n.qZA(),n.TgZ(3,"div",18)(4,"input",19),n.NdJ("change",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.onEnter("code"))}),n.qZA()()()}}function gk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",9)(1,"label",10),n._uU(2,"Date"),n.qZA(),n.TgZ(3,"div",18)(4,"input",20),n.NdJ("change",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.onEnter("code"))}),n.qZA()()()}}function pk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",9)(1,"label",10),n._uU(2,"Lot & Than"),n.qZA(),n.TgZ(3,"div",11)(4,"input",21),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw();return n.KtG(s.kapan.lot=r)})("keyup.enter",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.onEnter("than"))}),n.qZA()(),n.TgZ(5,"div",13)(6,"input",22),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw();return n.KtG(s.kapan.than=r)})("keyup.enter",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.submit())}),n.qZA()()()}if(2&e){const t=n.oxw();n.xp6(4),n.Q6J("ngModel",t.kapan.lot),n.xp6(2),n.Q6J("ngModel",t.kapan.than)}}function fk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",9)(1,"label",10),n._uU(2,"Than & Weight"),n.qZA(),n.TgZ(3,"div",11)(4,"input",22),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw();return n.KtG(s.kapan.than=r)})("keyup.enter",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.onEnter("weight"))}),n.qZA()(),n.TgZ(5,"div",13)(6,"input",23),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw();return n.KtG(s.kapan.weight=r)})("keyup.enter",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.submit())}),n.qZA()()()}if(2&e){const t=n.oxw();n.xp6(4),n.Q6J("ngModel",t.kapan.than),n.xp6(2),n.Q6J("ngModel",t.kapan.weight)}}let mk=(()=>{class e{constructor(t){this.api=t,this.isRecut=!1,this.kapan={},this.changed=new n.vpe,this.loading=!1}submit(){console.log(this.kapan),this.kapan?.code&&this.kapan?.employee&&this.kapan?.than&&(this.isRecut?this.kapan.date=moment($("#cut_date")).format("YYYY-MM-DD"):this.kapan.issueDate=moment($("#cut_issue_date")).format("YYYY-MM-DD"),this.kapan.employee=this.kapan.employee.toUpperCase(),this.kapan.code=this.kapan.code.toUpperCase(),this.changed.emit(this.kapan),$("#kapan_modal").modal("toggle"))}onEnter(t){$("#kapan_"+t).focus()}getKapan(t){var o=this;return(0,ee.Z)(function*(){if(!o.isRecut){var r=t.target.value?.toUpperCase(),s=yield o.api.postInfo("stock/query",{srno:r});if(!s)return void(o.kapan={code:r});o.kapan.than=s?.rpcs,o.kapan.employee=s?.employee,o.kapan.weight=s?.actweight}})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-kapan"]],inputs:{isRecut:"isRecut",kapan:"kapan"},outputs:{changed:"changed"},decls:28,vars:17,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-2","p-r-0"],["type","text","name","code","id","kapan_code",1,"form-control",3,"ngModel","value","ngModelChange","keyup.enter","input"],[1,"col-sm-2","p-l-5"],["type","text","name","employee","id","kapan_employee",1,"form-control",3,"ngModel","value","ngModelChange","keyup.enter"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button",1,"btn","btn-sm",3,"disabled","click"],[1,"col-sm-4"],["type","date","id","cut_issue_date",1,"form-control",3,"change"],["type","date","id","cut_date",1,"form-control",3,"change"],["type","number","name","lot","id","kapan_lot",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],["type","number","name","than","id","kapan_than",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],["type","number","name","weight","id","kapan_weight",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7),n.YNc(10,hk,5,0,"div",8),n.YNc(11,gk,5,0,"div",8),n.TgZ(12,"div",9)(13,"label",10),n._uU(14,"Cut No & Employee"),n.qZA(),n.TgZ(15,"div",11)(16,"input",12),n.NdJ("ngModelChange",function(a){return r.kapan.code=a})("keyup.enter",function(){return r.onEnter("employee")})("input",function(a){return r.getKapan(a)}),n.ALo(17,"uppercase"),n.qZA()(),n.TgZ(18,"div",13)(19,"input",14),n.NdJ("ngModelChange",function(a){return r.kapan.employee=a})("keyup.enter",function(){return r.onEnter(r.isRecut?"lot":"than")}),n.ALo(20,"uppercase"),n.qZA()()(),n.YNc(21,pk,7,2,"div",8),n.YNc(22,fk,7,2,"div",8),n.qZA()(),n.TgZ(23,"div",15)(24,"button",16),n._uU(25,"Cancel"),n.qZA(),n.TgZ(26,"button",17),n.NdJ("click",function(){return r.submit()}),n._uU(27),n.qZA()()()()),2&o&&(n.xp6(7),n.Oqu(r.kapan.id?"Edit Kapan":"Add Kapan"),n.xp6(3),n.Q6J("ngIf",!r.isRecut),n.xp6(1),n.Q6J("ngIf",r.isRecut),n.xp6(5),n.Q6J("ngModel",r.kapan.code)("value",n.lcZ(17,13,null==r.kapan?null:r.kapan.code)),n.xp6(3),n.Q6J("ngModel",r.kapan.employee)("value",n.lcZ(20,15,r.kapan.employee)),n.xp6(2),n.Q6J("ngIf",r.isRecut),n.xp6(1),n.Q6J("ngIf",!r.isRecut),n.xp6(4),n.Tol(r.kapan.id?"btn-success":"btn-primary"),n.Q6J("disabled",r.loading||!(null!=r.kapan&&r.kapan.code)||!(null!=r.kapan&&r.kapan.employee)||!(null!=r.kapan&&r.kapan.than)),n.xp6(1),n.Oqu(r.kapan.id?"Update":"Submit"))},dependencies:[Ee.O5,te._Y,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ee.gd]})}return e})();var Jv=Oe(5822);function vk(e,i){if(1&e&&(n.TgZ(0,"option"),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t)}}function Ck(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",27),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.removeLsWork(r,s.k))}),n._UZ(1,"span",28),n.qZA()}}function wk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",11)(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td",15)(6,"select",21),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.remarks=r)})("change",function(r){n.CHM(t);const s=n.oxw();return n.KtG(s.onChange(r))}),n._UZ(7,"option"),n.YNc(8,vk,2,1,"option",17),n.qZA()(),n.TgZ(9,"td",18)(10,"input",22),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.than=r)}),n.qZA()(),n.TgZ(11,"td",18)(12,"input",22),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.weight=r)}),n.qZA()(),n.TgZ(13,"td",18)(14,"input",23),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.pcs=r)}),n.qZA()(),n.TgZ(15,"td",18)(16,"input",24),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.employee=r)})("keydown.enter",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.updateLsWork(s,a.k))})("input",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.check(s))}),n.ALo(17,"uppercase"),n.qZA()(),n.TgZ(18,"td",18),n._UZ(19,"input",25),n.ALo(20,"momentDate"),n.qZA(),n.TgZ(21,"td"),n.YNc(22,Ck,2,0,"a",26),n.qZA()()}if(2&e){const t=i.$implicit,o=i.index,r=n.oxw();let s;n.Tol(r.compare(t)?"bg-lightred":""),n.xp6(2),n.Oqu(o+1),n.xp6(2),n.Oqu(r.k.code),n.xp6(2),n.MGl("name","remarks_w_",o,""),n.Q6J("ngModel",t.remarks),n.xp6(2),n.Q6J("ngForOf",r.tlist),n.xp6(2),n.MGl("name","than_w_",o,""),n.Q6J("ngModel",t.than),n.xp6(2),n.MGl("name","weight_w_",o,""),n.Q6J("ngModel",t.weight),n.xp6(2),n.MGl("name","pcs_w_",o,"")("id","pcs_w_",t.id,""),n.Q6J("ngModel",t.pcs),n.xp6(2),n.MGl("name","employee_w_",o,"")("id","emp_w_",t.id,""),n.Q6J("ngModel",t.employee)("value",n.lcZ(17,21,null==t?null:t.employee)),n.xp6(3),n.MGl("id","date_w_",t.id,""),n.Q6J("value",n.xi3(20,23,null!==(s=null==t?null:t.date)&&void 0!==s?s:r.today,"YYYY-MM-DD")),n.xp6(3),n.Q6J("ngIf",r.k.LaserWork.length==o+1)}}function yk(e,i){if(1&e&&(n.TgZ(0,"option"),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t)}}const Kv=function(){return{employee:null}};let bk=(()=>{class e{constructor(t){this.api=t,this.changed=new n.vpe,this.k={},this.lswork={},this.old_list=[],this.tlist=["1TOP","2TOP","3TOP","4TOP","5TOP","6TOP","1PIE","2PIE","3PIE","4PIE","4P","MIX","LOOSE","GISSY"],this.today=_e().format("YYYY-MM-DD")}getRdiff(t){return!M.round(t,0)}addLsWork(t){var o=this;return(0,ee.Z)(function*(){if(console.log(o.lswork),o.lswork?.than&&o.lswork?.weight&&o.lswork?.remarks?.length){o.lswork.laserId=t.id;try{var r=Object.assign({},o.lswork);yield o.api.postInfo("laser-work",r),o.lswork={};var s=yield o.api.getInfo("laser?id="+t.id);t.LaserWork=s?.LaserWork??[],o.old_list=M.cloneDeep(s?.LaserWork),toastr.success("Update Successfully!"),$("#ls_remarks").click()}catch{toastr.error("Something Went Wrong!")}}})()}updateLsWork(t,o){var r=this;return(0,ee.Z)(function*(){try{var s=M.cloneDeep(t);s.date=$("#date_w_"+t.id).val()+"T00:00:00.000Z",s.employee=s?.employee?s.employee?.toString()?.toUpperCase():null,yield r.api.putInfo("laser-work",s);var a=yield r.api.getInfo("laser?id="+o.id),l=r.k.LaserWork.findIndex(c=>c.id==t.id);r.k.LaserWork[l]=s,r.old_list=M.cloneDeep(a?.LaserWork),toastr.success("Update Successfully!")}catch{toastr.error("Something Went Wrong!")}setTimeout(()=>$("#emp_w_"+t.id).focus(),1e3)})()}removeLsWork(t,o){var r=this;return(0,ee.Z)(function*(){try{var s=Object.assign({},t);if(!(yield r.api.removeInfo("laser-work/"+s.id)))return;toastr.success("Update Successfully!");var l=yield r.api.getInfo("laser?id="+o.id);o.LaserWork=l?.LaserWork??[],r.old_list=M.cloneDeep(l?.LaserWork)}catch{toastr.error("Something Went Wrong!")}})()}onChange(t){console.log(t.target.value),$("#ls_than").focus()}onEnter(t){$("#ls_weight").focus()}check(t){""==t.employee&&(t.employee=null)}compare(t){var o=this.old_list?.find(r=>r.id==t.id);return!M.isEqual(t,o)}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-laser-form"]],inputs:{k:"k",lswork:"lswork",old_list:"old_list"},outputs:{changed:"changed"},decls:71,vars:31,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body",2,"min-height","200px"],[1,"row"],[1,"col-sm-12"],[1,"table-container"],[1,"table","table-condensed","table-responsive","table-bordered","table-striped","text-center","table-fixed-header"],["scope","row"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],["scope","row",3,"class",4,"ngFor","ngForOf"],[1,"p2","jc"],["appFocusNavigate","","name","remarks",1,"form-control","input-sm","text-center","excel_input",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"p2","jc","w100"],["type","number","name","than","appFocusNavigate","","id","ls_than",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["type","number","name","weight","id","ls_weight",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange","keyup.enter"],["appFocusNavigate","",1,"form-control","input-sm","text-center","select2","excel_input",3,"ngModel","name","ngModelChange","change"],["type","number","appFocusNavigate","",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","name","ngModelChange"],["type","number","appFocusNavigate","",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","name","id","ngModelChange"],["type","text","appFocusNavigate","",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","name","id","value","ngModelChange","keydown.enter","input"],["type","date","appFocusNavigate","",1,"form-control","input-sm","excel_input","text-center",3,"id","value"],[3,"click",4,"ngIf"],[3,"click"],[1,"fa","fa-minus-circle","text-red"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"table",10)(13,"thead")(14,"tr",11)(15,"th"),n._uU(16),n.qZA(),n.TgZ(17,"th"),n._uU(18),n.ALo(19,"wt"),n.qZA(),n._UZ(20,"th"),n.TgZ(21,"th"),n._uU(22),n.qZA(),n.TgZ(23,"th"),n._uU(24),n.ALo(25,"wt"),n.qZA(),n.TgZ(26,"th"),n._uU(27),n.qZA(),n.TgZ(28,"th"),n._uU(29),n.ALo(30,"nofilter"),n.qZA(),n.TgZ(31,"th"),n._uU(32),n.ALo(33,"nofilter"),n.qZA()(),n.TgZ(34,"tr",12)(35,"th",13),n._uU(36,"S.No"),n.qZA(),n.TgZ(37,"th",13),n._uU(38,"Kapan"),n.qZA(),n.TgZ(39,"th",13),n._uU(40,"Type"),n.qZA(),n.TgZ(41,"th",13),n._uU(42,"Than"),n.qZA(),n.TgZ(43,"th",13),n._uU(44,"Weight"),n.qZA(),n.TgZ(45,"th",13),n._uU(46,"Pcs"),n.qZA(),n.TgZ(47,"th",13),n._uU(48,"Employee"),n.qZA(),n.TgZ(49,"th",13),n._uU(50,"Date"),n.qZA(),n.TgZ(51,"th",13),n._uU(52,"#"),n.qZA()()(),n.TgZ(53,"tbody"),n.YNc(54,wk,23,26,"tr",14),n.TgZ(55,"tr",11),n._UZ(56,"td"),n.TgZ(57,"td"),n._uU(58),n.qZA(),n.TgZ(59,"td",15)(60,"select",16),n.NdJ("ngModelChange",function(a){return r.lswork.remarks=a})("change",function(a){return r.onChange(a)}),n._UZ(61,"option"),n.YNc(62,yk,2,1,"option",17),n.qZA()(),n.TgZ(63,"td",18)(64,"input",19),n.NdJ("ngModelChange",function(a){return r.lswork.than=a}),n.qZA()(),n.TgZ(65,"td",18)(66,"input",20),n.NdJ("ngModelChange",function(a){return r.lswork.weight=a})("keyup.enter",function(){return r.addLsWork(r.k)}),n.qZA()(),n._UZ(67,"td",18)(68,"td",18)(69,"td",18)(70,"td"),n.qZA()()()()()()()()()),2&o&&(n.xp6(7),n.AsE("",null==r.k?null:r.k.code,"-",null==r.k?null:r.k.employee,""),n.xp6(9),n.Oqu(r.k.than),n.xp6(2),n.Oqu(n.lcZ(19,19,r.k.weight)),n.xp6(3),n.Tol(r.getRdiff(r.api.getSum(r.k.LaserWork,"than")-r.k.than)?"bg-lightgreen":"bg-lightred"),n.xp6(1),n.hij(" ",r.api.getSum(r.k.LaserWork,"than"),""),n.xp6(1),n.Tol(r.getRdiff(r.api.getSum(r.k.LaserWork,"weight")-r.k.weight)?"bg-lightgreen":"bg-lightred"),n.xp6(1),n.hij(" ",n.lcZ(25,21,r.api.getSum(r.k.LaserWork,"weight")),""),n.xp6(3),n.Oqu(r.api.getSum(r.k.LaserWork,"pcs")),n.xp6(2),n.Oqu(r.api.getCount(n.xi3(30,23,r.k.LaserWork,n.DdM(29,Kv)))),n.xp6(3),n.hij("PENDING: ",r.k.than-r.api.getSum(n.xi3(33,26,r.k.LaserWork,n.DdM(30,Kv)),"than"),""),n.xp6(22),n.Q6J("ngForOf",r.k.LaserWork),n.xp6(4),n.Oqu(r.k.code),n.xp6(2),n.Q6J("ngModel",r.lswork.remarks),n.xp6(2),n.Q6J("ngForOf",r.tlist),n.xp6(2),n.Q6J("ngModel",r.lswork.than),n.xp6(2),n.Q6J("ngModel",r.lswork.weight))},dependencies:[Ee.sg,Ee.O5,te.YN,te.Kr,te.Fj,te.wV,te.EJ,te.JJ,te.On,Ut,Ee.gd,Bt.J,Jv.C,Rt.v]})}return e})();function Sk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",51),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.editLs(r))}),n._UZ(1,"span",54),n.qZA()}}function _k(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.ALo(2,"momentDate"),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(n.xi3(2,1,t.closeDate,"DD/MM/YYYY"))}}function xk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",58),n.NdJ("click",function(){n.CHM(t);const r=n.oxw(2).$implicit,s=n.oxw();return n.KtG(s.accept(r))}),n._UZ(1,"span",59),n.qZA()}if(2&e){const t=n.oxw(2).$implicit;n.Q6J("hidden",null==t?null:t.closeDate)}}function Ak(e,i){if(1&e&&(n._UZ(0,"input",60),n.ALo(1,"momentDate")),2&e){const t=n.oxw(2).$implicit;n.MGl("id","date_k_",t.id,""),n.Q6J("value",n.xi3(1,2,null==t?null:t.closeDate,"YYYY-MM-DD"))}}function kk(e,i){if(1&e&&(n.TgZ(0,"td",55),n.YNc(1,xk,2,1,"a",56),n.YNc(2,Ak,2,5,"input",57),n.qZA()),2&e){const t=n.oxw().$implicit,o=n.oxw();n.xp6(1),n.Q6J("ngIf",o.api.getSum(t.LaserWork,"than")==t.than),n.xp6(1),n.Q6J("ngIf",null==t?null:t.closeDate)}}function Tk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",51),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.removeLs(r))}),n._UZ(1,"span",61),n.qZA()}}function Dk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",51),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.updateLs(r))}),n._UZ(1,"span",62),n.qZA()}}function Fk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",51),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.revertLs(r))}),n._UZ(1,"span",63),n.qZA()}}const Cl=function(){return{employee:null}};function Rk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",49)(1,"td"),n.YNc(2,Sk,2,0,"a",50),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"momentDate"),n.qZA(),n.TgZ(6,"td")(7,"a",51),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.openLaserForm(s))}),n._uU(8),n.qZA()(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.ALo(15,"wt"),n.qZA(),n.TgZ(16,"td"),n._uU(17),n.qZA(),n.TgZ(18,"td"),n._uU(19),n.qZA(),n.TgZ(20,"td"),n._uU(21),n.ALo(22,"nofilter"),n.qZA(),n.TgZ(23,"td"),n._uU(24),n.ALo(25,"filter"),n.qZA(),n.TgZ(26,"td"),n._uU(27),n.ALo(28,"wt"),n.qZA(),n.TgZ(29,"td"),n._uU(30),n.qZA(),n.YNc(31,_k,3,4,"td",52),n.YNc(32,kk,3,2,"td",53),n.TgZ(33,"td"),n._uU(34),n.qZA(),n.TgZ(35,"td"),n.YNc(36,Tk,2,0,"a",50),n.YNc(37,Dk,2,0,"a",50),n.YNc(38,Fk,2,0,"a",50),n.qZA()()}if(2&e){const t=i.$implicit,o=n.oxw();let r;n.Tol(t.status?"bg-lightgreen":""),n.xp6(2),n.Q6J("ngIf",!(null!=t&&t.closeDate)),n.xp6(2),n.Oqu(n.xi3(5,20,t.issueDate,"DD/MM/YYYY")),n.xp6(4),n.Oqu(t.code),n.xp6(2),n.Oqu(t.employee),n.xp6(2),n.Oqu(t.than),n.xp6(2),n.Oqu(n.lcZ(15,23,t.weight)),n.xp6(3),n.Oqu(o.api.getSum(t.LaserWork,"than")),n.xp6(2),n.Oqu(t.LaserWork.length),n.xp6(2),n.Oqu(o.api.getCount(n.xi3(22,25,t.LaserWork,n.DdM(33,Cl)))),n.xp6(3),n.Oqu(o.api.getCount(n.xi3(25,28,t.LaserWork,n.DdM(34,Cl)))),n.xp6(3),n.Oqu(n.lcZ(28,31,o.api.getSum(t.LaserWork,"weight"))),n.xp6(3),n.Oqu(o.api.getSum(t.LaserWork,"pcs")),n.xp6(1),n.Q6J("ngIf",t.status),n.xp6(1),n.Q6J("ngIf",!t.status),n.xp6(2),n.Oqu(o.api.getDaysDiff(null==t?null:t.issueDate,null!==(r=null==t?null:t.closeDate)&&void 0!==r?r:o.dtoday)),n.xp6(2),n.Q6J("ngIf",!t.LaserWork.length&&!t.status),n.xp6(1),n.Q6J("ngIf",!t.status&&(null==t?null:t.closeDate)),n.xp6(1),n.Q6J("ngIf",t.status)}}function Mk(e,i){if(1&e&&(n.TgZ(0,"th",70),n._uU(1),n.ALo(2,"momentDate"),n.qZA()),2&e){const t=i.$implicit,o=i.index,r=n.oxw(2);n.Udp("background-color",r.colors[o]),n.xp6(1),n.Oqu(n.xi3(2,3,t,"MMM YYYY"))}}function Ek(e,i){if(1&e&&(n.TgZ(0,"th",47),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t)}}function Pk(e,i){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const t=i.$implicit,o=i.index,r=n.oxw(3);n.Udp("background-color",r.colors[r.api.m3(o)]),n.xp6(1),n.Oqu(t)}}function Lk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr")(1,"th")(2,"a",51),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw(2);return n.KtG(a.openEmpHist(s))}),n._uU(3),n.qZA()(),n.YNc(4,Pk,2,3,"th",71),n.qZA()}if(2&e){const t=i.$implicit,o=n.oxw(2);n.xp6(3),n.Oqu(t),n.xp6(1),n.Q6J("ngForOf",o.empHeader(t))}}function Ik(e,i){if(1&e&&(n.TgZ(0,"div",14)(1,"table",64)(2,"thead")(3,"tr")(4,"th",65),n._uU(5,"Name"),n.qZA(),n.YNc(6,Mk,3,6,"th",66),n.qZA(),n.TgZ(7,"tr")(8,"th",67),n._uU(9,"Total (Than/Weight/Pcs)"),n.qZA(),n.YNc(10,Ek,2,1,"th",68),n.qZA()(),n.TgZ(11,"tbody"),n.YNc(12,Lk,5,2,"tr",69),n.qZA()()()),2&e){const t=n.oxw();n.xp6(6),n.Q6J("ngForOf",t.monthsArray),n.xp6(4),n.Q6J("ngForOf",t.monthsHeader),n.xp6(2),n.Q6J("ngForOf",t.emp_list)}}function Ok(e,i){if(1&e&&(n.TgZ(0,"tr",49)(1,"th"),n._uU(2),n.ALo(3,"momentDate"),n.qZA(),n.TgZ(4,"td"),n._uU(5),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.ALo(8,"wt"),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(n.xi3(3,4,t,"DD/MM/YYYY")),n.xp6(3),n.Oqu(o.getEmpDTCountByName(o.selEmp,t,"than")),n.xp6(2),n.Oqu(n.lcZ(8,7,o.getEmpDTCountByName(o.selEmp,t,"weight"))),n.xp6(3),n.Oqu(o.getEmpDTCountByName(o.selEmp,t,"pcs"))}}const ea=function(e,i){return{code:e,employee:i}};let Nk=(()=>{class e{constructor(t){this.api=t,this.user=JSON.parse(localStorage.getItem("user")),this.today=_e().add(-1,"days").format("DD/MM/YYYY"),this.dtoday=_e().format("YYYY-MM-DD"),this.scode="",this.pcode="",this.employees=[],this.employee={},this.markings=[],this.marking={},this.dates=[],this.kapan={},this.kapans=[],this.lswork={},this.laser={},this.laser_form={},this.ls_work={},this.laser_list=[],this.empty_list=[],this.lsworks=[],this.laser_work=[],this.emp_history=[],this.emp_list=[],this.viewHst=!1,this.monthsArray=[],this.monthsHeader=[],this.selEmp="",this.colors=["#d7c9f2","#e9e4f2","#d7c9f2","#e9e4f2","#d7c9f2","#e9e4f2","#d7c9f2","#e9e4f2","#b2b0eb","#a59deb"],this.month=_e().format("YYYY-MM")}ngOnInit(){var t=this;return(0,ee.Z)(function*(){t.dates=t.api.getMonthDays(t.month),$(function(){$("#ls_remarks").select2()});let o=_e();t.monthsArray=M.range(0,3).map(r=>o.clone().subtract(r,"months").format("YYYY-MM-DD")),t.reload(!0)})()}loadHistory(){var t=this;return(0,ee.Z)(function*(){var o=yield t.api.getInfo("laser-work/history");for(var r of(t.emp_history=o.result,t.emp_list=o.list,t.monthsHeader=[],t.monthsArray)){var s=t.emp_history.filter(l=>_e(l.date).format("YYYY-MM")==_e(r).format("YYYY-MM")),a=[M.sum(s.map(l=>l._sum.than)),M.round(M.sum(s.map(l=>l._sum.weight)),2),M.sum(s.map(l=>l._sum.pcs))];t.monthsHeader=[...t.monthsHeader,...a]}t.viewHst=!0})()}empHeader(t){var o=[];for(var r of this.monthsArray){var s=this.emp_history.filter(l=>l.employee==t&&_e(l.date).format("YYYY-MM")==_e(r).format("YYYY-MM")),a=[M.sum(s.map(l=>l._sum.than)),M.round(M.sum(s.map(l=>l._sum.weight)),2),M.sum(s.map(l=>l._sum.pcs))];o=[...o,...a]}return o}reload(t){var o=this;return(0,ee.Z)(function*(){o.kapans=yield o.api.getInfo("laser")})()}submit(){}addMarking(){this.marking={},$("#sarin_marking_modal").modal("toggle")}editMarking(t){this.marking=Object.assign({},t),$("#sarin_marking_modal").modal("toggle")}getEmpDTCountByName(t,o,r){var s=this.emp_history.filter(a=>a.employee==t&&(o?.length?_e(a.date).format("YYYY-MM-DD")==o:_e(a.date).format("YYYY-MM")==this.month));return M.sum(s.map(a=>a._sum[r]))}getEmpCount(t,o){if(""==o){var r=this.emp_history.filter(a=>a.employee==t);return M.sum(r.map(a=>a._sum.pcs))}if(""==t){var s=this.emp_history.filter(l=>_e(l.date).format("YYYY-MM")==o);return M.sum(s.map(l=>l._sum.pcs))+"-"+M.sum(s.map(l=>l._sum.than))+"-"+M.round(M.sum(s.map(l=>l._sum.weight)),2)}return s=this.emp_history.filter(a=>a.employee==t&&_e(a.date).format("YYYY-MM")==o),M.sum(s.map(a=>a._sum.pcs))+"-"+M.sum(s.map(a=>a._sum.than))+"-"+M.round(M.sum(s.map(a=>a._sum.weight)),2)}addLaserEntry(t,o){this.laser={code:t.code,type:o},this.empty_list=[],$("#laser_entry_modal").modal("toggle")}addLaserItem(t){var o=Object.assign([],t);this.laser_list=[...this.laser_list,...o]}accept(t){t.closeDate=_e().format("YYYY-MM-DD")}addKapan(){this.kapan={},$("#cut_issue_date").val(_e().format("YYYY-MM-DD")),$("#kapan_modal").modal("toggle")}addCut(t){var o=this;return(0,ee.Z)(function*(){var r=Object.assign({},t);r.issueDate=r.issueDate+"T00:00:00.000Z";try{delete r?.LaserWork,r.id?yield o.api.putInfo("laser",r):yield o.api.postInfo("laser",r),toastr.success("Update Successfully!"),o.kapans=yield o.api.getInfo("laser")}catch{toastr.error("Something Went Wrong!")}})()}updateLs(t){var o=this;return(0,ee.Z)(function*(){if(console.log($("#date_k_"+t.id).val()),$("#date_k_"+t.id).val()?.length){var r=Object.assign({},t);try{r.closeDate=$("#date_k_"+t.id).val()+"T00:00:00.000Z",yield o.api.putInfo("laser",{id:r.id,closeDate:r.closeDate,status:!0}),o.kapans=yield o.api.getInfo("laser"),toastr.success("Update Successfully!")}catch{toastr.error("Something Went Wrong!")}}else toastr.error("Please fill manditory fileds")})()}revertLs(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=o.user.pin)return void toastr.warning("Invalid PIN");try{yield o.api.putInfo("laser",{id:t.id,closeDate:null,status:!1}),o.kapans=yield o.api.getInfo("laser"),toastr.success("Update Successfully!")}catch{toastr.error("Something Went Wrong!")}}}})()}removeLs(t){var o=this;return(0,ee.Z)(function*(){try{if(!(yield o.api.removeInfo("laser/"+t.id)))return;toastr.success("Update Successfully!"),o.kapans=yield o.api.getInfo("laser")}catch{toastr.error("Something Went Wrong!")}})()}openLaserForm(t){var o=this;return(0,ee.Z)(function*(){var r=yield o.api.getInfo("laser?id="+t.id);o.ls_work={},o.laser_form=r,o.laser_work=M.cloneDeep(r?.LaserWork),$("#laser_form_modal").modal("toggle")})()}editLs(t){this.kapan=Object.assign({},t),$("#cut_issue_date").val(_e(t.issueDate).format("YYYY-MM-DD")),$("#kapan_modal").modal("toggle")}openEmpHist(t){this.selEmp=t,$("#emp_hist_title").text(t),$("#emp_history_modal").modal("toggle")}onMonthChange(t){t.target.value?.length&&(this.month=t.target.value,this.dates=this.api.getMonthDays(this.month))}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-laser"]],decls:132,vars:66,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"nav-tabs-custom"],[1,"nav","nav-tabs"],[1,"active"],["href","#report","data-toggle","tab"],["href","#history","data-toggle","tab",3,"click"],[1,"pull-right"],[1,"text-green",3,"click"],[1,"fa","fa-plus-circle","text-green"],[1,"tab-content",2,"min-height","500px"],["id","report",1,"tab-pane","active"],[1,"table-container"],[1,"table","table-condensed","table-bordered","table-hover","table-responsive","table-striped","text-center","table-fixed-header"],["scope","col",1,"col-sm-auto"],[1,"p2","jc","w70"],["name","scode",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"p2","jc","w50"],["name","pcode",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["scope","col",1,"col-sm-auto","bg-lightred"],["scope","col","colspan","2",1,"col-sm-auto","bg-lightred"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto","w50"],["scope","row",3,"class",4,"ngFor","ngForOf"],["id","history",1,"tab-pane"],["class","table-container",4,"ngIf"],["id","employee_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"employee","changed"],["id","laser_entry_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"laser","list","changed"],["id","kapan_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"kapan","changed"],["id","laser_form_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"k","lswork","old_list"],["id","emp_history_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["id","emp_hist_title",1,"modal-title"],[1,"modal-body"],[1,"table","table-condensed","table-striped","table-bordered","table-hover","text-center","table-fixed-header"],["scope","col",1,"p2","jc","w100"],["type","month",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],[1,"bg-lightyellow"],["scope","row",4,"ngFor","ngForOf"],["scope","row"],[3,"click",4,"ngIf"],[3,"click"],[4,"ngIf"],["class","p2 jc w100",4,"ngIf"],[1,"fa","fa-edit","text-green"],[1,"p2","jc","w100"],[3,"hidden","click",4,"ngIf"],["type","date","class","form-control input-sm excel_input text-center",3,"id","value",4,"ngIf"],[3,"hidden","click"],[1,"fa","fa-thumbs-up","text-green"],["type","date",1,"form-control","input-sm","excel_input","text-center",3,"id","value"],[1,"fa","fa-minus-circle","text-red"],[1,"fa","fa-check","text-green"],[1,"fa","fa-repeat","text-yellow"],[1,"table","table-responsive","table-bordered","table-hover","table-condensed","table-striped","text-center","table-fixed-header"],["scope","col",1,"bg-lightblue"],["scope","col","class","col-sm-3","colspan","3",3,"background-color",4,"ngFor","ngForOf"],["scope","col",1,"col-sm-auto","bg-lightyellow"],["class","bg-lightyellow",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col","colspan","3",1,"col-sm-3"],[3,"background-color",4,"ngFor","ngForOf"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),n._uU(8,"Summary"),n.qZA()(),n.TgZ(9,"li")(10,"a",8),n.NdJ("click",function(){return r.loadHistory()}),n._uU(11,"History"),n.qZA()(),n.TgZ(12,"li",9)(13,"a",10),n.NdJ("click",function(){return r.addKapan()}),n._UZ(14,"i",11),n._uU(15," Add Cut"),n.qZA()()(),n.TgZ(16,"div",12)(17,"div",13)(18,"div",2)(19,"div",3)(20,"div",14)(21,"table",15)(22,"thead")(23,"tr"),n._UZ(24,"th",16)(25,"th",16),n.TgZ(26,"th",17)(27,"input",18),n.NdJ("ngModelChange",function(a){return r.scode=a}),n.qZA()(),n.TgZ(28,"th",19)(29,"input",20),n.NdJ("ngModelChange",function(a){return r.pcode=a}),n.qZA()(),n.TgZ(30,"th",16),n._uU(31),n.ALo(32,"contains"),n.qZA(),n._UZ(33,"th",16),n.TgZ(34,"th",16),n._uU(35),n.ALo(36,"contains"),n.qZA(),n.TgZ(37,"th",16),n._uU(38),n.ALo(39,"contains"),n.qZA(),n.TgZ(40,"th",16),n._uU(41),n.ALo(42,"contains"),n.qZA(),n.TgZ(43,"th",16),n._uU(44),n.ALo(45,"contains"),n.qZA(),n._UZ(46,"th",16)(47,"th",16),n.TgZ(48,"th",21),n._uU(49,"PENDING"),n.qZA(),n.TgZ(50,"th",22),n._uU(51),n.qZA()(),n.TgZ(52,"tr",23)(53,"th",24),n._uU(54,"#"),n.qZA(),n.TgZ(55,"th",16),n._uU(56,"Issue Date"),n.qZA(),n.TgZ(57,"th",16),n._uU(58,"Kapan"),n.qZA(),n.TgZ(59,"th",16),n._uU(60,"Name"),n.qZA(),n.TgZ(61,"th",16),n._uU(62,"Than"),n.qZA(),n.TgZ(63,"th",16),n._uU(64,"Weight"),n.qZA(),n.TgZ(65,"th",16),n._uU(66,"Lot Than"),n.qZA(),n.TgZ(67,"th",16),n._uU(68,"Lot Count"),n.qZA(),n.TgZ(69,"th",16),n._uU(70,"Jama"),n.qZA(),n.TgZ(71,"th",16),n._uU(72,"Pending"),n.qZA(),n.TgZ(73,"th",16),n._uU(74,"Lot Weight"),n.qZA(),n.TgZ(75,"th",16),n._uU(76,"Pcs"),n.qZA(),n.TgZ(77,"th",16),n._uU(78,"Close Date"),n.qZA(),n.TgZ(79,"th",16),n._uU(80,"Days"),n.qZA(),n.TgZ(81,"th",16),n._uU(82,"#"),n.qZA()()(),n.TgZ(83,"tbody"),n.YNc(84,Rk,39,35,"tr",25),n.ALo(85,"contains"),n.qZA()()()()()(),n.TgZ(86,"div",26)(87,"div",2)(88,"div",3),n.YNc(89,Ik,13,3,"div",27),n.qZA()()()()()()()()(),n.TgZ(90,"div",28)(91,"app-employee",29),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()(),n.TgZ(92,"div",30)(93,"app-laser-entry",31),n.NdJ("changed",function(a){return r.addLaserItem(a)}),n.qZA()(),n.TgZ(94,"div",32)(95,"app-kapan",33),n.NdJ("changed",function(a){return r.addCut(a)}),n.qZA()(),n.TgZ(96,"div",34),n._UZ(97,"app-laser-form",35),n.qZA(),n.TgZ(98,"div",36)(99,"div",37)(100,"div",38)(101,"div",39)(102,"button",40)(103,"span",41),n._uU(104,"\xd7"),n.qZA()(),n._UZ(105,"h4",42),n.qZA(),n.TgZ(106,"div",43)(107,"div",14)(108,"table",44)(109,"thead")(110,"tr",23)(111,"th",45)(112,"input",46),n.NdJ("change",function(a){return r.onMonthChange(a)}),n.ALo(113,"momentDate"),n.qZA()(),n.TgZ(114,"th",16),n._uU(115,"THAN"),n.qZA(),n.TgZ(116,"th",16),n._uU(117,"WEIGHT"),n.qZA(),n.TgZ(118,"th",16),n._uU(119,"PCS"),n.qZA()(),n.TgZ(120,"tr",47)(121,"th"),n._uU(122,"Total"),n.qZA(),n.TgZ(123,"td"),n._uU(124),n.qZA(),n.TgZ(125,"td"),n._uU(126),n.ALo(127,"wt"),n.qZA(),n.TgZ(128,"td"),n._uU(129),n.qZA()()(),n.TgZ(130,"tbody"),n.YNc(131,Ok,11,9,"tr",48),n.qZA()()()()()()()),2&o&&(n.xp6(27),n.Q6J("ngModel",r.scode),n.xp6(2),n.Q6J("ngModel",r.pcode),n.xp6(2),n.Oqu(r.api.getSum(n.xi3(32,22,r.kapans,n.WLB(45,ea,r.scode,r.pcode)),"than")),n.xp6(4),n.Oqu(r.api.getSubSum(n.xi3(36,25,r.kapans,n.WLB(48,ea,r.scode,r.pcode)),"LaserWork","than")),n.xp6(3),n.Oqu(r.api.getSubCount(n.xi3(39,28,r.kapans,n.WLB(51,ea,r.scode,r.pcode)),"LaserWork")),n.xp6(3),n.Oqu(r.api.getSubCountByNoFilter(n.xi3(42,31,r.kapans,n.WLB(54,ea,r.scode,r.pcode)),"LaserWork",n.DdM(57,Cl))),n.xp6(3),n.Oqu(r.api.getSubCountByFilter(n.xi3(45,34,r.kapans,n.WLB(58,ea,r.scode,r.pcode)),"LaserWork",n.DdM(61,Cl))),n.xp6(7),n.Oqu(r.api.getSum(r.kapans,"than")-r.api.getSubSumNoFilter(r.kapans,"LaserWork",n.DdM(62,Cl),"than")),n.xp6(33),n.Q6J("ngForOf",n.xi3(85,37,r.kapans,n.WLB(63,ea,r.scode,r.pcode))),n.xp6(5),n.Q6J("ngIf",r.viewHst),n.xp6(2),n.Q6J("employee",r.employee),n.xp6(2),n.Q6J("laser",r.laser)("list",r.empty_list),n.xp6(2),n.Q6J("kapan",r.kapan),n.xp6(2),n.Q6J("k",r.laser_form)("lswork",r.ls_work)("old_list",r.laser_work),n.xp6(15),n.Q6J("value",n.xi3(113,40,r.month,"YYYY-MM")),n.xp6(12),n.Oqu(r.getEmpDTCountByName(r.selEmp,"","than")),n.xp6(2),n.Oqu(n.lcZ(127,43,r.getEmpDTCountByName(r.selEmp,"","weight"))),n.xp6(3),n.Oqu(r.getEmpDTCountByName(r.selEmp,"","pcs")),n.xp6(2),n.Q6J("ngForOf",r.dates))},dependencies:[Ee.sg,Ee.O5,te.Fj,te.JJ,te.On,Ji,uk,mk,bk,Oi.g,Bt.J,Jv.C,Rt.v,vi],styles:[".mt-10[_ngcontent-%COMP%]{margin-top:10px!important}"]})}return e})(),Bk=(()=>{class e{constructor(t){this.api=t,this.lot={},this.changed=new n.vpe,this.loading=!1}submit(){var t=this;return(0,ee.Z)(function*(){if(console.log($("#lot_date").val(),t.lot?.code?.length,t.lot?.than),$("#lot_date").val()?.length&&t.lot?.code?.length&&t.lot?.than){var o=Object.assign({},t.lot);try{o.date=$("#lot_date").val()+"T00:00:00.000Z",o.code=o.code.toUpperCase(),o.employee=o.employee.toUpperCase(),console.log(o),o?.id?yield t.api.putInfo("lottingfp",o):yield t.api.postInfo("lottingfp",o),toastr.success("Successful!"),$("#lot_modal").modal("toggle"),t.changed.emit(t.lot)}catch{toastr.error("Something Went Wrong!")}}})()}onEnter(t){$("#lot_"+t).focus()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-lot"]],inputs:{lot:"lot"},outputs:{changed:"changed"},decls:37,vars:15,consts:[[1,"modal-dialog","modal-sm"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-5","control-label"],[1,"col-sm-7"],["appFocusNavigate","","type","date","name","date","id","lot_date",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","text","name","code","id","lot_code",1,"form-control",3,"ngModel","value","ngModelChange"],[1,"col-sm-4"],["appFocusNavigate","","type","text","name","employee","id","lot_employee",1,"form-control",3,"ngModel","value","ngModelChange"],["type","number","name","than","id","lot_than",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button",1,"btn","btn-sm",3,"disabled","click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),n._uU(12,"Date"),n.qZA(),n.TgZ(13,"div",10)(14,"input",11),n.NdJ("ngModelChange",function(a){return r.lot.date=a}),n.qZA()()(),n.TgZ(15,"div",8)(16,"label",9),n._uU(17,"Cut No & Emp"),n.qZA(),n.TgZ(18,"div",10)(19,"input",12),n.NdJ("ngModelChange",function(a){return r.lot.code=a}),n.ALo(20,"uppercase"),n.qZA()()(),n.TgZ(21,"div",8)(22,"label",9),n._uU(23,"Employee"),n.qZA(),n.TgZ(24,"div",13)(25,"input",14),n.NdJ("ngModelChange",function(a){return r.lot.employee=a}),n.ALo(26,"uppercase"),n.qZA()()(),n.TgZ(27,"div",8)(28,"label",9),n._uU(29,"Than"),n.qZA(),n.TgZ(30,"div",13)(31,"input",15),n.NdJ("ngModelChange",function(a){return r.lot.than=a})("keyup.enter",function(){return r.submit()}),n.qZA()()()()(),n.TgZ(32,"div",16)(33,"button",17),n._uU(34,"Cancel"),n.qZA(),n.TgZ(35,"button",18),n.NdJ("click",function(){return r.submit()}),n._uU(36),n.qZA()()()()),2&o&&(n.xp6(7),n.Oqu(r.lot.id?"Edit Lot":"Add Lot"),n.xp6(7),n.Q6J("ngModel",r.lot.date),n.xp6(5),n.Q6J("ngModel",r.lot.code)("value",n.lcZ(20,11,null==r.lot?null:r.lot.code)),n.xp6(6),n.Q6J("ngModel",r.lot.employee)("value",n.lcZ(26,13,null==r.lot?null:r.lot.employee)),n.xp6(6),n.Q6J("ngModel",r.lot.than),n.xp6(4),n.Tol(r.lot.id?"btn-success":"btn-primary"),n.Q6J("disabled",r.loading||!(null!=r.lot&&r.lot.code)||!(null!=r.lot&&r.lot.than)),n.xp6(1),n.Oqu(r.lot.id?"Update":"Submit"))},dependencies:[te._Y,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ut,Ee.gd]})}return e})();function Zk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.remove())}),n._uU(1,"Delete ?"),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("disabled",t.loading)}}let Gk=(()=>{class e{constructor(t){this.api=t,this.kapan={},this.changed=new n.vpe,this.loading=!1}submit(){var t=this;return(0,ee.Z)(function*(){t.loading=!0;try{t.kapan?.id>0?yield t.api.putInfo("recutfp",t.kapan):yield t.api.postInfo("recutfp",t.kapan),toastr.success("Updated Successfully!"),$("#recut_entry_modal").modal("toggle"),t.changed.emit(!0)}catch{toastr.error("Something Went Wrong!")}t.loading=!1})()}remove(){var t=this;return(0,ee.Z)(function*(){t.loading=!0;try{(yield t.api.deleteInfo("recutfp/"+t.kapan.id))&&(toastr.success("Updated Successfully!"),$("#recut_entry_modal").modal("toggle"),t.changed.emit(!0))}catch{toastr.error("Something Went Wrong!")}t.loading=!1})()}onDateChange(t,o){this.kapan[o]=t.target.value?.length?new Date(t.target.value).toISOString():null}upperCase(t){this.kapan[t]=(this.kapan[t]??"")?.toUpperCase().trim()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-recut-entry"]],inputs:{kapan:"kapan"},outputs:{changed:"changed"},decls:48,vars:22,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-4"],["type","date","appFocusNavigate","",1,"form-control",3,"value","change"],[1,"col-sm-2","p-r-0"],["type","text","name","code","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"col-sm-2","p-l-5"],["type","text","name","employee","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange","input"],["type","number","name","lot","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","than","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button","class","btn btn-sm btn-danger",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-sm",3,"disabled","click"],["type","button",1,"btn","btn-sm","btn-danger",3,"disabled","click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),n._uU(12,"Date"),n.qZA(),n.TgZ(13,"div",10)(14,"input",11),n.NdJ("change",function(a){return r.onDateChange(a,"date")}),n.ALo(15,"momentDate"),n.qZA()()(),n.TgZ(16,"div",8)(17,"label",9),n._uU(18,"Cut No & Employee"),n.qZA(),n.TgZ(19,"div",12)(20,"input",13),n.NdJ("ngModelChange",function(a){return r.kapan.code=a})("input",function(){return r.upperCase("code")}),n.qZA()(),n.TgZ(21,"div",14)(22,"input",15),n.NdJ("ngModelChange",function(a){return r.kapan.employee=a})("input",function(){return r.upperCase("employee")}),n.qZA()()(),n.TgZ(23,"div",8)(24,"label",9),n._uU(25,"Lot & Than"),n.qZA(),n.TgZ(26,"div",12)(27,"input",16),n.NdJ("ngModelChange",function(a){return r.kapan.lot=a}),n.qZA()(),n.TgZ(28,"div",14)(29,"input",17),n.NdJ("ngModelChange",function(a){return r.kapan.than=a}),n.qZA()()(),n.TgZ(30,"div",8)(31,"label",9),n._uU(32,"Issue Date"),n.qZA(),n.TgZ(33,"div",10)(34,"input",11),n.NdJ("change",function(a){return r.onDateChange(a,"issueDate")}),n.ALo(35,"momentDate"),n.qZA()()(),n.TgZ(36,"div",8)(37,"label",9),n._uU(38,"Close Date"),n.qZA(),n.TgZ(39,"div",10)(40,"input",11),n.NdJ("change",function(a){return r.onDateChange(a,"closeDate")}),n.ALo(41,"momentDate"),n.qZA()()()()(),n.TgZ(42,"div",18)(43,"button",19),n._uU(44,"Cancel"),n.qZA(),n.YNc(45,Zk,2,1,"button",20),n.TgZ(46,"button",21),n.NdJ("click",function(){return r.submit()}),n._uU(47),n.qZA()()()()),2&o&&(n.xp6(7),n.Oqu(r.kapan.id?"Edit Kapan":"Add Kapan"),n.xp6(7),n.Q6J("value",n.xi3(15,13,null==r.kapan?null:r.kapan.date,"YYYY-MM-DD")),n.xp6(6),n.Q6J("ngModel",r.kapan.code),n.xp6(2),n.Q6J("ngModel",r.kapan.employee),n.xp6(5),n.Q6J("ngModel",r.kapan.lot),n.xp6(2),n.Q6J("ngModel",r.kapan.than),n.xp6(5),n.Q6J("value",n.xi3(35,16,null==r.kapan?null:r.kapan.issueDate,"YYYY-MM-DD")),n.xp6(6),n.Q6J("value",n.xi3(41,19,null==r.kapan?null:r.kapan.closeDate,"YYYY-MM-DD")),n.xp6(5),n.Q6J("ngIf",(null==r.kapan?null:r.kapan.id)>0),n.xp6(1),n.Tol(r.kapan.id?"btn-success":"btn-primary"),n.Q6J("disabled",r.loading||!(null!=r.kapan&&null!=r.kapan.date&&r.kapan.date.length)||!(null!=r.kapan&&r.kapan.code)||!(null!=r.kapan&&r.kapan.employee)||!(null!=r.kapan&&r.kapan.than)),n.xp6(1),n.Oqu(r.kapan.id?"Update":"Submit"))},dependencies:[Ee.O5,te._Y,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ut,Rt.v]})}return e})();function Hk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr")(1,"td")(2,"a",27),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.editLotFp(s))}),n._UZ(3,"span",44),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.ALo(6,"momentDate"),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td")(14,"a",27),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.removeLotFp(s))}),n._UZ(15,"span",45),n.qZA()()()}if(2&e){const t=i.$implicit;n.xp6(5),n.Oqu(n.xi3(6,4,null==t?null:t.date,"DD/MM/YYYY")),n.xp6(3),n.Oqu(t.employee),n.xp6(2),n.Oqu(t.code),n.xp6(2),n.Oqu(t.than)}}function qk(e,i){if(1&e&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.ALo(3,"momentDate"),n.qZA(),n.TgZ(4,"td"),n._uU(5),n.qZA()()),2&e){const t=i.$implicit;n.xp6(2),n.Oqu(n.xi3(3,2,t.date,"DD/MM/YYYY")),n.xp6(3),n.Oqu(t.than)}}function zk(e,i){if(1&e&&(n.TgZ(0,"th",46),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.hij(" ",t," ")}}function Vk(e,i){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(1),n.Oqu(o.getMnEmpCount(t))}}function Uk(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&e){const t=i.$implicit,o=n.oxw().$implicit,r=n.oxw();n.xp6(1),n.Oqu(r.getEmpCount(t,o))}}function Wk(e,i){if(1&e&&(n.TgZ(0,"tr",47)(1,"th"),n._uU(2),n.ALo(3,"momentDate"),n.qZA(),n.YNc(4,Uk,2,1,"td",29),n.TgZ(5,"th"),n._uU(6),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(n.xi3(3,3,t,"DD/MM/YYYY")),n.xp6(2),n.Q6J("ngForOf",o.employees),n.xp6(2),n.Oqu(o.getEmpCount("",t))}}const Qv=function(e,i){return{employee:e,code:i}};let jk=(()=>{class e{getRowClass(t){return t.data?.closeDate?"bg-lightgreen":""}constructor(t,o){var r=this;this.api=t,this.excel=o,this.employees=[],this.scode="",this.pcode="",this.slcode="",this.plcode="",this.dates=[],this.kapans=[],this.kapan={},this.summary=[],this.lotting=[],this.lot={},this.month=_e().format("YYYY-MM"),this.mdate="",this.idate="",this.cdate="",this.rowData=[],this.selectedRow=[],this.pinnedRow=[],this.rowSelection={mode:"multiRow"},this.gridOptions={getRowClass:this.getRowClass.bind(this)},this.defaultColDef={flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0},this.columnDefs=[{headerName:"\u0aa4\u0abe\u0ab0\u0ac0\u0a96",field:"date",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"\u0ab0\u0ac0\u0a95\u0a9f \u0aa8\u0abe\u0aae",field:"employee"},{headerName:"\u0a95\u0a9f \u0aa8\u0a82\u0aac\u0ab0",field:"code"},{headerName:"\u0ab2\u0acb\u0a9f",field:"lot"},{headerName:"\u0aa5\u0abe\u0aa8",field:"than"},{headerName:"4P \u0aae\u0abe \u0a86\u0aaa\u0ac7\u0ab2 \u0aa4\u0abe\u0ab0\u0ac0\u0a96",field:"issueDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"\u0aa5\u0abe\u0aa8",field:"than"},{headerName:"4P \u0aae\u0abe\u0aa5\u0ac0 \u0a86\u0ab5\u0ac7\u0ab2 \u0aa4\u0abe\u0ab0\u0ac0\u0a96",field:"closeDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"4P \u0aa8\u0abe \u0aa6\u0abf\u0ab5\u0ab8\u0acb",valueGetter:s=>this.api.getDaysDiff(s.data?.issueDate,s.data?.closeDate)}],this.onSelectionChanged=s=>{var a=s?.api?.getSelectedRows();if(this.selectedRow=[],a?.length>1){var l={than:M.sumBy(a,"than"),lot:M.sumBy(a,"lot"),employee:"Selected: "+a.length};this.selectedRow.push(l)}},this.onFilterChanged=s=>{var a=[];if(this.selectedRow=[],s?.api?.forEachNodeAfterFilter(c=>{c.data&&a.push(c.data)}),a?.length!=this.rowData.length&&(console.log(a),this.selectedRow=[],a?.length>1)){var l={than:M.sumBy(a,"than"),lot:M.sumBy(a,"lot"),employee:"Filtered: "+a.length};this.selectedRow.push(l)}},this.onRowDoubleClicked=function(){var s=(0,ee.Z)(function*(a){const l=a.data;l?.id>0&&(r.kapan=yield r.api.getInfo("recutfp/"+l.id),$("#recut_entry_modal").modal("toggle"))});return function(a){return s.apply(this,arguments)}}()}ngOnInit(){this.dates=this.api.getMonthDays(this.month),this.reload(!0)}reload(t){var o=this;return(0,ee.Z)(function*(){var r=yield o.api.getInfo("recutfp");o.kapans=M.orderBy(r,["date"],["desc"]),o.rowData=o.kapans,o.pinnedRow=[];var s=[{than:M.sumBy(o.rowData,"than"),lot:M.sumBy(o.rowData,"lot"),employee:"Total: "+o.rowData.length},{than:M.sumBy(o.rowData.filter(l=>!l?.closeDate),"than"),lot:M.sumBy(o.rowData.filter(l=>!l?.closeDate),"lot"),employee:"Pending: "+o.rowData.filter(l=>!l?.closeDate).length,code:M.sumBy(o.rowData.filter(l=>!l?.closeDate&&!l?.issueDate),"lot")}];o.pinnedRow=s;var a=yield o.api.getInfo("lottingfp");o.lotting=M.orderBy(a,["date"],["desc"]),o.employees=M.uniq(M.map(o.kapans,"employee")),o.summary=M.orderBy(M.map(M.groupBy(o.lotting,"date"),(l,c)=>({date:c,than:M.sumBy(l,"than")})),["k"],["desc"])})()}onGridReady(t){t.api.sizeColumnsToFit()}addLot(t){var o=this;return(0,ee.Z)(function*(){var r=Object.assign({},t);console.log(r),r.date=r.date+"T00:00:00.000Z";try{r?.id?yield o.api.putInfo("recutfp",r):yield o.api.postInfo("recutfp",r),toastr.success("Update Successfully!"),o.reload(!0)}catch{toastr.error("Something Went Wrong!")}})()}getMnEmpCount(t=""){var o=this.kapans.filter(r=>!(t?.length>0&&r.employee!=t||_e(r.date).format("YYYY-MM")!=this.month));return o.length?M.sumBy(o,"than"):""}getEmpCount(t="",o){var r=this.kapans.filter(s=>(!(t?.length>0)||s.employee==t)&&s.date.indexOf(o)>-1);return r.length?M.sumBy(r,"than"):""}addLotFp(){this.lot={},$("#lot_date").val(_e().format("YYYY-MM-DD")),$("#lot_modal").modal("toggle"),setTimeout(()=>$("#lot_code").focus(),1e3)}editLotFp(t){this.lot=Object.assign({},t),delete this.lot.date,$("#lot_date").val(_e(t.date).format("YYYY-MM-DD")),$("#lot_modal").modal("toggle"),setTimeout(()=>$("#kapan_code").focus(),1e3)}removeLotFp(t){var o=this;return(0,ee.Z)(function*(){try{if(!(yield o.api.removeInfo("lottingfp/"+t.id)))return;toastr.success("Update Successfully!"),o.lotting=yield o.api.getInfo("lottingfp")}catch{toastr.error("Something Went Wrong!")}})()}loadLotting(){var t=this;return(0,ee.Z)(function*(){t.lotting=yield t.api.getInfo("lottingfp"),t.summary=M.orderBy(M.map(M.groupBy(t.lotting,"date"),(o,r)=>({date:r,than:M.sumBy(o,"than")})),["k"],["desc"])})()}onMonthChange(t){t.target.value?.length&&(this.month=t.target.value,this.dates=this.api.getMonthDays(this.month))}download(){var o=this.kapans.map(r=>[_e(r.date).format("YYYY-MM-DD"),r.employee,r.code,r.lot,r.than,r?.issueDate?_e(r.issueDate).format("YYYY-MM-DD"):"",r.than,r?.closeDate?_e(r.closeDate).format("YYYY-MM-DD"):"",this.api.getDaysDiff(r?.issueDate,r?.closeDate)]);this.excel.generateExcel(["\u0aa4\u0abe\u0ab0\u0ac0\u0a96","\u0ab0\u0ac0\u0a95\u0a9f \u0aa8\u0abe\u0aae","\u0a95\u0a9f \u0aa8\u0a82\u0aac\u0ab0","\u0ab2\u0acb\u0a9f","\u0aa5\u0abe\u0aa8","4P \u0aae\u0abe \u0a86\u0aaa\u0ac7\u0ab2 \u0aa4\u0abe\u0ab0\u0ac0\u0a96","\u0aa5\u0abe\u0aa8","4P \u0aae\u0abe\u0aa5\u0ac0 \u0a86\u0ab5\u0ac7\u0ab2 \u0aa4\u0abe\u0ab0\u0ac0\u0a96","4P \u0aa8\u0abe \u0aa6\u0abf\u0ab5\u0ab8\u0acb"],o,"Recut Data")}addRecut(){this.kapan={},$("#recut_entry_modal").modal("toggle")}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(et.x))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-recut"]],decls:97,vars:35,consts:[[1,"content"],[1,"container"],[1,"nav-tabs-custom"],[1,"nav","nav-tabs"],[1,"active"],["href","#report","data-toggle","tab"],["href","#details","data-toggle","tab"],["href","#history","data-toggle","tab"],[1,"pull-right","header",2,"line-height","1.5em !important"],[1,"btn","btn-sm","btn-primary","mr-5",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-download"],[1,"tab-content",2,"min-height","500px"],["id","report",1,"tab-pane","active"],[1,"ag-theme-balham",2,"width","100%","height","80vh","font-weight","500",3,"rowData","columnDefs","defaultColDef","gridOptions","rowSelection","pinnedTopRowData","pinnedBottomRowData","gridReady","selectionChanged","filterChanged","rowDoubleClicked"],["id","details",1,"tab-pane"],[1,"row"],[1,"col-sm-8"],[1,"table-container"],[1,"table","table-responsive","table-bordered","table-hover","table-condensed","table-striped","text-center","table-fixed-header"],[1,"p2","jc","w70"],["name","plcode",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"p2","jc","w100"],["name","slcode",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],[3,"click"],[1,"fa","fa-plus-circle","text-green"],[4,"ngFor","ngForOf"],[1,"col-sm-4"],[1,"bg-lightgrey"],["id","history",1,"tab-pane"],[1,"table","table-responsive","table-bordered","table-hover","table-condensed","table-striped","table-striped","text-center","table-fixed-header"],["scope","col",1,"p2","jc","w100"],["type","month",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],["scope","col","class","col-sm-auto bg-lightblue",4,"ngFor","ngForOf"],["scope","col",1,"col-sm-auto","bg-lightred"],[1,"bg-lightyellow"],["scope","row",4,"ngFor","ngForOf"],["id","lot_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"lot","changed"],["id","recut_entry_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"kapan","changed"],[1,"fa","fa-edit","text-green"],[1,"fa","fa-minus-circle","text-red"],["scope","col",1,"col-sm-auto","bg-lightblue"],["scope","row"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),n._uU(6,"RECUT TO 4P"),n.qZA()(),n.TgZ(7,"li")(8,"a",6),n._uU(9,"LOTTING"),n.qZA()(),n.TgZ(10,"li")(11,"a",7),n._uU(12,"HISTORY"),n.qZA()(),n.TgZ(13,"li",8)(14,"button",9),n.NdJ("click",function(){return r.addRecut()}),n._UZ(15,"i",10),n._uU(16,"ADD RECUT"),n.qZA(),n.TgZ(17,"button",11),n.NdJ("click",function(){return r.download()}),n._UZ(18,"i",12),n._uU(19,"DOWNLOAD"),n.qZA()()(),n.TgZ(20,"div",13)(21,"div",14)(22,"ag-grid-angular",15),n.NdJ("gridReady",function(a){return r.onGridReady(a)})("selectionChanged",function(a){return r.onSelectionChanged(a)})("filterChanged",function(a){return r.onFilterChanged(a)})("rowDoubleClicked",function(a){return r.onRowDoubleClicked(a)}),n.qZA()(),n.TgZ(23,"div",16)(24,"div",17)(25,"div",18)(26,"div",19)(27,"table",20)(28,"thead")(29,"tr"),n._UZ(30,"th")(31,"th"),n.TgZ(32,"th",21)(33,"input",22),n.NdJ("ngModelChange",function(a){return r.plcode=a}),n.qZA()(),n.TgZ(34,"th",23)(35,"input",24),n.NdJ("ngModelChange",function(a){return r.slcode=a}),n.qZA()(),n.TgZ(36,"th"),n._uU(37),n.ALo(38,"contains"),n.qZA(),n._UZ(39,"th"),n.qZA(),n.TgZ(40,"tr",25)(41,"th",26),n._uU(42,"#"),n.qZA(),n.TgZ(43,"th",26),n._uU(44,"\u0aa4\u0abe\u0ab0\u0ac0\u0a96"),n.qZA(),n.TgZ(45,"th",26),n._uU(46,"\u0ab0\u0ac0\u0a95\u0a9f \u0aa8\u0abe\u0aae"),n.qZA(),n.TgZ(47,"th",26),n._uU(48,"\u0a95\u0a9f \u0aa8\u0a82\u0aac\u0ab0"),n.qZA(),n.TgZ(49,"th",26),n._uU(50,"\u0aa5\u0abe\u0aa8"),n.qZA(),n.TgZ(51,"th",26)(52,"a",27),n.NdJ("click",function(){return r.addLotFp()}),n._UZ(53,"span",28),n.qZA()()()(),n.TgZ(54,"tbody"),n.YNc(55,Hk,16,7,"tr",29),n.ALo(56,"contains"),n.qZA()()()(),n.TgZ(57,"div",30)(58,"div",19)(59,"table",20)(60,"thead")(61,"tr",31),n._UZ(62,"th"),n.TgZ(63,"th"),n._uU(64),n.qZA()(),n.TgZ(65,"tr",25)(66,"th",26),n._uU(67,"\u0aa4\u0abe\u0ab0\u0ac0\u0a96"),n.qZA(),n.TgZ(68,"th",26),n._uU(69,"\u0aa5\u0abe\u0aa8"),n.qZA()()(),n.TgZ(70,"tbody"),n.YNc(71,qk,6,5,"tr",29),n.qZA()()()()()(),n.TgZ(72,"div",32)(73,"div",17)(74,"div",18)(75,"div",19)(76,"table",33)(77,"thead")(78,"tr")(79,"th",34)(80,"input",35),n.NdJ("change",function(a){return r.onMonthChange(a)}),n.ALo(81,"momentDate"),n.qZA()(),n.YNc(82,zk,2,1,"th",36),n.TgZ(83,"th",37),n._uU(84,"Total"),n.qZA()(),n.TgZ(85,"tr",38)(86,"th"),n._uU(87,"Total"),n.qZA(),n.YNc(88,Vk,2,1,"th",29),n.TgZ(89,"th"),n._uU(90),n.qZA()()(),n.TgZ(91,"tbody"),n.YNc(92,Wk,7,6,"tr",39),n.qZA()()()()()()()()()(),n.TgZ(93,"div",40)(94,"app-lot",41),n.NdJ("changed",function(){return r.loadLotting()}),n.qZA()(),n.TgZ(95,"div",42)(96,"app-recut-entry",43),n.NdJ("changed",function(){return r.reload(!0)}),n.qZA()()),2&o&&(n.xp6(22),n.Q6J("rowData",r.rowData)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("gridOptions",r.gridOptions)("rowSelection",r.rowSelection)("pinnedTopRowData",r.selectedRow)("pinnedBottomRowData",r.pinnedRow),n.xp6(11),n.Q6J("ngModel",r.plcode),n.xp6(2),n.Q6J("ngModel",r.slcode),n.xp6(2),n.Oqu(r.api.getSum(n.xi3(38,20,r.lotting,n.WLB(29,Qv,r.plcode,r.slcode)),"than")),n.xp6(18),n.Q6J("ngForOf",n.xi3(56,23,r.lotting,n.WLB(32,Qv,r.plcode,r.slcode))),n.xp6(9),n.Oqu(r.api.getSum(r.summary,"than")),n.xp6(7),n.Q6J("ngForOf",r.summary),n.xp6(9),n.Q6J("value",n.xi3(81,26,r.month,"YYYY-MM")),n.xp6(2),n.Q6J("ngForOf",r.employees),n.xp6(6),n.Q6J("ngForOf",r.employees),n.xp6(2),n.Oqu(r.getMnEmpCount()),n.xp6(2),n.Q6J("ngForOf",r.dates),n.xp6(2),n.Q6J("lot",r.lot),n.xp6(2),n.Q6J("kapan",r.kapan))},dependencies:[Ee.sg,te.Fj,te.JJ,te.On,wo,Bk,Gk,Rt.v,vi]})}return e})();var ta=Oe(553),Yh=Oe(8398);function Yk(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"span",1),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.onClick("print"))}),n._UZ(1,"i",2),n.qZA()}}let $k=(()=>{class e{constructor(t,o){this.api=t,this.pdf=o}agInit(t){this.params=t,console.log(this.params.node.rowPinned)}refresh(t){return this.params=t,!0}onClick(t){"print"===t&&this.pdf.printFinalJangad(this.params.data)}isPinnedRow(){return"top"===this.params?.node?.rowPinned||"bottom"===this.params?.node?.rowPinned}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(Yh.F))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-icon-cell-renderer"]],decls:1,vars:1,consts:[["class","icon","title","Print",3,"click",4,"ngIf"],["title","Print",1,"icon",3,"click"],[1,"fa","fa-print","text-blue"]],template:function(o,r){1&o&&n.YNc(0,Yk,2,0,"span",0),2&o&&n.Q6J("ngIf",!r.isPinnedRow())},dependencies:[Ee.O5],styles:[".icon[_ngcontent-%COMP%]{text-align:center;cursor:pointer;margin:0 5px}"]})}return e})();function Jk(e,i){if(1&e&&(n.TgZ(0,"option",30),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.Q6J("value",t.id),n.xp6(1),n.Oqu(t.srno)}}function Kk(e,i){if(1&e&&(n.TgZ(0,"option",30),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.Q6J("value",t.id),n.xp6(1),n.Oqu(t.name)}}function Qk(e,i){1&e&&n._UZ(0,"span",38)}function Xk(e,i){1&e&&n._UZ(0,"span",39)}function eT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",32),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.removeLot(r))}),n._UZ(1,"span",40),n.qZA()}}function tT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",31)(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td")(4,"a",32),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.updateLot(s,!s.jstatus))}),n.YNc(5,Qk,1,0,"span",33),n.YNc(6,Xk,1,0,"span",34),n.qZA()(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"wt"),n.qZA(),n.TgZ(14,"td"),n._uU(15),n.ALo(16,"wt"),n.qZA(),n.TgZ(17,"td",35)(18,"input",36),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.lost=r)}),n.qZA()(),n.TgZ(19,"td",35)(20,"input",36),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.damage=r)}),n.qZA()(),n.TgZ(21,"td",35)(22,"input",36),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.fwt=r)}),n.qZA()(),n.TgZ(23,"td"),n._uU(24),n.ALo(25,"wt"),n.qZA(),n.TgZ(26,"td"),n._uU(27),n.ALo(28,"wt"),n.qZA(),n.TgZ(29,"td"),n._uU(30),n.ALo(31,"wt"),n.qZA(),n.TgZ(32,"td",35)(33,"input",36),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.awt=r)}),n.qZA()(),n.TgZ(34,"td"),n._uU(35),n.ALo(36,"wt"),n.qZA(),n.TgZ(37,"td"),n._uU(38),n.qZA(),n.TgZ(39,"td"),n.YNc(40,eT,2,0,"a",37),n.qZA()()}if(2&e){const t=i.$implicit,o=i.index;let r,s,a,l;n.Tol(t.jstatus?"bg-lightgreen":""),n.xp6(2),n.Oqu(o+1),n.xp6(3),n.Q6J("ngIf",!t.jstatus),n.xp6(1),n.Q6J("ngIf",t.jstatus),n.xp6(2),n.Oqu(t.srno),n.xp6(2),n.Oqu(t.pcs),n.xp6(2),n.Oqu(n.lcZ(13,23,t.rwt)),n.xp6(3),n.Oqu(n.lcZ(16,25,t.pwt)),n.xp6(3),n.MGl("name","lost_",o,""),n.Q6J("ngModel",t.lost),n.xp6(2),n.MGl("name","damage_",o,""),n.Q6J("ngModel",t.damage),n.xp6(2),n.MGl("name","fwt_",o,""),n.Q6J("ngModel",t.fwt),n.xp6(2),n.hij("",n.lcZ(25,27,null!=t&&t.fwt?100*(null!==(r=null==t?null:t.awt)&&void 0!==r?r:0)/(null==t?null:t.fwt):0)," %"),n.xp6(3),n.hij("",n.lcZ(28,29,null!=t&&t.rwt?100*(null!==(s=null==t?null:t.pwt)&&void 0!==s?s:0)/(null==t?null:t.rwt):0)," %"),n.xp6(3),n.hij("",n.lcZ(31,31,null!=t&&t.rwt?100*(null!==(a=null==t?null:t.awt)&&void 0!==a?a:0)/(null==t?null:t.rwt):0)," %"),n.xp6(3),n.MGl("name","awt_",o,""),n.Q6J("ngModel",t.awt),n.xp6(2),n.hij("",null!=t&&t.rwt?n.lcZ(36,33,100*((null!==(l=null==t?null:t.awt)&&void 0!==l?l:0)-(null==t?null:t.pwt))/(null==t?null:t.rwt)):0," %"),n.xp6(3),n.Oqu(t.range),n.xp6(2),n.Q6J("ngIf",!t.jstatus)}}function iT(e,i){if(1&e&&(n.TgZ(0,"tfoot")(1,"tr",41)(2,"th",42),n._uU(3),n.qZA(),n.TgZ(4,"th"),n._uU(5),n.qZA(),n.TgZ(6,"th"),n._uU(7),n.ALo(8,"wt"),n.qZA(),n.TgZ(9,"th"),n._uU(10),n.ALo(11,"wt"),n.qZA(),n.TgZ(12,"th"),n._uU(13),n.qZA(),n.TgZ(14,"th"),n._uU(15),n.qZA(),n.TgZ(16,"th"),n._uU(17),n.ALo(18,"wt"),n.qZA(),n.TgZ(19,"th"),n._uU(20),n.ALo(21,"wt"),n.qZA(),n.TgZ(22,"th"),n._uU(23),n.ALo(24,"wt"),n.qZA(),n.TgZ(25,"th"),n._uU(26),n.ALo(27,"wt"),n.qZA(),n.TgZ(28,"th"),n._uU(29),n.ALo(30,"wt"),n.qZA(),n.TgZ(31,"th"),n._uU(32),n.ALo(33,"wt"),n.qZA(),n._UZ(34,"th",43),n.qZA()()),2&e){const t=n.oxw();n.xp6(3),n.hij("Total: ",t.jangad.Lot.length,""),n.xp6(2),n.Oqu(t.api.getSum(t.jangad.Lot,"pcs")),n.xp6(2),n.Oqu(n.lcZ(8,12,t.api.getSum(t.jangad.Lot,"rwt"))),n.xp6(3),n.Oqu(n.lcZ(11,14,t.api.getSum(t.jangad.Lot,"pwt"))),n.xp6(3),n.Oqu(t.api.getSum(t.jangad.Lot,"lost")),n.xp6(2),n.Oqu(t.api.getSum(t.jangad.Lot,"damage")),n.xp6(2),n.Oqu(n.lcZ(18,16,t.api.getSum(t.jangad.Lot,"fwt"))),n.xp6(3),n.hij("",t.api.getSum(t.jangad.Lot,"fwt")?n.lcZ(21,18,100*t.api.getSum(t.jangad.Lot,"awt")/t.api.getSum(t.jangad.Lot,"fwt")):"0.00"," %"),n.xp6(3),n.hij("",t.api.getSum(t.jangad.Lot,"rwt")?n.lcZ(24,20,100*t.api.getSum(t.jangad.Lot,"pwt")/t.api.getSum(t.jangad.Lot,"rwt")):"0.00"," %"),n.xp6(3),n.hij("",t.api.getSum(t.jangad.Lot,"rwt")?n.lcZ(27,22,100*t.api.getSum(t.jangad.Lot,"awt")/t.api.getSum(t.jangad.Lot,"rwt")):"0.00"," %"),n.xp6(3),n.Oqu(n.lcZ(30,24,t.api.getSum(t.jangad.Lot,"awt"))),n.xp6(3),n.hij("",t.api.getSum(t.jangad.Lot,"rwt")?n.lcZ(33,26,100*(t.api.getSum(t.jangad.Lot,"awt")-t.api.getSum(t.jangad.Lot,"pwt"))/t.api.getSum(t.jangad.Lot,"rwt")):0," %")}}const nT=function(){return{categoryId:1}};let oT=(()=>{class e{constructor(t,o){this.api=t,this.pdf=o,this.user=JSON.parse(localStorage.getItem("user")),this.changed=new n.vpe,this.slist=[],this.contractors=[],this.jangad={},this.newItem={},this.inward=!1,this.loading=!1}ngOnInit(){}addItem(){this.newItem={jangadId:this.jangad.id}}scanQr(t){var o=this;return(0,ee.Z)(function*(){var r=t.target.value;if(r.indexOf(",")<0)return window.alert("Invalid Qr Code"),$("#qrcode_j").val(""),void $("#qrcode_j").focus();var s=r.split(",");if(s?.length<7)window.alert("Invalid Qr Code");else{var a=Number($("#jd_cut_name").val());if(a){var l=o.slist.find(m=>m.id==a)?.srno;if(l==s[0]){var c=yield o.api.postInfo("lot/query",{stockId:a,srno:Number(s[1])});if(c){var d=o.inward,h=o.jangad.Lot.find(m=>m.id==c.id);return!d&&h?.status?(window.alert("Lot Arleady Returned!"),$("#qrcode_j").val(""),void $("#qrcode_j").focus()):d&&!h?(window.alert("No Lot Scanned Before!"),$("#qrcode_j").val(""),void $("#qrcode_j").focus()):(d?yield o.api.putInfo("lot",{id:c.id,jangadId:o.jangad.id,jstatus:!0}):yield o.api.putInfo("lot",{id:c.id,jangadId:o.jangad.id,jstatus:!1}),o.jangad.Lot=yield o.api.getInfo("lot?j="+o.jangad.id),yield o.api.putInfo("jangad",{id:o.jangad.id,stockId:a}),$("#qrcode_j").val(""),void $("#qrcode_j").focus())}window.alert("No Lot Detected!")}else window.alert("Incorrect Cut Detected!")}else window.alert("Kapan No Not Selected!")}})()}scanQr2(t){var o=this;return(0,ee.Z)(function*(){var r=Number(t.target.value);if(!r)return window.alert("Invalid Lot No"),$("#lotno_j").val(""),void $("#lotno_j").focus();var s=Number($("#jd_cut_name").val());if(s){var a=o.slist.find(g=>g.id==s)?.srno;if(a){var l=yield o.api.postInfo("lot/query",{stockId:s,srno:r});if(l){var c=o.inward,d=o.jangad.Lot.find(g=>g.id==l.id);return!c&&d?.status?(window.alert("Lot Arleady Returned!"),$("#lotno_j").val(""),void $("#lotno_j").focus()):c&&!d?(window.alert("No Lot Scanned Before!"),$("#lotno_j").val(""),void $("#lotno_j").focus()):(c?yield o.api.putInfo("lot",{id:l.id,jangadId:o.jangad.id,jstatus:!0}):yield o.api.putInfo("lot",{id:l.id,jangadId:o.jangad.id,jstatus:!1}),o.jangad.Lot=yield o.api.getInfo("lot?j="+o.jangad.id),yield o.api.putInfo("jangad",{id:o.jangad.id,stockId:s}),$("#lotno_j").val(""),void $("#lotno_j").focus())}window.alert("No Lot Detected!")}else window.alert("No Cut Selected!")}else window.alert("Kapan No Not Selected!")})()}removeLot(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm(`Are you sure to remove the srno ${t.srno}?`)){if(window.prompt("Enter your PIN")!=o.user.pin)return void window.alert("Invalid PIN");try{yield o.api.putInfo("lot",{id:t.id,jangadId:null,jstatus:!1}),toastr.success("Removed for the list"),o.jangad.Lot=yield o.api.getInfo("lot?j="+o.jangad.id)}catch{toastr.error("Something Went Wrong!")}}})()}updateLot(t,o){var r=this;return(0,ee.Z)(function*(){if(t?.id)try{yield r.api.putInfo("lot",{id:t.id,jstatus:o}),r.jangad.Lot=yield r.api.getInfo("lot?j="+r.jangad.id),toastr.success("Updated")}catch{toastr.error("Something Went Wrong!")}})()}update(){var t=this;return(0,ee.Z)(function*(){var o=Number($("#jd_contractor").val()),r=Number($("#jd_cut_name").val()),s=$("#j_issueDate").val(),a=$("#j_closeDate").val();if(""!=s)if(r)if(o){Promise.all(t.jangad.Lot.map(l=>t.api.putInfo("lot",{id:l.id,awt:l?.awt,fwt:l?.fwt,lost:l?.lost,damage:l?.damage})));try{yield t.api.putInfo("jangad",{id:t.jangad.id,stockId:r,contractorId:o,issueDate:_e(s).format("YYYY-MM-DD")+"T00:00:00.000Z",closeDate:""==a?null:_e(a).format("YYYY-MM-DD")+"T00:00:00.000Z"}),toastr.success("Updated Successfully!"),t.changed.emit(!0),$("#jangad_modal").modal("toggle")}catch{toastr.error("Something Went Wrong!")}}else window.alert("Please select To");else window.alert("Please select Kapan No");else window.alert("Please select Out Date")})()}print(){var t=Number($("#jd_contractor").val()),o=Number($("#jd_cut_name").val()),r=$("#j_issueDate").val();""!=r?o?t?(this.jangad.stock=this.slist.find(s=>s.id==o),this.jangad.contractor=this.contractors.find(s=>s.id==t),this.jangad.issueDate=_e(r).format("YYYY-MM-DD")+"T00:00:00.000Z",this.pdf.printJangad(this.jangad)):window.alert("Please Select To"):window.alert("Please Select Kapan No"):window.alert("Please Select Out Date")}printFinal(){var t=Number($("#jd_contractor").val()),o=Number($("#jd_cut_name").val()),r=$("#j_issueDate").val(),s=$("#j_closeDate").val();""!=r?""!=s?o?t?(this.jangad.stock=this.slist.find(a=>a.id==o),this.jangad.contractor=this.contractors.find(a=>a.id==t),this.jangad.issueDate=_e(r).format("DD/MM/YYYY"),this.jangad.closeDate=_e(s).format("DD/MM/YYYY"),this.pdf.printFinalJangad(this.jangad)):window.alert("Please Select To"):window.alert("Please Select Kapan No"):window.alert("Please Select In Date"):window.alert("Please Select Out Date")}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(Yh.F))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-jangad"]],inputs:{slist:"slist",contractors:"contractors",jangad:"jangad"},outputs:{changed:"changed"},decls:96,vars:17,consts:[[1,"modal-dialog",2,"width","80% !important"],[1,"modal-content"],[1,"modal-header","with-border"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body",2,"min-height","200px"],[1,"row"],[1,"col-sm-12","form-horizontal"],[1,"col-sm-4"],[1,"form-group"],["for","date",1,"col-sm-4","control-label"],[1,"col-sm-8"],["type","date","name","date","id","j_issueDate",1,"form-control","input-sm"],["type","date","name","date","id","j_closeDate",1,"form-control","input-sm"],["for","to",1,"col-sm-4","control-label"],["id","jd_cut_name",1,"form-control","input-sm","select2",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],["id","jd_contractor",1,"form-control","input-sm","select2"],["type","text","id","qrcode_j",1,"form-control","input-sm",3,"keyup.enter"],["type","text","id","lotno_j",1,"form-control","input-sm",3,"keyup.enter"],[1,"col-sm-12"],[1,"table","table-hover","table-responsive","table-bordered","table-striped","table-condensed","text-center"],[1,"bg-grey"],["scope","col",1,"col-sm-auto"],["scope","row",3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-default","btn-sm","pull-left"],["type","button",3,"disabled","click"],[3,"value"],["scope","row"],[3,"click"],["class","fa fa-check text-green",4,"ngIf"],["class","fa fa-repeat text-blue",4,"ngIf"],[1,"p2","jc","w70"],["type","number",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","name","ngModelChange"],[3,"click",4,"ngIf"],[1,"fa","fa-check","text-green"],[1,"fa","fa-repeat","text-blue"],[1,"fa","fa-minus-circle","text-red"],["scope","row",1,"bg-lightgrey"],["colspan","3"],["colspan","2"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),n._uU(14,"Out Date"),n.qZA(),n.TgZ(15,"div",12),n._UZ(16,"input",13),n.qZA()()(),n.TgZ(17,"div",9)(18,"div",10)(19,"label",11),n._uU(20,"In Date"),n.qZA(),n.TgZ(21,"div",12),n._UZ(22,"input",14),n.qZA()()(),n.TgZ(23,"div",9)(24,"div",10)(25,"label",15),n._uU(26,"Kapan No"),n.qZA(),n.TgZ(27,"div",12)(28,"select",16),n.YNc(29,Jk,2,2,"option",17),n.ALo(30,"filter"),n.qZA()()()(),n.TgZ(31,"div",9)(32,"div",10)(33,"label",15),n._uU(34,"To"),n.qZA(),n.TgZ(35,"div",12)(36,"select",18),n.YNc(37,Kk,2,2,"option",17),n.qZA()()()(),n.TgZ(38,"div",9)(39,"div",10)(40,"label",11),n._uU(41,"Scan Qr"),n.qZA(),n.TgZ(42,"div",12)(43,"input",19),n.NdJ("keyup.enter",function(a){return r.scanQr(a)}),n.qZA()()()(),n.TgZ(44,"div",9)(45,"div",10)(46,"label",11),n._uU(47,"Lot No"),n.qZA(),n.TgZ(48,"div",9)(49,"input",20),n.NdJ("keyup.enter",function(a){return r.scanQr2(a)}),n.qZA()()()()(),n.TgZ(50,"div",21)(51,"table",22)(52,"thead")(53,"tr",23)(54,"th",24),n._uU(55,"S.No."),n.qZA(),n.TgZ(56,"th",24),n._uU(57,"OK?"),n.qZA(),n.TgZ(58,"th",24),n._uU(59,"L.No."),n.qZA(),n.TgZ(60,"th",24),n._uU(61,"Pcs"),n.qZA(),n.TgZ(62,"th",24),n._uU(63,"R.Wt"),n.qZA(),n.TgZ(64,"th",24),n._uU(65,"P.Wt"),n.qZA(),n.TgZ(66,"th",24),n._uU(67,"Lost"),n.qZA(),n.TgZ(68,"th",24),n._uU(69,"Dmg"),n.qZA(),n.TgZ(70,"th",24),n._uU(71,"F.Wt"),n.qZA(),n.TgZ(72,"th",24),n._uU(73,"F-P %"),n.qZA(),n.TgZ(74,"th",24),n._uU(75,"R-P %"),n.qZA(),n.TgZ(76,"th",24),n._uU(77,"R-A %"),n.qZA(),n.TgZ(78,"th",24),n._uU(79,"A.Wt"),n.qZA(),n.TgZ(80,"th",24),n._uU(81,"Diff"),n.qZA(),n.TgZ(82,"th",24),n._uU(83,"Range"),n.qZA(),n.TgZ(84,"th",24),n._uU(85,"#"),n.qZA()()(),n.TgZ(86,"tbody"),n.YNc(87,tT,41,35,"tr",25),n.qZA(),n.YNc(88,iT,35,28,"tfoot",26),n.qZA()()()(),n.TgZ(89,"div",27)(90,"button",28),n._uU(91,"Close"),n.qZA(),n.TgZ(92,"button",29),n.NdJ("click",function(){return r.print()}),n._uU(93,"Print Jangad"),n.qZA(),n.TgZ(94,"button",29),n.NdJ("click",function(){return r.update()}),n._uU(95),n.qZA()()()()),2&o&&(n.xp6(7),n.hij("Edit #",r.api.padleft(r.jangad.id),""),n.xp6(21),n.Q6J("disabled",(null==r.jangad||null==r.jangad.Lot?null:r.jangad.Lot.length)>0),n.xp6(1),n.Q6J("ngForOf",n.xi3(30,13,r.slist,n.DdM(16,nT))),n.xp6(8),n.Q6J("ngForOf",r.contractors),n.xp6(50),n.Q6J("ngForOf",null==r.jangad?null:r.jangad.Lot),n.xp6(1),n.Q6J("ngIf",(null==r.jangad||null==r.jangad.Lot?null:r.jangad.Lot.length)>0),n.xp6(4),n.Tol(null!=r.jangad&&r.jangad.id?"btn btn-success btn-sm":"btn btn-primary btn-sm"),n.Q6J("disabled",r.loading||!(null!=r.jangad&&null!=r.jangad.Lot&&r.jangad.Lot.length)),n.xp6(2),n.Tol(null!=r.jangad&&r.jangad.id?"btn btn-success btn-sm":"btn btn-primary btn-sm"),n.Q6J("disabled",r.loading||!(null!=r.jangad&&null!=r.jangad.Lot&&r.jangad.Lot.length)),n.xp6(1),n.Oqu(null!=r.jangad&&r.jangad.id?"Update":"Submit"))},dependencies:[Ee.sg,Ee.O5,te.YN,te.Kr,te.Fj,te.wV,te.JJ,te.On,Oi.g,Bt.J]})}return e})(),rT=(()=>{class e{constructor(t){this.api=t,this.lot={},this.changed=new n.vpe,this.loading=!1}submit(){var t=this;return(0,ee.Z)(function*(){console.log(t.lot),t.loading=!0;try{yield t.api.putInfo("lot",{id:t.lot.id,fwt:t.lot.fwt,awt:t.lot.awt,lost:t.lot.lost,damage:t.lot.damage,jstatus:!0}),toastr.success("Updated Successfully!"),$("#jangad_gr_modal").modal("toggle"),t.changed.emit(!0),setTimeout(()=>{$("#qrcode_inward").val(""),$("#qrcode_inward").focus()},1e3)}catch{toastr.error("Something Went Wrong!")}t.loading=!1})()}onEnter(t){$("#"+t).focus()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-jangad-gr"]],inputs:{lot:"lot"},outputs:{changed:"changed"},decls:68,vars:19,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["id","jangad_gr_code",1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-8",2,"display","flex"],[1,"mr-5"],[1,"col-sm-4"],["type","number","name","awt","id","lt_awt","appFocusNavigate","",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["type","number","name","fwt","id","lt_fwt","appFocusNavigate","",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["type","number","name","lost","id","lt_lost","appFocusNavigate","",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["type","number","name","damage","id","lt_damage","appFocusNavigate","",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["type","text","disabled","",1,"form-control","input-sm","text-right",3,"value"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button",1,"btn","btn-sm","btn-success",3,"disabled","click"]],template:function(o,r){if(1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n._UZ(6,"h4",5),n.qZA(),n.TgZ(7,"div",6)(8,"form",7)(9,"div",8)(10,"label",9),n._uU(11,"Lot Info"),n.qZA(),n.TgZ(12,"div",10)(13,"span",11),n._uU(14,"L.No. "),n.TgZ(15,"b"),n._uU(16),n.qZA()(),n.TgZ(17,"span",11),n._uU(18,"Pcs "),n.TgZ(19,"b"),n._uU(20),n.qZA()(),n.TgZ(21,"span",11),n._uU(22,"Rwt "),n.TgZ(23,"b"),n._uU(24),n.ALo(25,"wt"),n.qZA()(),n.TgZ(26,"span"),n._uU(27,"Pwt "),n.TgZ(28,"b"),n._uU(29),n.ALo(30,"wt"),n.qZA()()()(),n.TgZ(31,"div",8)(32,"label",9),n._uU(33,"Accurate Wt"),n.qZA(),n.TgZ(34,"div",12)(35,"input",13),n.NdJ("ngModelChange",function(a){return r.lot.awt=a}),n.qZA()()(),n.TgZ(36,"div",8)(37,"label",9),n._uU(38,"Final Wt"),n.qZA(),n.TgZ(39,"div",12)(40,"input",14),n.NdJ("ngModelChange",function(a){return r.lot.fwt=a}),n.qZA()()(),n.TgZ(41,"div",8)(42,"label",9),n._uU(43,"Lost"),n.qZA(),n.TgZ(44,"div",12)(45,"input",15),n.NdJ("ngModelChange",function(a){return r.lot.lost=a}),n.qZA()()(),n.TgZ(46,"div",8)(47,"label",9),n._uU(48,"Damage"),n.qZA(),n.TgZ(49,"div",12)(50,"input",16),n.NdJ("ngModelChange",function(a){return r.lot.damage=a}),n.qZA()()(),n.TgZ(51,"div",8)(52,"label",9),n._uU(53,"Final %"),n.qZA(),n.TgZ(54,"div",12),n._UZ(55,"input",17),n.ALo(56,"wt"),n.qZA()(),n.TgZ(57,"div",8)(58,"label",9),n._uU(59,"Diff %"),n.qZA(),n.TgZ(60,"div",12),n._UZ(61,"input",17),n.ALo(62,"wt"),n.qZA()()()(),n.TgZ(63,"div",18)(64,"button",19),n._uU(65,"Cancel"),n.qZA(),n.TgZ(66,"button",20),n.NdJ("click",function(){return r.submit()}),n._uU(67,"Update"),n.qZA()()()()),2&o){let s;n.xp6(16),n.Oqu(null==r.lot?null:r.lot.srno),n.xp6(4),n.Oqu(null==r.lot?null:r.lot.pcs),n.xp6(4),n.Oqu(n.lcZ(25,11,null==r.lot?null:r.lot.rwt)),n.xp6(5),n.Oqu(n.lcZ(30,13,null==r.lot?null:r.lot.pwt)),n.xp6(6),n.Q6J("ngModel",r.lot.awt),n.xp6(5),n.Q6J("ngModel",r.lot.fwt),n.xp6(5),n.Q6J("ngModel",r.lot.lost),n.xp6(5),n.Q6J("ngModel",r.lot.damage),n.xp6(5),n.Q6J("value",n.lcZ(56,15,null!=r.lot&&r.lot.fwt?100*(null!==(s=null==r.lot?null:r.lot.awt)&&void 0!==s?s:0)/r.lot.fwt:0)),n.xp6(6),n.Q6J("value",n.lcZ(62,17,null!=r.lot&&r.lot.awt?100*(r.lot.awt-r.lot.pwt)/r.lot.rwt:0)),n.xp6(5),n.Q6J("disabled",r.loading||!(null!=r.lot&&r.lot.awt))}},dependencies:[te._Y,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ut,Bt.J]})}return e})(),sT=(()=>{class e{constructor(t){this.api=t,this.contractor={},this.changed=new n.vpe,this.loading=!1}submit(){var t=this;return(0,ee.Z)(function*(){t.loading=!0;try{var o=Object.assign({},t.contractor);o?.id?yield t.api.putInfo("contractor",o):yield t.api.postInfo("contractor",o),toastr.success("Successfully Updated!"),t.changed.emit(!0),$("#contractor_modal").modal("toggle")}catch{toastr.error("Something Went Wrong!")}t.loading=!1})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-contractor"]],inputs:{contractor:"contractor"},outputs:{changed:"changed"},decls:25,vars:8,consts:[[1,"modal-dialog","modal-sm"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-8"],["type","text","name","name",1,"form-control","input-sm",3,"ngModel","disabled","ngModelChange"],[1,"col-sm-4"],["type","text","name","code",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button",1,"btn","btn-sm",3,"disabled","click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),n._uU(12,"Name"),n.qZA(),n.TgZ(13,"div",10)(14,"input",11),n.NdJ("ngModelChange",function(a){return r.contractor.name=a}),n.qZA()()(),n.TgZ(15,"div",8)(16,"label",9),n._uU(17,"Code"),n.qZA(),n.TgZ(18,"div",12)(19,"input",13),n.NdJ("ngModelChange",function(a){return r.contractor.code=a}),n.qZA()()()()(),n.TgZ(20,"div",14)(21,"button",15),n._uU(22,"Cancel"),n.qZA(),n.TgZ(23,"button",16),n.NdJ("click",function(){return r.submit()}),n._uU(24),n.qZA()()()()),2&o&&(n.xp6(7),n.Oqu(null!=r.contractor&&r.contractor.id?"Edit":"Add New"),n.xp6(7),n.Q6J("ngModel",r.contractor.name)("disabled",(null==r.contractor?null:r.contractor.id)>0),n.xp6(5),n.Q6J("ngModel",r.contractor.code),n.xp6(4),n.Tol(null!=r.contractor&&r.contractor.id?"btn-success":"btn-primary"),n.Q6J("disabled",r.loading||!(null!=r.contractor&&r.contractor.name)||!(null!=r.contractor&&r.contractor.code)),n.xp6(1),n.Oqu(null!=r.contractor&&r.contractor.id?"Update":"Submit"))},dependencies:[te._Y,te.Fj,te.JJ,te.JL,te.On,te.F]})}return e})();function aT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",14),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.edit(r))}),n._UZ(1,"span",15),n.qZA()}}function lT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",16),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.remove(r))}),n._UZ(1,"span",17),n.qZA()}}function cT(e,i){if(1&e&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td",10),n._uU(6),n.qZA(),n.TgZ(7,"td",11),n.YNc(8,aT,2,0,"a",12),n.YNc(9,lT,2,0,"a",13),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(t.name),n.xp6(2),n.Oqu(t.code),n.xp6(2),n.Oqu(o.api.getSubSum(t.Jangad,"Lot","pcs")),n.xp6(2),n.Q6J("ngIf",0==(null==t.Jangad?null:t.Jangad.length)),n.xp6(1),n.Q6J("ngIf",0==(null==t.Jangad?null:t.Jangad.length))}}const dT=function(e){return{name:e}};let uT=(()=>{class e{constructor(t){this.api=t,this.contractor={name:""},this.contractors=[]}ngOnInit(){var t=this;return(0,ee.Z)(function*(){t.contractors=yield t.api.getInfo("contractor")})()}submit(){var t=this;return(0,ee.Z)(function*(){if(t.contractor?.name?.length)if(t.contractor?.code?.length){t.contractor.name=t.contractor.name.toUpperCase(),t.contractor.code=t.contractor.code.toUpperCase();try{t.contractor.id?(yield t.api.putInfo("contractor",t.contractor),toastr.success("Updated Successfully"),t.contractor={},t.contractors=yield t.api.getInfo("contractor")):(yield t.api.postInfo("contractor",t.contractor),toastr.success("Added Successfully"),t.contractor={},t.contractors=yield t.api.getInfo("contractor"))}catch{toastr.error("Something went wrong.")}}else toastr.error("Code is must important");else toastr.error("Name is must important")})()}edit(t){var o=this;return(0,ee.Z)(function*(){o.contractor=yield o.api.getInfo("contractor/"+t.id)})()}remove(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm(`Are you want to delete ${t.name}?`))try{if(!(yield o.api.deleteInfo("contractor/"+t.id)))return void toastr.error("Something went wrong");toastr.success("Deleted Successfully"),o.contractor={},yield o.ngOnInit()}catch{toastr.error("Something went wrong")}})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-contractors"]],decls:24,vars:14,consts:[[1,"table-container"],[1,"table","table-striped","table-responsive","table-condensed","table-fixed-header"],["type","text","placeholder","Enter Name","name","name",1,"form-control","input-sm","p-r-0",3,"ngModel","value","ngModelChange"],["colspan","2"],["type","text","placeholder","Short Code","name","code",1,"form-control","input-sm","p-l-5","p-r-0",3,"ngModel","ngModelChange"],[1,"btn","btn-block","btn-sm",3,"click"],[2,"width","20%"],[1,"text-right",2,"width","20%"],[1,"text-center",2,"width","10%"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"text-center"],[3,"click",4,"ngIf"],["style","color:red;",3,"click",4,"ngIf"],[3,"click"],[1,"fa","fa-edit",2,"margin-right","10px","color","green"],[2,"color","red",3,"click"],[1,"fa","fa-trash"]],template:function(o,r){if(1&o&&(n.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"td")(5,"input",2),n.NdJ("ngModelChange",function(a){return r.contractor.name=a}),n.ALo(6,"uppercase"),n.qZA()(),n.TgZ(7,"td",3)(8,"input",4),n.NdJ("ngModelChange",function(a){return r.contractor.code=a}),n.qZA()(),n.TgZ(9,"th")(10,"button",5),n.NdJ("click",function(){return r.submit()}),n._uU(11),n.qZA()()(),n.TgZ(12,"tr")(13,"th"),n._uU(14,"Full Name"),n.qZA(),n.TgZ(15,"th",6),n._uU(16,"Mobile"),n.qZA(),n.TgZ(17,"th",7),n._uU(18,"TO O HIRA"),n.qZA(),n.TgZ(19,"th",8),n._uU(20,"#"),n.qZA()()(),n.TgZ(21,"tbody"),n.YNc(22,cT,10,5,"tr",9),n.ALo(23,"contains"),n.qZA()()()),2&o){let s;n.xp6(5),n.Q6J("ngModel",r.contractor.name)("value",n.lcZ(6,7,r.contractor.name)),n.xp6(3),n.Q6J("ngModel",r.contractor.code),n.xp6(2),n.Tol(r.contractor.id?"btn-success":"btn-primary"),n.xp6(1),n.Oqu(r.contractor.id?"Upate":"Submit"),n.xp6(11),n.Q6J("ngForOf",n.xi3(23,9,r.contractors,n.VKq(12,dT,null!==(s=null==r.contractor?null:r.contractor.name)&&void 0!==s?s:"")))}},dependencies:[Ee.sg,Ee.O5,te.Fj,te.JJ,te.On,Ee.gd,vi],styles:[".box-title[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]{cursor:pointer}.box-tools[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:10px}"]})}return e})();const wl=function(){return{jstatus:!1}},Qc=function(){return{jstatus:!0}};function hT(e,i){if(1&e&&(n.TgZ(0,"tr",37)(1,"th"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td",36),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"wt"),n.qZA(),n.TgZ(14,"td"),n._uU(15),n.ALo(16,"wt"),n.qZA(),n.TgZ(17,"td",36),n._uU(18),n.ALo(19,"wt"),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw();n.Q6J("hidden",!o.api.getSubSumFilter(t.Jangad,"Lot",n.DdM(15,wl),"pcs")),n.xp6(2),n.Oqu(t.name),n.xp6(2),n.Oqu(null==t||null==t.Jangad?null:t.Jangad.length),n.xp6(2),n.Oqu(o.api.getSubSum(t.Jangad,"Lot","pcs")),n.xp6(2),n.Oqu(o.api.getSubSumFilter(t.Jangad,"Lot",n.DdM(16,Qc),"pcs")),n.xp6(2),n.Oqu(o.api.getSubSumFilter(t.Jangad,"Lot",n.DdM(17,wl),"pcs")),n.xp6(2),n.Oqu(n.lcZ(13,9,o.api.getSubSum(t.Jangad,"Lot","pwt"))),n.xp6(3),n.Oqu(n.lcZ(16,11,o.api.getSubSumFilter(t.Jangad,"Lot",n.DdM(18,Qc),"pwt"))),n.xp6(3),n.Oqu(n.lcZ(19,13,o.api.getSubSumFilter(t.Jangad,"Lot",n.DdM(19,wl),"pwt")))}}let gT=(()=>{class e{getRowClass(t){return t.data?.closeDate?.length>0&&t.data?.Lot?.filter(r=>!r?.jstatus).length>0?"bg-4":t?.data?.closeDate?.length>0?"bg-lightgreen":this.getDayDiff(t.data?.issueDate,_e().format("YYYY-MM-DD"))>9?"bg-lightred":""}constructor(t,o,r,s){this.httpClient=t,this.api=o,this.zone=r,this.excel=s,this.rowData=[],this.jangad={},this.slist=[],this.contractors=[],this.contractor={},this.defaultColDef={filter:!0,sortable:!0,flex:2},this.selectedRow=[],this.pinnedRow=[],this.lot={},this.sdata=[],this.rowSelection={mode:"multiRow"},this.gridOptions={getRowClass:this.getRowClass.bind(this)},this.colDefs=[{headerName:"CH NO",field:"id",valueFormatter:a=>M.padStart(a.value.toLocaleString(),4,"0").toString()},{headerName:"NAME",field:"contractor.name"},{headerName:"KAPAN",field:"stock.srno"},{headerName:"HIRA",cellDataType:"number",valueGetter:a=>M.sumBy(a.data.Lot,"pcs")},{headerName:"LOST",cellDataType:"number",valueGetter:a=>M.sumBy(a.data.Lot,"lost")},{headerName:"DAMAGE",cellDataType:"number",valueGetter:a=>M.sumBy(a.data.Lot,"damage")},{headerName:"R WEIGHT",cellDataType:"number",valueGetter:a=>M.round(M.sumBy(a.data.Lot,"rwt"),2)},{headerName:"P WEIGHT",cellDataType:"number",valueGetter:a=>M.round(M.sumBy(a.data.Lot,"pwt"),2)},{headerName:"TO LOT",cellDataType:"number",valueGetter:a=>a.data.Lot.length},{headerName:"A WEIGHT",cellDataType:"number",valueGetter:a=>M.round(M.sumBy(a.data.Lot,"awt"),2)},{headerName:"VARIATION",cellDataType:"number",valueGetter:a=>M.sumBy(a.data.Lot,"rwt")?M.round(100*(M.sumBy(a.data.Lot,"awt")-M.sumBy(a.data.Lot,"pwt"))/M.sumBy(a.data.Lot,"rwt"),2):0},{headerName:"OUT",field:"issueDate",cellDataType:"dateString",valueFormatter:a=>a.value?_e(a.value).format("DD/MM/YYYY"):""},{headerName:"IN",field:"closeDate",cellDataType:"dateString",valueFormatter:a=>a.value?_e(a.value).format("DD/MM/YYYY"):""},{headerName:"DAYS",cellDataType:"number",cellStyle:{textAlign:"center"},valueGetter:a=>this.getDayDiff(a.data?.issueDate,a.data?.closeDate??_e().format("YYYY-MM-DD"))},{headerName:"Actions",cellStyle:{textAlign:"center"},cellRenderer:$k}],this.start_date="",this.end_date="",this.onSelectionChanged=a=>{var l=a?.api?.getSelectedRows();if(this.selectedRow=[],this.sdata=[],l?.length>1){var c={id:"Selected: "+l.length,Lot:[]},d=l.map(g=>g.Lot);for(var h of d)c.Lot=[...c.Lot,...h];this.selectedRow.push(c),this.sdata=l}},this.onFilterChanged=a=>{var l=[];if(this.selectedRow=[],this.sdata=[],a?.api?.forEachNodeAfterFilter(g=>{g.data&&l.push(g.data)}),l?.length!=this.rowData.length&&(console.log(l),this.selectedRow=[],l?.length>1)){var c={id:"Filtered: "+l.length,Lot:[]},d=l.map(g=>g.Lot);for(var h of d)c.Lot=[...c.Lot,...h];this.selectedRow.push(c),this.sdata=l}}}ngOnInit(){var t=this;return(0,ee.Z)(function*(){t.contractors=yield t.api.getInfo("contractor"),t.slist=yield t.api.getInfo("stock");var o=t;t.zone.run(()=>{$(function(){$(".select2").select2(),$(".start_date").datepicker({format:"dd/MM/yyyy",autoclose:!0}).datepicker("setDate",_e(o.start_date).format("DD/MM/YYYY")).on("changeDate",function(r){var s=new Date(r.date.valueOf());o.start_date=_e(s).format("YYYY-MM-DD")}),$(".end_date").datepicker({format:"dd/MM/yyyy",autoclose:!0}).datepicker("setDate",_e(o.end_date).format("DD/MM/YYYY")).on("changeDate",function(r){var s=new Date(r.date.valueOf());o.end_date=_e(s).format("YYYY-MM-DD")})})})})()}showKarkanaList(){$("#contractors_modal").modal("toggle")}getDayDiff(t,o){if(!t||!o)return 0;const r=_e(t);return _e(o).diff(r,"days")}fetchJangads(t){var o=this;return(0,ee.Z)(function*(){var r=yield o.api.getInfo("jangad");for(var s of r)s.issueDate=s?.issueDate?_e(s?.issueDate).format("YYYY-MM-DD"):null;if(o.rowData=r,o.pinnedRow=[],r?.length>1){var a={id:"Total: "+r.length,Lot:[]},l=r.map(d=>d.Lot);for(var c of l)a.Lot=[...a.Lot,...c];o.pinnedRow.push(a)}o.gridOptions.api.setRowData(o.rowData)})()}editJangad(t){this.jangad=Object.assign({},t),$("#j_issueDate").val(this.jangad.issueDate?_e(this.jangad.issueDate).format("YYYY-MM-DD"):_e().format("YYYY-MM-DD")),$("#j_closeDate").val(_e(this.jangad.closeDate).format("YYYY-MM-DD")),$("#jd_cut_name").val(this.jangad.stockId).trigger("change"),$("#jd_contractor").val(this.jangad.contractorId).trigger("change"),$("#jangad_modal").modal("toggle")}onCellClicked(t){var o=this;return(0,ee.Z)(function*(){if("id"==t.colDef.field&&t?.data?.id>0){var r=yield o.api.getInfo("jangad?id="+t.data.id);o.editJangad(r)}})()}addJangad(){return(0,ee.Z)(function*(){try{toastr.success("Empty Jangad Added")}catch{toastr.error("Something Went Wrong")}})()}onGridReady(t){this.httpClient.get(ta.N.endpoint+"jangad").subscribe(o=>{for(var r of o)r.issueDate=r?.issueDate?_e(r?.issueDate).format("YYYY-MM-DD"):null;if(this.rowData=o,this.pinnedRow=[],o?.length>1){var s={id:"Total: "+o.length,Lot:[]},a=o.map(c=>c.Lot);for(var l of a)s.Lot=[...s.Lot,...l];this.pinnedRow.push(s),t.api?.sizeColumnsToFit()}})}onAutoSize(){const t=this.gridOptions.columnApi.getAllColumns().map(o=>o.getId());this.gridOptions.columnApi.autoSizeColumns(t)}addAccount(){this.contractor={},$("#contractor_modal").modal("toggle")}editAccount(t){var o=this;return(0,ee.Z)(function*(){var r=yield o.api.getInfo("contractor/"+t.id);o.contractor=Object.assign({},r),$("#contractor_modal").modal("toggle")})()}checkQr(t){var o=this;return(0,ee.Z)(function*(){var r=t.target.value;if(r.indexOf(",")<0)return $("#qrcode_inward").val(""),void window.alert("Invalid Qr Code");var s=r.split(",");if(s?.length<7)return $("#qrcode_inward").val(""),void window.alert("Invalid Qr Code");var a=o.slist.find(d=>d.srno==s[0])?.id;if(!a)return $("#qrcode_inward").val(""),void window.alert("Invalid Qr Code");var l=yield o.api.postInfo("lot/query",{stockId:a,srno:Number(s[1])});if(!l)return $("#qrcode_inward").val(""),void window.alert("No Lot Detected!");if(!l?.jangadId)return window.alert("No Lot Scanned Before!"),void $("#qrcode_inward").val("");l?.awt||delete l.awt,o.lot=M.cloneDeep(l);var c=o.rowData.find(d=>d.id==l.jangadId);$("#jangad_gr_code").text(`#${o.api.padleft(c.id)} - ${c?.contractor?.name} - ${c?.stock?.srno}`),$("#jangad_gr_modal").modal("toggle"),setTimeout(()=>{$("#lt_awt").focus()},1e3)})()}loadContractors(t){var o=this;return(0,ee.Z)(function*(){o.contractors=yield o.api.getInfo("contractor")})()}showSummary(){$("#jangad_summary").modal("toggle")}download(){var r=(this.sdata.length?this.sdata:this.rowData).filter(s=>s?.contractorId>0).map(s=>[M.padStart(s?.id?.toLocaleString(),4,"0").toString(),s?.contractor?.name,s?.stock?.srno,M.sumBy(s?.Lot,"pcs"),M.sumBy(s?.Lot,"lost"),M.sumBy(s?.Lot,"damage"),M.round(M.sumBy(s?.Lot,"rwt"),2),M.round(M.sumBy(s?.Lot,"pwt"),2),s?.Lot?.length,M.round(M.sumBy(s?.Lot,"awt"),2),M.sumBy(s?.Lot,"rwt")?M.round(100*(M.sumBy(s?.Lot,"awt")-M.sumBy(s?.Lot,"pwt"))/M.sumBy(s?.Lot,"rwt"),2):0,s?.issueDate?_e(s.issueDate).format("YYYY-MM-DD"):"",s?.closeDate?_e(s.closeDate).format("YYYY-MM-DD"):"",this.getDayDiff(s?.issueDate,s?.closeDate??_e().format("YYYY-MM-DD"))]);this.excel.generateExcel(["CH NO","NAME","KAPAN","HIRA","LOST","DAMAGE","R WEIGHT","P WEIGHT","TO LOT","A WEIGHT","VARIATION","OUT","IN","DAYS"],r,"JANGADS_"+(this.sdata.length?"FILTER":"TOTAL"))}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Kt.eN),n.Y36(Ie.s),n.Y36(n.R0b),n.Y36(et.x))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-jangads"]],decls:94,vars:30,consts:[[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"box","box-default"],[1,"box-header","with-border","form-inline"],[1,"form-group"],[1,"btn","btn-sm","btn-primary","mr-5",3,"click"],[1,"fa","fa-list"],[1,"fa","fa-users"],[1,"fa","fa-download"],[1,"form-group","pull-right"],["for","qrcode",1,"mr-5"],["type","text","name","qrcode","id","qrcode_inward",1,"form-control","input-sm",2,"height","25px",3,"keyup.enter"],[1,"box-body","no-padding"],[1,"ag-theme-balham",2,"width","100%","height","70vh",3,"rowData","rowSelection","pinnedTopRowData","pinnedBottomRowData","columnDefs","defaultColDef","gridOptions","cellClicked","selectionChanged","gridReady","filterChanged"],["id","jangad_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"jangad","contractors","slist","changed"],["id","jangad_gr_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"lot"],["id","contractor_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"contractor","changed"],["id","contractors_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],["id","jangad_summary","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[1,"table","table-responsive","table-striped","table-condensed","table-hover","text-center"],[1,"bg-lightgreen"],["scope","col",1,"col-sm-auto"],["scope","row",3,"hidden",4,"ngFor","ngForOf"],["scope","row",1,"bg-lightyellow"],[1,"bg-lightred"],["scope","row",3,"hidden"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div")(7,"div",6)(8,"button",7),n.NdJ("click",function(){return r.showSummary()}),n._UZ(9,"i",8),n._uU(10,"Summary"),n.qZA()(),n.TgZ(11,"div",6)(12,"button",7),n.NdJ("click",function(){return r.showKarkanaList()}),n._UZ(13,"i",9),n._uU(14,"Karkana List"),n.qZA()(),n.TgZ(15,"div",6)(16,"button",7),n.NdJ("click",function(){return r.download()}),n._UZ(17,"i",10),n._uU(18,"Download"),n.qZA()(),n.TgZ(19,"div",11)(20,"label",12),n._uU(21,"Scan Qr"),n.qZA(),n.TgZ(22,"input",13),n.NdJ("keyup.enter",function(a){return r.checkQr(a)}),n.qZA()()()(),n.TgZ(23,"div",14)(24,"ag-grid-angular",15),n.NdJ("cellClicked",function(a){return r.onCellClicked(a)})("selectionChanged",function(a){return r.onSelectionChanged(a)})("gridReady",function(a){return r.onGridReady(a)})("filterChanged",function(a){return r.onFilterChanged(a)}),n.qZA()()()()()()(),n.TgZ(25,"div",16)(26,"app-jangad",17),n.NdJ("changed",function(a){return r.fetchJangads(a)}),n.qZA()(),n.TgZ(27,"div",18),n._UZ(28,"app-jangad-gr",19),n.qZA(),n.TgZ(29,"div",20)(30,"app-contractor",21),n.NdJ("changed",function(a){return r.loadContractors(a)}),n.qZA()(),n.TgZ(31,"div",22)(32,"div",23)(33,"div",24)(34,"div",25)(35,"button",26)(36,"span",27),n._uU(37,"\xd7"),n.qZA()(),n.TgZ(38,"h4",28),n._uU(39,"Karakana List"),n.qZA()(),n.TgZ(40,"div",29),n._UZ(41,"app-contractors"),n.qZA()()()(),n.TgZ(42,"div",30)(43,"div",23)(44,"div",24)(45,"div",25)(46,"button",26)(47,"span",27),n._uU(48,"\xd7"),n.qZA()(),n.TgZ(49,"h4",28),n._uU(50,"Summary"),n.qZA()(),n.TgZ(51,"div",29)(52,"table",31)(53,"thead")(54,"tr",32)(55,"th",33),n._uU(56,"NAME"),n.qZA(),n.TgZ(57,"th",33),n._uU(58,"COUNT"),n.qZA(),n.TgZ(59,"th",33),n._uU(60,"TO O HIRA"),n.qZA(),n.TgZ(61,"th",33),n._uU(62,"TO IN HIRA"),n.qZA(),n.TgZ(63,"th",33),n._uU(64,"STOCK H"),n.qZA(),n.TgZ(65,"th",33),n._uU(66,"TO O WEI"),n.qZA(),n.TgZ(67,"th",33),n._uU(68,"TO IN WEI"),n.qZA(),n.TgZ(69,"th",33),n._uU(70,"STOCK W"),n.qZA()()(),n.TgZ(71,"tbody"),n.YNc(72,hT,20,20,"tr",34),n.qZA(),n.TgZ(73,"tfoot")(74,"tr",35)(75,"th"),n._uU(76,"Total"),n.qZA(),n.TgZ(77,"th"),n._uU(78),n.qZA(),n.TgZ(79,"th"),n._uU(80),n.qZA(),n.TgZ(81,"th"),n._uU(82),n.qZA(),n.TgZ(83,"th",36),n._uU(84),n.qZA(),n.TgZ(85,"th"),n._uU(86),n.ALo(87,"wt"),n.qZA(),n.TgZ(88,"th"),n._uU(89),n.ALo(90,"wt"),n.qZA(),n.TgZ(91,"th",36),n._uU(92),n.ALo(93,"wt"),n.qZA()()()()()()()()),2&o&&(n.xp6(24),n.Q6J("rowData",r.rowData)("rowSelection",r.rowSelection)("pinnedTopRowData",r.selectedRow)("pinnedBottomRowData",r.pinnedRow)("columnDefs",r.colDefs)("defaultColDef",r.defaultColDef)("gridOptions",r.gridOptions),n.xp6(2),n.Q6J("jangad",r.jangad)("contractors",r.contractors)("slist",r.slist),n.xp6(2),n.Q6J("lot",r.lot),n.xp6(2),n.Q6J("contractor",r.contractor),n.xp6(42),n.Q6J("ngForOf",r.contractors),n.xp6(6),n.Oqu(r.api.getSubCount(r.contractors,"Jangad")),n.xp6(2),n.Oqu(r.api.getSubInSum(r.contractors,"Jangad","Lot","pcs")),n.xp6(2),n.Oqu(r.api.getSubInFlSum(r.contractors,"Jangad","Lot","pcs",n.DdM(26,Qc))),n.xp6(2),n.Oqu(r.api.getSubInFlSum(r.contractors,"Jangad","Lot","pcs",n.DdM(27,wl))),n.xp6(2),n.Oqu(n.lcZ(87,20,r.api.getSubInSum(r.contractors,"Jangad","Lot","pwt"))),n.xp6(3),n.Oqu(n.lcZ(90,22,r.api.getSubInFlSum(r.contractors,"Jangad","Lot","pwt",n.DdM(28,Qc)))),n.xp6(3),n.Oqu(n.lcZ(93,24,r.api.getSubInFlSum(r.contractors,"Jangad","Lot","pwt",n.DdM(29,wl)))))},dependencies:[Ee.sg,wo,oT,rT,sT,uT,Bt.J]})}return e})();function pT(e,i){if(1&e&&(n.TgZ(0,"option"),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t)}}function fT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",29)(1,"td",30)(2,"input",31),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw(2);return n.KtG(s.lot.srno=r)}),n.qZA()(),n.TgZ(3,"td",30)(4,"input",32),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw(2);return n.KtG(s.lot.pcs=r)}),n.qZA()(),n.TgZ(5,"td",30)(6,"input",33),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw(2);return n.KtG(s.lot.rwt=r)}),n.qZA()(),n.TgZ(7,"td",30)(8,"input",34),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw(2);return n.KtG(s.lot.pwt=r)}),n.qZA()(),n.TgZ(9,"td",30)(10,"input",35),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw(2);return n.KtG(s.lot.quality=r)}),n.qZA()(),n.TgZ(11,"td",30)(12,"input",36),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw(2);return n.KtG(s.lot.range=r)}),n.qZA()(),n.TgZ(13,"td",30)(14,"input",37),n.NdJ("ngModelChange",function(r){n.CHM(t);const s=n.oxw(2);return n.KtG(s.lot.remarks=r)}),n.qZA()(),n._UZ(15,"td"),n.TgZ(16,"td")(17,"a",38),n.NdJ("click",function(){n.CHM(t);const r=n.oxw(2);return n.KtG(r.updateLot())}),n._UZ(18,"span",39),n.qZA()()()}if(2&e){const t=n.oxw(2);n.xp6(2),n.Q6J("ngModel",t.lot.srno),n.xp6(2),n.Q6J("ngModel",t.lot.pcs),n.xp6(2),n.Q6J("ngModel",t.lot.rwt),n.xp6(2),n.Q6J("ngModel",t.lot.pwt),n.xp6(2),n.Q6J("ngModel",t.lot.quality),n.xp6(2),n.Q6J("ngModel",t.lot.range),n.xp6(2),n.Q6J("ngModel",t.lot.remarks)}}function mT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",40)(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.ALo(7,"wt"),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.ALo(10,"wt"),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.qZA(),n.TgZ(17,"td"),n._uU(18),n.qZA(),n.TgZ(19,"td")(20,"a",38),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw(2);return n.KtG(a.deleteLot(s))}),n._UZ(21,"span",41),n.qZA()()()}if(2&e){const t=i.$implicit;n.xp6(2),n.Oqu(t.srno),n.xp6(2),n.Oqu(t.pcs),n.xp6(2),n.Oqu(n.lcZ(7,8,t.rwt)),n.xp6(3),n.Oqu(n.lcZ(10,10,t.pwt)),n.xp6(3),n.Oqu(t.quality),n.xp6(2),n.Oqu(t.range),n.xp6(2),n.Oqu(t.remarks),n.xp6(2),n.Oqu(null==t?null:t.division)}}function vT(e,i){if(1&e&&(n.TgZ(0,"div",23)(1,"table",24)(2,"thead")(3,"tr",25)(4,"th",26),n._uU(5,"\u0a95\u0acd\u0ab0\u0aae"),n.qZA(),n.TgZ(6,"th",26),n._uU(7,"\u0aa5\u0abe\u0aa8"),n.qZA(),n.TgZ(8,"th",26),n._uU(9,"\u0a95\u0abe\u0a9a\u0ac1"),n.qZA(),n.TgZ(10,"th",26),n._uU(11,"\u0aa4\u0ac8-\u0ab5\u0a9c\u0aa8"),n.qZA(),n.TgZ(12,"th",26),n._uU(13,"\u0aaa\u0ac1\u0ab0\u0abf\u0a9f\u0ac0"),n.qZA(),n.TgZ(14,"th",26),n._uU(15,"\u0ab0\u0ac7\u0aa8\u0acd\u0a9c"),n.qZA(),n.TgZ(16,"th",26),n._uU(17,"\u0ab5\u0ab0\u0acd\u0a97"),n.qZA(),n.TgZ(18,"th",26),n._uU(19,"D"),n.qZA(),n._UZ(20,"th",26),n.qZA()(),n.TgZ(21,"tbody"),n.YNc(22,fT,19,7,"tr",27),n.YNc(23,mT,22,12,"tr",28),n.qZA()()()),2&e){const t=n.oxw();n.xp6(22),n.Q6J("ngIf",t.lotEntry),n.xp6(1),n.Q6J("ngForOf",t.qlist)}}const yl=function(e){return{remarks:e}};function CT(e,i){if(1&e&&(n.TgZ(0,"tr",40)(1,"th",48),n._uU(2),n.TgZ(3,"span",49),n._uU(4),n.ALo(5,"filter"),n.qZA()(),n.TgZ(6,"td"),n._uU(7),n.ALo(8,"filter"),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.ALo(11,"wt"),n.ALo(12,"filter"),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.ALo(15,"wt"),n.ALo(16,"filter"),n.qZA(),n.TgZ(17,"td"),n._uU(18),n.ALo(19,"wt"),n.ALo(20,"filter"),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw(2);n.xp6(2),n.hij("",t," "),n.xp6(2),n.hij("(",o.api.getCount(n.xi3(5,6,o.qlist,n.VKq(27,yl,t))),") "),n.xp6(3),n.Oqu(o.api.getSum(n.xi3(8,9,o.qlist,n.VKq(29,yl,t)),"pcs")),n.xp6(3),n.Oqu(n.lcZ(11,12,o.api.getSum(n.xi3(12,14,o.qlist,n.VKq(31,yl,t)),"rwt"))),n.xp6(4),n.Oqu(n.lcZ(15,17,o.api.getSum(n.xi3(16,19,o.qlist,n.VKq(33,yl,t)),"pwt"))),n.xp6(4),n.hij("",o.api.getSum(o.qlist,"pwt")?n.lcZ(19,22,100*o.api.getSum(n.xi3(20,24,o.qlist,n.VKq(35,yl,t)),"pwt")/o.api.getSum(o.qlist,"pwt")):0," %")}}function wT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",54)(1,"th")(2,"a",38),n.NdJ("click",function(){n.CHM(t);const r=n.oxw(2);return n.KtG(r.clearList2())}),n._UZ(3,"i",55),n.qZA(),n._uU(4),n.TgZ(5,"span",49),n._uU(6),n.qZA()(),n.TgZ(7,"th"),n._uU(8),n.qZA(),n.TgZ(9,"th"),n._uU(10),n.ALo(11,"wt"),n.qZA(),n.TgZ(12,"th"),n._uU(13),n.ALo(14,"wt"),n.qZA(),n.TgZ(15,"th"),n._uU(16),n.ALo(17,"wt"),n.qZA()()}if(2&e){const t=n.oxw(2);n.xp6(4),n.hij(" ",t.sel_list2.length," "),n.xp6(2),n.hij("(",t.api.getSum(t.sel_list2,"l"),")"),n.xp6(2),n.Oqu(t.api.getSum(t.sel_list2,"pcs")),n.xp6(2),n.Oqu(n.lcZ(11,6,t.api.getSum(t.sel_list2,"rwt"))),n.xp6(3),n.Oqu(n.lcZ(14,8,t.api.getSum(t.sel_list2,"pwt"))),n.xp6(3),n.Oqu(t.api.getSum(t.sel_list2,"rwt")?n.lcZ(17,10,t.api.getSum(t.sel_list2,"pcs")/t.api.getSum(t.sel_list2,"rwt")):0)}}function yT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",56)(1,"th",57)(2,"span",58),n._uU(3),n.qZA(),n.TgZ(4,"span",49)(5,"a",38),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw(2);return n.KtG(a.selList2(s))}),n._uU(6),n.qZA()()(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.ALo(11,"wt"),n.qZA(),n.TgZ(12,"td"),n._uU(13),n.ALo(14,"wt"),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.ALo(17,"wt"),n.qZA()()}if(2&e){const t=i.$implicit,o=n.oxw(2);n.Tol(o.getColor2(t)),n.Q6J("hidden",!(null!=t&&t.k.length)),n.xp6(3),n.Oqu(t.k),n.xp6(3),n.hij("(",t.l,")"),n.xp6(2),n.Oqu(t.pcs),n.xp6(2),n.Oqu(n.lcZ(11,9,t.rwt)),n.xp6(3),n.Oqu(n.lcZ(14,11,t.pwt)),n.xp6(3),n.Oqu(t.rwt?n.lcZ(17,13,t.pcs/t.rwt):0)}}function bT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",54)(1,"th")(2,"a",38),n.NdJ("click",function(){n.CHM(t);const r=n.oxw(2);return n.KtG(r.clearList1())}),n._UZ(3,"i",55),n.qZA(),n._uU(4),n.TgZ(5,"span",49),n._uU(6),n.qZA()(),n.TgZ(7,"th"),n._uU(8),n.qZA(),n.TgZ(9,"th"),n._uU(10),n.ALo(11,"wt"),n.qZA(),n.TgZ(12,"th"),n._uU(13),n.ALo(14,"wt"),n.qZA(),n.TgZ(15,"th"),n._uU(16),n.ALo(17,"wt"),n.qZA()()}if(2&e){const t=n.oxw(2);n.xp6(4),n.hij(" ",t.sel_list1.length," "),n.xp6(2),n.hij("(",t.api.getSum(t.sel_list1,"l"),")"),n.xp6(2),n.Oqu(t.api.getSum(t.sel_list1,"pcs")),n.xp6(2),n.Oqu(n.lcZ(11,6,t.api.getSum(t.sel_list1,"rwt"))),n.xp6(3),n.Oqu(n.lcZ(14,8,t.api.getSum(t.sel_list1,"pwt"))),n.xp6(3),n.hij("",t.api.getSum(t.qlist,"pwt")?n.lcZ(17,10,100*t.api.getSum(t.sel_list1,"pwt")/t.api.getSum(t.qlist,"pwt")):0," %")}}function ST(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",56)(1,"th",57)(2,"span",58),n._uU(3),n.qZA(),n.TgZ(4,"span",49)(5,"a",38),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw(2);return n.KtG(a.selList1(s))}),n._uU(6),n.qZA()()(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.ALo(11,"wt"),n.qZA(),n.TgZ(12,"td"),n._uU(13),n.ALo(14,"wt"),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.ALo(17,"wt"),n.qZA()()}if(2&e){const t=i.$implicit,o=n.oxw(2);n.Tol(o.getColor1(t)),n.Q6J("hidden",!(null!=t&&t.k.length)),n.xp6(3),n.Oqu(t.k),n.xp6(3),n.hij("(",t.l,")"),n.xp6(2),n.Oqu(t.pcs),n.xp6(2),n.Oqu(n.lcZ(11,9,t.rwt)),n.xp6(3),n.Oqu(n.lcZ(14,11,t.pwt)),n.xp6(3),n.hij("",o.api.getSum(o.qlist,"pwt")?n.lcZ(17,13,100*t.pwt/o.api.getSum(o.qlist,"pwt")):0," %")}}function _T(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",54)(1,"th")(2,"a",38),n.NdJ("click",function(){n.CHM(t);const r=n.oxw(2);return n.KtG(r.clearList3())}),n._UZ(3,"i",55),n.qZA(),n._uU(4),n.TgZ(5,"span",49),n._uU(6),n.qZA()(),n.TgZ(7,"th"),n._uU(8),n.qZA(),n.TgZ(9,"th"),n._uU(10),n.ALo(11,"wt"),n.qZA(),n.TgZ(12,"th"),n._uU(13),n.ALo(14,"wt"),n.qZA(),n.TgZ(15,"th"),n._uU(16),n.ALo(17,"wt"),n.qZA()()}if(2&e){const t=n.oxw(2);n.xp6(4),n.hij(" ",t.sel_list3.length," "),n.xp6(2),n.hij("(",t.api.getSum(t.sel_list3,"l"),")"),n.xp6(2),n.Oqu(t.api.getSum(t.sel_list3,"pcs")),n.xp6(2),n.Oqu(n.lcZ(11,6,t.api.getSum(t.sel_list3,"rwt"))),n.xp6(3),n.Oqu(n.lcZ(14,8,t.api.getSum(t.sel_list3,"pwt"))),n.xp6(3),n.Oqu(t.api.getSum(t.sel_list3,"rwt")?n.lcZ(17,10,t.api.getSum(t.sel_list3,"pcs")/t.api.getSum(t.sel_list3,"rwt")):0)}}function xT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",56)(1,"th",57)(2,"span",58),n._uU(3),n.qZA(),n.TgZ(4,"span",49)(5,"a",38),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw(2);return n.KtG(a.selList3(s))}),n._uU(6),n.qZA()()(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.ALo(11,"wt"),n.qZA(),n.TgZ(12,"td"),n._uU(13),n.ALo(14,"wt"),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.ALo(17,"wt"),n.qZA()()}if(2&e){const t=i.$implicit,o=n.oxw(2);n.Tol(o.getColor3(t)),n.Q6J("hidden",!(null!=t&&t.k.length)),n.xp6(3),n.Oqu(t.k),n.xp6(3),n.hij("(",t.l,")"),n.xp6(2),n.Oqu(t.pcs),n.xp6(2),n.Oqu(n.lcZ(11,9,t.rwt)),n.xp6(3),n.Oqu(n.lcZ(14,11,t.pwt)),n.xp6(3),n.Oqu(t.rwt?n.lcZ(17,13,t.pcs/t.rwt):0)}}function AT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",23)(1,"table",42)(2,"thead")(3,"tr",43)(4,"th")(5,"a",44),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.printData())}),n._UZ(6,"span",45),n.qZA()(),n.TgZ(7,"th"),n._uU(8,"R.Wt"),n.qZA(),n.TgZ(9,"th"),n._uU(10,"Size"),n.qZA(),n.TgZ(11,"th"),n._uU(12,"R-P (G)"),n.qZA(),n.TgZ(13,"th"),n._uU(14,"R-P (R)"),n.qZA()(),n.TgZ(15,"tr",46)(16,"th"),n._uU(17),n.ALo(18,"uppercase"),n.qZA(),n.TgZ(19,"th"),n._uU(20),n.ALo(21,"wt"),n.qZA(),n.TgZ(22,"th"),n._uU(23),n.ALo(24,"wt"),n.qZA(),n.TgZ(25,"th"),n._uU(26),n.ALo(27,"wt"),n.qZA(),n.TgZ(28,"th"),n._uU(29),n.ALo(30,"wt"),n.qZA()(),n.TgZ(31,"tr")(32,"th",47)(33,"a",38),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.updateStatus(r.lstock))}),n._UZ(34,"i"),n.qZA(),n._uU(35),n.qZA(),n.TgZ(36,"th",47),n._uU(37,"\u0aa5\u0abe\u0aa8"),n.qZA(),n.TgZ(38,"th",47),n._uU(39,"\u0a95\u0abe\u0a9a\u0ac1"),n.qZA(),n.TgZ(40,"th",47),n._uU(41,"\u0aa4\u0ac8-\u0ab5\u0a9c\u0aa8"),n.qZA(),n._UZ(42,"th",47),n.qZA()(),n.TgZ(43,"tbody")(44,"tr",40)(45,"th",48),n._uU(46,"QR Entry "),n.TgZ(47,"span",49),n._uU(48),n.qZA()(),n.TgZ(49,"td"),n._uU(50),n.qZA(),n.TgZ(51,"td"),n._uU(52),n.ALo(53,"wt"),n.qZA(),n.TgZ(54,"td"),n._uU(55),n.ALo(56,"wt"),n.qZA(),n._UZ(57,"td"),n.qZA(),n.TgZ(58,"tr",50)(59,"th",48),n._uU(60,"\u0a9f\u0acb\u0a9f\u0ab2 "),n.TgZ(61,"span",49),n._uU(62),n.qZA()(),n.TgZ(63,"td"),n._uU(64),n.qZA(),n.TgZ(65,"td"),n._uU(66),n.ALo(67,"wt"),n.qZA(),n.TgZ(68,"td"),n._uU(69),n.ALo(70,"wt"),n.qZA(),n.TgZ(71,"td"),n._uU(72,"100 %"),n.qZA()(),n.YNc(73,CT,21,37,"tr",28),n.TgZ(74,"tr",40),n._UZ(75,"th"),n.TgZ(76,"th",51),n._uU(77,"\u0aaa\u0ac1\u0ab0\u0abf\u0a9f\u0ac0 "),n.qZA()(),n.YNc(78,wT,18,12,"tr",52),n.YNc(79,yT,18,15,"tr",53),n.TgZ(80,"tr",40),n._UZ(81,"th"),n.TgZ(82,"th",51),n._uU(83,"\u0ab0\u0ac7\u0aa8\u0acd\u0a9c"),n.qZA()(),n.YNc(84,bT,18,12,"tr",52),n.YNc(85,ST,18,15,"tr",53),n.TgZ(86,"tr",40),n._UZ(87,"th"),n.TgZ(88,"th",51),n._uU(89,"\u0ab5\u0abf\u0aad\u0abe\u0a97"),n.qZA()(),n.YNc(90,_T,18,12,"tr",52),n.YNc(91,xT,18,15,"tr",53),n.qZA()()()}if(2&e){const t=n.oxw();n.xp6(17),n.AsE("",n.lcZ(18,26,t.code)," - ",t.lstock.employee,""),n.xp6(3),n.Oqu(n.lcZ(21,28,t.lstock.rweight)),n.xp6(3),n.Oqu(t.lstock.rweight?n.lcZ(24,30,t.api.getSum(t.qlist,"pcs")/t.lstock.rweight):0),n.xp6(3),n.hij("",t.lstock.actweight?n.lcZ(27,32,100*t.api.getSum(t.qlist,"pwt")/t.lstock.actweight):0," %"),n.xp6(3),n.hij("",t.lstock.rweight?n.lcZ(30,34,100*t.api.getSum(t.qlist,"pwt")/t.lstock.rweight):0," %"),n.xp6(5),n.Tol(null!=t.lstock&&t.lstock.ltStatus?"fa fa-repeat":"fa fa-thumbs-up"),n.xp6(1),n.Oqu(null!=t.lstock&&t.lstock.ltStatus?"Completed":"In Progress"),n.xp6(9),n.Tol(t.lotReport.length==t.qlist.length?"bg-5":"bg-4"),n.xp6(4),n.hij("(",t.lotReport.length,")"),n.xp6(2),n.Oqu(t.api.getSum(t.lotReport,"pcs")),n.xp6(2),n.Oqu(n.lcZ(53,36,t.api.getSum(t.lotReport,"rwt"))),n.xp6(3),n.Oqu(n.lcZ(56,38,t.api.getSum(t.lotReport,"pwt"))),n.xp6(7),n.hij("(",t.qlist.length,")"),n.xp6(2),n.Oqu(t.api.getSum(t.qlist,"pcs")),n.xp6(2),n.Oqu(n.lcZ(67,40,t.api.getSum(t.qlist,"rwt"))),n.xp6(3),n.Oqu(n.lcZ(70,42,t.api.getSum(t.qlist,"pwt"))),n.xp6(4),n.Q6J("ngForOf",t.glist),n.xp6(5),n.Q6J("ngIf",t.sel_list2.length>0),n.xp6(1),n.Q6J("ngForOf",t.qslist),n.xp6(5),n.Q6J("ngIf",t.sel_list1.length>0),n.xp6(1),n.Q6J("ngForOf",t.qtlist),n.xp6(5),n.Q6J("ngIf",t.sel_list3.length>0),n.xp6(1),n.Q6J("ngForOf",t.qclist)}}let kT=(()=>{class e{constructor(t){this.api=t,this.code="",this.glist=["\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2","XXX","\u0a9a\u0acb\u0a95\u0ac0","\u0aae\u0abe\u0ab0\u0acd\u0a95\u0abf\u0ab8","\u0aaa\u0abe\u0aa8","\u0a85\u0aa8\u0acd\u0aaf","4P \u0a95\u0abe\u0a9a\u0ac1"],this.lstock={},this.lotEntry=!1,this.lot={},this.qlist=[],this.qslist=[],this.qtlist=[],this.qclist=[],this.qrlist=[],this.costList=[],this.typeList=[],this.temp=[],this.sel_list1=[],this.sel_list2=[],this.sel_list3=[],this.sel_list4=[],this.lotInfo=[],this.lotReport=[]}ngOnInit(){var t=this;return(0,ee.Z)(function*(){var o=yield t.api.getInfo("temp");t.costList=o.find(r=>"cost"==r.name)?.description??[],t.typeList=o.find(r=>"types"==r.name)?.description??[]})()}load(t=null){var o=this;return(0,ee.Z)(function*(){o.qlist=[],o.sel_list1=[],o.sel_list2=[],o.sel_list3=[],o.sel_list4=[],o.lstock={},o.lotInfo=[],o.lotReport=[];var r=yield o.api.postInfo("stock/query",{srno:t??$("#code").val()?.toString()?.toUpperCase()}),s=yield o.api.getLotInfo(t??$("#code").val()?.toString()?.toUpperCase());o.lotInfo=s?.length?s.pop():[];var a=M.groupBy(o.lotInfo,"LotNo");if(o.lotReport=M.orderBy(M.map(a,(g,m)=>({k:m,pcs:g.length,rwt:M.sumBy(g,"RoWt"),pwt:M.sumBy(g,"PWt")})),["k"],["asc"]),r?.id){o.lstock=r,console.log(o.lotInfo,o.lotReport,o.lstock),o.qlist=M.orderBy(r?.Lot,["srno"],["asc"]);var l=M.groupBy(o.qlist,"division");o.qclist=M.orderBy(M.map(l,(g,m)=>({k:m,l:g.length,pcs:M.sumBy(g,"pcs"),rwt:M.sumBy(g,"rwt"),pwt:M.sumBy(g,"pwt")})),["k"],["asc"]);var c=M.groupBy(o.qlist,"remarks");o.qrlist=M.orderBy(M.map(c,(g,m)=>({k:m,l:g.length,pcs:M.sumBy(g,"pcs"),rwt:M.sumBy(g,"rwt"),pwt:M.sumBy(g,"pwt")})),["k"],["asc"]);var d=M.groupBy(o.qlist.filter(g=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==g.remarks),"quality");o.qslist=M.orderBy(M.map(d,(g,m)=>({k:m,l:g.length,pcs:M.sumBy(g,"pcs"),rwt:M.sumBy(g,"rwt"),pwt:M.sumBy(g,"pwt")})),["k"],["desc"]);var h=M.groupBy(o.qlist.filter(g=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==g.remarks),"range");o.qtlist=M.orderBy(M.map(h,(g,m)=>({k:m,l:g.length,pcs:M.sumBy(g,"pcs"),rwt:M.sumBy(g,"rwt"),pwt:M.sumBy(g,"pwt")})),["k"],["asc"])}})()}scanQrLot(t){var o=this;return(0,ee.Z)(function*(){var r=Number(t.target.value);if(console.log(r),!r)return toastr.error("Invalid Lot No"),$("#lot_no").val(""),void $("#lot_no").focus();var s=o.qlist.find(m=>m.srno==r);if(console.log(s,"isExist"),s?.id>0)return toastr.warning("Already Scanned!"),$("#lot_no").val(""),void $("#lot_no").focus();var a=$("#quality_d").val()?.trim();if(!a?.length)return toastr.error("\u0aaa\u0ac1\u0ab0\u0abf\u0a9f\u0ac0 Should not be blank"),$("#lot_no").val(""),void $("#lot_no").focus();var l=o.lotInfo.filter(m=>m.LotNo==r);if(!l?.length)return toastr.error("No QR Entries Found in Galaxy!"),$("#lot_no").val(""),void $("#lot_no").focus();var c=l[0].Diameter?.toLowerCase().split("to");if(!c?.length)return toastr.error("Diameter Not Detected!"),$("#lot_no").val(""),void $("#lot_no").focus();var d=o.costList?.find(m=>m.min==Number(c[0].trim())&&m.max==Number(c[1].trim()));if(d){for(var h of l)h.Dia=Number(h?.QR?.split(",")[0])??0;var g={stockId:o.lstock.id,srno:r,pcs:l.length,rwt:M.round(M.sumBy(l,"RoWt"),3),pwt:M.round(M.sumBy(l,"PWt"),3),shape:l[0]?.Shape,range:c[0].trim()+" - "+c[1].trim(),datetime:l[0]?.QRDate,division:d.division,remarks:$("#lot_remarks").val(),quality:$("#quality_d").val(),QREntry:{create:l}};console.log(g);try{return yield o.api.postInfo("lot",g),toastr.success("Lot Added Successfully"),yield o.load(o.lstock.srno),void setTimeout(()=>{$("#lot_no").val(""),$("#lot_no").focus()},1e3)}catch{toastr.error("Something Went Wrong")}}else toastr.error("Range Not Detected")})()}scanQr(t){var o=this;return(0,ee.Z)(function*(){try{var r=t.target.value;if(r.indexOf(",")<0)return window.alert("Invalid Qr Code"),$("#qrcode").val(""),void $("#qrcode").focus();var s=r.split(",");if(console.log(s),s?.length<7)return void toastr.error("Invalid Qr Code");var a=yield o.api.postInfo("stock/query",{srno:s[0]});if(!a?.id)return window.alert("No kapan code vailable"),void $("#qrcode").val("");$("#code").val(a.srno);var l="";if("(S) ROUND"==s[5]){var c=s[6].split(" "),d=o.costList?.find(f=>f.min==Number(c[1])&&f.max==Number(c[3]));if(!d)return void toastr.error("Range Not Detected");l=d.division}var h=o.lotInfo.filter(f=>f.LotNo==Number(s[1]));if(h.length!=Number(s[2]))return toastr.error("QR Entries Not Found in Galaxy King"),window.alert("QR Entries Not Found in Galaxy King"),$("#qrcode").val(""),void $("#qrcode").focut();for(var g of h)g.Dia=Number(g?.QR?.split(",")[0])??0;var m={stockId:a.id,srno:Number(s[1]),pcs:Number(s[2]),rwt:Number(s[3]),pwt:Number(s[4]),shape:s[5],range:"(S) ROUND"==s[5]?s[6]:"",datetime:s[s.length-1],division:l,remarks:$("#lot_remarks").val(),quality:$("#quality_d").val(),QREntry:{create:h}};console.log(m);try{yield o.api.postInfo("lot",m),toastr.success("Lot Scanned Successfully"),yield o.load(s[0])}catch{toastr.error("Something Went Wrong")}$("#qrcode").val(""),$("#qrcode").focus()}catch{toastr.error("Something Went Wrong")}})()}deleteLot(t){var o=this;return(0,ee.Z)(function*(){try{var r=M.cloneDeep(t);(yield o.api.deleteInfo("lot/"+t.id))&&(toastr.success(`Lot #${t?.srno} Deleted`),yield o.api.postInfo("lot/deleteMany",{where:{LotNo:r.srno,KapanNo:o.lstock?.srno}}),yield o.load())}catch{toastr.error("Please Try Again")}})()}addLot(){this.lotEntry=!this.lotEntry}updateLot(){var t=this;return(0,ee.Z)(function*(){if(console.log(t.lot),t.qlist.find(l=>l.srno==t.lot.srno))return void toastr.warning("Lot Srno Already Exists");if(!t.lot?.srno)return void toastr.warning("Missing: \u0a95\u0acd\u0ab0\u0aae");if(!t.lot?.pcs)return void toastr.warning("Missing: \u0aa5\u0abe\u0aa8");if(!t.lot?.rwt)return void toastr.warning("Missing: \u0a95\u0abe\u0a9a\u0ac1");if(!t.lot?.pwt)return void toastr.warning("Missing: \u0aa4\u0ac8-\u0ab5\u0a9c\u0aa8");if(!t.lot?.quality)return void toastr.warning("Missing: \u0aaa\u0ac1\u0ab0\u0abf\u0a9f\u0ac0");if(!t.lot?.range)return void toastr.warning("Missing: \u0ab0\u0ac7\u0aa8\u0acd\u0a9c");if(!t.lot?.range)return void toastr.warning("Missing: \u0ab5\u0ab0\u0acd\u0a97");var r=t.lot?.range?.split(" ");if(!r)return void toastr.error("Invalid Range");var s=t.costList?.find(l=>l.min==Number(r[1])&&l.max==Number(r[3]));if(!s)return void toastr.error("Range Not Detected");t.lot.division=s.division,t.lot.stockId=t.lstock.id;let a=Object.assign({},t.lot);try{yield t.api.postInfo("lot",a),toastr.success("Lot Scanned Successfully"),yield t.load(),t.lot={},t.lotEntry=!1}catch{toastr.error("Something Went Wrong")}})()}printData(){let t,o;t=document.getElementById("myPrint")?.outerHTML,o=window.open("","_blank","top=0,left=0,height=100%,width=auto"),o?.document.open(),o?.document.write(`\n      <html>\n        <head>     \n          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">\n          <style>.text-center { text-align: center !important; } </style> \n        </head>\n    <body onload="window.print();window.close()">${t}</body>\n      </html>`),o?.document.close()}clearList1(){this.sel_list1=[]}clearList2(){this.sel_list2=[]}clearList3(){this.sel_list3=[]}getColor1(t){return this.sel_list1.filter(r=>r.k==t.k).length>0?"bg-grey":""}getColor2(t){return this.sel_list2.filter(r=>r.k==t.k).length>0?"bg-grey":""}getColor3(t){return this.sel_list3.filter(r=>r.k==t.k).length>0?"bg-grey":""}selList1(t){this.sel_list1.findIndex(o=>o.k==t.k)>-1?this.sel_list1=this.sel_list1.filter(o=>o.k!=t.k):this.sel_list1.push(t),console.log(this.sel_list1)}selList2(t){this.sel_list2.findIndex(o=>o.k==t.k)>-1?this.sel_list2=this.sel_list2.filter(o=>o.k!=t.k):this.sel_list2.push(t),console.log(this.sel_list2)}selList3(t){this.sel_list3.findIndex(o=>o.k==t.k)>-1?this.sel_list3=this.sel_list3.filter(o=>o.k!=t.k):this.sel_list3.push(t),console.log(this.sel_list3)}updateStatus(t){var o=this;return(0,ee.Z)(function*(){if(t?.id&&(console.log(t),window.confirm("Are you want to update the status?")))try{var r=M.cloneDeep(t);yield o.api.putInfo("stock",{id:r.id,ltStatus:!r?.ltStatus}),t.ltStatus=!r?.ltStatus,toastr.success("Updated Successfully!")}catch{toastr.error("Something Went Wrong!")}})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-lotting"]],decls:45,vars:8,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"box","box-solid"],[1,"box-header","with-border"],[1,"box-title"],[1,"box-body",2,"min-height","800px !important"],[1,"col-sm-12","form-horizontal"],[1,"col-sm-3"],[1,"form-group"],[1,"col-sm-5","control-label"],[1,"col-sm-7"],["type","text","id","code","name","code",1,"form-control","input-sm",3,"ngModel","value","ngModelChange","input"],[1,"col-sm-2"],[1,"col-sm-4","control-label"],[1,"col-sm-8"],["type","text","id","quality_d",1,"form-control","input-sm"],["id","lot_remarks",1,"form-control","input-sm"],[4,"ngFor","ngForOf"],["type","text","id","qrcode",1,"form-control","input-sm","qrcode",3,"keyup.enter"],["type","number","id","lot_no",1,"form-control","input-sm","lot_no",3,"disabled","keyup.enter"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"table","table-condensed","table-responsive","table-striped","text-center"],[2,"background-color","lightgray"],["scope","col",1,"col-sm-auto"],["style","background-color: lightgoldenrodyellow;",4,"ngIf"],["scope","row",4,"ngFor","ngForOf"],[2,"background-color","lightgoldenrodyellow"],[1,"p2","jc"],["type","number","name","lot_srno",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["type","number","name","lot_pcs",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["type","number","name","lot_rwt",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["type","number","name","lot_pwt",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["type","text","name","lot_quality",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["type","text","name","lot_range",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["type","text","name","lot_remarks",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[3,"click"],[1,"fa","fa-check","text-green"],["scope","row"],[1,"fa","fa-trash","text-red"],["id","myPrint",1,"table","table-responsive","table-condensed","table-bordered","text-center"],[1,"bg-lightgrey"],["id","print_lot",3,"click"],[1,"fa","fa-print","text-red"],[1,"bg-lightred"],["scope","col",1,"col-sm-auto","text-center"],[1,"text-center"],[1,"pull-right"],["scope","row",2,"background-color","#e1df9e"],["colspan","100%",1,"text-center",2,"background-color","#fafafa"],["class","bg-lightgreen",4,"ngIf"],["style","cursor: pointer;",3,"class","hidden",4,"ngFor","ngForOf"],[1,"bg-lightgreen"],[1,"fa","fa-refresh"],[2,"cursor","pointer",3,"hidden"],[2,"text-align","left"],[2,"margin-left","30px"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),n._uU(7,"Lotting"),n.qZA()(),n.TgZ(8,"div",7)(9,"div",2)(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),n._uU(14,"\u0a95\u0aaa\u0aa8 \u0a95\u0acb\u0aa1"),n.qZA(),n.TgZ(15,"div",12)(16,"input",13),n.NdJ("ngModelChange",function(a){return r.code=a})("input",function(){return r.load()}),n.ALo(17,"uppercase"),n.qZA()()()(),n.TgZ(18,"div",14)(19,"div",10)(20,"label",15),n._uU(21,"\u0aaa\u0ac1\u0ab0\u0abf\u0a9f\u0ac0"),n.qZA(),n.TgZ(22,"div",16),n._UZ(23,"input",17),n.qZA()()(),n.TgZ(24,"div",14)(25,"div",10)(26,"label",15),n._uU(27,"\u0ab5\u0ab0\u0acd\u0a97"),n.qZA(),n.TgZ(28,"div",16)(29,"select",18),n.YNc(30,pT,2,1,"option",19),n.qZA()()()(),n.TgZ(31,"div",9)(32,"div",10)(33,"label",15),n._uU(34,"\u0aac\u0abe\u0ab0\u0a95\u0acb\u0aa1"),n.qZA(),n.TgZ(35,"div",16)(36,"input",20),n.NdJ("keyup.enter",function(a){return r.scanQr(a)}),n.qZA()()()(),n.TgZ(37,"div",14)(38,"div",10)(39,"label",11),n._uU(40,"\u0ab2\u0acb\u0a9f \u0aa8\u0ac1\u0a82"),n.qZA(),n.TgZ(41,"div",12)(42,"input",21),n.NdJ("keyup.enter",function(a){return r.scanQrLot(a)}),n.qZA()()()(),n.YNc(43,vT,24,2,"div",22),n.YNc(44,AT,92,44,"div",22),n.qZA()()()()()()()()),2&o&&(n.xp6(16),n.Q6J("ngModel",r.code)("value",n.lcZ(17,6,r.code)),n.xp6(14),n.Q6J("ngForOf",r.glist),n.xp6(12),n.Q6J("disabled",!(null!=r.lstock&&r.lstock.id)),n.xp6(1),n.Q6J("ngIf",(null==r.lstock?null:r.lstock.id)>0),n.xp6(1),n.Q6J("ngIf",r.qlist.length>0))},dependencies:[Ee.sg,Ee.O5,te.YN,te.Kr,te.Fj,te.wV,te.JJ,te.On,Ee.gd,Oi.g,Bt.J],styles:["td[_ngcontent-%COMP%]{font-weight:500!important}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], option[_ngcontent-%COMP%]{font-weight:600!important}.text-white[_ngcontent-%COMP%]{color:#fff!important}.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f7feff}.perc[_ngcontent-%COMP%]{background:green;padding:2px 5px;font-size:12px;color:#fff}"]})}return e})();function TT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.remove())}),n._uU(1,"Delete ?"),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("disabled",t.loading)}}let DT=(()=>{class e{constructor(t){this.api=t,this.kapan={},this.changed=new n.vpe,this.loading=!1,this.user=JSON.parse(localStorage.getItem("user"))}submit(){var t=this;return(0,ee.Z)(function*(){if(console.log(t.kapan),t.kapan?.mthan&&t.kapan?.stockId){t.loading=!0;try{yield t.api.putInfo("stock",{id:t.kapan.stockId,finalDate:t.kapan?.finalDate,endDate:t.kapan?.endDate}),toastr.success("Updated Successfully!"),$("#kapan_modal").modal("toggle"),t.changed.emit(t.kapan)}catch{toastr.error("Something Went Wrong!")}t.loading=!1}else toastr.error("Not a valid Cut No")})()}getKapan(t){var o=this;return(0,ee.Z)(function*(){var r=t.target.value?.toUpperCase(),s=yield o.api.postInfo("stock/query",{srno:r});if(console.log(s),s){var a=s.Lot.filter(c=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==c.remarks),l=s.Lot.filter(c=>"4P \u0a95\u0abe\u0a9a\u0ac1"==c.remarks);o.kapan.mlot=a.length,o.kapan.mthan=M.sumBy(a,"pcs"),o.kapan.plot=l.length,o.kapan.pthan=M.sumBy(l,"pcs"),o.kapan.employee=s.employee,o.kapan.code=r,o.kapan.stockId=s.id}else o.kapan={code:r}})()}onDateChange(t,o){this.kapan[o]=t.target.value?.length?new Date(t.target.value).toISOString():null}remove(){var t=this;return(0,ee.Z)(function*(){var o=M.cloneDeep(t.kapan);if(window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=t.user.pin)return void toastr.warning("Invalid PIN");t.loading=!0;try{yield t.api.putInfo("stock",{id:o.stockId,finalDate:null,endDate:null}),toastr.success("Updated Successfully!"),$("#kapan_modal").modal("toggle"),t.changed.emit(t.kapan)}catch{toastr.error("Something Went Wrong!")}t.loading=!1}}})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-lot-info"]],inputs:{kapan:"kapan"},outputs:{changed:"changed"},decls:49,vars:20,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-4"],["type","date","appFocusNavigate","",1,"form-control",3,"value","change"],[1,"col-sm-2","p-r-0"],["type","text","name","code","id","kapan_code","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"col-sm-2","p-l-5"],["type","text","disabled","",1,"form-control",3,"value"],["type","number","disabled","",1,"form-control",3,"value"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button","class","btn btn-sm btn-danger",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-sm",3,"disabled","click"],["type","button",1,"btn","btn-sm","btn-danger",3,"disabled","click"]],template:function(o,r){if(1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),n._uU(12,"Issue Date"),n.qZA(),n.TgZ(13,"div",10)(14,"input",11),n.NdJ("change",function(a){return r.onDateChange(a,"finalDate")}),n.ALo(15,"momentDate"),n.qZA()()(),n.TgZ(16,"div",8)(17,"label",9),n._uU(18,"Cut No & Employee"),n.qZA(),n.TgZ(19,"div",12)(20,"input",13),n.NdJ("ngModelChange",function(a){return r.kapan.code=a})("input",function(a){return r.getKapan(a)}),n.qZA()(),n.TgZ(21,"div",14),n._UZ(22,"input",15),n.qZA()(),n.TgZ(23,"div",8)(24,"label",9),n._uU(25,"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2 Lot & Pcs"),n.qZA(),n.TgZ(26,"div",12),n._UZ(27,"input",16),n.qZA(),n.TgZ(28,"div",14),n._UZ(29,"input",16),n.qZA()(),n.TgZ(30,"div",8)(31,"label",9),n._uU(32,"4P \u0a95\u0abe\u0a9a\u0ac1 Lot & Pcs"),n.qZA(),n.TgZ(33,"div",12),n._UZ(34,"input",16),n.qZA(),n.TgZ(35,"div",14),n._UZ(36,"input",16),n.qZA()(),n.TgZ(37,"div",8)(38,"label",9),n._uU(39,"Close Date"),n.qZA(),n.TgZ(40,"div",10)(41,"input",11),n.NdJ("change",function(a){return r.onDateChange(a,"endDate")}),n.ALo(42,"momentDate"),n.qZA()()()()(),n.TgZ(43,"div",17)(44,"button",18),n._uU(45,"Cancel"),n.qZA(),n.YNc(46,TT,2,1,"button",19),n.TgZ(47,"button",20),n.NdJ("click",function(){return r.submit()}),n._uU(48),n.qZA()()()()),2&o){let s;n.xp6(7),n.Oqu(null!=r.kapan&&r.kapan.finalDate?"Edit Kapan":"Add Kapan"),n.xp6(7),n.Q6J("value",n.xi3(15,14,null==r.kapan?null:r.kapan.finalDate,"YYYY-MM-DD")),n.xp6(6),n.Q6J("ngModel",r.kapan.code),n.xp6(2),n.Q6J("value",null!==(s=null==r.kapan?null:r.kapan.employee)&&void 0!==s?s:""),n.xp6(5),n.Q6J("value",null==r.kapan?null:r.kapan.mlot),n.xp6(2),n.Q6J("value",null==r.kapan?null:r.kapan.mthan),n.xp6(5),n.Q6J("value",null==r.kapan?null:r.kapan.plot),n.xp6(2),n.Q6J("value",null==r.kapan?null:r.kapan.pthan),n.xp6(5),n.Q6J("value",n.xi3(42,17,null==r.kapan?null:r.kapan.endDate,"YYYY-MM-DD")),n.xp6(5),n.Q6J("ngIf",(null==r.kapan||null==r.kapan.finalDate?null:r.kapan.finalDate.length)>0),n.xp6(1),n.Tol((null==r.kapan||null==r.kapan.finalDate?null:r.kapan.finalDate.length)>0?"btn-success":"btn-primary"),n.Q6J("disabled",r.loading||!(null!=r.kapan&&r.kapan.code)||!(null!=r.kapan&&r.kapan.employee)||!(null!=r.kapan&&r.kapan.mthan)||!(null!=r.kapan&&null!=r.kapan.finalDate&&r.kapan.finalDate.length)),n.xp6(1),n.Oqu((null==r.kapan||null==r.kapan.finalDate?null:r.kapan.finalDate.length)>0?"Update":"Submit")}},dependencies:[Ee.O5,te._Y,te.Fj,te.JJ,te.JL,te.On,te.F,Ut,Rt.v]})}return e})(),FT=(()=>{class e{getRowClass(t){return t.data?.endDate?"bg-lightgreen":""}constructor(t,o){var r=this;this.api=t,this.excel=o,this.user=JSON.parse(localStorage.getItem("user")),this.kapan={},this.kapans=[],this.scode="",this.rowData=[],this.selectedRow=[],this.pinnedRow=[],this.rowSelection={mode:"multiRow"},this.sdata=[],this.gridOptions={getRowClass:this.getRowClass.bind(this)},this.defaultColDef={flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0},this.columnDefs=[{headerName:"ISSUE DATE",field:"finalDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"CUT NO",field:"srno"},{headerName:"NAME",field:"employee"},{headerName:"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2 Lot",valueGetter:s=>s.data?.Lot?.filter(a=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==a.remarks)?.length},{headerName:"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2 Pcs",valueGetter:s=>M.sumBy(s.data?.Lot?.filter(a=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==a.remarks),"pcs")},{headerName:"4P \u0a95\u0abe\u0a9a\u0ac1 Lot",valueGetter:s=>s.data?.Lot?.filter(a=>"4P \u0a95\u0abe\u0a9a\u0ac1"==a.remarks)?.length},{headerName:"4P \u0a95\u0abe\u0a9a\u0ac1 Pcs",valueGetter:s=>M.sumBy(s.data?.Lot?.filter(a=>"4P \u0a95\u0abe\u0a9a\u0ac1"==a.remarks),"pcs")},{headerName:"CLOSE DATE",field:"endDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"DAYS",valueGetter:s=>this.api.getDaysDiff(s.data?.finalDate,s.data?.endDate)}],this.onSelectionChanged=s=>{var a=s?.api?.getSelectedRows();if(this.sdata=[],this.selectedRow=[],a?.length>1){var l={employee:"Selected: "+a.length,Lot:[]},c=a.map(h=>h.Lot);for(var d of c)l.Lot=[...l.Lot,...d];this.selectedRow.push(l),this.sdata=a}},this.onFilterChanged=s=>{var a=[];if(this.selectedRow=[],this.sdata=[],s?.api?.forEachNodeAfterFilter(h=>{h.data&&a.push(h.data)}),a?.length!=this.rowData.length&&(console.log(a),a?.length>1)){var l={employee:"Selected: "+a.length,Lot:[]},c=a.map(h=>h.Lot);for(var d of c)l.Lot=[...l.Lot,...d];this.selectedRow.push(l),this.sdata=a}},this.onRowDoubleClicked=function(){var s=(0,ee.Z)(function*(a){const l=a.data;if(l?.id>0){var c=l.Lot.filter(h=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==h.remarks),d=l.Lot.filter(h=>"4P \u0a95\u0abe\u0a9a\u0ac1"==h.remarks);r.kapan={},r.kapan.mlot=c.length,r.kapan.mthan=M.sumBy(c,"pcs"),r.kapan.plot=d.length,r.kapan.pthan=M.sumBy(d,"pcs"),r.kapan.employee=l.employee,r.kapan.code=l.srno,r.kapan.stockId=l.id,r.kapan.finalDate=l.finalDate,$("#kapan_modal").modal("toggle")}});return function(a){return s.apply(this,arguments)}}()}ngOnInit(){var t=this;return(0,ee.Z)(function*(){yield t.loadData()})()}loadData(){var t=this;return(0,ee.Z)(function*(){t.kapans=yield t.api.postInfo("stock/equiry",{finalDate:{not:null}}),t.rowData=M.orderBy(t.kapans,["finalDate"],["desc"]),t.pinnedRow=[];var o={employee:"Total: "+t.rowData.length,Lot:[]},r=t.rowData.map(d=>d.Lot);for(var s of r)o.Lot=[...o.Lot,...s];var a=t.rowData?.filter(d=>!d?.endDate),l={employee:"Pending: "+a.length,Lot:[]},c=a?.map(d=>d.Lot);for(var s of c)l.Lot=[...l.Lot,...s];t.pinnedRow=[o,l]})()}onGridReady(t){t.api.sizeColumnsToFit()}addKapan(){this.kapan={},$("#kapan_modal").modal("toggle")}download(){var r=(this.sdata?.length?this.sdata:this.rowData).map(s=>[s?.finalDate?.length?_e(s.finalDate).format("YYYY-MM-DD"):"",s.srno,s.employee,s?.Lot?.filter(a=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==a.remarks)?.length,M.sumBy(s?.Lot?.filter(a=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==a.remarks),"pcs"),s?.Lot?.filter(a=>"4P \u0a95\u0abe\u0a9a\u0ac1"==a.remarks)?.length,M.sumBy(s?.Lot?.filter(a=>"4P \u0a95\u0abe\u0a9a\u0ac1"==a.remarks),"pcs"),s?.endDate?.length?_e(s.endDate).format("YYYY-MM-DD"):"",this.api.getDaysDiff(s?.finalDate,s?.endDate)]);this.excel.generateExcel(["ISSUE DATE","CUT NO","NAME","\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2 Lot","\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2 Pcs","4P \u0a95\u0abe\u0a9a\u0ac1 Lot","4P \u0a95\u0abe\u0a9a\u0ac1 Pcs","CLOSE DATE","DAYS"],r,this.sdata?.length?"FINAL_FILTER":"FINAL_TOTAL")}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(et.x))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-final"]],decls:23,vars:8,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"nav-tabs-custom"],[1,"nav","nav-tabs"],[1,"active"],["href","#report","data-toggle","tab"],[1,"pull-right","header",2,"line-height","1.5em !important"],[1,"btn","btn-sm","btn-primary","mr-5",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-download"],[1,"tab-content",2,"min-height","500px"],["id","report",1,"tab-pane","active"],[1,"col-sm-12"],[1,"ag-theme-balham",2,"width","100%","height","80vh","font-weight","500",3,"rowData","columnDefs","defaultColDef","gridOptions","rowSelection","pinnedTopRowData","pinnedBottomRowData","gridReady","selectionChanged","filterChanged","rowDoubleClicked"],["id","history",1,"tab-pane"],["id","kapan_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"kapan","changed"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),n._uU(7,"Reporting"),n.qZA()(),n.TgZ(8,"li",7)(9,"button",8),n.NdJ("click",function(){return r.addKapan()}),n._UZ(10,"i",9),n._uU(11,"ADD KAPAN"),n.qZA(),n.TgZ(12,"button",10),n.NdJ("click",function(){return r.download()}),n._UZ(13,"i",11),n._uU(14,"DOWNLOAD"),n.qZA()()(),n.TgZ(15,"div",12)(16,"div",13)(17,"div",2)(18,"div",14)(19,"ag-grid-angular",15),n.NdJ("gridReady",function(a){return r.onGridReady(a)})("selectionChanged",function(a){return r.onSelectionChanged(a)})("filterChanged",function(a){return r.onFilterChanged(a)})("rowDoubleClicked",function(a){return r.onRowDoubleClicked(a)}),n.qZA()()()(),n._UZ(20,"div",16),n.qZA()()()()(),n.TgZ(21,"div",17)(22,"app-lot-info",18),n.NdJ("changed",function(){return r.loadData()}),n.qZA()()),2&o&&(n.xp6(19),n.Q6J("rowData",r.rowData)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("gridOptions",r.gridOptions)("rowSelection",r.rowSelection)("pinnedTopRowData",r.selectedRow)("pinnedBottomRowData",r.pinnedRow),n.xp6(3),n.Q6J("kapan",r.kapan))},dependencies:[wo,DT]})}return e})();function RT(e,i){if(1&e&&(n.TgZ(0,"option",25),n._uU(1),n.ALo(2,"wt"),n.qZA()),2&e){const t=i.$implicit;n.Q6J("value",null==t?null:t.id),n.xp6(1),n.AsE("",null==t?null:t.code," [",n.lcZ(2,3,null==t?null:t.weight)," cc]")}}let MT=(()=>{class e{constructor(t){this.api=t,this.lst={},this.stock={},this.changed=new n.vpe,this.loading=!1}ngOnInit(){$(function(){$("#stock_item_id").select2()})}submit(){var t=this;return(0,ee.Z)(function*(){var o=Number($("#stock_item_id").val()),r=$("#issue_date").val(),s=$("#close_date").val();if(console.log(o,r,s),o){"P"==t.lst?.s&&(t.stock.billId=o),"I"==t.lst?.s&&(t.stock.inventoryId=o),t.stock.issueDate=""==r?null:r+"T00:00:00.000Z",t.stock.closeDate=""==s?null:s+"T00:00:00.000Z",console.log(t.stock);var a=M.cloneDeep(t.stock);try{a?.id?yield t.api.putInfo("production",t.stock):yield t.api.postInfo("production",t.stock),$("#production_entry_modal").modal("toggle"),t.changed.emit(!0),t.stock={}}catch{t.loading=!1,toastr.error("Something went wrong")}}else toastr.warning("Select S.NO.")})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-production-entry"]],inputs:{lst:"lst",stock:"stock"},outputs:{changed:"changed"},decls:57,vars:15,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","with-border"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-4","p-r-0"],["id","stock_item_id",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["appFocusNavigate","","type","text","name","code",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","text","name","size",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","text","name","remarks",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","date"],[1,"input-group-addon",2,"width","50px"],[1,"fa","fa-cube"],["appFocusNavigate","","type","number","id","actweight","name","actweight",1,"form-control",2,"padding-left","10px",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","date","id","issue_date",1,"form-control",3,"value"],["appFocusNavigate","","type","date","id","close_date",1,"form-control",3,"value"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-default","pull-left"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),n._uU(12,"REF .NO."),n.qZA(),n.TgZ(13,"div",10)(14,"select",11),n._UZ(15,"option"),n.YNc(16,RT,3,5,"option",12),n.qZA()()(),n.TgZ(17,"div",8)(18,"label",9),n._uU(19,"S.NO."),n.qZA(),n.TgZ(20,"div",10)(21,"input",13),n.NdJ("ngModelChange",function(a){return r.stock.code=a}),n.qZA()()(),n.TgZ(22,"div",8)(23,"label",9),n._uU(24,"Size"),n.qZA(),n.TgZ(25,"div",10)(26,"input",14),n.NdJ("ngModelChange",function(a){return r.stock.size=a}),n.qZA()()(),n.TgZ(27,"div",8)(28,"label",9),n._uU(29,"Item"),n.qZA(),n.TgZ(30,"div",10)(31,"input",15),n.NdJ("ngModelChange",function(a){return r.stock.remarks=a}),n.qZA()()(),n.TgZ(32,"div",8)(33,"label",9),n._uU(34,"Weight"),n.qZA(),n.TgZ(35,"div",10)(36,"div",16)(37,"div",17),n._UZ(38,"i",18),n.qZA(),n.TgZ(39,"input",19),n.NdJ("ngModelChange",function(a){return r.stock.actweight=a}),n.qZA()()()(),n.TgZ(40,"div",8)(41,"label",9),n._uU(42,"Issue Date"),n.qZA(),n.TgZ(43,"div",10),n._UZ(44,"input",20),n.ALo(45,"momentDate"),n.qZA()(),n.TgZ(46,"div",8)(47,"label",9),n._uU(48,"Close Date"),n.qZA(),n.TgZ(49,"div",10),n._UZ(50,"input",21),n.ALo(51,"momentDate"),n.qZA()()()(),n.TgZ(52,"div",22)(53,"button",23),n._uU(54,"Cancel"),n.qZA(),n.TgZ(55,"button",24),n.NdJ("click",function(){return r.submit()}),n._uU(56,"Submit"),n.qZA()()()()),2&o&&(n.xp6(7),n.hij("ADD PRODUCTION FROM ","P"==(null==r.lst?null:r.lst.s)?"PURCHASE":"OP STOCK",""),n.xp6(9),n.Q6J("ngForOf",null==r.lst?null:r.lst.list),n.xp6(5),n.Q6J("ngModel",r.stock.code),n.xp6(5),n.Q6J("ngModel",r.stock.size),n.xp6(5),n.Q6J("ngModel",r.stock.remarks),n.xp6(8),n.Q6J("ngModel",r.stock.actweight),n.xp6(5),n.Q6J("value",n.xi3(45,9,null==r.stock?null:r.stock.issueDate,"YYYY-MM-DD")),n.xp6(6),n.Q6J("value",n.xi3(51,12,null==r.stock?null:r.stock.closeDate,"YYYY-MM-DD")),n.xp6(5),n.Q6J("disabled",r.loading||!(null!=r.stock&&r.stock.remarks)||!(null!=r.stock&&r.stock.actweight)))},dependencies:[Ee.sg,te._Y,te.YN,te.Kr,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ut,Bt.J,Rt.v]})}return e})();function ET(e,i){if(1&e&&(n.TgZ(0,"th",13),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.Tol(i.index%2==0?"bg-2":"bg-3"),n.xp6(1),n.Oqu(t.username)}}function PT(e,i){if(1&e&&(n.TgZ(0,"th",10),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t)}}function LT(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&e){const t=i.$implicit,o=n.oxw(2);n.Udp("background-color",o.colors[t[0]]),n.xp6(1),n.Oqu(t[1])}}function IT(e,i){if(1&e&&(n.TgZ(0,"tr",14)(1,"th"),n._uU(2),n.ALo(3,"momentDate"),n.qZA(),n.YNc(4,LT,2,3,"td",15),n.qZA()),2&e){const t=i.$implicit;n.xp6(2),n.Oqu(n.xi3(3,2,null==t?null:t.date,"DD/MM/YYYY")),n.xp6(2),n.Q6J("ngForOf",null==t?null:t.data)}}let OT=(()=>{class e{constructor(t){this.api=t,this.planners=[],this.headers=[],this.theaders=[],this.rows=[],this.header=["PCS","WT"],this.sheader=["PCS","WT","SIZE"],this.dates=[],this.month=_e().format("YYYY-MM"),this.pworks=[],this.colors=["#ccebff","#66c2ff"]}ngOnInit(){var t=this;return(0,ee.Z)(function*(){var o=yield t.api.getInfo("department-head");for(var r of(t.planners=o.filter(s=>"PLANING"==s?.department?.name),t.planners))t.headers=[...t.headers,...t.header];t.headers=[...t.headers,...t.sheader,...t.sheader],t.dates=t.api.getMonthDays(t.month),yield t.loadData()})()}loadData(){var t=this;return(0,ee.Z)(function*(){var o=t.dates.length,r=_e(t.dates[0]),s=_e(t.dates[o-1]),a={where:{date:{gt:r.toDate(),lt:s.toDate()}},orderBy:{date:"asc"}};console.log(a),t.pworks=yield t.api.postInfo("planing/enquiry",a),t.loadRows(),t.loadTHeader()})()}loadRows(){this.rows=[];var t=this.planners?.length,o=t%2,r=(t+1)%2;for(var s of this.dates){var a={date:s},l=[];this.planners.map((S,_)=>{var k=this.pworks.filter(ne=>"PLN"==ne.role&&ne.departmentHeadId==S.id&&ne.date.indexOf(s)>-1),K=[[_%2,M.sumBy(k,"than").toFixed(0)],[_%2,M.sumBy(k,"weight").toFixed(2)]];l=[...l,...K]});var c=this.pworks.filter(S=>"PLN"==S.role&&S.date.indexOf(s)>-1),d=M.sumBy(c,"than"),h=M.sumBy(c,"weight"),g=[[o,d.toFixed(0)],[o,h.toFixed(2)],[o,d?M.round(h/d,2):0]];l=[...l,...g];var m=this.pworks.filter(S=>S.role.indexOf("QC")>-1&&S.date.indexOf(s)>-1),f=M.sumBy(m,"than"),y=M.sumBy(m,"weight"),b=[[r,f.toFixed(0)],[r,y.toFixed(2)],[r,f?M.round(y/f,2):0]];l=[...l,...b],a.data=l,this.rows.push(a)}}loadTHeader(){for(var t of(this.theaders=[],this.planners)){var o=this.pworks.filter(f=>"PLN"==f.role&&f.departmentHeadId==t.id),r=[M.sumBy(o,"than").toFixed(0),M.sumBy(o,"weight").toFixed(2)];this.theaders=[...this.theaders,...r]}var s=this.pworks.filter(f=>"PLN"==f.role),a=M.sumBy(s,"than"),l=M.sumBy(s,"weight"),c=[a.toFixed(0),l.toFixed(2),a?M.round(l/a,2):0];this.theaders=[...this.theaders,...c];var d=this.pworks.filter(f=>f.role.indexOf("QC")>-1),h=M.sumBy(d,"than"),g=M.sumBy(d,"weight"),m=[h.toFixed(0),g.toFixed(2),h?M.round(g/h,2):0];this.theaders=[...this.theaders,...m]}onChangeMonth(t){var o=this;return(0,ee.Z)(function*(){t.target.value?.length&&(o.month=t.target.value,o.dates=o.api.getMonthDays(o.month),yield o.loadData())})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-planners"]],decls:20,vars:11,consts:[[1,"row"],[1,"col-sm-12"],[1,"table-container"],[1,"table","table-striped","table-condensed","table-bordered","text-center","table-hover","table-responsive","table-fixed-header"],[1,"bg-lightblue"],[1,"p2","jc","w100"],["type","month",1,"form-control","input-sm","excel_input","text-center",3,"value","input"],["colspan","2",3,"class",4,"ngFor","ngForOf"],["colspan","3"],[1,"bg-4"],["scope","col",1,"col-sm-auto"],["scope","col","class","col-sm-auto",4,"ngFor","ngForOf"],["scope","row",4,"ngFor","ngForOf"],["colspan","2"],["scope","row"],[3,"background-color",4,"ngFor","ngForOf"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr",4)(6,"th",5)(7,"input",6),n.NdJ("input",function(a){return r.onChangeMonth(a)}),n.ALo(8,"momentDate"),n.qZA()(),n.YNc(9,ET,2,3,"th",7),n.TgZ(10,"th",8),n._uU(11,"ALL"),n.qZA(),n.TgZ(12,"th",8),n._uU(13,"ALL QC"),n.qZA()(),n.TgZ(14,"tr",9)(15,"th",10),n._uU(16,"TOTAL"),n.qZA(),n.YNc(17,PT,2,1,"th",11),n.qZA()(),n.TgZ(18,"tbody"),n.YNc(19,IT,5,5,"tr",12),n.qZA()()()()()),2&o&&(n.xp6(7),n.Q6J("value",n.xi3(8,8,r.month,"YYYY-MM")),n.xp6(2),n.Q6J("ngForOf",r.planners),n.xp6(1),n.Tol((null==r.planners?null:r.planners.length)%2==0?"bg-2":"bg-3"),n.xp6(2),n.Tol((null==r.planners?null:r.planners.length)%2==0?"bg-3":"bg-2"),n.xp6(5),n.Q6J("ngForOf",r.theaders),n.xp6(2),n.Q6J("ngForOf",r.rows))},dependencies:[Ee.sg,Rt.v]})}return e})(),NT=(()=>{class e{constructor(t){this.api=t,this.stock={},this.changed=new n.vpe}submit(){var t=this;return(0,ee.Z)(function*(){if(t.stock?.srno?.length){t.stock.srno=t.stock.srno.trim();var o=yield t.api.postInfo("stock/query",{srno:t.stock?.srno});if(o?.id>0)toastr.error("Duplicate Sr No.");else if(t.stock?.rweight)if(t.stock?.actweight)if(t.stock?.price){t.stock.dayDiff=t.api.getDaysDiff(t.stock?.issueDate,t.stock?.closeDate),console.log(t.stock);try{var r=M.cloneDeep(t.stock);yield t.api.postInfo("stock",r),toastr.success("New Prouduction Added!"),t.changed.emit(!0),$("#stock_mn_modal").modal("toggle")}catch{toastr.error("Something Went Wrong!")}}else toastr.error("Enter Price");else toastr.error("Enter Galaxy Weight");else toastr.error("Enter Rough Weight")}else toastr.error("Enter Sr No")})()}onChageDate(t,o){this.stock[o]=t.target.value?.length?new Date(t.target.value).toISOString():null}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-stock-mn"]],inputs:{stock:"stock"},outputs:{changed:"changed"},decls:57,vars:15,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","with-border"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body",2,"min-height","200px"],[1,"row"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-2","p-r-0"],["type","text","name","srno","appFocusNavigate","","placeholder","Sr No.",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-2","p-l-5","p-r-0"],["type","text","appFocusNavigate","","name","employee","placeholder","Employee",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","rweight","appFocusNavigate","","placeholder","\u0a95\u0abe\u0a9a\u0ac1",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-3","p-r-0"],["type","date","appFocusNavigate","","id","issue_date",1,"form-control",2,"padding-left","10px",3,"value","change"],[1,"col-sm-3","p-l-5","p-r-0"],["type","date","appFocusNavigate","","id","close_date",1,"form-control",2,"padding-left","10px",3,"value","change"],[1,"col-sm-6","p-r-0"],["type","text","name","size","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","appFocusNavigate","","name","remarks",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group"],[1,"input-group-addon"],[1,"fa","fa-cubes"],["type","number","name","actweight","appFocusNavigate","",1,"form-control",3,"ngModel","ngModelChange"],[1,"fa","fa-inr"],["type","number","name","price","appFocusNavigate","",1,"form-control","inr",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-default","pull-left"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7,"Add New Production"),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"form",8)(11,"div",9)(12,"label",10),n._uU(13,"SrNo./Emp/R.Wt"),n.qZA(),n.TgZ(14,"div",11)(15,"input",12),n.NdJ("ngModelChange",function(a){return r.stock.srno=a}),n.qZA()(),n.TgZ(16,"div",13)(17,"input",14),n.NdJ("ngModelChange",function(a){return r.stock.employee=a}),n.qZA()(),n.TgZ(18,"div",13)(19,"input",15),n.NdJ("ngModelChange",function(a){return r.stock.rweight=a}),n.qZA()()(),n.TgZ(20,"div",9)(21,"label",10),n._uU(22,"Issue & Close Dates"),n.qZA(),n.TgZ(23,"div",16)(24,"input",17),n.NdJ("change",function(a){return r.onChageDate(a,"issueDate")}),n.ALo(25,"momentDate"),n.qZA()(),n.TgZ(26,"div",18)(27,"input",19),n.NdJ("change",function(a){return r.onChageDate(a,"closeDate")}),n.ALo(28,"momentDate"),n.qZA()()(),n.TgZ(29,"div",9)(30,"label",10),n._uU(31,"Size"),n.qZA(),n.TgZ(32,"div",20)(33,"input",21),n.NdJ("ngModelChange",function(a){return r.stock.size=a}),n.qZA()()(),n.TgZ(34,"div",9)(35,"label",10),n._uU(36,"Item"),n.qZA(),n.TgZ(37,"div",20)(38,"input",22),n.NdJ("ngModelChange",function(a){return r.stock.remarks=a}),n.qZA()()(),n.TgZ(39,"div",9)(40,"label",10),n._uU(41,"G.Wt & Price"),n.qZA(),n.TgZ(42,"div",16)(43,"div",23)(44,"span",24),n._UZ(45,"i",25),n.qZA(),n.TgZ(46,"input",26),n.NdJ("ngModelChange",function(a){return r.stock.actweight=a}),n.qZA()()(),n.TgZ(47,"div",18)(48,"div",23)(49,"span",24),n._UZ(50,"i",27),n.qZA(),n.TgZ(51,"input",28),n.NdJ("ngModelChange",function(a){return r.stock.price=a}),n.qZA()()()()()()(),n.TgZ(52,"div",29)(53,"button",30),n._uU(54,"Cancel"),n.qZA(),n.TgZ(55,"button",31),n.NdJ("click",function(){return r.submit()}),n._uU(56,"Submit"),n.qZA()()()()),2&o&&(n.xp6(15),n.Q6J("ngModel",r.stock.srno),n.xp6(2),n.Q6J("ngModel",r.stock.employee),n.xp6(2),n.Q6J("ngModel",r.stock.rweight),n.xp6(5),n.Q6J("value",n.xi3(25,9,r.stock.issueDate,"YYYY-MM-DD")),n.xp6(3),n.Q6J("value",n.xi3(28,12,r.stock.closeDate,"YYYY-MM-DD")),n.xp6(6),n.Q6J("ngModel",r.stock.size),n.xp6(5),n.Q6J("ngModel",r.stock.remarks),n.xp6(8),n.Q6J("ngModel",r.stock.actweight),n.xp6(5),n.Q6J("ngModel",r.stock.price))},dependencies:[te._Y,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ut,Rt.v]})}return e})();function BT(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"span",1),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.onClick("star"))}),n._UZ(1,"i"),n.qZA()}if(2&e){const t=n.oxw();n.xp6(1),n.Tol(null!=t.params.data&&t.params.data.fvStatus?"fa fa-star text-red":"fa fa-star-o")}}let ZT=(()=>{class e{constructor(t){this.api=t}agInit(t){this.params=t,console.log(this.params.node.rowPinned)}refresh(t){return this.params=t,!0}onClick(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm("Are you sure?")){var r=mt().cloneDeep(o.params.data);yield o.api.putInfo("stock",{id:r.id,fvStatus:!r.fvStatus}),o.params.data.fvStatus=!r.fvStatus}})()}isPinnedRow(){return"top"===this.params?.node?.rowPinned||"bottom"===this.params?.node?.rowPinned}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-star-cell-renderer"]],decls:1,vars:1,consts:[["class","icon","title","Urgent",3,"click",4,"ngIf"],["title","Urgent",1,"icon",3,"click"]],template:function(o,r){1&o&&n.YNc(0,BT,2,2,"span",0),2&o&&n.Q6J("ngIf",!r.isPinnedRow())},dependencies:[Ee.O5],styles:[".icon[_ngcontent-%COMP%]{text-align:center;cursor:pointer}"]})}return e})();const HT=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${e}`)})();function cr(e){const i=[];for(let t=0,o=e.length;t<o;t++)i.push(e[t]);return i}function Xc(e,i){const o=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(i);return o?parseFloat(o.replace("px","")):0}function Xv(e,i={}){const t=i.width||function qT(e){const i=Xc(e,"border-left-width"),t=Xc(e,"border-right-width");return e.clientWidth+i+t}(e),o=i.height||function zT(e){const i=Xc(e,"border-top-width"),t=Xc(e,"border-bottom-width");return e.clientHeight+i+t}(e);return{width:t,height:o}}const qn=16384;function ed(e){return new Promise((i,t)=>{const o=new Image;o.decode=()=>i(o),o.onload=()=>i(o),o.onerror=t,o.crossOrigin="anonymous",o.decoding="async",o.src=e})}function $h(){return($h=(0,ee.Z)(function*(e){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(e)).then(encodeURIComponent).then(i=>`data:image/svg+xml;charset=utf-8,${i}`)})).apply(this,arguments)}function Jh(){return Jh=(0,ee.Z)(function*(e,i,t){const o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return r.setAttribute("width",`${i}`),r.setAttribute("height",`${t}`),r.setAttribute("viewBox",`0 0 ${i} ${t}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),r.appendChild(s),s.appendChild(e),function jT(e){return $h.apply(this,arguments)}(r)}),Jh.apply(this,arguments)}const Mn=(e,i)=>{if(e instanceof i)return!0;const t=Object.getPrototypeOf(e);return null!==t&&(t.constructor.name===i.name||Mn(t,i))};function e1(e,i,t){const o=window.getComputedStyle(e,t),r=o.getPropertyValue("content");if(""===r||"none"===r)return;const s=HT();try{i.className=`${i.className} ${s}`}catch{return}const a=document.createElement("style");a.appendChild(function KT(e,i,t){const o=`.${e}:${i}`,r=t.cssText?function $T(e){const i=e.getPropertyValue("content");return`${e.cssText} content: '${i.replace(/'|"/g,"")}';`}(t):function JT(e){return cr(e).map(i=>`${i}: ${e.getPropertyValue(i)}${e.getPropertyPriority(i)?" !important":""};`).join(" ")}(t);return document.createTextNode(`${o}{${r}}`)}(s,t,o)),i.appendChild(a)}const t1="application/font-woff",i1="image/jpeg",XT={woff:t1,woff2:t1,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:i1,jpeg:i1,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Kh(e){const i=function eD(e){const i=/\.([^./]*?)$/g.exec(e);return i?i[1]:""}(e).toLowerCase();return XT[i]||""}function Qh(e){return-1!==e.search(/^(data:)/)}function n1(e,i){return`data:${i};base64,${e}`}function o1(e,i,t){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,ee.Z)(function*(e,i,t){const o=yield fetch(e,i);if(404===o.status)throw new Error(`Resource "${o.url}" not found`);const r=yield o.blob();return new Promise((s,a)=>{const l=new FileReader;l.onerror=a,l.onloadend=()=>{try{s(t({res:o,result:l.result}))}catch(c){a(c)}},l.readAsDataURL(r)})})).apply(this,arguments)}const eg={};function tg(e,i,t){return ig.apply(this,arguments)}function ig(){return(ig=(0,ee.Z)(function*(e,i,t){const o=function iD(e,i,t){let o=e.replace(/\?.*/,"");return t&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),i?`[${i}]${o}`:o}(e,i,t.includeQueryParams);if(null!=eg[o])return eg[o];let r;t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const s=yield o1(e,t.fetchRequestInit,({res:a,result:l})=>(i||(i=a.headers.get("Content-Type")||""),function tD(e){return e.split(/,/)[1]}(l)));r=n1(s,i)}catch(s){r=t.imagePlaceholder||"";let a=`Failed to fetch resource: ${e}`;s&&(a="string"==typeof s?s:s.message),a&&console.warn(a)}return eg[o]=r,r})).apply(this,arguments)}function ng(){return(ng=(0,ee.Z)(function*(e){const i=e.toDataURL();return"data:,"===i?e.cloneNode(!1):ed(i)})).apply(this,arguments)}function og(){return(og=(0,ee.Z)(function*(e,i){if(e.currentSrc){const s=document.createElement("canvas"),a=s.getContext("2d");return s.width=e.clientWidth,s.height=e.clientHeight,a?.drawImage(e,0,0,s.width,s.height),ed(s.toDataURL())}const t=e.poster,o=Kh(t);return ed(yield tg(t,o,i))})).apply(this,arguments)}function rg(){return(rg=(0,ee.Z)(function*(e){var i;try{if(null!==(i=e?.contentDocument)&&void 0!==i&&i.body)return yield td(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)})).apply(this,arguments)}function sg(){return sg=(0,ee.Z)(function*(e,i){return Mn(e,HTMLCanvasElement)?function nD(e){return ng.apply(this,arguments)}(e):Mn(e,HTMLVideoElement)?function oD(e,i){return og.apply(this,arguments)}(e,i):Mn(e,HTMLIFrameElement)?function rD(e){return rg.apply(this,arguments)}(e):e.cloneNode(!1)}),sg.apply(this,arguments)}const aD=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase();function ag(){return(ag=(0,ee.Z)(function*(e,i,t){var o,r;let s=[];return s=aD(e)&&e.assignedNodes?cr(e.assignedNodes()):Mn(e,HTMLIFrameElement)&&null!==(o=e.contentDocument)&&void 0!==o&&o.body?cr(e.contentDocument.body.childNodes):cr((null!==(r=e.shadowRoot)&&void 0!==r?r:e).childNodes),0===s.length||Mn(e,HTMLVideoElement)||(yield s.reduce((a,l)=>a.then(()=>td(l,t)).then(c=>{c&&i.appendChild(c)}),Promise.resolve())),i})).apply(this,arguments)}function lg(){return(lg=(0,ee.Z)(function*(e,i){const t=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===t.length)return e;const o={};for(let s=0;s<t.length;s++){const l=t[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),d=document.querySelector(l);!c&&d&&!o[l]&&(o[l]=yield td(d,i,!0))}}const r=Object.values(o);if(r.length){const s="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg");a.setAttribute("xmlns",s),a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.overflow="hidden",a.style.display="none";const l=document.createElementNS(s,"defs");a.appendChild(l);for(let c=0;c<r.length;c++)l.appendChild(r[c]);e.appendChild(a)}return e})).apply(this,arguments)}function td(e,i,t){return cg.apply(this,arguments)}function cg(){return cg=(0,ee.Z)(function*(e,i,t){return t||!i.filter||i.filter(e)?Promise.resolve(e).then(o=>function sD(e,i){return sg.apply(this,arguments)}(o,i)).then(o=>function lD(e,i,t){return ag.apply(this,arguments)}(e,o,i)).then(o=>function hD(e,i){return Mn(i,Element)&&(function cD(e,i){const t=i.style;if(!t)return;const o=window.getComputedStyle(e);o.cssText?(t.cssText=o.cssText,t.transformOrigin=o.transformOrigin):cr(o).forEach(r=>{let s=o.getPropertyValue(r);"font-size"===r&&s.endsWith("px")&&(s=Math.floor(parseFloat(s.substring(0,s.length-2)))-.1+"px"),Mn(e,HTMLIFrameElement)&&"display"===r&&"inline"===s&&(s="block"),"d"===r&&i.getAttribute("d")&&(s=`path(${i.getAttribute("d")})`),t.setProperty(r,s,o.getPropertyPriority(r))})}(e,i),function QT(e,i){e1(e,i,":before"),e1(e,i,":after")}(e,i),function dD(e,i){Mn(e,HTMLTextAreaElement)&&(i.innerHTML=e.value),Mn(e,HTMLInputElement)&&i.setAttribute("value",e.value)}(e,i),function uD(e,i){if(Mn(e,HTMLSelectElement)){const o=Array.from(i.children).find(r=>e.value===r.getAttribute("value"));o&&o.setAttribute("selected","")}}(e,i)),i}(e,o)).then(o=>function gD(e,i){return lg.apply(this,arguments)}(o,i)):null}),cg.apply(this,arguments)}const r1=/url\((['"]?)([^'"]+?)\1\)/g,pD=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,fD=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function dg(){return(dg=(0,ee.Z)(function*(e,i,t,o,r){try{const s=t?function GT(e,i){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const t=document.implementation.createHTMLDocument(),o=t.createElement("base"),r=t.createElement("a");return t.head.appendChild(o),t.body.appendChild(r),i&&(o.href=i),r.href=e,r.href}(i,t):i,a=Kh(i);let l;return l=r?n1(yield r(s),a):yield tg(s,a,o),e.replace(function mD(e){const i=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${i})(['"]?\\))`,"g")}(i),`$1${l}$3`)}catch{}return e})).apply(this,arguments)}function s1(e){return-1!==e.search(r1)}function a1(e,i,t){return ug.apply(this,arguments)}function ug(){return ug=(0,ee.Z)(function*(e,i,t){if(!s1(e))return e;const o=function wD(e,{preferredFontFormat:i}){return i?e.replace(fD,t=>{for(;;){const[o,,r]=pD.exec(t)||[];if(!r)return"";if(r===i)return`src: ${o};`}}):e}(e,t);return function vD(e){const i=[];return e.replace(r1,(t,o,r)=>(i.push(r),t)),i.filter(t=>!Qh(t))}(o).reduce((s,a)=>s.then(l=>function CD(e,i,t,o,r){return dg.apply(this,arguments)}(l,a,i,t)),Promise.resolve(o))}),ug.apply(this,arguments)}function id(e,i,t){return hg.apply(this,arguments)}function hg(){return(hg=(0,ee.Z)(function*(e,i,t){var o;const r=null===(o=i.style)||void 0===o?void 0:o.getPropertyValue(e);if(r){const s=yield a1(r,null,t);return i.style.setProperty(e,s,i.style.getPropertyPriority(e)),!0}return!1})).apply(this,arguments)}function gg(){return(gg=(0,ee.Z)(function*(e,i){(yield id("background",e,i))||(yield id("background-image",e,i)),(yield id("mask",e,i))||(yield id("mask-image",e,i))})).apply(this,arguments)}function pg(){return(pg=(0,ee.Z)(function*(e,i){const t=Mn(e,HTMLImageElement);if((!t||Qh(e.src))&&(!Mn(e,SVGImageElement)||Qh(e.href.baseVal)))return;const o=t?e.src:e.href.baseVal,r=yield tg(o,Kh(o),i);yield new Promise((s,a)=>{e.onload=s,e.onerror=a;const l=e;l.decode&&(l.decode=s),"lazy"===l.loading&&(l.loading="eager"),t?(e.srcset="",e.src=r):e.href.baseVal=r})})).apply(this,arguments)}function fg(){return(fg=(0,ee.Z)(function*(e,i){const o=cr(e.childNodes).map(r=>l1(r,i));yield Promise.all(o).then(()=>e)})).apply(this,arguments)}function l1(e,i){return mg.apply(this,arguments)}function mg(){return mg=(0,ee.Z)(function*(e,i){Mn(e,Element)&&(yield function yD(e,i){return gg.apply(this,arguments)}(e,i),yield function bD(e,i){return pg.apply(this,arguments)}(e,i),yield function SD(e,i){return fg.apply(this,arguments)}(e,i))}),mg.apply(this,arguments)}const c1={};function d1(e){return vg.apply(this,arguments)}function vg(){return(vg=(0,ee.Z)(function*(e){let i=c1[e];return null!=i||(i={url:e,cssText:yield(yield fetch(e)).text()},c1[e]=i),i})).apply(this,arguments)}function u1(e,i){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,ee.Z)(function*(e,i){let t=e.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,s=(t.match(/url\([^)]+\)/g)||[]).map(function(){var a=(0,ee.Z)(function*(l){let c=l.replace(o,"$1");return c.startsWith("https://")||(c=new URL(c,e.url).href),o1(c,i.fetchRequestInit,({result:d})=>(t=t.replace(l,`url(${d})`),[l,d]))});return function(l){return a.apply(this,arguments)}}());return Promise.all(s).then(()=>t)}),Cg.apply(this,arguments)}function h1(e){if(null==e)return[];const i=[];let o=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=r.exec(o);if(null===c)break;i.push(c[0])}o=o.replace(r,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let c=s.exec(o);if(null===c){if(c=l.exec(o),null===c)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;i.push(c[0])}return i}function wg(){return(wg=(0,ee.Z)(function*(e,i){const t=[],o=[];return e.forEach(r=>{if("cssRules"in r)try{cr(r.cssRules||[]).forEach((s,a)=>{if(s.type===CSSRule.IMPORT_RULE){let l=a+1;const d=d1(s.href).then(h=>u1(h,i)).then(h=>h1(h).forEach(g=>{try{r.insertRule(g,g.startsWith("@import")?l+=1:r.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:g,error:m})}})).catch(h=>{console.error("Error loading remote css",h.toString())});o.push(d)}})}catch(s){const a=e.find(l=>null==l.href)||document.styleSheets[0];null!=r.href&&o.push(d1(r.href).then(l=>u1(l,i)).then(l=>h1(l).forEach(c=>{a.insertRule(c,r.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(o).then(()=>(e.forEach(r=>{if("cssRules"in r)try{cr(r.cssRules||[]).forEach(s=>{t.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${r.href}`,s)}}),t))})).apply(this,arguments)}function yg(){return yg=(0,ee.Z)(function*(e,i){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const t=cr(e.ownerDocument.styleSheets),o=yield function xD(e,i){return wg.apply(this,arguments)}(t,i);return function AD(e){return e.filter(i=>i.type===CSSRule.FONT_FACE_RULE).filter(i=>s1(i.style.getPropertyValue("src")))}(o)}),yg.apply(this,arguments)}function bg(){return bg=(0,ee.Z)(function*(e,i){const t=yield function kD(e,i){return yg.apply(this,arguments)}(e,i);return(yield Promise.all(t.map(r=>a1(r.cssText,r.parentStyleSheet?r.parentStyleSheet.href:null,i)))).join("\n")}),bg.apply(this,arguments)}function Sg(){return Sg=(0,ee.Z)(function*(e,i){const t=null!=i.fontEmbedCSS?i.fontEmbedCSS:i.skipFonts?null:yield function TD(e,i){return bg.apply(this,arguments)}(e,i);if(t){const o=document.createElement("style"),r=document.createTextNode(t);o.appendChild(r),e.firstChild?e.insertBefore(o,e.firstChild):e.appendChild(o)}}),Sg.apply(this,arguments)}function _g(){return _g=(0,ee.Z)(function*(e,i={}){const{width:t,height:o}=Xv(e,i),r=yield td(e,i,!0);return yield function DD(e,i){return Sg.apply(this,arguments)}(r,i),yield l1(r,i),function _D(e,i){const{style:t}=e;i.backgroundColor&&(t.backgroundColor=i.backgroundColor),i.width&&(t.width=`${i.width}px`),i.height&&(t.height=`${i.height}px`);const o=i.style;null!=o&&Object.keys(o).forEach(r=>{t[r]=o[r]})}(r,i),yield function YT(e,i,t){return Jh.apply(this,arguments)}(r,t,o)}),_g.apply(this,arguments)}function nd(e){return xg.apply(this,arguments)}function xg(){return xg=(0,ee.Z)(function*(e,i={}){const{width:t,height:o}=Xv(e,i),r=yield function FD(e){return _g.apply(this,arguments)}(e,i),s=yield ed(r),a=document.createElement("canvas"),l=a.getContext("2d"),c=i.pixelRatio||function VT(){let e,i;try{i=process}catch{}const t=i&&i.env?i.env.devicePixelRatio:null;return t&&(e=parseInt(t,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),d=i.canvasWidth||t,h=i.canvasHeight||o;return a.width=d*c,a.height=h*c,i.skipAutoScale||function UT(e){(e.width>qn||e.height>qn)&&(e.width>qn&&e.height>qn?e.width>e.height?(e.height*=qn/e.width,e.width=qn):(e.width*=qn/e.height,e.height=qn):e.width>qn?(e.height*=qn/e.width,e.width=qn):(e.width*=qn/e.height,e.height=qn))}(a),a.style.width=`${d}`,a.style.height=`${h}`,i.backgroundColor&&(l.fillStyle=i.backgroundColor,l.fillRect(0,0,a.width,a.height)),l.drawImage(s,0,0,a.width,a.height),a}),xg.apply(this,arguments)}function g1(e){return kg.apply(this,arguments)}function kg(){return(kg=(0,ee.Z)(function*(e,i={}){return(yield nd(e,i)).toDataURL()})).apply(this,arguments)}function Dg(){return(Dg=(0,ee.Z)(function*(e,i={}){const t=yield nd(e,i);return yield function WT(e,i={}){return new Promise(e.toBlob?t=>{e.toBlob(t,i.type?i.type:"image/png",i.quality?i.quality:1)}:t=>{const o=window.atob(e.toDataURL(i.type?i.type:void 0,i.quality?i.quality:void 0).split(",")[1]),r=o.length,s=new Uint8Array(r);for(let a=0;a<r;a+=1)s[a]=o.charCodeAt(a);t(new Blob([s],{type:i.type?i.type:"image/png"}))})}(t)})).apply(this,arguments)}function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(e)}var Yt=Uint8Array,bn=Uint16Array,bl=Int32Array,ia=new Yt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),na=new Yt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sl=new Yt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f1=function(e,i){for(var t=new bn(31),o=0;o<31;++o)t[o]=i+=1<<e[o-1];var r=new bl(t[30]);for(o=1;o<30;++o)for(var s=t[o];s<t[o+1];++s)r[s]=s-t[o]<<5|o;return{b:t,r}},m1=f1(ia,2),Rg=m1.b,od=m1.r;Rg[28]=258,od[258]=28;for(var v1=f1(na,0),C1=v1.b,Mg=v1.r,_l=new bn(32768),ci=0;ci<32768;++ci){var Er=(43690&ci)>>1|(21845&ci)<<1;_l[ci]=((65280&(Er=(61680&(Er=(52428&Er)>>2|(13107&Er)<<2))>>4|(3855&Er)<<4))>>8|(255&Er)<<8)>>1}var to=function(e,i,t){for(var o=e.length,r=0,s=new bn(i);r<o;++r)e[r]&&++s[e[r]-1];var l,a=new bn(i);for(r=1;r<i;++r)a[r]=a[r-1]+s[r-1]<<1;if(t){l=new bn(1<<i);var c=15-i;for(r=0;r<o;++r)if(e[r])for(var d=r<<4|e[r],h=i-e[r],g=a[e[r]-1]++<<h,m=g|(1<<h)-1;g<=m;++g)l[_l[g]>>c]=d}else for(l=new bn(o),r=0;r<o;++r)e[r]&&(l[r]=_l[a[e[r]-1]++]>>15-e[r]);return l},dr=new Yt(288);for(ci=0;ci<144;++ci)dr[ci]=8;for(ci=144;ci<256;++ci)dr[ci]=9;for(ci=256;ci<280;++ci)dr[ci]=7;for(ci=280;ci<288;++ci)dr[ci]=8;var oa=new Yt(32);for(ci=0;ci<32;++ci)oa[ci]=5;var w1=to(dr,9,0),y1=to(dr,9,1),b1=to(oa,5,0),S1=to(oa,5,1),rd=function(e){for(var i=e[0],t=1;t<e.length;++t)e[t]>i&&(i=e[t]);return i},io=function(e,i,t){var o=i/8|0;return(e[o]|e[o+1]<<8)>>(7&i)&t},sd=function(e,i){var t=i/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(7&i)},xl=function(e){return(e+7)/8|0},Pr=function(e,i,t){return(null==i||i<0)&&(i=0),(null==t||t>e.length)&&(t=e.length),new Yt(e.subarray(i,t))},_1=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Lt=function(e,i,t){var o=new Error(i||_1[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,Lt),!t)throw o;return o},Ho=function(e,i,t){var o=i/8|0;e[o]|=t<<=7&i,e[o+1]|=t>>8},ra=function(e,i,t){var o=i/8|0;e[o]|=t<<=7&i,e[o+1]|=t>>8,e[o+2]|=t>>16},ld=function(e,i){for(var t=[],o=0;o<e.length;++o)e[o]&&t.push({s:o,f:e[o]});var r=t.length,s=t.slice();if(!r)return{t:Ig,l:0};if(1==r){var a=new Yt(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(K,ne){return K.f-ne.f}),t.push({s:-1,f:25001});var l=t[0],c=t[1],d=0,h=1,g=2;for(t[0]={s:-1,f:l.f+c.f,l,r:c};h!=r-1;)l=t[t[d].f<t[g].f?d++:g++],c=t[d!=h&&t[d].f<t[g].f?d++:g++],t[h++]={s:-1,f:l.f+c.f,l,r:c};var m=s[0].s;for(o=1;o<r;++o)s[o].s>m&&(m=s[o].s);var f=new bn(m+1),y=cd(t[h-1],f,0);if(y>i){o=0;var b=0,S=y-i,_=1<<S;for(s.sort(function(ne,V){return f[V.s]-f[ne.s]||ne.f-V.f});o<r;++o){var k=s[o].s;if(!(f[k]>i))break;b+=_-(1<<y-f[k]),f[k]=i}for(b>>=S;b>0;){var E=s[o].s;f[E]<i?b-=1<<i-f[E]++-1:++o}for(;o>=0&&b;--o){var G=s[o].s;f[G]==i&&(--f[G],++b)}y=i}return{t:new Yt(f),l:y}},cd=function(e,i,t){return-1==e.s?Math.max(cd(e.l,i,t+1),cd(e.r,i,t+1)):i[e.s]=t},Eg=function(e){for(var i=e.length;i&&!e[--i];);for(var t=new bn(++i),o=0,r=e[0],s=1,a=function(c){t[o++]=c},l=1;l<=i;++l)if(e[l]==r&&l!=i)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=e[l]}return{c:t.subarray(0,o),n:i}},sa=function(e,i){for(var t=0,o=0;o<i.length;++o)t+=e[o]*i[o];return t},Pg=function(e,i,t){var o=t.length,r=xl(i+2);e[r]=255&o,e[r+1]=o>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var s=0;s<o;++s)e[r+s+4]=t[s];return 8*(r+4+o)},Lg=function(e,i,t,o,r,s,a,l,c,d,h){Ho(i,h++,t),++r[256];for(var g=ld(r,15),m=g.t,f=g.l,y=ld(s,15),b=y.t,S=y.l,_=Eg(m),k=_.c,E=_.n,G=Eg(b),K=G.c,ne=G.n,V=new bn(19),N=0;N<k.length;++N)++V[31&k[N]];for(N=0;N<K.length;++N)++V[31&K[N]];for(var X=ld(V,7),ve=X.t,L=X.l,I=19;I>4&&!ve[Sl[I-1]];--I);var he,we,ce,be,Y=d+5<<3,z=sa(r,dr)+sa(s,oa)+a,me=sa(r,m)+sa(s,b)+a+14+3*I+sa(V,ve)+2*V[16]+3*V[17]+7*V[18];if(c>=0&&Y<=z&&Y<=me)return Pg(i,h,e.subarray(c,c+d));if(Ho(i,h,1+(me<z)),h+=2,me<z){he=to(m,f,0),we=m,ce=to(b,S,0),be=b;var xe=to(ve,L,0);for(Ho(i,h,E-257),Ho(i,h+5,ne-1),Ho(i,h+10,I-4),h+=14,N=0;N<I;++N)Ho(i,h+3*N,ve[Sl[N]]);h+=3*I;for(var je=[k,K],F=0;F<2;++F){var B=je[F];for(N=0;N<B.length;++N)Ho(i,h,xe[H=31&B[N]]),h+=ve[H],H>15&&(Ho(i,h,B[N]>>5&127),h+=B[N]>>12)}}else he=w1,we=dr,ce=b1,be=oa;for(N=0;N<l;++N){var W=o[N];if(W>255){var H;ra(i,h,he[257+(H=W>>18&31)]),h+=we[H+257],H>7&&(Ho(i,h,W>>23&31),h+=ia[H]);var oe=31&W;ra(i,h,ce[oe]),h+=be[oe],oe>3&&(ra(i,h,W>>5&8191),h+=na[oe])}else ra(i,h,he[W]),h+=we[W]}return ra(i,h,he[256]),h+we[256]},x1=new bl([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ig=new Yt(0),Og=function(){var e=1,i=0;return{p:function(t){for(var o=e,r=i,s=0|t.length,a=0;a!=s;){for(var l=Math.min(a+2655,s);a<l;++a)r+=o+=t[a];o=(65535&o)+15*(o>>16),r=(65535&r)+15*(r>>16)}e=o,i=r},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(i%=65521))<<8|i>>8}}},ud=function(e,i,t,o,r){if(!r&&(r={l:1},i.dictionary)){var s=i.dictionary.subarray(-32768),a=new Yt(s.length+e.length);a.set(s),a.set(e,s.length),e=a,r.w=s.length}return function(e,i,t,o,r,s){var a=s.z||e.length,l=new Yt(o+a+5*(1+Math.ceil(a/7e3))+r),c=l.subarray(o,l.length-r),d=s.l,h=7&(s.r||0);if(i){h&&(c[0]=s.r>>3);for(var g=x1[i-1],m=g>>13,f=8191&g,y=(1<<t)-1,b=s.p||new bn(32768),S=s.h||new bn(y+1),_=Math.ceil(t/3),k=2*_,E=function(gt){return(e[gt]^e[gt+1]<<_^e[gt+2]<<k)&y},G=new bl(25e3),K=new bn(288),ne=new bn(32),V=0,N=0,X=s.i||0,ve=0,L=s.w||0,I=0;X+2<a;++X){var Y=E(X),z=32767&X,me=S[Y];if(b[z]=me,S[Y]=z,L<=X){var he=a-X;if((V>7e3||ve>24576)&&(he>423||!d)){h=Lg(e,c,0,G,K,ne,N,ve,I,X-I,h),ve=V=N=0,I=X;for(var we=0;we<286;++we)K[we]=0;for(we=0;we<30;++we)ne[we]=0}var ce=2,be=0,xe=f,je=z-me&32767;if(he>2&&Y==E(X-je))for(var F=Math.min(m,he)-1,B=Math.min(32767,X),H=Math.min(258,he);je<=B&&--xe&&z!=me;){if(e[X+ce]==e[X+ce-je]){for(var W=0;W<H&&e[X+W]==e[X+W-je];++W);if(W>ce){if(ce=W,be=je,W>F)break;var oe=Math.min(je,W-2),de=0;for(we=0;we<oe;++we){var ue=X-je+we&32767,Le=ue-b[ue]&32767;Le>de&&(de=Le,me=ue)}}}je+=(z=me)-(me=b[z])&32767}if(be){G[ve++]=268435456|od[ce]<<18|Mg[be];var Pe=31&od[ce],We=31&Mg[be];N+=ia[Pe]+na[We],++K[257+Pe],++ne[We],L=X+ce,++V}else G[ve++]=e[X],++K[e[X]]}}for(X=Math.max(X,L);X<a;++X)G[ve++]=e[X],++K[e[X]];h=Lg(e,c,d,G,K,ne,N,ve,I,X-I,h),d||(s.r=7&h|c[h/8|0]<<3,h-=7,s.h=S,s.p=b,s.i=X,s.w=L)}else{for(X=s.w||0;X<a+d;X+=65535){var qe=X+65535;qe>=a&&(c[h/8|0]=d,qe=a),h=Pg(c,h+1,e.subarray(X,qe))}s.i=a}return Pr(l,0,o+xl(h)+r)}(e,null==i.level?6:i.level,null==i.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+i.mem,t,o,r)},pi=function(e,i,t){for(;t;++i)e[i]=t,t>>>=8};function kl(e,i){i||(i={});var t=Og();t.p(e);var o=ud(e,i,i.dictionary?6:2,4);return function(e,i){var t=i.level,o=0==t?0:t<6?1:9==t?3:2;if(e[0]=120,e[1]=o<<6|(i.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,i.dictionary){var r=Og();r.p(i.dictionary),pi(e,2,r.d())}}(o,i),pi(o,o.length-4,t.d()),o}function fd(e,i){return function(e,i,t,o){var r=e.length,s=o?o.length:0;if(!r||i.f&&!i.l)return t||new Yt(0);var a=!t,l=a||2!=i.i,c=i.i;a&&(t=new Yt(3*r));var d=function(Pe){var We=t.length;if(Pe>We){var qe=new Yt(Math.max(2*We,Pe));qe.set(t),t=qe}},h=i.f||0,g=i.p||0,m=i.b||0,f=i.l,y=i.d,b=i.m,S=i.n,_=8*r;do{if(!f){h=io(e,g,1);var k=io(e,g+1,3);if(g+=3,!k){var G=e[(E=xl(g)+4)-4]|e[E-3]<<8,K=E+G;if(K>r){c&&Lt(0);break}l&&d(m+G),t.set(e.subarray(E,K),m),i.b=m+=G,i.p=g=8*K,i.f=h;continue}if(1==k)f=y1,y=S1,b=9,S=5;else if(2==k){var ne=io(e,g,31)+257,V=io(e,g+10,15)+4,N=ne+io(e,g+5,31)+1;g+=14;for(var X=new Yt(N),ve=new Yt(19),L=0;L<V;++L)ve[Sl[L]]=io(e,g+3*L,7);g+=3*V;var I=rd(ve),Y=(1<<I)-1,z=to(ve,I,1);for(L=0;L<N;){var E,me=z[io(e,g,Y)];if(g+=15&me,(E=me>>4)<16)X[L++]=E;else{var he=0,we=0;for(16==E?(we=3+io(e,g,3),g+=2,he=X[L-1]):17==E?(we=3+io(e,g,7),g+=3):18==E&&(we=11+io(e,g,127),g+=7);we--;)X[L++]=he}}var ce=X.subarray(0,ne),be=X.subarray(ne);b=rd(ce),S=rd(be),f=to(ce,b,1),y=to(be,S,1)}else Lt(1);if(g>_){c&&Lt(0);break}}l&&d(m+131072);for(var xe=(1<<b)-1,je=(1<<S)-1,F=g;;F=g){var B=(he=f[sd(e,g)&xe])>>4;if((g+=15&he)>_){c&&Lt(0);break}if(he||Lt(2),B<256)t[m++]=B;else{if(256==B){F=g,f=null;break}var H=B-254;B>264&&(H=io(e,g,(1<<(W=ia[L=B-257]))-1)+Rg[L],g+=W);var oe=y[sd(e,g)&je],de=oe>>4;if(oe||Lt(3),g+=15&oe,be=C1[de],de>3){var W=na[de];be+=sd(e,g)&(1<<W)-1,g+=W}if(g>_){c&&Lt(0);break}l&&d(m+131072);var ue=m+H;if(m<be){var ge=s-be,Le=Math.min(be,ue);for(ge+m<0&&Lt(3);m<Le;++m)t[m]=o[ge+m]}for(;m<ue;++m)t[m]=t[m-be]}}i.l=f,i.p=F,i.b=m,i.f=h,f&&(h=1,i.m=b,i.d=y,i.n=S)}while(!h);return m!=t.length&&a?Pr(t,0,m):t.subarray(0,m)}(e.subarray(function(e,i){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Lt(6,"invalid zlib data"),(e[1]>>5&1)==+!i&&Lt(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)}(e,i&&i.dictionary),-4),{i:2},i&&i.out,i&&i.dictionary)}var zg=typeof TextDecoder<"u"&&new TextDecoder;try{zg.decode(Ig,{stream:!0})}catch{}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var ht=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Vg(){ht.console&&"function"==typeof ht.console.log&&ht.console.log.apply(ht.console,arguments)}var ei={log:Vg,warn:function(e){ht.console&&("function"==typeof ht.console.warn?ht.console.warn.apply(ht.console,arguments):Vg.call(null,arguments))},error:function(e){ht.console&&("function"==typeof ht.console.error?ht.console.error.apply(ht.console,arguments):Vg(e))}};function Ug(e,i,t){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){fs(o.response,i,t)},o.onerror=function(){ei.error("could not download file")},o.send()}function H1(e){var i=new XMLHttpRequest;i.open("HEAD",e,!1);try{i.send()}catch{}return i.status>=200&&i.status<=299}function wd(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(i)}}var Dl,Wg,fs=ht.saveAs||("object"!==(typeof window>"u"?"undefined":jt(window))||window!==ht?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,i,t){var o=ht.URL||ht.webkitURL,r=document.createElement("a");r.download=i=i||e.name||"download",r.rel="noopener","string"==typeof e?(r.href=e,r.origin!==location.origin?H1(r.href)?Ug(e,i,t):wd(r,r.target="_blank"):wd(r)):(r.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(r.href)},4e4),setTimeout(function(){wd(r)},0))}:"msSaveOrOpenBlob"in navigator?function(e,i,t){if(i=i||e.name||"download","string"==typeof e)if(H1(e))Ug(e,i,t);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){wd(o)})}else navigator.msSaveOrOpenBlob((r=e,void 0===(s=t)?s={autoBom:!1}:"object"!==jt(s)&&(ei.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob([String.fromCharCode(65279),r],{type:r.type}):r),i);var r,s}:function(e,i,t,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return Ug(e,i,t);var r="application/octet-stream"===e.type,s=/constructor/i.test(ht.HTMLElement)||ht.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&s)&&"object"===(typeof FileReader>"u"?"undefined":jt(FileReader))){var l=new FileReader;l.onloadend=function(){var h=l.result;h=a?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=h:location=h,o=null},l.readAsDataURL(e)}else{var c=ht.URL||ht.webkitURL,d=c.createObjectURL(e);o?o.location=d:location.href=d,o=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});function q1(e){var i;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],o=0;o<t.length;o++){var s=t[o].process,a=t[o].re.exec(e);a&&(i=s(a),this.r=i[0],this.g=i[1],this.b=i[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return 1==l.length&&(l="0"+l),1==c.length&&(c="0"+c),1==d.length&&(d="0"+d),"#"+l+c+d}}function jg(e,i){var t=e[0],o=e[1],r=e[2],s=e[3];t=ln(t,o,r,s,i[0],7,-680876936),s=ln(s,t,o,r,i[1],12,-389564586),r=ln(r,s,t,o,i[2],17,606105819),o=ln(o,r,s,t,i[3],22,-1044525330),t=ln(t,o,r,s,i[4],7,-176418897),s=ln(s,t,o,r,i[5],12,1200080426),r=ln(r,s,t,o,i[6],17,-1473231341),o=ln(o,r,s,t,i[7],22,-45705983),t=ln(t,o,r,s,i[8],7,1770035416),s=ln(s,t,o,r,i[9],12,-1958414417),r=ln(r,s,t,o,i[10],17,-42063),o=ln(o,r,s,t,i[11],22,-1990404162),t=ln(t,o,r,s,i[12],7,1804603682),s=ln(s,t,o,r,i[13],12,-40341101),r=ln(r,s,t,o,i[14],17,-1502002290),t=cn(t,o=ln(o,r,s,t,i[15],22,1236535329),r,s,i[1],5,-165796510),s=cn(s,t,o,r,i[6],9,-1069501632),r=cn(r,s,t,o,i[11],14,643717713),o=cn(o,r,s,t,i[0],20,-373897302),t=cn(t,o,r,s,i[5],5,-701558691),s=cn(s,t,o,r,i[10],9,38016083),r=cn(r,s,t,o,i[15],14,-660478335),o=cn(o,r,s,t,i[4],20,-405537848),t=cn(t,o,r,s,i[9],5,568446438),s=cn(s,t,o,r,i[14],9,-1019803690),r=cn(r,s,t,o,i[3],14,-187363961),o=cn(o,r,s,t,i[8],20,1163531501),t=cn(t,o,r,s,i[13],5,-1444681467),s=cn(s,t,o,r,i[2],9,-51403784),r=cn(r,s,t,o,i[7],14,1735328473),t=dn(t,o=cn(o,r,s,t,i[12],20,-1926607734),r,s,i[5],4,-378558),s=dn(s,t,o,r,i[8],11,-2022574463),r=dn(r,s,t,o,i[11],16,1839030562),o=dn(o,r,s,t,i[14],23,-35309556),t=dn(t,o,r,s,i[1],4,-1530992060),s=dn(s,t,o,r,i[4],11,1272893353),r=dn(r,s,t,o,i[7],16,-155497632),o=dn(o,r,s,t,i[10],23,-1094730640),t=dn(t,o,r,s,i[13],4,681279174),s=dn(s,t,o,r,i[0],11,-358537222),r=dn(r,s,t,o,i[3],16,-722521979),o=dn(o,r,s,t,i[6],23,76029189),t=dn(t,o,r,s,i[9],4,-640364487),s=dn(s,t,o,r,i[12],11,-421815835),r=dn(r,s,t,o,i[15],16,530742520),t=un(t,o=dn(o,r,s,t,i[2],23,-995338651),r,s,i[0],6,-198630844),s=un(s,t,o,r,i[7],10,1126891415),r=un(r,s,t,o,i[14],15,-1416354905),o=un(o,r,s,t,i[5],21,-57434055),t=un(t,o,r,s,i[12],6,1700485571),s=un(s,t,o,r,i[3],10,-1894986606),r=un(r,s,t,o,i[10],15,-1051523),o=un(o,r,s,t,i[1],21,-2054922799),t=un(t,o,r,s,i[8],6,1873313359),s=un(s,t,o,r,i[15],10,-30611744),r=un(r,s,t,o,i[6],15,-1560198380),o=un(o,r,s,t,i[13],21,1309151649),t=un(t,o,r,s,i[4],6,-145523070),s=un(s,t,o,r,i[11],10,-1120210379),r=un(r,s,t,o,i[2],15,718787259),o=un(o,r,s,t,i[9],21,-343485551),e[0]=Ir(t,e[0]),e[1]=Ir(o,e[1]),e[2]=Ir(r,e[2]),e[3]=Ir(s,e[3])}function yd(e,i,t,o,r,s){return i=Ir(Ir(i,e),Ir(o,s)),Ir(i<<r|i>>>32-r,t)}function ln(e,i,t,o,r,s,a){return yd(i&t|~i&o,e,i,r,s,a)}function cn(e,i,t,o,r,s,a){return yd(i&o|t&~o,e,i,r,s,a)}function dn(e,i,t,o,r,s,a){return yd(i^t^o,e,i,r,s,a)}function un(e,i,t,o,r,s,a){return yd(t^(i|~o),e,i,r,s,a)}function z1(e){var i,t=e.length,o=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=e.length;i+=64)jg(o,VD(e.substring(i-64,i)));e=e.substring(i-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<e.length;i++)r[i>>2]|=e.charCodeAt(i)<<(i%4<<3);if(r[i>>2]|=128<<(i%4<<3),i>55)for(jg(o,r),i=0;i<16;i++)r[i]=0;return r[14]=8*t,jg(o,r),o}function VD(e){var i,t=[];for(i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}Dl=ht.atob.bind(ht),Wg=ht.btoa.bind(ht);var V1="0123456789abcdef".split("");function UD(e){for(var i="",t=0;t<4;t++)i+=V1[e>>8*t+4&15]+V1[e>>8*t&15];return i}function WD(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Yg(e){return z1(e).map(WD).join("")}var jD="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var i=0;i<e.length;i++)e[i]=UD(e[i]);return e.join("")}(z1("hello"));function Ir(e,i){if(jD){var t=(65535&e)+(65535&i);return(e>>16)+(i>>16)+(t>>16)<<16|65535&t}return e+i&4294967295}function $g(e,i){var t,o,r;if(e!==t){for(var a=(r=e,new Array(1+(256/e.length>>0)+1).join(r)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var h=l[c];d=(d+h+a.charCodeAt(c))%256,l[c]=l[d],l[d]=h}t=e,o=l}else l=o;var g=i.length,m=0,f=0,y="";for(c=0;c<g;c++)f=(f+(h=l[m=(m+1)%256]))%256,l[m]=l[f],l[f]=h,a=l[(l[m]+l[f])%256],y+=String.fromCharCode(i.charCodeAt(c)^a);return y}var U1={print:4,modify:8,copy:16,"annot-forms":32};function la(e,i,t,o){this.v=1,this.r=2;var r=192;e.forEach(function(l){if(void 0!==U1.perm)throw new Error("Invalid permission: "+l);r+=U1[l]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(i+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^r)),this.encryptionKey=Yg(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=$g(this.encryptionKey,this.padding)}function ca(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var i="",t=e.length,o=0;o<t;o++){var r=e.charCodeAt(o);i+=r<33||35===r||37===r||40===r||41===r||47===r||60===r||62===r||91===r||93===r||123===r||125===r||r>126?"#"+("0"+r.toString(16)).slice(-2):e[o]}return i}function W1(e){if("object"!==jt(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var i={};this.subscribe=function(t,o,r){if(r=r||!1,"string"!=typeof t||"function"!=typeof o||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");i.hasOwnProperty(t)||(i[t]={});var s=Math.random().toString(35);return i[t][s]=[o,!!r],s},this.unsubscribe=function(t){for(var o in i)if(i[o][t])return delete i[o][t],0===Object.keys(i[o]).length&&delete i[o],!0;return!1},this.publish=function(t){if(i.hasOwnProperty(t)){var o=Array.prototype.slice.call(arguments,1),r=[];for(var s in i[t]){var a=i[t][s];try{a[0].apply(e,o)}catch(l){ht.console&&ei.error("jsPDF PubSub Error",l.message,l)}a[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return i}}function bd(e){if(!(this instanceof bd))return new bd(e);var i="opacity,stroke-opacity".split(",");for(var t in e)e.hasOwnProperty(t)&&i.indexOf(t)>=0&&(this[t]=e[t]);this.id="",this.objectNumber=-1}function j1(e,i){this.gState=e,this.matrix=i,this.id="",this.objectNumber=-1}function ms(e,i,t,o,r){if(!(this instanceof ms))return new ms(e,i,t,o,r);this.type="axial"===e?2:3,this.coords=i,this.colors=t,j1.call(this,o,r)}function da(e,i,t,o,r){if(!(this instanceof da))return new da(e,i,t,o,r);this.boundingBox=e,this.xStep=i,this.yStep=t,this.stream="",this.cloneIndex=0,j1.call(this,o,r)}function dt(e){var i,t="string"==typeof arguments[0]?arguments[0]:"p",o=arguments[1],r=arguments[2],s=arguments[3],a=[],l=1,c=16,d="S",h=null;"object"===jt(e=e||{})&&(t=e.orientation,o=e.unit||o,r=e.format||r,s=e.compress||e.compressPdf||s,null!==(h=e.encryption||null)&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(i=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),a=e.filters||(!0===s?["FlateEncode"]:a),o=o||"mm",t=(""+(t||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=W1;var y="1.3",b=f.__private__.getPdfVersion=function(){return y};f.__private__.setPdfVersion=function(v){y=v};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return S};var _=f.__private__.getPageFormat=function(v){return S[v]};r=r||"a4";var E="compat";function G(){this.saveGraphicsState(),q(new ut($e,0,0,-$e,0,qr()*$e).toString()+" cm"),this.setFontSize(this.getFontSize()/$e),d="n",E="advanced"}function K(){this.restoreGraphicsState(),d="S",E="compat"}var ne=f.__private__.combineFontStyleAndFontWeight=function(v,A){if("bold"==v&&"normal"==A||"bold"==v&&400==A||"normal"==v&&"italic"==A||"bold"==v&&"italic"==A)throw new Error("Invalid Combination of fontweight and fontstyle");return A&&(v=400==A||"normal"===A?"italic"===v?"italic":"normal":700!=A&&"bold"!==A||"normal"!==v?(700==A?"bold":A)+""+v:"bold"),v};f.advancedAPI=function(v){var A="compat"===E;return A&&G.call(this),"function"!=typeof v||(v(this),A&&K.call(this)),this},f.compatAPI=function(v){var A="advanced"===E;return A&&K.call(this),"function"!=typeof v||(v(this),A&&G.call(this)),this},f.isAdvancedAPI=function(){return"advanced"===E};var V,N=function(v){if("advanced"!==E)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},X=f.roundToPrecision=f.__private__.roundToPrecision=function(v,A){var Z=i||A;if(isNaN(v)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Z).replace(/0+$/,"")};V=f.hpf=f.__private__.hpf="number"==typeof c?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return X(v,c)}:"smart"===c?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return X(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return X(v,16)};var ve=f.f2=f.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return X(v,2)},L=f.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return X(v,3)},I=f.scale=f.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return"compat"===E?v*$e:"advanced"===E?v:void 0},z=function(v){return I(function(v){return"compat"===E?qr()-v:"advanced"===E?v:void 0}(v))};f.__private__.setPrecision=f.setPrecision=function(v){"number"==typeof parseInt(v,10)&&(i=parseInt(v,10))};var me,he="00000000000000000000000000000000",we=f.__private__.getFileId=function(){return he},ce=f.__private__.setFileId=function(v){return he=void 0!==v&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==h&&(gn=new la(h.userPermissions,h.userPassword,h.ownerPassword,he)),he};f.setFileId=function(v){return ce(v),this},f.getFileId=function(){return we()};var be=f.__private__.convertDateToPDFDate=function(v){var A=v.getTimezoneOffset(),Z=A<0?"+":"-",U=Math.floor(Math.abs(A/60)),re=Math.abs(A%60),ye=[Z,H(U),"'",H(re),"'"].join("");return["D:",v.getFullYear(),H(v.getMonth()+1),H(v.getDate()),H(v.getHours()),H(v.getMinutes()),H(v.getSeconds()),ye].join("")},xe=f.__private__.convertPDFDateToDate=function(v){var A=parseInt(v.substr(2,4),10),Z=parseInt(v.substr(6,2),10)-1,U=parseInt(v.substr(8,2),10),re=parseInt(v.substr(10,2),10),ye=parseInt(v.substr(12,2),10),Re=parseInt(v.substr(14,2),10);return new Date(A,Z,U,re,ye,Re,0)},je=f.__private__.setCreationDate=function(v){var A;if(void 0===v&&(v=new Date),v instanceof Date)A=be(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");A=v}return me=A},F=f.__private__.getCreationDate=function(v){var A=me;return"jsDate"===v&&(A=xe(me)),A};f.setCreationDate=function(v){return je(v),this},f.getCreationDate=function(v){return F(v)};var B,H=f.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},W=f.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},oe=0,de=[],ue=[],ge=0,Le=[],Pe=[],We=!1,qe=ue;f.__private__.setCustomOutputDestination=function(v){We=!0,qe=v};var Se=function(v){We||(qe=v)};f.__private__.resetCustomOutputDestination=function(){We=!1,qe=ue};var q=f.__private__.out=function(v){return v=v.toString(),ge+=v.length+1,qe.push(v),qe},St=f.__private__.write=function(v){return q(1===arguments.length?v.toString():Array.prototype.join.call(arguments," "))},tt=f.__private__.getArrayBuffer=function(v){for(var A=v.length,Z=new ArrayBuffer(A),U=new Uint8Array(Z);A--;)U[A]=v.charCodeAt(A);return Z},Me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Me};var Be=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(v){return Be="advanced"===E?v/$e:v,this};var Ye,Ve=f.__private__.getFontSize=f.getFontSize=function(){return"compat"===E?Be:Be*$e},st=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(v){return st=v,this},f.__private__.getR2L=f.getR2L=function(){return st};var wt,At=f.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Ye=v;else if(isNaN(v)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Ye=v}else Ye=parseInt(v,10)};f.__private__.getZoomMode=function(){return Ye};var Dt,Ot=f.__private__.setPageMode=function(v){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');wt=v};f.__private__.getPageMode=function(){return wt};var Qt=f.__private__.setLayoutMode=function(v){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Dt=v};f.__private__.getLayoutMode=function(){return Dt},f.__private__.setDisplayMode=f.setDisplayMode=function(v,A,Z){return At(v),Qt(A),Ot(Z),this};var ft={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(v){if(-1===Object.keys(ft).indexOf(v))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ft[v]},f.__private__.getDocumentProperties=function(){return ft},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(v){for(var A in ft)ft.hasOwnProperty(A)&&v[A]&&(ft[A]=v[A]);return this},f.__private__.setDocumentProperty=function(v,A){if(-1===Object.keys(ft).indexOf(v))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ft[v]=A};var Ft,$e,hn,Zt,xo,ti={},fi={},Uo=[],zt={},bs={},bi={},Ao={},hr=null,Si=0,yt=[],Vt=new W1(f),Ss=e.hotfixes||[],Xi={},Wo={},jo=[],ut=function v(A,Z,U,re,ye,Re){if(!(this instanceof v))return new v(A,Z,U,re,ye,Re);isNaN(A)&&(A=1),isNaN(Z)&&(Z=0),isNaN(U)&&(U=0),isNaN(re)&&(re=1),isNaN(ye)&&(ye=0),isNaN(Re)&&(Re=0),this._matrix=[A,Z,U,re,ye,Re]};Object.defineProperty(ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ut.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),ut.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(V).join(v)},ut.prototype.multiply=function(v){return new ut(v.sx*this.sx+v.shy*this.shx,v.sx*this.shy+v.shy*this.sy,v.shx*this.sx+v.sy*this.shx,v.shx*this.shy+v.sy*this.sy,v.tx*this.sx+v.ty*this.shx+this.tx,v.tx*this.shy+v.ty*this.sy+this.ty)},ut.prototype.decompose=function(){var v=this.sx,A=this.shy,Z=this.shx,U=this.sy,re=this.tx,ye=this.ty,Re=Math.sqrt(v*v+A*A),Je=(v/=Re)*Z+(A/=Re)*U;Z-=v*Je,U-=A*Je;var at=Math.sqrt(Z*Z+U*U);return Je/=at,v*(U/=at)<A*(Z/=at)&&(v=-v,A=-A,Je=-Je,Re=-Re),{scale:new ut(Re,0,0,at,0,0),translate:new ut(1,0,0,1,re,ye),rotate:new ut(v,A,-A,v,0,0),skew:new ut(1,0,Je,1,0,0)}},ut.prototype.toString=function(v){return this.join(" ")},ut.prototype.inversed=function(){var v=this.sx,A=this.shy,Z=this.shx,U=this.sy,re=this.tx,ye=this.ty,Re=1/(v*U-A*Z),Je=U*Re,at=-A*Re,_t=-Z*Re,bt=v*Re;return new ut(Je,at,_t,bt,-Je*re-_t*ye,-at*re-bt*ye)},ut.prototype.applyToPoint=function(v){return new Ea(v.x*this.sx+v.y*this.shx+this.tx,v.x*this.shy+v.y*this.sy+this.ty)},ut.prototype.applyToRectangle=function(v){var A=this.applyToPoint(v),Z=this.applyToPoint(new Ea(v.x+v.w,v.y+v.h));return new Vl(A.x,A.y,Z.x-A.x,Z.y-A.y)},ut.prototype.clone=function(){return new ut(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},f.Matrix=ut;var ko=f.matrixMult=function(v,A){return A.multiply(v)},Yo=new ut(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Yo;var Ln=function(v,A){if(!bs[v]){var Z=(A instanceof ms?"Sh":"P")+(Object.keys(zt).length+1).toString(10);A.id=Z,bs[v]=Z,zt[Z]=A,Vt.publish("addPattern",A)}};f.ShadingPattern=ms,f.TilingPattern=da,f.addShadingPattern=function(v,A){return N("addShadingPattern()"),Ln(v,A),this},f.beginTilingPattern=function(v){N("beginTilingPattern()"),Qd(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},f.endTilingPattern=function(v,A){N("endTilingPattern()"),A.stream=Pe[B].join("\n"),Ln(v,A),Vt.publish("endTilingPattern",A),jo.pop().restore()};var v,qi=f.__private__.newObject=function(){var v=Bi();return zn(v,!0),v},Bi=f.__private__.newObjectDeferred=function(){return oe++,de[oe]=function(){return ge},oe},zn=function(v,A){return A="boolean"==typeof A&&A,de[v]=ge,A&&q(v+" 0 obj"),v},wa=f.__private__.newAdditionalObject=function(){var v={objId:Bi(),content:""};return Le.push(v),v},gr=Bi(),To=Bi(),Do=f.__private__.decodeColorString=function(v){var A=v.split(" ");if(2!==A.length||"g"!==A[1]&&"G"!==A[1])5===A.length&&("k"===A[4]||"K"===A[4])&&(A=[(1-A[0])*(1-A[3]),(1-A[1])*(1-A[3]),(1-A[2])*(1-A[3]),"r"]);else{var Z=parseFloat(A[0]);A=[Z,Z,Z,"r"]}for(var U="#",re=0;re<3;re++)U+=("0"+Math.floor(255*parseFloat(A[re])).toString(16)).slice(-2);return U},Fo=f.__private__.encodeColorString=function(v){var A;"string"==typeof v&&(v={ch1:v});var Z=v.ch1,U=v.ch2,re=v.ch3,ye=v.ch4,Re="draw"===v.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof Z&&"#"!==Z.charAt(0)){var Je=new q1(Z);if(Je.ok)Z=Je.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if("string"==typeof Z&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),"string"==typeof Z&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var at=parseInt(Z.substr(1),16);Z=at>>16&255,U=at>>8&255,re=255&at}if(void 0===U||void 0===ye&&Z===U&&U===re)A="string"==typeof Z?Z+" "+Re[0]:2===v.precision?ve(Z/255)+" "+Re[0]:L(Z/255)+" "+Re[0];else if(void 0===ye||"object"===jt(ye)){if(ye&&!isNaN(ye.a)&&0===ye.a)return["1.","1.","1.",Re[1]].join(" ");A="string"==typeof Z?[Z,U,re,Re[1]].join(" "):2===v.precision?[ve(Z/255),ve(U/255),ve(re/255),Re[1]].join(" "):[L(Z/255),L(U/255),L(re/255),Re[1]].join(" ")}else A="string"==typeof Z?[Z,U,re,ye,Re[2]].join(" "):2===v.precision?[ve(Z),ve(U),ve(re),ve(ye),Re[2]].join(" "):[L(Z),L(U),L(re),L(ye),Re[2]].join(" ");return A},$o=f.__private__.getFilters=function(){return a},no=f.__private__.putStream=function(v){var A=(v=v||{}).data||"",Z=v.filters||$o(),U=v.alreadyAppliedFilters||[],re=v.addLength1||!1,ye=A.length,Re=v.objectId,Je=function(pn){return pn};if(null!==h&&void 0===Re)throw new Error("ObjectId must be passed to putStream for file encryption");null!==h&&(Je=gn.encryptor(Re,0));var at={};!0===Z&&(Z=["FlateEncode"]);var _t=v.additionalKeyValues||[],bt=(at=void 0!==dt.API.processDataByFilters?dt.API.processDataByFilters(A,Z):{data:A,reverseChain:[]}).reverseChain+(Array.isArray(U)?U.join(" "):U.toString());if(0!==at.data.length&&(_t.push({key:"Length",value:at.data.length}),!0===re&&_t.push({key:"Length1",value:ye})),0!=bt.length)if(bt.split("/").length-1==1)_t.push({key:"Filter",value:bt});else{_t.push({key:"Filter",value:"["+bt+"]"});for(var It=0;It<_t.length;It+=1)if("DecodeParms"===_t[It].key){for(var Ci=[],_i=0;_i<at.reverseChain.split("/").length-1;_i+=1)Ci.push("null");Ci.push(_t[It].value),_t[It].value="["+Ci.join(" ")+"]"}}q("<<");for(var Zi=0;Zi<_t.length;Zi++)q("/"+_t[Zi].key+" "+_t[Zi].value);q(">>"),0!==at.data.length&&(q("stream"),q(Je(at.data)),q("endstream"))},Jo=f.__private__.putPage=function(v){var A=v.number,Z=v.data,U=v.objId,re=v.contentsObjId;zn(U,!0),q("<</Type /Page"),q("/Parent "+v.rootDictionaryObjId+" 0 R"),q("/Resources "+v.resourceDictionaryObjId+" 0 R"),q("/MediaBox ["+parseFloat(V(v.mediaBox.bottomLeftX))+" "+parseFloat(V(v.mediaBox.bottomLeftY))+" "+V(v.mediaBox.topRightX)+" "+V(v.mediaBox.topRightY)+"]"),null!==v.cropBox&&q("/CropBox ["+V(v.cropBox.bottomLeftX)+" "+V(v.cropBox.bottomLeftY)+" "+V(v.cropBox.topRightX)+" "+V(v.cropBox.topRightY)+"]"),null!==v.bleedBox&&q("/BleedBox ["+V(v.bleedBox.bottomLeftX)+" "+V(v.bleedBox.bottomLeftY)+" "+V(v.bleedBox.topRightX)+" "+V(v.bleedBox.topRightY)+"]"),null!==v.trimBox&&q("/TrimBox ["+V(v.trimBox.bottomLeftX)+" "+V(v.trimBox.bottomLeftY)+" "+V(v.trimBox.topRightX)+" "+V(v.trimBox.topRightY)+"]"),null!==v.artBox&&q("/ArtBox ["+V(v.artBox.bottomLeftX)+" "+V(v.artBox.bottomLeftY)+" "+V(v.artBox.topRightX)+" "+V(v.artBox.topRightY)+"]"),"number"==typeof v.userUnit&&1!==v.userUnit&&q("/UserUnit "+v.userUnit),Vt.publish("putPage",{objId:U,pageContext:yt[A],pageNumber:A,page:Z}),q("/Contents "+re+" 0 R"),q(">>"),q("endobj");var ye=Z.join("\n");return"advanced"===E&&(ye+="\nQ"),zn(re,!0),no({data:ye,filters:$o(),objectId:re}),q("endobj"),U},_s=f.__private__.putPages=function(){var v,A,Z=[];for(v=1;v<=Si;v++)yt[v].objId=Bi(),yt[v].contentsObjId=Bi();for(v=1;v<=Si;v++)Z.push(Jo({number:v,data:Pe[v],objId:yt[v].objId,contentsObjId:yt[v].contentsObjId,mediaBox:yt[v].mediaBox,cropBox:yt[v].cropBox,bleedBox:yt[v].bleedBox,trimBox:yt[v].trimBox,artBox:yt[v].artBox,userUnit:yt[v].userUnit,rootDictionaryObjId:gr,resourceDictionaryObjId:To}));zn(gr,!0),q("<</Type /Pages");var U="/Kids [";for(A=0;A<Si;A++)U+=Z[A]+" 0 R ";q(U+"]"),q("/Count "+Si),q(">>"),q("endobj"),Vt.publish("postPutPages")},ya=function(v){Vt.publish("putFont",{font:v,out:q,newObject:qi,putStream:no}),!0!==v.isAlreadyPutted&&(v.objectNumber=qi(),q("<<"),q("/Type /Font"),q("/BaseFont /"+ca(v.postScriptName)),q("/Subtype /Type1"),"string"==typeof v.encoding&&q("/Encoding /"+v.encoding),q("/FirstChar 32"),q("/LastChar 255"),q(">>"),q("endobj"))},Sa=function(v){v.objectNumber=qi();var A=[];A.push({key:"Type",value:"/XObject"}),A.push({key:"Subtype",value:"/Form"}),A.push({key:"BBox",value:"["+[V(v.x),V(v.y),V(v.x+v.width),V(v.y+v.height)].join(" ")+"]"}),A.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Z=v.pages[1].join("\n");no({data:Z,additionalKeyValues:A,objectId:v.objectNumber}),q("endobj")},hp=function(v,A){A||(A=21);var Z=qi(),U=function(v,A){var Z,U=[],re=1/(A-1);for(Z=0;Z<1;Z+=re)U.push(Z);U.push(1),0!=v[0].offset&&v.unshift({offset:0,color:v[0].color}),1!=v[v.length-1].offset&&v.push({offset:1,color:v[v.length-1].color});for(var Je="",at=0,_t=0;_t<U.length;_t++){for(Z=U[_t];Z>v[at+1].offset;)at++;var bt=v[at].offset,It=(Z-bt)/(v[at+1].offset-bt),Ci=v[at].color,_i=v[at+1].color;Je+=W(Math.round((1-It)*Ci[0]+It*_i[0]).toString(16))+W(Math.round((1-It)*Ci[1]+It*_i[1]).toString(16))+W(Math.round((1-It)*Ci[2]+It*_i[2]).toString(16))}return Je.trim()}(v.colors,A),re=[];re.push({key:"FunctionType",value:"0"}),re.push({key:"Domain",value:"[0.0 1.0]"}),re.push({key:"Size",value:"["+A+"]"}),re.push({key:"BitsPerSample",value:"8"}),re.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),re.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),no({data:U,additionalKeyValues:re,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),q("endobj"),v.objectNumber=qi(),q("<< /ShadingType "+v.type),q("/ColorSpace /DeviceRGB");var ye="/Coords ["+V(parseFloat(v.coords[0]))+" "+V(parseFloat(v.coords[1]))+" ";ye+=2===v.type?V(parseFloat(v.coords[2]))+" "+V(parseFloat(v.coords[3])):V(parseFloat(v.coords[2]))+" "+V(parseFloat(v.coords[3]))+" "+V(parseFloat(v.coords[4]))+" "+V(parseFloat(v.coords[5])),q(ye+="]"),v.matrix&&q("/Matrix ["+v.matrix.toString()+"]"),q("/Function "+Z+" 0 R"),q("/Extend [true true]"),q(">>"),q("endobj")},gp=function(v,A){var Z=Bi(),U=qi();A.push({resourcesOid:Z,objectOid:U}),v.objectNumber=U;var re=[];re.push({key:"Type",value:"/Pattern"}),re.push({key:"PatternType",value:"1"}),re.push({key:"PaintType",value:"1"}),re.push({key:"TilingType",value:"1"}),re.push({key:"BBox",value:"["+v.boundingBox.map(V).join(" ")+"]"}),re.push({key:"XStep",value:V(v.xStep)}),re.push({key:"YStep",value:V(v.yStep)}),re.push({key:"Resources",value:Z+" 0 R"}),v.matrix&&re.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),no({data:v.stream,additionalKeyValues:re,objectId:v.objectNumber}),q("endobj")},Id=function(v){for(var A in v.objectNumber=qi(),q("<<"),v)switch(A){case"opacity":q("/ca "+ve(v[A]));break;case"stroke-opacity":q("/CA "+ve(v[A]))}q(">>"),q("endobj")},Ei=function(v){zn(v.resourcesOid,!0),q("<<"),q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var v in q("/Font <<"),ti)ti.hasOwnProperty(v)&&(!1===g||!0===g&&m.hasOwnProperty(v))&&q("/"+v+" "+ti[v].objectNumber+" 0 R");q(">>")}(),function(){if(Object.keys(zt).length>0){for(var v in q("/Shading <<"),zt)zt.hasOwnProperty(v)&&zt[v]instanceof ms&&zt[v].objectNumber>=0&&q("/"+v+" "+zt[v].objectNumber+" 0 R");Vt.publish("putShadingPatternDict"),q(">>")}}(),function(v){if(Object.keys(zt).length>0){for(var A in q("/Pattern <<"),zt)zt.hasOwnProperty(A)&&zt[A]instanceof f.TilingPattern&&zt[A].objectNumber>=0&&zt[A].objectNumber<v&&q("/"+A+" "+zt[A].objectNumber+" 0 R");Vt.publish("putTilingPatternDict"),q(">>")}}(v.objectOid),function(){if(Object.keys(bi).length>0){var v;for(v in q("/ExtGState <<"),bi)bi.hasOwnProperty(v)&&bi[v].objectNumber>=0&&q("/"+v+" "+bi[v].objectNumber+" 0 R");Vt.publish("putGStateDict"),q(">>")}}(),function(){for(var v in q("/XObject <<"),Xi)Xi.hasOwnProperty(v)&&Xi[v].objectNumber>=0&&q("/"+v+" "+Xi[v].objectNumber+" 0 R");Vt.publish("putXobjectDict"),q(">>")}(),q(">>"),q("endobj")},Zd=function(v){fi[v.fontName]=fi[v.fontName]||{},fi[v.fontName][v.fontStyle]=v.id},Il=function(v,A,Z,U,re){var ye={id:"F"+(Object.keys(ti).length+1).toString(10),postScriptName:v,fontName:A,fontStyle:Z,encoding:U,isStandardFont:re||!1,metadata:{}};return Vt.publish("addFont",{font:ye,instance:this}),ti[ye.id]=ye,Zd(ye),ye.id},In=f.__private__.pdfEscape=f.pdfEscape=function(v,A){return function(v,A){var Z,U,re,ye,Re,Je,at,_t,bt;if(re=(A=A||{}).sourceEncoding||"Unicode",Re=A.outputEncoding,(A.autoencode||Re)&&ti[Ft].metadata&&ti[Ft].metadata[re]&&ti[Ft].metadata[re].encoding&&(ye=ti[Ft].metadata[re].encoding,!Re&&ti[Ft].encoding&&(Re=ti[Ft].encoding),!Re&&ye.codePages&&(Re=ye.codePages[0]),"string"==typeof Re&&(Re=ye[Re]),Re)){for(at=!1,Je=[],Z=0,U=v.length;Z<U;Z++)(_t=Re[v.charCodeAt(Z)])?Je.push(String.fromCharCode(_t)):Je.push(v[Z]),Je[Z].charCodeAt(0)>>8&&(at=!0);v=Je.join("")}for(Z=v.length;void 0===at&&0!==Z;)v.charCodeAt(Z-1)>>8&&(at=!0),Z--;if(!at)return v;for(Je=A.noBOM?[]:[254,255],Z=0,U=v.length;Z<U;Z++){if((bt=(_t=v.charCodeAt(Z))>>8)>>8)throw new Error("Character at position "+Z+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Je.push(bt),Je.push(_t-(bt<<8))}return String.fromCharCode.apply(void 0,Je)}(v,A).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ol=f.__private__.beginPage=function(v){Pe[++Si]=[],yt[Si]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Hd(Si),Se(Pe[B])},Gd=function(v,A){var Z,U,re;switch(t=A||t,"string"==typeof v&&(Z=_(v.toLowerCase()),Array.isArray(Z)&&(U=Z[0],re=Z[1])),Array.isArray(v)&&(U=v[0]*$e,re=v[1]*$e),isNaN(U)&&(U=r[0],re=r[1]),(U>14400||re>14400)&&(ei.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),U=Math.min(14400,U),re=Math.min(14400,re)),r=[U,re],t.substr(0,1)){case"l":re>U&&(r=[re,U]);break;case"p":U>re&&(r=[re,U])}Ol(r),jd(Gl),q(Mo),0!==ql&&q(ql+" J"),0!==zl&&q(zl+" j"),Vt.publish("addPage",{pageNumber:Si})},wp=function(v){v>0&&v<=Si&&(Pe.splice(v,1),yt.splice(v,1),Si--,B>Si&&(B=Si),this.setPage(B))},Hd=function(v){v>0&&v<=Si&&(B=v)},yp=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Pe.length-1},qd=function(v,A,Z){var U,re=void 0;return Z=Z||{},A=void 0!==A?A:ti[Ft].fontStyle,U=(v=void 0!==v?v:ti[Ft].fontName).toLowerCase(),void 0!==fi[U]&&void 0!==fi[U][A]?re=fi[U][A]:void 0!==fi[v]&&void 0!==fi[v][A]?re=fi[v][A]:!1===Z.disableWarning&&ei.warn("Unable to look up font label for font '"+v+"', '"+A+"'. Refer to getFontList() for available fonts."),re||Z.noFallback||null==(re=fi.times[A])&&(re=fi.times.normal),re},bp=f.__private__.putInfo=function(){var v=qi(),A=function(U){return U};for(var Z in null!==h&&(A=gn.encryptor(v,0)),q("<<"),q("/Producer ("+In(A("jsPDF "+dt.version))+")"),ft)ft.hasOwnProperty(Z)&&ft[Z]&&q("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+In(A(ft[Z]))+")");q("/CreationDate ("+In(A(me))+")"),q(">>"),q("endobj")},Nl=f.__private__.putCatalog=function(v){var A=(v=v||{}).rootDictionaryObjId||gr;switch(qi(),q("<<"),q("/Type /Catalog"),q("/Pages "+A+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":q("/OpenAction [3 0 R /Fit]");break;case"original":q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+Ye;"%"===Z.substr(Z.length-1)&&(Ye=parseInt(Ye)/100),"number"==typeof Ye&&q("/OpenAction [3 0 R /XYZ null null "+ve(Ye)+"]")}switch(Dt||(Dt="continuous"),Dt){case"continuous":q("/PageLayout /OneColumn");break;case"single":q("/PageLayout /SinglePage");break;case"two":case"twoleft":q("/PageLayout /TwoColumnLeft");break;case"tworight":q("/PageLayout /TwoColumnRight")}wt&&q("/PageMode /"+wt),Vt.publish("putCatalog"),q(">>"),q("endobj")},Sp=f.__private__.putTrailer=function(){q("trailer"),q("<<"),q("/Size "+(oe+1)),q("/Root "+oe+" 0 R"),q("/Info "+(oe-1)+" 0 R"),null!==h&&q("/Encrypt "+gn.oid+" 0 R"),q("/ID [ <"+he+"> <"+he+"> ]"),q(">>")},_p=f.__private__.putHeader=function(){q("%PDF-"+y),q("%\xba\xdf\xac\xe0")},xp=f.__private__.putXRef=function(){var v="0000000000";q("xref"),q("0 "+(oe+1)),q("0000000000 65535 f ");for(var A=1;A<=oe;A++)q("function"==typeof de[A]?(v+de[A]()).slice(-10)+" 00000 n ":void 0!==de[A]?(v+de[A]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},pr=f.__private__.buildDocument=function(){oe=0,ge=0,ue=[],de=[],Le=[],gr=Bi(),To=Bi(),Se(ue),Vt.publish("buildDocument"),_p(),_s(),function(){Vt.publish("putAdditionalObjects");for(var v=0;v<Le.length;v++){var A=Le[v];zn(A.objId,!0),q(A.content),q("endobj")}Vt.publish("postPutAdditionalObjects")}(),function(){var v=[];(function(){for(var v in ti)ti.hasOwnProperty(v)&&(!1===g||!0===g&&m.hasOwnProperty(v))&&ya(ti[v])})(),function(){var v;for(v in bi)bi.hasOwnProperty(v)&&Id(bi[v])}(),function(){for(var v in Xi)Xi.hasOwnProperty(v)&&Sa(Xi[v])}(),function(v){var A;for(A in zt)zt.hasOwnProperty(A)&&(zt[A]instanceof ms?hp(zt[A]):zt[A]instanceof da&&gp(zt[A],v))}(v),Vt.publish("putResources"),v.forEach(Ei),Ei({resourcesOid:To,objectOid:Number.MAX_SAFE_INTEGER}),Vt.publish("postPutResources")}(),null!==h&&(gn.oid=qi(),q("<<"),q("/Filter /Standard"),q("/V "+gn.v),q("/R "+gn.r),q("/U <"+gn.toHexString(gn.U)+">"),q("/O <"+gn.toHexString(gn.O)+">"),q("/P "+gn.P),q(">>"),q("endobj")),bp(),Nl();var v=ge;return xp(),Sp(),q("startxref"),q(""+v),q("%%EOF"),Se(Pe[B]),ue.join("\n")},Ta=f.__private__.getBlob=function(v){return new Blob([tt(v)],{type:"application/pdf"})},Da=f.output=f.__private__.output=((v=function(v,A){switch("string"==typeof(A=A||{})?A={filename:A}:A.filename=A.filename||"generated.pdf",v){case void 0:return pr();case"save":f.save(A.filename);break;case"arraybuffer":return tt(pr());case"blob":return Ta(pr());case"bloburi":case"bloburl":if(void 0!==ht.URL&&"function"==typeof ht.URL.createObjectURL)return ht.URL&&ht.URL.createObjectURL(Ta(pr()))||void 0;ei.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",U=pr();try{Z=Wg(U)}catch{Z=Wg(unescape(encodeURIComponent(U)))}return"data:application/pdf;filename="+A.filename+";base64,"+Z;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ht)){var re="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';A.pdfObjectUrl&&(re=A.pdfObjectUrl,ye="");var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+re+'"'+ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(A)+");<\/script></body></html>",Je=ht.open();return null!==Je&&Je.document.write(Re),Je}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ht)){var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(A.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+A.filename+'" width="500px" height="400px" /></body></html>',_t=ht.open();if(null!==_t){_t.document.write(at);var bt=this;_t.document.documentElement.querySelector("#pdfViewer").onload=function(){_t.document.title=A.filename,_t.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(bt.output("bloburl"))}}return _t}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ht))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var It='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",A)+'"></iframe></body></html>',Ci=ht.open();if(null!==Ci&&(Ci.document.write(It),Ci.document.title=A.filename),Ci||typeof safari>"u")return Ci;break;case"datauri":case"dataurl":return ht.document.location.href=this.output("datauristring",A);default:return null}}).foo=function(){try{return v.apply(this,arguments)}catch(U){var A=U.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var Z="Error in function "+A.split("\n")[0].split("<")[0]+": "+U.message;if(!ht.console)throw new Error(Z);ht.console.error(Z,U),ht.alert&&alert(Z)}},v.foo.bar=v,v.foo),zd=function(v){return!0===Array.isArray(Ss)&&Ss.indexOf(v)>-1};switch(o){case"pt":$e=1;break;case"mm":$e=72/25.4;break;case"cm":$e=72/2.54;break;case"in":$e=72;break;case"px":$e=1==zd("px_scaling")?.75:96/72;break;case"pc":case"em":$e=12;break;case"ex":$e=6;break;default:if("number"!=typeof o)throw new Error("Invalid unit: "+o);$e=o}var gn=null;je(),ce();var Vd=f.__private__.getPageInfo=f.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:yt[v].objId,pageNumber:v,pageContext:yt[v]}},vt=f.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var A in yt)if(yt[A].objId===v)break;return Vd(A)},kp=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:yt[B].objId,pageNumber:B,pageContext:yt[B]}};f.addPage=function(){return Gd.apply(this,arguments),this},f.setPage=function(){return Hd.apply(this,arguments),Se.call(this,Pe[B]),this},f.insertPage=function(v){return this.addPage(),this.movePage(B,v),this},f.movePage=function(v,A){var Z,U;if(v>A){Z=Pe[v],U=yt[v];for(var re=v;re>A;re--)Pe[re]=Pe[re-1],yt[re]=yt[re-1];Pe[A]=Z,yt[A]=U,this.setPage(A)}else if(v<A){Z=Pe[v],U=yt[v];for(var ye=v;ye<A;ye++)Pe[ye]=Pe[ye+1],yt[ye]=yt[ye+1];Pe[A]=Z,yt[A]=U,this.setPage(A)}return this},f.deletePage=function(){return wp.apply(this,arguments),this},f.__private__.text=f.text=function(v,A,Z,U,re){var ye,Re,Je,at,_t,bt,It,Ci,_i,Zi=(U=U||{}).scope||this;if("number"==typeof v&&"number"==typeof A&&("string"==typeof Z||Array.isArray(Z))){var pn=Z;Z=A,A=v,v=pn}if(arguments[3]instanceof ut?(N("The transform parameter of text() with a Matrix value"),_i=re):(Je=arguments[4],at=arguments[5],"object"===jt(It=arguments[3])&&null!==It||("string"==typeof Je&&(at=Je,Je=null),"string"==typeof It&&(at=It,It=null),"number"==typeof It&&(Je=It,It=null),U={flags:It,angle:Je,align:at})),isNaN(A)||isNaN(Z)||null==v)throw new Error("Invalid arguments passed to jsPDF.text");if(0===v.length)return Zi;var Eo,Ui="",Vn="number"==typeof U.lineHeightFactor?U.lineHeightFactor:As,Xo=Zi.internal.scaleFactor;function Xd(ri){return ri=ri.split("\t").join(Array(U.TabLen||9).join(" ")),In(ri,It)}function Yl(ri){for(var si,Li=ri.concat(),zi=[],wr=Li.length;wr--;)"string"==typeof(si=Li.shift())?zi.push(si):Array.isArray(ri)&&(1===si.length||void 0===si[1]&&void 0===si[2])?zi.push(si[0]):zi.push([si[0],si[1],si[2]]);return zi}function $l(ri,si){var Li;if("string"==typeof ri)Li=si(ri)[0];else if(Array.isArray(ri)){for(var zi,wr,nc=ri.concat(),za=[],ou=nc.length;ou--;)"string"==typeof(zi=nc.shift())?za.push(si(zi)[0]):Array.isArray(zi)&&"string"==typeof zi[0]&&(wr=si(zi[0],zi[1],zi[2]),za.push([wr[0],wr[1],wr[2]]));Li=za}return Li}var La=!1,Jl=!0;if("string"==typeof v)La=!0;else if(Array.isArray(v)){var Kl=v.concat();Re=[];for(var Ia,en=Kl.length;en--;)("string"!=typeof(Ia=Kl.shift())||Array.isArray(Ia)&&"string"!=typeof Ia[0])&&(Jl=!1);La=Jl}if(!1===La)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');"string"==typeof v&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Oa=Be/Zi.internal.scaleFactor,Na=Oa*(Vn-1);switch(U.baseline){case"bottom":Z-=Na;break;case"top":Z+=Oa-Na;break;case"hanging":Z+=Oa-2*Na;break;case"middle":Z+=Oa/2-Na}if((bt=U.maxWidth||0)>0&&("string"==typeof v?v=Zi.splitTextToSize(v,bt):"[object Array]"===Object.prototype.toString.call(v)&&(v=v.reduce(function(ri,si){return ri.concat(Zi.splitTextToSize(si,bt))},[]))),Vt.publish("preProcessText",ye={text:v,x:A,y:Z,options:U,mutex:{pdfEscape:In,activeFontKey:Ft,fonts:ti,activeFontSize:Be}}),v=ye.text,Je=(U=ye.options).angle,_i instanceof ut||!Je||"number"!=typeof Je)Je&&Je instanceof ut&&(_i=Je);else{Je*=Math.PI/180,0===U.rotationDirection&&(Je=-Je),"advanced"===E&&(Je=-Je);var Ba=Math.cos(Je),Ql=Math.sin(Je);_i=new ut(Ba,Ql,-Ql,Ba,0,0)}"advanced"!==E||_i||(_i=Yo),void 0!==(_t=U.charSpace||Ma)&&(Ui+=V(I(_t))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(Ci=U.horizontalScale)&&(Ui+=V(100*Ci)+" Tz\n");var On=-1,Op=void 0!==U.renderingMode?U.renderingMode:U.stroke,Xl=Zi.internal.getCurrentPageInfo().pageContext;switch(Op){case 0:case!1:case"fill":On=0;break;case 1:case!0:case"stroke":On=1;break;case 2:case"fillThenStroke":On=2;break;case 3:case"invisible":On=3;break;case 4:case"fillAndAddForClipping":On=4;break;case 5:case"strokeAndAddPathForClipping":On=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":On=6;break;case 7:case"addToPathForClipping":On=7}-1!==On?Ui+=On+" Tr\n":-1!==(void 0!==Xl.usedRenderingMode?Xl.usedRenderingMode:-1)&&(Ui+="0 Tr\n"),-1!==On&&(Xl.usedRenderingMode=On),at=U.align||"left";var oo,Za=Be*Vn,tu=Zi.internal.pageSize.getWidth(),iu=ti[Ft];_t=U.charSpace||Ma,bt=U.maxWidth||0,It=Object.assign({autoencode:!0,noBOM:!0},U.flags);var zr=[],Ds=function(ri){return Zi.getStringUnitWidth(ri,{font:iu,charSpace:_t,fontSize:Be,doKerning:!1})*Be/Xo};if("[object Array]"===Object.prototype.toString.call(v)){var Nn;Re=Yl(v),"left"!==at&&(oo=Re.map(Ds));var Sn,Vr=0;if("right"===at){A-=oo[0],v=[],en=Re.length;for(var mr=0;mr<en;mr++)0===mr?(Sn=Qo(A),Nn=fr(Z)):(Sn=I(Vr-oo[mr]),Nn=-Za),v.push([Re[mr],Sn,Nn]),Vr=oo[mr]}else if("center"===at){A-=oo[0]/2,v=[],en=Re.length;for(var vr=0;vr<en;vr++)0===vr?(Sn=Qo(A),Nn=fr(Z)):(Sn=I((Vr-oo[vr])/2),Nn=-Za),v.push([Re[vr],Sn,Nn]),Vr=oo[vr]}else if("left"===at){v=[],en=Re.length;for(var Ga=0;Ga<en;Ga++)v.push(Re[Ga])}else if("justify"===at&&"Identity-H"===iu.encoding){v=[],en=Re.length,bt=0!==bt?bt:tu;for(var Cr=0,Pi=0;Pi<en;Pi++)if(Nn=0===Pi?fr(Z):-Za,Sn=0===Pi?Qo(A):Cr,Pi<en-1){var ec=I((bt-oo[Pi])/(Re[Pi].split(" ").length-1)),_n=Re[Pi].split(" ");v.push([_n[0]+" ",Sn,Nn]),Cr=0;for(var ro=1;ro<_n.length;ro++){var Ha=(Ds(_n[ro-1]+" "+_n[ro])-Ds(_n[ro]))*Xo+ec;v.push(ro==_n.length-1?[_n[ro],Ha,0]:[_n[ro]+" ",Ha,0]),Cr-=Ha}}else v.push([Re[Pi],Sn,Nn]);v.push(["",Cr,0])}else{if("justify"!==at)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],en=Re.length,bt=0!==bt?bt:tu,Pi=0;Pi<en;Pi++)Nn=0===Pi?fr(Z):-Za,Sn=0===Pi?Qo(A):0,zr.push(Pi<en-1?V(I((bt-oo[Pi])/(Re[Pi].split(" ").length-1))):0),v.push([Re[Pi],Sn,Nn])}}!0===("boolean"==typeof U.R2L?U.R2L:st)&&(v=$l(v,function(ri,si,Li){return[ri.split("").reverse().join(""),si,Li]})),Vt.publish("postProcessText",ye={text:v,x:A,y:Z,options:U,mutex:{pdfEscape:In,activeFontKey:Ft,fonts:ti,activeFontSize:Be}}),v=ye.text,Eo=ye.mutex.isHex||!1;var tc=ti[Ft].encoding;"WinAnsiEncoding"!==tc&&"StandardEncoding"!==tc||(v=$l(v,function(ri,si,Li){return[Xd(ri),si,Li]})),Re=Yl(v),v=[];for(var Fs,Rs,Ur,Es=Array.isArray(Re[0])?1:0,Wr="",ic=function(ri,si,Li){var zi="";return Li instanceof ut?(Li="number"==typeof U.angle?ko(Li,new ut(1,0,0,1,ri,si)):ko(new ut(1,0,0,1,ri,si),Li),"advanced"===E&&(Li=ko(new ut(1,0,0,-1,0,0),Li)),zi=Li.join(" ")+" Tm\n"):zi=V(ri)+" "+V(si)+" Td\n",zi},so=0;so<Re.length;so++){switch(Wr="",Es){case 1:Ur=(Eo?"<":"(")+Re[so][0]+(Eo?">":")"),Fs=parseFloat(Re[so][1]),Rs=parseFloat(Re[so][2]);break;case 0:Ur=(Eo?"<":"(")+Re[so]+(Eo?">":")"),Fs=Qo(A),Rs=fr(Z)}void 0!==zr&&void 0!==zr[so]&&(Wr=zr[so]+" Tw\n"),0===so?v.push(Wr+ic(Fs,Rs,_i)+Ur):0===Es?v.push(Wr+Ur):1===Es&&v.push(Wr+ic(Fs,Rs,_i)+Ur)}v=v.join(0===Es?" Tj\nT* ":" Tj\n"),v+=" Tj\n";var ao="BT\n/";return ao+=Ft+" "+Be+" Tf\n",ao+=V(Be*Vn)+" TL\n",ao+=ks+"\n",ao+=Ui,ao+=v,q(ao+="ET"),m[Ft]=!0,Zi};var Tp=f.__private__.clip=f.clip=function(v){return q("evenodd"===v?"W*":"W"),this};f.clipEvenOdd=function(){return Tp("evenodd")},f.__private__.discardPath=f.discardPath=function(){return q("n"),this};var Ko=f.__private__.isValidStyle=function(v){var A=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)&&(A=!0),A};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(v){return Ko(v)&&(d=v),this};var Ud=f.__private__.getStyle=f.getStyle=function(v){var A=d;switch(v){case"D":case"S":A="S";break;case"F":A="f";break;case"FD":case"DF":A="B";break;case"f":case"f*":case"B":case"B*":A=v}return A},Wd=f.close=function(){return q("h"),this};f.stroke=function(){return q("S"),this},f.fill=function(v){return Fa("f",v),this},f.fillEvenOdd=function(v){return Fa("f*",v),this},f.fillStroke=function(v){return Fa("B",v),this},f.fillStrokeEvenOdd=function(v){return Fa("B*",v),this};var Fa=function(v,A){"object"===jt(A)?Fp(A,v):q(v)},Bl=function(v){null===v||"advanced"===E&&void 0===v||(v=Ud(v),q(v))};function Dp(v,A,Z,U,re){var ye=new da(A||this.boundingBox,Z||this.xStep,U||this.yStep,this.gState,re||this.matrix);ye.stream=this.stream;var Re=v+"$$"+this.cloneIndex+++"$$";return Ln(Re,ye),ye}var Fp=function(v,A){var Z=bs[v.key],U=zt[Z];if(U instanceof ms)q("q"),q(Rp(A)),U.gState&&f.setGState(U.gState),q(v.matrix.toString()+" cm"),q("/"+Z+" sh"),q("Q");else if(U instanceof da){var re=new ut(1,0,0,-1,0,qr());v.matrix&&(re=re.multiply(v.matrix||Yo),Z=Dp.call(U,v.key,v.boundingBox,v.xStep,v.yStep,re).id),q("q"),q("/Pattern cs"),q("/"+Z+" scn"),U.gState&&f.setGState(U.gState),q(A),q("Q")}},Rp=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Zl=f.moveTo=function(v,A){return q(V(I(v))+" "+V(z(A))+" m"),this},xs=f.lineTo=function(v,A){return q(V(I(v))+" "+V(z(A))+" l"),this},Gr=f.curveTo=function(v,A,Z,U,re,ye){return q([V(I(v)),V(z(A)),V(I(Z)),V(z(U)),V(I(re)),V(z(ye)),"c"].join(" ")),this};f.__private__.line=f.line=function(v,A,Z,U,re){if(isNaN(v)||isNaN(A)||isNaN(Z)||isNaN(U)||!Ko(re))throw new Error("Invalid arguments passed to jsPDF.line");return"compat"===E?this.lines([[Z-v,U-A]],v,A,[1,1],re||"S"):this.lines([[Z-v,U-A]],v,A,[1,1]).stroke()},f.__private__.lines=f.lines=function(v,A,Z,U,re,ye){var Re,Je,at,_t,bt,pn,Ui,Eo;if("number"==typeof v&&(Eo=Z,Z=A,A=v,v=Eo),U=U||[1,1],ye=ye||!1,isNaN(A)||isNaN(Z)||!Array.isArray(v)||!Array.isArray(U)||!Ko(re)||"boolean"!=typeof ye)throw new Error("Invalid arguments passed to jsPDF.lines");for(Zl(A,Z),Re=U[0],Je=U[1],_t=v.length,pn=A,Ui=Z,at=0;at<_t;at++)2===(bt=v[at]).length?xs(pn=bt[0]*Re+pn,Ui=bt[1]*Je+Ui):Gr(bt[0]*Re+pn,bt[1]*Je+Ui,bt[2]*Re+pn,bt[3]*Je+Ui,pn=bt[4]*Re+pn,Ui=bt[5]*Je+Ui);return ye&&Wd(),Bl(re),this},f.path=function(v){for(var A=0;A<v.length;A++){var Z=v[A],U=Z.c;switch(Z.op){case"m":Zl(U[0],U[1]);break;case"l":xs(U[0],U[1]);break;case"c":Gr.apply(this,U);break;case"h":Wd()}}return this},f.__private__.rect=f.rect=function(v,A,Z,U,re){if(isNaN(v)||isNaN(A)||isNaN(Z)||isNaN(U)||!Ko(re))throw new Error("Invalid arguments passed to jsPDF.rect");return"compat"===E&&(U=-U),q([V(I(v)),V(z(A)),V(I(Z)),V(I(U)),"re"].join(" ")),Bl(re),this},f.__private__.triangle=f.triangle=function(v,A,Z,U,re,ye,Re){if(isNaN(v)||isNaN(A)||isNaN(Z)||isNaN(U)||isNaN(re)||isNaN(ye)||!Ko(Re))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-v,U-A],[re-Z,ye-U],[v-re,A-ye]],v,A,[1,1],Re,!0),this},f.__private__.roundedRect=f.roundedRect=function(v,A,Z,U,re,ye,Re){if(isNaN(v)||isNaN(A)||isNaN(Z)||isNaN(U)||isNaN(re)||isNaN(ye)||!Ko(Re))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Je=4/3*(Math.SQRT2-1);return re=Math.min(re,.5*Z),ye=Math.min(ye,.5*U),this.lines([[Z-2*re,0],[re*Je,0,re,ye-ye*Je,re,ye],[0,U-2*ye],[0,ye*Je,-re*Je,ye,-re,ye],[2*re-Z,0],[-re*Je,0,-re,-ye*Je,-re,-ye],[0,2*ye-U],[0,-ye*Je,re*Je,-ye,re,-ye]],v+re,A,[1,1],Re,!0),this},f.__private__.ellipse=f.ellipse=function(v,A,Z,U,re){if(isNaN(v)||isNaN(A)||isNaN(Z)||isNaN(U)||!Ko(re))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ye=4/3*(Math.SQRT2-1)*Z,Re=4/3*(Math.SQRT2-1)*U;return Zl(v+Z,A),Gr(v+Z,A-Re,v+ye,A-U,v,A-U),Gr(v-ye,A-U,v-Z,A-Re,v-Z,A),Gr(v-Z,A+Re,v-ye,A+U,v,A+U),Gr(v+ye,A+U,v+Z,A+Re,v+Z,A),Bl(re),this},f.__private__.circle=f.circle=function(v,A,Z,U){if(isNaN(v)||isNaN(A)||isNaN(Z)||!Ko(U))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,A,Z,Z,U)},f.setFont=function(v,A,Z){return Z&&(A=ne(A,Z)),Ft=qd(v,A,{disableWarning:!1}),this};var Mp=f.__private__.getFont=f.getFont=function(){return ti[qd.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var v,A,Z={};for(v in fi)if(fi.hasOwnProperty(v))for(A in Z[v]=[],fi[v])fi[v].hasOwnProperty(A)&&Z[v].push(A);return Z},f.addFont=function(v,A,Z,U,re){var ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==ye.indexOf(arguments[3])?re=arguments[3]:arguments[3]&&-1==ye.indexOf(arguments[3])&&(Z=ne(Z,U)),Il.call(this,v,A,Z,re=re||"Identity-H")};var As,Gl=e.lineWidth||.200025,Ra=f.__private__.getLineWidth=f.getLineWidth=function(){return Gl},jd=f.__private__.setLineWidth=f.setLineWidth=function(v){return Gl=v,q(V(I(v))+" w"),this};f.__private__.setLineDash=dt.API.setLineDash=dt.API.setLineDashPattern=function(v,A){if(v=v||[],A=A||0,isNaN(A)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Z){return V(I(Z))}).join(" "),A=V(I(A)),q("["+v+"] "+A+" d"),this};var Yd=f.__private__.getLineHeight=f.getLineHeight=function(){return Be*As};f.__private__.getLineHeight=f.getLineHeight=function(){return Be*As};var $d=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(v){return"number"==typeof(v=v||1.15)&&(As=v),this},Jd=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return As};$d(e.lineHeight);var Qo=f.__private__.getHorizontalCoordinate=function(v){return I(v)},fr=f.__private__.getVerticalCoordinate=function(v){return"advanced"===E?v:yt[B].mediaBox.topRightY-yt[B].mediaBox.bottomLeftY-I(v)},Ep=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(v){return V(Qo(v))},Hr=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(v){return V(fr(v))},Mo=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Do(Mo)},f.__private__.setStrokeColor=f.setDrawColor=function(v,A,Z,U){return Mo=Fo({ch1:v,ch2:A,ch3:Z,ch4:U,pdfColorType:"draw",precision:2}),q(Mo),this};var Hl=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Do(Hl)},f.__private__.setFillColor=f.setFillColor=function(v,A,Z,U){return Hl=Fo({ch1:v,ch2:A,ch3:Z,ch4:U,pdfColorType:"fill",precision:2}),q(Hl),this};var ks=e.textColor||"0 g",Pp=f.__private__.getTextColor=f.getTextColor=function(){return Do(ks)};f.__private__.setTextColor=f.setTextColor=function(v,A,Z,U){return ks=Fo({ch1:v,ch2:A,ch3:Z,ch4:U,pdfColorType:"text",precision:3}),this};var Ma=e.charSpace,Lp=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Ma||0)};f.__private__.setCharSpace=f.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ma=v,this};var ql=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(v){var A=f.CapJoinStyles[v];if(void 0===A)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ql=A,q(A+" J"),this};var zl=0;f.__private__.setLineJoin=f.setLineJoin=function(v){var A=f.CapJoinStyles[v];if(void 0===A)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zl=A,q(A+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return q(V(I(v))+" M"),this},f.GState=bd,f.setGState=function(v){(v="string"==typeof v?bi[Ao[v]]:Kd(null,v)).equals(hr)||(q("/"+v.id+" gs"),hr=v)};var Kd=function(v,A){if(!v||!Ao[v]){var Z=!1;for(var U in bi)if(bi.hasOwnProperty(U)&&bi[U].equals(A)){Z=!0;break}if(Z)A=bi[U];else{var re="GS"+(Object.keys(bi).length+1).toString(10);bi[re]=A,A.id=re}return v&&(Ao[v]=A.id),Vt.publish("addGState",A),A}};f.addGState=function(v,A){return Kd(v,A),this},f.saveGraphicsState=function(){return q("q"),Uo.push({key:Ft,size:Be,color:ks}),this},f.restoreGraphicsState=function(){q("Q");var v=Uo.pop();return Ft=v.key,Be=v.size,ks=v.color,hr=null,this},f.setCurrentTransformationMatrix=function(v){return q(v.toString()+" cm"),this},f.comment=function(v){return q("#"+v),this};var Ea=function(v,A){var Z=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(ye){isNaN(ye)||(Z=parseFloat(ye))}});var U=A||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return U},set:function(ye){isNaN(ye)||(U=parseFloat(ye))}});var re="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return re},set:function(ye){re=ye.toString()}}),this},Vl=function(v,A,Z,U){Ea.call(this,v,A),this.type="rect";var re=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return re},set:function(Re){isNaN(Re)||(re=parseFloat(Re))}});var ye=U||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ye},set:function(Re){isNaN(Re)||(ye=parseFloat(Re))}}),this},Ul=function(){this.page=Si,this.currentPage=B,this.pages=Pe.slice(0),this.pagesContext=yt.slice(0),this.x=hn,this.y=Zt,this.matrix=xo,this.width=Ts(B),this.height=qr(B),this.outputDestination=qe,this.id="",this.objectNumber=-1};Ul.prototype.restore=function(){Si=this.page,yt=this.pagesContext,Pe=this.pages,hn=this.x,Zt=this.y,xo=this.matrix,Wl(B=this.currentPage,this.width),jl(B,this.height),qe=this.outputDestination};var Qd=function(v,A,Z,U,re){jo.push(new Ul),Si=B=0,Pe=[],hn=v,Zt=A,xo=re,Ol([Z,U])};for(var Pa in f.beginFormObject=function(v,A,Z,U,re){return Qd(v,A,Z,U,re),this},f.endFormObject=function(v){return function(v){if(Wo[v])jo.pop().restore();else{var A=new Ul,Z="Xo"+(Object.keys(Xi).length+1).toString(10);A.id=Z,Wo[v]=Z,Xi[Z]=A,Vt.publish("addFormObject",A),jo.pop().restore()}}(v),this},f.doFormObject=function(v,A){var Z=Xi[Wo[v]];return q("q"),q(A.toString()+" cm"),q("/"+Z.id+" Do"),q("Q"),this},f.getFormObject=function(v){var A=Xi[Wo[v]];return{x:A.x,y:A.y,width:A.width,height:A.height,matrix:A.matrix}},f.save=function(v,A){return v=v||"generated.pdf",(A=A||{}).returnPromise=A.returnPromise||!1,!1===A.returnPromise?(fs(Ta(pr()),v),"function"==typeof fs.unload&&ht.setTimeout&&setTimeout(fs.unload,911),this):new Promise(function(Z,U){try{var re=fs(Ta(pr()),v);"function"==typeof fs.unload&&ht.setTimeout&&setTimeout(fs.unload,911),Z(re)}catch(ye){U(ye.message)}})},dt.API)dt.API.hasOwnProperty(Pa)&&("events"===Pa&&dt.API.events.length?function(v,A){var U,re;for(re=A.length-1;-1!==re;re--)v.subscribe.apply(v,[A[re][0]].concat("function"==typeof(U=A[re][1])?[U]:U))}(Vt,dt.API.events):f[Pa]=dt.API[Pa]);var Ts=f.getPageWidth=function(v){return(yt[v=v||B].mediaBox.topRightX-yt[v].mediaBox.bottomLeftX)/$e},Wl=f.setPageWidth=function(v,A){yt[v].mediaBox.topRightX=A*$e+yt[v].mediaBox.bottomLeftX},qr=f.getPageHeight=function(v){return(yt[v=v||B].mediaBox.topRightY-yt[v].mediaBox.bottomLeftY)/$e},jl=f.setPageHeight=function(v,A){yt[v].mediaBox.topRightY=A*$e+yt[v].mediaBox.bottomLeftY};return f.internal={pdfEscape:In,getStyle:Ud,getFont:Mp,getFontSize:Ve,getCharSpace:Lp,getTextColor:Pp,getLineHeight:Yd,getLineHeightFactor:Jd,getLineWidth:Ra,write:St,getHorizontalCoordinate:Qo,getVerticalCoordinate:fr,getCoordinateString:Ep,getVerticalCoordinateString:Hr,collections:{},newObject:qi,newAdditionalObject:wa,newObjectDeferred:Bi,newObjectDeferredBegin:zn,getFilters:$o,putStream:no,events:Vt,scaleFactor:$e,pageSize:{getWidth:function(){return Ts(B)},setWidth:function(v){Wl(B,v)},getHeight:function(){return qr(B)},setHeight:function(v){jl(B,v)}},encryptionOptions:h,encryption:gn,getEncryptor:function(v){return null!==h?gn.encryptor(v,0):function(A){return A}},output:Da,getNumberOfPages:yp,pages:Pe,out:q,f2:ve,f3:L,getPageInfo:Vd,getPageInfoByObjId:vt,getCurrentPageInfo:kp,getPDFVersion:b,Point:Ea,Rectangle:Vl,Matrix:ut,hasHotfix:zd},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Ts(B)},set:function(v){Wl(B,v)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return qr(B)},set:function(v){jl(B,v)},enumerable:!0,configurable:!0}),function(v){for(var A=0,Z=Me.length;A<Z;A++){var U=Il.call(this,v[A][0],v[A][1],v[A][2],Me[A][3],!0);!1===g&&(m[U]=!0);var re=v[A][0].split("-");Zd({id:U,fontName:re[0],fontStyle:re[1]||""})}Vt.publish("addFonts",{fonts:ti,dictionary:fi})}.call(f,Me),Ft="F1",Gd(r,t),Vt.publish("initialized"),f}la.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},la.prototype.toHexString=function(e){return e.split("").map(function(i){return("0"+(255&i.charCodeAt(0)).toString(16)).slice(-2)}).join("")},la.prototype.hexToBytes=function(e){for(var i=[],t=0;t<e.length;t+=2)i.push(String.fromCharCode(parseInt(e.substr(t,2),16)));return i.join("")},la.prototype.processOwnerPassword=function(e,i){return $g(Yg(i).substr(0,5),e)},la.prototype.encryptor=function(e,i){var t=Yg(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&i,i>>8&255)).substr(0,10);return function(o){return $g(t,o)}},bd.prototype.equals=function(e){var i,t="id,objectNumber,equals";if(!e||jt(e)!==jt(this))return!1;var o=0;for(i in this)if(!(t.indexOf(i)>=0)){if(this.hasOwnProperty(i)&&!e.hasOwnProperty(i)||this[i]!==e[i])return!1;o++}for(i in e)e.hasOwnProperty(i)&&t.indexOf(i)<0&&o--;return 0===o},dt.API={events:[]},dt.version="2.5.2";var yi=dt.API,Jg=1,vs=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ua=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ct=function(e){return e.toFixed(2)},Or=function(e){return e.toFixed(5)};yi.__acroform__={};var En=function(e,i){e.prototype=Object.create(i.prototype),e.prototype.constructor=e},Y1=function(e){return e*Jg},qo=function(e){var i=new J1,t=Qe.internal.getHeight(e)||0,o=Qe.internal.getWidth(e)||0;return i.BBox=[0,0,Number(Ct(o)),Number(Ct(t))],i},YD=yi.__acroform__.setBit=function(e,i){if(e=e||0,i=i||0,isNaN(e)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<i},$D=yi.__acroform__.clearBit=function(e,i){if(e=e||0,i=i||0,isNaN(e)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<i)},JD=yi.__acroform__.getBit=function(e,i){if(isNaN(e)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<i?1:0},Di=yi.__acroform__.getBitForPdf=function(e,i){if(isNaN(e)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return JD(e,i-1)},Fi=yi.__acroform__.setBitForPdf=function(e,i){if(isNaN(e)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return YD(e,i-1)},Ri=yi.__acroform__.clearBitForPdf=function(e,i){if(isNaN(e)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return $D(e,i-1)},KD=yi.__acroform__.calculateCoordinates=function(e,i){var t=i.internal.getHorizontalCoordinate,o=i.internal.getVerticalCoordinate,r=e[0],s=e[1],a=e[2],l=e[3],c={};return c.lowerLeft_X=t(r)||0,c.lowerLeft_Y=o(s+l)||0,c.upperRight_X=t(r+a)||0,c.upperRight_Y=o(s)||0,[Number(Ct(c.lowerLeft_X)),Number(Ct(c.lowerLeft_Y)),Number(Ct(c.upperRight_X)),Number(Ct(c.upperRight_Y))]},QD=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var i=[],o=Kg(e,e._V||e.DV),r=e.scope.internal.getFont(e.fontName,e.fontStyle).id;i.push("/Tx BMC"),i.push("q"),i.push("BT"),i.push(e.scope.__private__.encodeColorString(e.color)),i.push("/"+r+" "+Ct(o.fontSize)+" Tf"),i.push("1 0 0 1 0 0 Tm"),i.push(o.text),i.push("ET"),i.push("Q"),i.push("EMC");var s=qo(e);return s.scope=e.scope,s.stream=i.join("\n"),s}},Kg=function(e,i){var t=0===e.fontSize?e.maxFontSize:e.fontSize,o={text:"",fontSize:""},r=(i=")"==(i="("==i.substr(0,1)?i.substr(1):i).substr(i.length-1)?i.substr(0,i.length-1):i).split(" ");r=r.map(e.multiline?function(L){return L.split("\n")}:function(L){return[L]});var s=t,a=Qe.internal.getHeight(e)||0;a=a<0?-a:a;var L,l=Qe.internal.getWidth(e)||0;l=l<0?-l:l,s++;e:for(;s>0;){i="",s--;var d,h,g=Sd("3",e,s).height,m=e.multiline?a-s:(a-g)/2,f=m+=2,y=0,b=0,S=0;if(s<=0){i="(...) Tj\n",i+="% Width of Text: "+Sd(i,e,s=12).width+", FieldWidth:"+l+"\n";break}for(var _="",k=0,E=0;E<r.length;E++)if(r.hasOwnProperty(E)){var G=!1;if(1!==r[E].length&&S!==r[E].length-1){if((g+2)*(k+2)+2>a)continue e;_+=r[E][S],G=!0,b=E,E--}else{_=" "==(_+=r[E][S]+" ").substr(_.length-1)?_.substr(0,_.length-1):_;var K=parseInt(E),ne=(L=K)+1<r.length&&Sd(_+" "+r[L+1][0],e,s).width<=l-4,V=E>=r.length-1;if(ne&&!V){_+=" ",S=0;continue}if(ne||V){if(V)b=K;else if(e.multiline&&(g+2)*(k+2)+2>a)continue e}else{if(!e.multiline||(g+2)*(k+2)+2>a)continue e;b=K}}for(var N="",X=y;X<=b;X++){var ve=r[X];if(e.multiline){if(X===b){N+=ve[S]+" ",S=(S+1)%ve.length;continue}if(X===y){N+=ve[ve.length-1]+" ";continue}}N+=ve[0]+" "}switch(N=" "==N.substr(N.length-1)?N.substr(0,N.length-1):N,h=Sd(N,e,s).width,e.textAlign){case"right":d=l-h-2;break;case"center":d=(l-h)/2;break;default:d=2}i+=Ct(d)+" "+Ct(f)+" Td\n",i+="("+vs(N)+") Tj\n",i+=-Ct(d)+" 0 Td\n",f=-(s+2),h=0,y=G?b:b+1,k++,_=""}break}return o.text=i,o.fontSize=s,o},Sd=function(e,i,t){var o=i.scope.internal.getFont(i.fontName,i.fontStyle),r=i.scope.getStringUnitWidth(e,{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:i.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},XD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},eF=function(e,i){var t={type:"reference",object:e};void 0===i.internal.getPageInfo(e.page).pageContext.annotations.find(function(o){return o.type===t.type&&o.object===t.object})&&i.internal.getPageInfo(e.page).pageContext.annotations.push(t)},$1=yi.__acroform__.arrayToPdfArray=function(e,i,t){var o=function(a){return a};if(Array.isArray(e)){for(var r="[",s=0;s<e.length;s++)switch(0!==s&&(r+=" "),jt(e[s])){case"boolean":case"number":case"object":r+=e[s].toString();break;case"string":"/"!==e[s].substr(0,1)?(void 0!==i&&t&&(o=t.internal.getEncryptor(i)),r+="("+vs(o(e[s].toString()))+")"):r+=e[s].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Qg=function(e,i,t){var o=function(r){return r};return void 0!==i&&t&&(o=t.internal.getEncryptor(i)),(e=e||"").toString(),"("+vs(o(e))+")"},zo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};zo.prototype.toString=function(){return this.objId+" 0 R"},zo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},zo.prototype.getKeyValueListForStream=function(){var e=[],i=Object.getOwnPropertyNames(this).filter(function(s){return"content"!=s&&"appearanceStreamContent"!=s&&"scope"!=s&&"objId"!=s&&"_"!=s.substring(0,1)});for(var t in i)if(!1===Object.getOwnPropertyDescriptor(this,i[t]).configurable){var o=i[t],r=this[o];r&&(Array.isArray(r)?e.push({key:o,value:$1(r,this.objId,this.scope)}):r instanceof zo?(r.scope=this.scope,e.push({key:o,value:r.objId+" 0 R"})):"function"!=typeof r&&e.push({key:o,value:r}))}return e};var J1=function(){zo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,i=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};En(J1,zo);var K1=function(){zo.call(this);var e,i=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return i.length>0?i:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return i}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(o){return o};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+vs(t(e))+")"}},set:function(t){e=t}})};En(K1,zo);var bo=function e(){zo.call(this);var i=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return i},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');i=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Di(i,3)},set:function(_){this.F=_?Fi(i,3):Ri(i,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');t=_}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==o.length)return o},set:function(_){o=void 0!==_?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(_){o[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(_){o[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(_){o[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(_){o[3]=_}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Ad)return;s="FieldObject"+e.FieldNum++}var _=function(k){return k};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+vs(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===d?50/Jg:d},set:function(_){d=_}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(_){h=_}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Ad||this instanceof Cs))return Qg(g,this.objId,this.scope)},set:function(_){_=_.toString(),g=_}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Vi?m:Qg(m,this.objId,this.scope)},set:function(_){_=_.toString(),m=this instanceof Vi?_:"("===_.substr(0,1)?ua(_.substr(1,_.length-2)):ua(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi?ua(m.substr(1,m.length-1)):m},set:function(_){_=_.toString(),m=this instanceof Vi?"/"+_:_}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Vi?f:Qg(f,this.objId,this.scope)},set:function(_){_=_.toString(),f=this instanceof Vi?_:"("===_.substr(0,1)?ua(_.substr(1,_.length-2)):ua(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi?ua(f.substr(1,f.length-1)):f},set:function(_){_=_.toString(),f=this instanceof Vi?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(_){b=_=!!_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(_){y=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,1)},set:function(_){this.Ff=_?Fi(this.Ff,1):Ri(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,2)},set:function(_){this.Ff=_?Fi(this.Ff,2):Ri(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,3)},set:function(_){this.Ff=_?Fi(this.Ff,3):Ri(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==S)return S},set:function(_){if(-1===[0,1,2].indexOf(_))throw new Error('Invalid value "'+_+'" for attribute Q supplied.');S=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(S){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};En(bo,zo);var ha=function(){bo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var i=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $1(i,this.objId,this.scope)},set:function(t){var o,r;r=[],"string"==typeof(o=t)&&(r=function(s,a,l){l||(l=1);for(var c,d=[];c=a.exec(s);)d.push(c[l]);return d}(o,/\((.*?)\)/g)),i=r}}),this.getOptions=function(){return i},this.setOptions=function(t){i=t,this.sort&&i.sort()},this.addOption=function(t){t=(t=t||"").toString(),i.push(t),this.sort&&i.sort()},this.removeOption=function(t,o){for(o=o||!1,t=(t=t||"").toString();-1!==i.indexOf(t)&&(i.splice(i.indexOf(t),1),!1!==o););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,18)},set:function(t){this.Ff=t?Fi(this.Ff,18):Ri(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,19)},set:function(t){!0===this.combo&&(this.Ff=t?Fi(this.Ff,19):Ri(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,20)},set:function(t){t?(this.Ff=Fi(this.Ff,20),i.sort()):this.Ff=Ri(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,22)},set:function(t){this.Ff=t?Fi(this.Ff,22):Ri(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,23)},set:function(t){this.Ff=t?Fi(this.Ff,23):Ri(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,27)},set:function(t){this.Ff=t?Fi(this.Ff,27):Ri(this.Ff,27)}}),this.hasAppearanceStream=!1};En(ha,bo);var ga=function(){ha.call(this),this.fontName="helvetica",this.combo=!1};En(ga,ha);var pa=function(){ga.call(this),this.combo=!0};En(pa,ga);var _d=function(){pa.call(this),this.edit=!0};En(_d,pa);var Vi=function(){bo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,15)},set:function(t){this.Ff=t?Fi(this.Ff,15):Ri(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,16)},set:function(t){this.Ff=t?Fi(this.Ff,16):Ri(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,17)},set:function(t){this.Ff=t?Fi(this.Ff,17):Ri(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,26)},set:function(t){this.Ff=t?Fi(this.Ff,26):Ri(this.Ff,26)}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(i).length){var o,r=[];for(o in r.push("<<"),i)r.push("/"+o+" ("+vs(t(i[o]))+")");return r.push(">>"),r.join("\n")}},set:function(t){"object"===jt(t)&&(i=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(t){"string"==typeof t&&(i.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};En(Vi,bo);var xd=function(){Vi.call(this),this.pushButton=!0};En(xd,Vi);var fa=function(){Vi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(i){e=void 0!==i?i:[]}})};En(fa,Vi);var Ad=function(){var e,i;bo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return i},set:function(r){i=r}});var t,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),o)a.push("/"+s+" ("+vs(r(o[s]))+")");return a.push(">>"),a.join("\n")},set:function(r){"object"===jt(r)&&(o=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(r){"string"==typeof r&&(o.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};En(Ad,bo),fa.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var i in this.Kids)if(this.Kids.hasOwnProperty(i)){var t=this.Kids[i];t.appearanceStreamContent=e.createAppearanceStream(t.optionName),t.caption=e.getCA()}},fa.prototype.createOption=function(e){var i=new Ad;return i.Parent=this,i.optionName=e,this.Kids.push(i),nF.call(this.scope,i),i};var kd=function(){Vi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qe.CheckBox.createAppearanceStream()};En(kd,Vi);var Cs=function(){bo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,13)},set:function(i){this.Ff=i?Fi(this.Ff,13):Ri(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,21)},set:function(i){this.Ff=i?Fi(this.Ff,21):Ri(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,23)},set:function(i){this.Ff=i?Fi(this.Ff,23):Ri(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,24)},set:function(i){this.Ff=i?Fi(this.Ff,24):Ri(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,25)},set:function(i){this.Ff=i?Fi(this.Ff,25):Ri(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,26)},set:function(i){this.Ff=i?Fi(this.Ff,26):Ri(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(i){Number.isInteger(i)&&(e=i)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};En(Cs,bo);var Td=function(){Cs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Di(this.Ff,14)},set:function(e){this.Ff=e?Fi(this.Ff,14):Ri(this.Ff,14)}}),this.password=!0};En(Td,Cs);var Qe={CheckBox:{createAppearanceStream:function(){return{N:{On:Qe.CheckBox.YesNormal},D:{On:Qe.CheckBox.YesPushDown,Off:Qe.CheckBox.OffPushDown}}},YesPushDown:function(e){var i=qo(e);i.scope=e.scope;var t=[],o=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=Kg(e,e.caption);return t.push("0.749023 g"),t.push("0 0 "+Ct(Qe.internal.getWidth(e))+" "+Ct(Qe.internal.getHeight(e))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+o+" "+Ct(s.fontSize)+" Tf "+r),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),i.stream=t.join("\n"),i},YesNormal:function(e){var i=qo(e);i.scope=e.scope;var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),r=[],s=Qe.internal.getHeight(e),a=Qe.internal.getWidth(e),l=Kg(e,e.caption);return r.push("1 g"),r.push("0 0 "+Ct(a)+" "+Ct(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Ct(a-1)+" "+Ct(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+Ct(l.fontSize)+" Tf "+o),r.push(l.text),r.push("ET"),r.push("Q"),i.stream=r.join("\n"),i},OffPushDown:function(e){var i=qo(e);i.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ct(Qe.internal.getWidth(e))+" "+Ct(Qe.internal.getHeight(e))+" re"),t.push("f"),i.stream=t.join("\n"),i}},RadioButton:{Circle:{createAppearanceStream:function(e){var i={D:{Off:Qe.RadioButton.Circle.OffPushDown},N:{}};return i.N[e]=Qe.RadioButton.Circle.YesNormal,i.D[e]=Qe.RadioButton.Circle.YesPushDown,i},getCA:function(){return"l"},YesNormal:function(e){var i=qo(e);i.scope=e.scope;var t=[],o=Qe.internal.getWidth(e)<=Qe.internal.getHeight(e)?Qe.internal.getWidth(e)/4:Qe.internal.getHeight(e)/4;o=Number((.9*o).toFixed(5));var s=Number((o*Qe.internal.Bezier_C).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Or(Qe.internal.getWidth(e)/2)+" "+Or(Qe.internal.getHeight(e)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),i.stream=t.join("\n"),i},YesPushDown:function(e){var i=qo(e);i.scope=e.scope;var t=[],o=Qe.internal.getWidth(e)<=Qe.internal.getHeight(e)?Qe.internal.getWidth(e)/4:Qe.internal.getHeight(e)/4;o=Number((.9*o).toFixed(5));var r=Number((2*o).toFixed(5)),s=Number((r*Qe.internal.Bezier_C).toFixed(5)),a=Number((o*Qe.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Or(Qe.internal.getWidth(e)/2)+" "+Or(Qe.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Or(Qe.internal.getWidth(e)/2)+" "+Or(Qe.internal.getHeight(e)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),t.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),t.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),t.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),t.push("f"),t.push("Q"),i.stream=t.join("\n"),i},OffPushDown:function(e){var i=qo(e);i.scope=e.scope;var t=[],o=Qe.internal.getWidth(e)<=Qe.internal.getHeight(e)?Qe.internal.getWidth(e)/4:Qe.internal.getHeight(e)/4;o=Number((.9*o).toFixed(5));var r=Number((2*o).toFixed(5)),s=Number((r*Qe.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Or(Qe.internal.getWidth(e)/2)+" "+Or(Qe.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),i.stream=t.join("\n"),i}},Cross:{createAppearanceStream:function(e){var i={D:{Off:Qe.RadioButton.Cross.OffPushDown},N:{}};return i.N[e]=Qe.RadioButton.Cross.YesNormal,i.D[e]=Qe.RadioButton.Cross.YesPushDown,i},getCA:function(){return"8"},YesNormal:function(e){var i=qo(e);i.scope=e.scope;var t=[],o=Qe.internal.calculateCross(e);return t.push("q"),t.push("1 1 "+Ct(Qe.internal.getWidth(e)-2)+" "+Ct(Qe.internal.getHeight(e)-2)+" re"),t.push("W"),t.push("n"),t.push(Ct(o.x1.x)+" "+Ct(o.x1.y)+" m"),t.push(Ct(o.x2.x)+" "+Ct(o.x2.y)+" l"),t.push(Ct(o.x4.x)+" "+Ct(o.x4.y)+" m"),t.push(Ct(o.x3.x)+" "+Ct(o.x3.y)+" l"),t.push("s"),t.push("Q"),i.stream=t.join("\n"),i},YesPushDown:function(e){var i=qo(e);i.scope=e.scope;var t=Qe.internal.calculateCross(e),o=[];return o.push("0.749023 g"),o.push("0 0 "+Ct(Qe.internal.getWidth(e))+" "+Ct(Qe.internal.getHeight(e))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+Ct(Qe.internal.getWidth(e)-2)+" "+Ct(Qe.internal.getHeight(e)-2)+" re"),o.push("W"),o.push("n"),o.push(Ct(t.x1.x)+" "+Ct(t.x1.y)+" m"),o.push(Ct(t.x2.x)+" "+Ct(t.x2.y)+" l"),o.push(Ct(t.x4.x)+" "+Ct(t.x4.y)+" m"),o.push(Ct(t.x3.x)+" "+Ct(t.x3.y)+" l"),o.push("s"),o.push("Q"),i.stream=o.join("\n"),i},OffPushDown:function(e){var i=qo(e);i.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ct(Qe.internal.getWidth(e))+" "+Ct(Qe.internal.getHeight(e))+" re"),t.push("f"),i.stream=t.join("\n"),i}}},createDefaultAppearanceStream:function(e){var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,t=e.scope.__private__.encodeColorString(e.color);return"/"+i+" "+e.fontSize+" Tf "+t}};Qe.internal={Bezier_C:.551915024494,calculateCross:function(e){var i=Qe.internal.getWidth(e),t=Qe.internal.getHeight(e),o=Math.min(i,t);return{x1:{x:(i-o)/2,y:(t-o)/2+o},x2:{x:(i-o)/2+o,y:(t-o)/2},x3:{x:(i-o)/2,y:(t-o)/2},x4:{x:(i-o)/2+o,y:(t-o)/2+o}}}},Qe.internal.getWidth=function(e){var i=0;return"object"===jt(e)&&(i=Y1(e.Rect[2])),i},Qe.internal.getHeight=function(e){var i=0;return"object"===jt(e)&&(i=Y1(e.Rect[3])),i};var e,i,nF=yi.addField=function(e){if(function(e,i){if(i.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(bo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(XD)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Jg=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new K1,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in o)if(o.hasOwnProperty(r)){var s=o[r];s.objId=void 0,s.hasAnnotation&&eF(s,t)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(o,r){var s=!o;for(var a in o||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(a)){var l=o[a],c=[],d=l.Rect;if(l.Rect&&(l.Rect=KD(l.Rect,r)),r.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Qe.createDefaultAppearanceStream(l),"object"===jt(l)&&"function"==typeof l.getKeyValueListForStream&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=QD(l);c.push({key:"AP",value:"<</N "+h+">>"}),r.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var g="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var f=l.appearanceStreamContent[m];if(g+="/"+m+" ",g+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var y=f[a];"function"==typeof y&&(y=y.call(r,l)),g+="/"+a+" "+y+" ",r.internal.acroformPlugin.xForms.indexOf(y)>=0||r.internal.acroformPlugin.xForms.push(y)}}else"function"==typeof(y=f)&&(y=y.call(r,l)),g+="/"+a+" "+y,r.internal.acroformPlugin.xForms.indexOf(y)>=0||r.internal.acroformPlugin.xForms.push(y);g+=">>"}c.push({key:"AP",value:"<<\n"+g+">>"})}r.internal.putStream({additionalKeyValues:c,objectId:l.objId}),r.internal.out("endobj")}s&&function(e,i){for(var t in e)if(e.hasOwnProperty(t)){var o=t,r=e[t];i.internal.newObjectDeferredBegin(r.objId,!0),"object"===jt(r)&&"function"==typeof r.putStream&&r.putStream(),delete e[o]}}(r.internal.acroformPlugin.xForms,r)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}}(this,e),!(e instanceof bo))throw new Error("Invalid argument passed to jsPDF.addField.");var i;return(i=e).scope.internal.acroformPlugin.printedOut&&(i.scope.internal.acroformPlugin.printedOut=!1,i.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),i.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(i),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};function Q1(e){return e.reduce(function(i,t,o){return i[t]=o,i},{})}yi.AcroFormChoiceField=ha,yi.AcroFormListBox=ga,yi.AcroFormComboBox=pa,yi.AcroFormEditBox=_d,yi.AcroFormButton=Vi,yi.AcroFormPushButton=xd,yi.AcroFormRadioButton=fa,yi.AcroFormCheckBox=kd,yi.AcroFormTextField=Cs,yi.AcroFormPasswordField=Td,yi.AcroFormAppearance=Qe,yi.AcroForm={ChoiceField:ha,ListBox:ga,ComboBox:pa,EditBox:_d,Button:Vi,PushButton:xd,RadioButton:fa,CheckBox:kd,TextField:Cs,PasswordField:Td,Appearance:Qe},dt.AcroForm={ChoiceField:ha,ListBox:ga,ComboBox:pa,EditBox:_d,Button:Vi,PushButton:xd,RadioButton:fa,CheckBox:kd,TextField:Cs,PasswordField:Td,Appearance:Qe},function(e){e.__addimage__={};var i="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=e.__addimage__.getImageFileTypeByImageData=function(L,I){var Y,z,me,he,we,ce=i;if("RGBA"===(I=I||i)||void 0!==L.data&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(ne(L))for(we in t)for(me=t[we],Y=0;Y<me.length;Y+=1){for(he=!0,z=0;z<me[Y].length;z+=1)if(void 0!==me[Y][z]&&me[Y][z]!==L[z]){he=!1;break}if(!0===he){ce=we;break}}else for(we in t)for(me=t[we],Y=0;Y<me.length;Y+=1){for(he=!0,z=0;z<me[Y].length;z+=1)if(void 0!==me[Y][z]&&me[Y][z]!==L.charCodeAt(z)){he=!1;break}if(!0===he){ce=we;break}}return ce===i&&I!==i&&(ce=I),ce},r=function L(I){for(var Y=this.internal.write,z=this.internal.putStream,me=(0,this.internal.getFilters)();-1!==me.indexOf("FlateEncode");)me.splice(me.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:I.width}),he.push({key:"Height",value:I.height}),I.colorSpace===S.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&void 0!==I.sMask?I.objectId+2:I.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===S.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&void 0!==I.decodeParameters&&he.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var we="",ce=0,be=I.transparency.length;ce<be;ce++)we+=I.transparency[ce]+" "+I.transparency[ce]+" ";he.push({key:"Mask",value:"["+we+"]"})}if(void 0!==I.sMask&&he.push({key:"SMask",value:I.objectId+1+" 0 R"}),z({data:I.data,additionalKeyValues:he,alreadyAppliedFilters:void 0!==I.filter?["/"+I.filter]:void 0,objectId:I.objectId}),Y("endobj"),"sMask"in I&&void 0!==I.sMask){var F={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:"/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,data:I.sMask};"filter"in I&&(F.filter=I.filter),L.call(this,F)}if(I.colorSpace===S.INDEXED){var B=this.internal.newObject();z({data:N(new Uint8Array(I.palette)),objectId:B}),Y("endobj")}},s=function(){var L=this.internal.collections.addImage_images;for(var I in L)r.call(this,L[I])},a=function(){var L,I=this.internal.collections.addImage_images,Y=this.internal.write;for(var z in I)Y("/I"+(L=I[z]).index,L.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var L=this.internal.collections.addImage_images;return l.call(this),L},d=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(L){return"function"==typeof e["process"+L.toUpperCase()]},g=function(L){return"object"===jt(L)&&1===L.nodeType},m=function(L,I){if("IMG"===L.nodeName&&L.hasAttribute("src")){var Y=""+L.getAttribute("src");if(0===Y.indexOf("data:image/"))return Dl(unescape(Y).split("base64,").pop());var z=e.loadFile(Y,!0);if(void 0!==z)return z}if("CANVAS"===L.nodeName){if(0===L.width||0===L.height)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var me;switch(I){case"PNG":me="image/png";break;case"WEBP":me="image/webp";break;default:me="image/jpeg"}return Dl(L.toDataURL(me,1).split("base64,").pop())}},f=function(L){var I=this.internal.collections.addImage_images;if(I)for(var Y in I)if(L===I[Y].alias)return I[Y]},y=function(L,I,Y){return L||I||(L=-96,I=-96),L<0&&(L=-1*Y.width*72/L/this.internal.scaleFactor),I<0&&(I=-1*Y.height*72/I/this.internal.scaleFactor),0===L&&(L=I*Y.width/Y.height),0===I&&(I=L*Y.height/Y.width),[L,I]},b=function(L,I,Y,z,me,he){var we=y.call(this,Y,z,me),ce=this.internal.getCoordinateString,be=this.internal.getVerticalCoordinateString,xe=c.call(this);if(Y=we[0],z=we[1],xe[me.index]=me,he){he*=Math.PI/180;var je=Math.cos(he),F=Math.sin(he),B=function(W){return W.toFixed(4)},H=[B(je),B(F),B(-1*F),B(je),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,ce(L),be(I+z),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([ce(Y),"0","0",ce(z),"0","0","cm"].join(" "))):this.internal.write([ce(Y),"0","0",ce(z),ce(L),be(I+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+me.index+" Do"),this.internal.write("Q")},S=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=e.__addimage__.sHashCode=function(L){var I,Y,z=0;if("string"==typeof L)for(Y=L.length,I=0;I<Y;I++)z=(z<<5)-z+L.charCodeAt(I),z|=0;else if(ne(L))for(Y=L.byteLength/2,I=0;I<Y;I++)z=(z<<5)-z+L[I],z|=0;return z},E=e.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var I=!0;return 0===L.length&&(I=!1),L.length%4!=0&&(I=!1),!1===/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))&&(I=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))&&(I=!1),I},G=e.__addimage__.extractImageFromDataUrl=function(L){var I=(L=L||"").split("base64,"),Y=null;if(2===I.length){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(z)&&(Y={mimeType:z[1],charset:z[2],data:I[1]})}return Y},K=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(L){return K()&&L instanceof ArrayBuffer};var ne=e.__addimage__.isArrayBufferView=function(L){return K()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},V=e.__addimage__.binaryStringToUint8Array=function(L){for(var I=L.length,Y=new Uint8Array(I),z=0;z<I;z++)Y[z]=L.charCodeAt(z);return Y},N=e.__addimage__.arrayBufferToBinaryString=function(L){for(var I="",Y=ne(L)?L:new Uint8Array(L),z=0;z<Y.length;z+=8192)I+=String.fromCharCode.apply(null,Y.subarray(z,z+8192));return I};e.addImage=function(){var L,I,Y,z,me,he,we,ce,be;if("number"==typeof arguments[1]?(I=i,Y=arguments[1],z=arguments[2],me=arguments[3],he=arguments[4],we=arguments[5],ce=arguments[6],be=arguments[7]):(I=arguments[1],Y=arguments[2],z=arguments[3],me=arguments[4],he=arguments[5],we=arguments[6],ce=arguments[7],be=arguments[8]),"object"===jt(L=arguments[0])&&!g(L)&&"imageData"in L){var xe=L;L=xe.imageData,I=xe.format||I||i,Y=xe.x||Y||0,z=xe.y||z||0,me=xe.w||xe.width||me,he=xe.h||xe.height||he,we=xe.alias||we,ce=xe.compression||ce,be=xe.rotation||xe.angle||be}var je=this.internal.getFilters();if(void 0===ce&&-1!==je.indexOf("FlateEncode")&&(ce="SLOW"),isNaN(Y)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var F=X.call(this,L,I,we,ce);return b.call(this,Y,z,me,he,F,be),this};var X=function(L,I,Y,z){var me,he,we,be;if("string"==typeof L&&o(L)===i){L=unescape(L);var ce=ve(L,!1);(""!==ce||void 0!==(ce=e.loadFile(L,!0)))&&(L=ce)}if(g(L)&&(L=m(L,I)),I=o(L,I),!h(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if((null==(we=Y)||0===we.length)&&(Y="string"==typeof(be=L)||ne(be)?k(be):ne(be.data)?k(be.data):null),(me=f.call(this,Y))||(K()&&(L instanceof Uint8Array||"RGBA"===I||(he=L,L=V(L))),me=this["process"+I.toUpperCase()](L,d.call(this),Y,function(be){return be&&"string"==typeof be&&(be=be.toUpperCase()),be in e.image_compression?be:_.NONE}(z),he)),!me)throw new Error("An unknown error occurred whilst processing the image.");return me},ve=e.__addimage__.convertBase64ToBinaryString=function(L,I){var Y;I="boolean"!=typeof I||I;var z,me="";if("string"==typeof L){z=null!==(Y=G(L))?Y.data:L;try{me=Dl(z)}catch(he){if(I)throw E(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return me};e.getImageProperties=function(L){var I,Y,z="";if(g(L)&&(L=m(L)),"string"==typeof L&&o(L)===i&&(""===(z=ve(L,!1))&&(z=e.loadFile(L)||""),L=z),Y=o(L),!h(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(!K()||L instanceof Uint8Array||(L=V(L)),!(I=this["process"+Y.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=Y,I}}(dt.API),
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
e=dt.API,i=function(t){if(void 0!==t&&""!=t)return!0},dt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(t){for(var o,r,s,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,h=!1,g=0;g<d.length&&!h;g++)switch((o=d[g]).type){case"link":(i(o.options.url)||i(o.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(0!=h){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){o=d[m];var f=this.internal.pdfEscape,y=this.internal.getEncryptor(t.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(b.objId),k=o.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(o.bounds.x)+" "+l(o.bounds.y+o.bounds.h)+" "+a(o.bounds.x+o.bounds.w)+" "+l(o.bounds.y)+"] ")+"/Contents ("+f(_(o.contents))+")",s+=" /Popup "+S.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+f(_(k))+") >>",b.content=s;var E=b.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(o.bounds.x+30)+" "+l(o.bounds.y+o.bounds.h)+" "+a(o.bounds.x+o.bounds.w+30)+" "+l(o.bounds.y)+"] ")+" /Parent "+E,o.open&&(s+=" /Open true"),S.content=s+=" >>",this.internal.write(b.objId,"0 R",S.objId,"0 R");break;case"freetext":r="/Rect ["+a(o.bounds.x)+" "+l(o.bounds.y)+" "+a(o.bounds.x+o.bounds.w)+" "+l(o.bounds.y+o.bounds.h)+"] ";var G=o.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+f(y(o.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",s+=" /Border [0 0 0]",this.internal.write(s+=" >>");break;case"link":if(o.options.name){var K=this.annotations._nameMap[o.options.name];o.options.pageNumber=K.page,o.options.top=K.y}else o.options.top||(o.options.top=0);if(r="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",s="",o.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+f(y(o.options.url))+") >>";else if(o.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,s+=" /FitV "+o.options.left+"]";break;default:var ne=l(o.options.top);o.options.left=o.options.left||0,void 0===o.options.zoom&&(o.options.zoom=0),s+=" /XYZ "+o.options.left+" "+ne+" "+o.options.zoom+"]"}""!=s&&this.internal.write(s+=" >>")}}this.internal.write("]")}}]),e.createAnnotation=function(t){var o=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":o.pageContext.annotations.push(t)}},e.link=function(t,o,r,s,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(t),y:d(o),w:c(t+r),h:d(o+s)},options:a,type:"link"})},e.textWithLink=function(t,o,r,s){var a,l,c=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==s.maxWidth){var h=this.splitTextToSize(t,l=s.maxWidth).length;a=Math.ceil(d*h)}else l=c,a=d;return this.text(t,o,r,s),"center"===s.align&&(o-=c/2),"right"===s.align&&(o-=c),this.link(o,(r+=.2*d)-d,l,a,s),c},e.getTextWidth=function(t){var o=this.internal.getFontSize();return this.getStringUnitWidth(t)*o/this.internal.scaleFactor},
/**
       * @license
       * Copyright (c) 2017 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){var i={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(b){return void 0!==i[b.charCodeAt(0)]},a=e.__arabicParser__.isArabicLetter=function(b){return"string"==typeof b&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},l=e.__arabicParser__.isArabicEndLetter=function(b){return a(b)&&s(b)&&i[b.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(b){return a(b)&&r.indexOf(b.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return a(b)&&s(b)&&i[b.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(b){return a(b)&&s(b)&&i[b.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(b){return a(b)&&s(b)&&i[b.charCodeAt(0)].length>=3};var h=e.__arabicParser__.arabicLetterHasMedialForm=function(b){return a(b)&&s(b)&&4==i[b.charCodeAt(0)].length},g=e.__arabicParser__.resolveLigatures=function(b){var S=0,_=t,k="",E=0;for(S=0;S<b.length;S+=1)void 0!==_[b.charCodeAt(S)]?(E++,"number"==typeof(_=_[b.charCodeAt(S)])&&(k+=String.fromCharCode(_),_=t,E=0),S===b.length-1&&(_=t,k+=b.charAt(S-(E-1)),S-=E-1,E=0)):(_=t,k+=b.charAt(S-E),S-=E,E=0);return k};e.__arabicParser__.isArabicDiacritic=function(b){return void 0!==b&&void 0!==o[b.charCodeAt(0)]};var m=e.__arabicParser__.getCorrectForm=function(b,S,_){return a(b)?!1===s(b)?-1:!d(b)||!a(S)&&!a(_)||!a(_)&&l(S)||l(b)&&!a(S)||l(b)&&c(S)||l(b)&&l(S)?0:h(b)&&a(S)&&!l(S)&&a(_)&&d(_)?3:l(b)||!a(_)?1:2:-1},f=function(b){var S=0,_=0,k=0,E="",G="",K="",ne=(b=b||"").split("\\s+"),V=[];for(S=0;S<ne.length;S+=1){for(V.push(""),_=0;_<ne[S].length;_+=1)G=ne[S][_-1],K=ne[S][_+1],a(E=ne[S][_])?(k=m(E,G,K),V[S]+=-1!==k?String.fromCharCode(i[E.charCodeAt(0)][k]):E):V[S]+=E;V[S]=g(V[S])}return V.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var b,S="string"==typeof arguments[0]?arguments[0]:arguments[0].text,_=[];if(Array.isArray(S)){var k=0;for(_=[],k=0;k<S.length;k+=1)Array.isArray(S[k])?_.push([f(S[k][0]),S[k][1],S[k][2]]):_.push([f(S[k])]);b=_}else b=f(S);return"string"==typeof arguments[0]?b:(arguments[0].text=b,arguments[0])};e.events.push(["preProcessText",y])}(dt.API),dt.API.autoPrint=function(e){var i;return"javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){i=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+i+" 0 R")})),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){var i=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(l){o=isNaN(l)||!1===Number.isInteger(l)||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(l){r=isNaN(l)||!1===Number.isInteger(l)||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};i.prototype.getContext=function(t,o){var r;if("2d"!==(t=t||"2d"))return null;for(r in o)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=o[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},i.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new i,this.canvas.pdf=this}])}(dt.API),function(e){var i={left:0,top:0,bottom:0,right:0},t=!1,o=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},i),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(b){y=b}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return o.call(this),this.internal.__cell__.headerFunction="function"==typeof c?c:void 0,this},e.getTextDimensions=function(c,d){o.call(this);var h=(d=d||{}).fontSize||this.getFontSize(),g=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,f=0,y=0,b=0,S=this;if(!Array.isArray(c)&&"string"!=typeof c){if("number"!=typeof c)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var _=d.maxWidth;_>0?"string"==typeof c?c=this.splitTextToSize(c,_):"[object Array]"===Object.prototype.toString.call(c)&&(c=c.reduce(function(E,G){return E.concat(S.splitTextToSize(G,_))},[])):c=Array.isArray(c)?c:[c];for(var k=0;k<c.length;k++)f<(b=this.getStringUnitWidth(c[k],{font:g})*h)&&(f=b);return 0!==f&&(y=c.length),{w:f/=m,h:Math.max((y*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){o.call(this),this.addPage();var c=this.internal.__cell__.margins||i;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),o.call(this);var d=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,g=this.internal.__cell__.margins||i,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return void 0!==d.lineNumber&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=g.top,f&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),void 0!==c.text[0]&&(this.rect(c.x,c.y,c.width,c.height,!0===t?"FD":void 0),"right"===c.align?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):"center"===c.align?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,h,g,m){if(o.call(this),!h)throw new Error("No data for PDF table.");var f,y,b,S,_=[],k=[],E=[],G={},K={},ne=[],V=[],N=(m=m||{}).autoSize||!1,X=!1!==m.printHeaders,ve=m.css&&void 0!==m.css["font-size"]?16*m.css["font-size"]:m.fontSize||12,L=m.margins||Object.assign({width:this.getPageWidth()},i),I="number"==typeof m.padding?m.padding:3,Y=m.headerBackgroundColor||"#c8c8c8",z=m.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=X,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=ve,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=Y,this.internal.__cell__.headerTextColor=z,this.setFontSize(ve),null==g)k=_=Object.keys(h[0]),E=_.map(function(){return"left"});else if(Array.isArray(g)&&"object"===jt(g[0]))for(_=g.map(function(xe){return xe.name}),k=g.map(function(xe){return xe.prompt||xe.name||""}),E=g.map(function(xe){return xe.align||"left"}),f=0;f<g.length;f+=1)K[g[f].name]=g[f].width*(19.049976/25.4);else Array.isArray(g)&&"string"==typeof g[0]&&(k=_=g,E=_.map(function(){return"left"}));if(N||Array.isArray(g)&&"string"==typeof g[0])for(f=0;f<_.length;f+=1){for(G[S=_[f]]=h.map(function(xe){return xe[S]}),this.setFont(void 0,"bold"),ne.push(this.getTextDimensions(k[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=G[S],this.setFont(void 0,"normal"),b=0;b<y.length;b+=1)ne.push(this.getTextDimensions(y[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[S]=Math.max.apply(null,ne)+I+I,ne=[]}if(X){var me={};for(f=0;f<_.length;f+=1)me[_[f]]={},me[_[f]].text=k[f],me[_[f]].align=E[f];var he=l.call(this,me,K);V=_.map(function(xe){return new s(c,d,K[xe],he,me[xe].text,void 0,me[xe].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var we=g.reduce(function(xe,je){return xe[je.name]=je.align,xe},{});for(f=0;f<h.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:h[f]},this);var ce=l.call(this,h[f],K);for(b=0;b<_.length;b+=1){var be=h[f][_[b]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:b,data:be},this),a.call(this,new s(c,d,K[_[b]],ce,be,f+2,we[_[b]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var h=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(f){var y=c[f];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[f]-h-h)},this).map(function(f){return this.getLineHeightFactor()*f.length*g/m+h+h},this).reduce(function(f,y){return Math.max(f,y)},0)};e.setTableHeaderRow=function(c){o.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,"function"==typeof this.internal.__cell__.headerFunction){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){h=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(h.y=this.internal.__cell__.margins.top||0,m.push(h)),h.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,h),this.setTextColor(y)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}}(dt.API);var X1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},e0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Xg=Q1(e0),t0=[100,200,300,400,500,600,700,800,900],oF=Q1(t0);function ep(e){var s,i=e.family.replace(/"|'/g,"").toLowerCase(),t=X1[s=(s=e.style)||"normal"]?s:"normal",o=function(s){return s?"number"==typeof s?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):"bold"===s?700:400:400}(e.weight),r=function(s){return"number"==typeof Xg[s=s||"normal"]?s:"normal"}(e.stretch);return{family:i,style:t,weight:o,stretch:r,src:e.src||[],ref:e.ref||{name:i,style:[r,t,o].join(" ")}}}function n0(e,i,t,o){var r;for(r=t;r>=0&&r<i.length;r+=o)if(e[i[r]])return e[i[r]];for(r=t;r>=0&&r<i.length;r-=o)if(e[i[r]])return e[i[r]]}var rF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},o0={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function r0(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function s0(e){return e.trimLeft()}function aF(e,i){for(var t=0;t<e.length;){if(e.charAt(t)===i)return[e.substring(0,t),e.substring(t+1)];t+=1}return null}function lF(e){var i=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===i?null:[i[0],e.substring(i[0].length)]}var Dd,a0,l0,tp=["times"];(function(e){var i,t,o,r,s,a,l,c,d,h=function(F){return this.isStrokeTransparent=(F=F||{}).isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=void 0!==F.transform?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new a,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new a,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof F.ignoreClearRect||F.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new g(this),i=this.internal.f2,t=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new h}]);var g=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=F;Object.defineProperty(this,"pdf",{get:function(){return B}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(Se){H=!!Se}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(Se){W=!!Se}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(Se){isNaN(Se)||(oe=Se)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(Se){isNaN(Se)||(de=Se)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Se){var q;"number"==typeof Se?q=[Se,Se,Se,Se]:((q=new Array(4))[0]=Se[0],q[1]=Se.length>=2?Se[1]:q[0],q[2]=Se.length>=3?Se[2]:q[0],q[3]=Se.length>=4?Se[3]:q[1]),d.margin=q}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(Se){ue=Se}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(Se){ge=Se}});var Le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Le},set:function(Se){Le=Se}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Se){Se instanceof h&&(d=Se)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Se){d.path=Se}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(Se){Pe=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var q;q=m(Se),this.ctx.fillStyle=q.style,this.ctx.isFillTransparent=0===q.a,this.ctx.fillOpacity=q.a,this.pdf.setFillColor(q.r,q.g,q.b,{a:q.a}),this.pdf.setTextColor(q.r,q.g,q.b,{a:q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var q=m(Se);this.ctx.strokeStyle=q.style,this.ctx.isStrokeTransparent=0===q.a,this.ctx.strokeOpacity=q.a,0===q.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(q.r,q.g,q.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){-1!==["butt","round","square"].indexOf(Se)&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){-1!==["bevel","round","miter"].indexOf(Se)&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){-1!==["right","end","center","left","start"].indexOf(Se)&&(this.ctx.textAlign=Se)}});var We=null,gt=null;Object.defineProperty(this,"fontFaces",{get:function(){return gt},set:function(Se){We=null,gt=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var q;if(this.ctx.font=Se,null!==(q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))){var St=q[1],tt=q[3],Me=q[4],Be=q[6],Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor("px"===Ye?parseFloat(Me)*this.pdf.internal.scaleFactor:"em"===Ye?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var Ve=function(ft){var Ft,$e,hn=[],Zt=ft.trim();if(""===Zt)return tp;if(Zt in o0)return[o0[Zt]];for(;""!==Zt;){switch($e=null,Ft=(Zt=s0(Zt)).charAt(0)){case'"':case"'":$e=aF(Zt.substring(1),Ft);break;default:$e=lF(Zt)}if(null===$e||(hn.push($e[0]),""!==(Zt=s0($e[1]))&&","!==Zt.charAt(0)))return tp;Zt=Zt.replace(/^,/,"")}return hn}(Be);if(this.fontFaces){var st=function sF(e,i,t){for(var o=(t=t||{}).defaultFontFamily||"times",r=Object.assign({},rF,t.genericFontFamilies||{}),s=null,a=null,l=0;l<i.length;++l)if(r[(s=ep(i[l])).family]&&(s.family=r[s.family]),e.hasOwnProperty(s.family)){a=e[s.family];break}if(!(a=a||e[o]))throw new Error("Could not find a font-family for the rule '"+r0(s)+"' and default family '"+o+"'.");if(a=function(c,d){if(d[c])return d[c];var h=Xg[c],m=n0(d,e0,h,h<=Xg.normal?-1:1);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m}(s.stretch,a),a=function(c,d){if(d[c])return d[c];for(var h=X1[c],g=0;g<h.length;++g)if(d[h[g]])return d[h[g]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,d){if(d[c])return d[c];if(400===c&&d[500])return d[500];if(500===c&&d[400])return d[400];var g=n0(d,t0,oF[c],c<400?-1:1);if(!g)throw new Error("Could not find a matching font-weight for value "+c);return g}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+r0(s)+"'.");return a}(function qe(Se,q){if(null===We){var St=(tt=Se.getFontList(),Me=[],Object.keys(tt).forEach(function(Be){tt[Be].forEach(function(Ye){var Ve=null;switch(Ye){case"bold":Ve={family:Be,weight:"bold"};break;case"italic":Ve={family:Be,style:"italic"};break;case"bolditalic":Ve={family:Be,weight:"bold",style:"italic"};break;case"":case"normal":Ve={family:Be}}null!==Ve&&(Ve.ref={name:Be,style:Ye},Me.push(Ve))})}),Me);We=function(tt){for(var Me={},Be=0;Be<tt.length;++Be){var Ye=ep(tt[Be]),Ve=Ye.family,st=Ye.stretch,wt=Ye.style,At=Ye.weight;Me[Ve]=Me[Ve]||{},Me[Ve][st]=Me[Ve][st]||{},Me[Ve][st][wt]=Me[Ve][st][wt]||{},Me[Ve][st][wt][At]=Ye}return Me}(St.concat(q))}var tt,Me;return We}(this.pdf,this.fontFaces),Ve.map(function(ft){return{family:ft,stretch:"normal",weight:tt,style:St}}));this.pdf.setFont(st.ref.name,st.ref.style)}else{var wt="";("bold"===tt||parseInt(tt,10)>=700||"bold"===St)&&(wt="bold"),"italic"===St&&(wt+="italic"),0===wt.length&&(wt="normal");for(var At="",Dt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ot=0;Ot<Ve.length;Ot++){if(void 0!==this.pdf.internal.getFont(Ve[Ot],wt,{noFallback:!0,disableWarning:!0})){At=Ve[Ot];break}if("bolditalic"===wt&&void 0!==this.pdf.internal.getFont(Ve[Ot],"bold",{noFallback:!0,disableWarning:!0}))At=Ve[Ot],wt="bold";else if(void 0!==this.pdf.internal.getFont(Ve[Ot],"normal",{noFallback:!0,disableWarning:!0})){At=Ve[Ot],wt="normal";break}}if(""===At)for(var Qt=0;Qt<Ve.length;Qt++)if(Dt[Ve[Qt]]){At=Dt[Ve[Qt]];break}this.pdf.setFont(At=""===At?"Times":At,wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,je.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,je.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};g.prototype.setLineDash=function(F){this.lineDash=F},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){G.call(this,"fill",!1)},g.prototype.stroke=function(){G.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(F,B){if(isNaN(F)||isNaN(B))throw ei.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new a(F,B));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new a(F,B)},g.prototype.closePath=function(){var F=new a(0,0),B=0;for(B=this.path.length-1;-1!==B;B--)if("begin"===this.path[B].type&&"object"===jt(this.path[B+1])&&"number"==typeof this.path[B+1].x){F=new a(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(F.x,F.y)},g.prototype.lineTo=function(F,B){if(isNaN(F)||isNaN(B))throw ei.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new a(F,B));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new a(H.x,H.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},g.prototype.quadraticCurveTo=function(F,B,H,W){if(isNaN(H)||isNaN(W)||isNaN(F)||isNaN(B))throw ei.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new a(H,W)),de=this.ctx.transform.applyToPoint(new a(F,B));this.path.push({type:"qct",x1:de.x,y1:de.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new a(oe.x,oe.y)},g.prototype.bezierCurveTo=function(F,B,H,W,oe,de){if(isNaN(oe)||isNaN(de)||isNaN(F)||isNaN(B)||isNaN(H)||isNaN(W))throw ei.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new a(oe,de)),ge=this.ctx.transform.applyToPoint(new a(F,B)),Le=this.ctx.transform.applyToPoint(new a(H,W));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:Le.x,y2:Le.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new a(ue.x,ue.y)},g.prototype.arc=function(F,B,H,W,oe,de){if(isNaN(F)||isNaN(B)||isNaN(H)||isNaN(W)||isNaN(oe))throw ei.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new a(F,B));F=ue.x,B=ue.y;var ge=this.ctx.transform.applyToPoint(new a(0,H)),Le=this.ctx.transform.applyToPoint(new a(0,0));H=Math.sqrt(Math.pow(ge.x-Le.x,2)+Math.pow(ge.y-Le.y,2))}Math.abs(oe-W)>=2*Math.PI&&(W=0,oe=2*Math.PI),this.path.push({type:"arc",x:F,y:B,radius:H,startAngle:W,endAngle:oe,counterclockwise:de})},g.prototype.arcTo=function(F,B,H,W,oe){throw new Error("arcTo not implemented.")},g.prototype.rect=function(F,B,H,W){if(isNaN(F)||isNaN(B)||isNaN(H)||isNaN(W))throw ei.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,B),this.lineTo(F+H,B),this.lineTo(F+H,B+W),this.lineTo(F,B+W),this.lineTo(F,B),this.lineTo(F+H,B),this.lineTo(F,B)},g.prototype.fillRect=function(F,B,H,W){if(isNaN(F)||isNaN(B)||isNaN(H)||isNaN(W))throw ei.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var oe={};"butt"!==this.lineCap&&(oe.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,B,H,W),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},g.prototype.strokeRect=function(F,B,H,W){if(isNaN(F)||isNaN(B)||isNaN(H)||isNaN(W))throw ei.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(F,B,H,W),this.stroke())},g.prototype.clearRect=function(F,B,H,W){if(isNaN(F)||isNaN(B)||isNaN(H)||isNaN(W))throw ei.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,B,H,W))},g.prototype.save=function(F){F="boolean"!=typeof F||F;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},g.prototype.restore=function(F){F="boolean"!=typeof F||F;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(B),F&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(F){var B,H,W,oe;if(!0===F.isCanvasGradient&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))B=0,H=0,W=0,oe=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(null!==de)B=parseInt(de[1]),H=parseInt(de[2]),W=parseInt(de[3]),oe=1;else if(null!==(de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F)))B=parseInt(de[1]),H=parseInt(de[2]),W=parseInt(de[3]),oe=parseFloat(de[4]);else{if(oe=1,"string"==typeof F&&"#"!==F.charAt(0)){var ue=new q1(F);F=ue.ok?ue.toHex():"#000000"}4===F.length?(B=F.substring(1,2),B+=B,H=F.substring(2,3),H+=H,W=F.substring(3,4),W+=W):(B=F.substring(1,3),H=F.substring(3,5),W=F.substring(5,7)),B=parseInt(B,16),H=parseInt(H,16),W=parseInt(W,16)}}return{r:B,g:H,b:W,a:oe,style:F}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},y=function(){return!(!this.ctx.isStrokeTransparent&&0!=this.globalAlpha)};g.prototype.fillText=function(F,B,H,W){if(isNaN(B)||isNaN(H)||"string"!=typeof F)throw ei.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!f.call(this)){var oe=ce(this.ctx.transform.rotation);I.call(this,{text:F,x:B,y:H,scale:this.ctx.transform.scaleX,angle:oe,align:this.textAlign,maxWidth:W})}},g.prototype.strokeText=function(F,B,H,W){if(isNaN(B)||isNaN(H)||"string"!=typeof F)throw ei.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){W=isNaN(W)?void 0:W;var oe=ce(this.ctx.transform.rotation);I.call(this,{text:F,x:B,y:H,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:W})}},g.prototype.measureText=function(F){if("string"!=typeof F)throw ei.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,H=this.pdf.internal.scaleFactor,W=B.internal.getFontSize(),oe=B.getStringUnitWidth(F)*W/B.internal.scaleFactor;return new function(ue){var ge=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this}({width:oe*=Math.round(96*H/72*1e4)/1e4})},g.prototype.scale=function(F,B){if(isNaN(F)||isNaN(B))throw ei.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new c(F,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},g.prototype.rotate=function(F){if(isNaN(F))throw ei.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},g.prototype.translate=function(F,B){if(isNaN(F)||isNaN(B))throw ei.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new c(1,0,0,1,F,B);this.ctx.transform=this.ctx.transform.multiply(H)},g.prototype.transform=function(F,B,H,W,oe,de){if(isNaN(F)||isNaN(B)||isNaN(H)||isNaN(W)||isNaN(oe)||isNaN(de))throw ei.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new c(F,B,H,W,oe,de);this.ctx.transform=this.ctx.transform.multiply(ue)},g.prototype.setTransform=function(F,B,H,W,oe,de){F=isNaN(F)?1:F,B=isNaN(B)?0:B,H=isNaN(H)?0:H,W=isNaN(W)?1:W,oe=isNaN(oe)?0:oe,de=isNaN(de)?0:de,this.ctx.transform=new c(F,B,H,W,oe,de)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(F,B,H,W,oe,de,ue,ge,Le){var Pe=this.pdf.getImageProperties(F),We=1,qe=1,gt=1,Se=1;void 0!==W&&void 0!==ge&&(gt=ge/W,Se=Le/oe,We=Pe.width/W*ge/W,qe=Pe.height/oe*Le/oe),void 0===de&&(de=B,ue=H,B=0,H=0),void 0!==W&&void 0===ge&&(ge=W,Le=oe),void 0===W&&void 0===ge&&(ge=Pe.width,Le=Pe.height);for(var q,St=this.ctx.transform.decompose(),tt=ce(St.rotate.shx),Me=new c,Be=(Me=(Me=(Me=Me.multiply(St.translate)).multiply(St.skew)).multiply(St.scale)).applyToRectangle(new l(de-B*gt,ue-H*Se,W*We,oe*qe)),Ye=S.call(this,Be),Ve=[],st=0;st<Ye.length;st+=1)-1===Ve.indexOf(Ye[st])&&Ve.push(Ye[st]);if(E(Ve),this.autoPaging)for(var wt=Ve[0],At=Ve[Ve.length-1],Dt=wt;Dt<At+1;Dt++){this.pdf.setPage(Dt);var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qt=1===Dt?this.posY+this.margin[0]:this.margin[0],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=1===Dt?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Dt-2)*Ft;if(0!==this.ctx.clip_path.length){var hn=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(q,this.posX+this.margin[3],-$e+Qt+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=hn}var Zt=JSON.parse(JSON.stringify(Be));Zt=k([Zt],this.posX+this.margin[3],-$e+Qt+this.ctx.prevPageLastElemOffset)[0];var xo=(Dt>wt||Dt<At)&&b.call(this);xo&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,Ft,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Zt.x,Zt.y,Zt.w,Zt.h,null,null,tt),xo&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,tt)};var S=function(F,B,H){var W=[];B=B||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":W.push(Math.floor((F.y+oe)/H)+1);break;case"arc":W.push(Math.floor((F.y+oe-F.radius)/H)+1),W.push(Math.floor((F.y+oe+F.radius)/H)+1);break;case"qct":var de=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);W.push(Math.floor((de.y+oe)/H)+1),W.push(Math.floor((de.y+de.h+oe)/H)+1);break;case"bct":var ue=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);W.push(Math.floor((ue.y+oe)/H)+1),W.push(Math.floor((ue.y+ue.h+oe)/H)+1);break;case"rect":W.push(Math.floor((F.y+oe)/H)+1),W.push(Math.floor((F.y+F.h+oe)/H)+1)}for(var ge=0;ge<W.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<W[ge];)_.call(this);return W},_=function(){var F=this.fillStyle,B=this.strokeStyle,H=this.font,W=this.lineCap,oe=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=B,this.font=H,this.lineCap=W,this.lineWidth=oe,this.lineJoin=de},k=function(F,B,H){for(var W=0;W<F.length;W++)switch(F[W].type){case"bct":F[W].x2+=B,F[W].y2+=H;case"qct":F[W].x1+=B,F[W].y1+=H;default:F[W].x+=B,F[W].y+=H}return F},E=function(F){return F.sort(function(B,H){return B-H})},G=function(F,B){for(var H,W,oe=this.fillStyle,de=this.strokeStyle,ue=this.lineCap,ge=this.lineWidth,Le=Math.abs(ge*this.ctx.transform.scaleX),Pe=this.lineJoin,We=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),gt=[],Se=0;Se<qe.length;Se++)if(void 0!==qe[Se].x)for(var q=S.call(this,qe[Se]),St=0;St<q.length;St+=1)-1===gt.indexOf(q[St])&&gt.push(q[St]);for(var tt=0;tt<gt.length;tt++)for(;this.pdf.internal.getNumberOfPages()<gt[tt];)_.call(this);if(E(gt),this.autoPaging)for(var Me=gt[0],Be=gt[gt.length-1],Ye=Me;Ye<Be+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=oe,this.strokeStyle=de,this.lineCap=ue,this.lineWidth=Le,this.lineJoin=Pe;var Ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],st=1===Ye?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=1===Ye?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Ye-2)*At;if(0!==this.ctx.clip_path.length){var Ot=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(H,this.posX+this.margin[3],-Dt+st+this.ctx.prevPageLastElemOffset),K.call(this,F,!0),this.path=Ot}if(W=JSON.parse(JSON.stringify(We)),this.path=k(W,this.posX+this.margin[3],-Dt+st+this.ctx.prevPageLastElemOffset),!1===B||0===Ye){var Qt=(Ye>Me||Ye<Be)&&b.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,At,null).clip().discardPath()),K.call(this,F,B),Qt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=Le,K.call(this,F,B),this.lineWidth=ge;this.path=We},K=function(F,B){if(("stroke"!==F||B||!y.call(this))&&("stroke"===F||B||!f.call(this))){for(var H,W,oe=[],de=this.path,ue=0;ue<de.length;ue++){var ge=de[ue];switch(ge.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:ge,deltas:[],abs:[]});break;case"lt":var Le=oe.length;if(de[ue-1]&&!isNaN(de[ue-1].x)&&(H=[ge.x-de[ue-1].x,ge.y-de[ue-1].y],Le>0))for(;Le>=0;Le--)if(!0!==oe[Le-1].close&&!0!==oe[Le-1].begin){oe[Le-1].deltas.push(H),oe[Le-1].abs.push(ge);break}break;case"bct":oe[oe.length-1].deltas.push(H=[ge.x1-de[ue-1].x,ge.y1-de[ue-1].y,ge.x2-de[ue-1].x,ge.y2-de[ue-1].y,ge.x-de[ue-1].x,ge.y-de[ue-1].y]);break;case"qct":oe[oe.length-1].deltas.push(H=[de[ue-1].x+2/3*(ge.x1-de[ue-1].x)-de[ue-1].x,de[ue-1].y+2/3*(ge.y1-de[ue-1].y)-de[ue-1].y,ge.x+2/3*(ge.x1-ge.x)-de[ue-1].x,ge.y+2/3*(ge.y1-ge.y)-de[ue-1].y,ge.x-de[ue-1].x,ge.y-de[ue-1].y]);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(ge)}}W=B?null:"stroke"===F?"stroke":"fill";for(var St=!1,tt=0;tt<oe.length;tt++)if(oe[tt].arc)for(var Me=oe[tt].abs,Be=0;Be<Me.length;Be++){var Ye=Me[Be];"arc"===Ye.type?N.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,B,!St):Y.call(this,Ye.x,Ye.y),St=!0}else!0===oe[tt].close?(this.pdf.internal.out("h"),St=!1):!0!==oe[tt].begin&&(z.call(this,oe[tt].deltas,oe[tt].start.x,oe[tt].start.y),St=!0);W&&X.call(this,W),B&&ve.call(this)}},ne=function(F){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-H;case"top":return F+B-H;case"hanging":return F+B-2*H;case"middle":return F+B/2-H;default:return F}},V=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(B,H){this.colorStops.push([B,H])},F.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(F,B,H,W,oe,de,ue,ge,Le){for(var Pe=he.call(this,H,W,oe,de),We=0;We<Pe.length;We++){var qe=Pe[We];0===We&&(Le?L.call(this,qe.x1+F,qe.y1+B):Y.call(this,qe.x1+F,qe.y1+B)),me.call(this,F,B,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}ge?ve.call(this):X.call(this,ue)},X=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ve=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(F,B){this.pdf.internal.out(t(F)+" "+o(B)+" m")},I=function(F){var B;switch(F.align){case"right":case"end":B="right";break;case"center":B="center";break;default:B="left"}var H=this.pdf.getTextDimensions(F.text),W=ne.call(this,F.y),oe=V.call(this,W)-H.h,de=this.ctx.transform.applyToPoint(new a(F.x,W)),ue=this.ctx.transform.decompose(),ge=new c;ge=(ge=(ge=ge.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var Le,Pe,We,qe=this.ctx.transform.applyToRectangle(new l(F.x,W,H.w,H.h)),gt=ge.applyToRectangle(new l(F.x,oe,H.w,H.h)),Se=S.call(this,gt),q=[],St=0;St<Se.length;St+=1)-1===q.indexOf(Se[St])&&q.push(Se[St]);if(E(q),this.autoPaging)for(var tt=q[0],Me=q[q.length-1],Be=tt;Be<Me+1;Be++){this.pdf.setPage(Be);var Ye=1===Be?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.margin[2],wt=st-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],Dt=At-this.margin[3],Ot=1===Be?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Be-2)*wt;if(0!==this.ctx.clip_path.length){var Qt=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Le,this.posX+this.margin[3],-1*Ot+Ye),K.call(this,"fill",!0),this.path=Qt}var ft=k([JSON.parse(JSON.stringify(gt))],this.posX+this.margin[3],-Ot+Ye+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*F.scale),this.lineWidth=(We=this.lineWidth)*F.scale);var Ft="text"!==this.autoPaging;if(Ft||ft.y+ft.h<=st){if(Ft||ft.y>=Ye&&ft.x<=At){var $e=Ft?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||At-ft.x)[0],hn=k([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-Ot+Ye+this.ctx.prevPageLastElemOffset)[0],Zt=Ft&&(Be>tt||Be<Me)&&b.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,wt,null).clip().discardPath()),this.pdf.text($e,hn.x,hn.y,{angle:F.angle,align:B,renderingMode:F.renderingMode}),Zt&&this.pdf.restoreGraphicsState()}}else ft.y<st&&(this.ctx.prevPageLastElemOffset+=st-ft.y);F.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=We)}else F.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*F.scale),this.lineWidth=(We=this.lineWidth)*F.scale),this.pdf.text(F.text,de.x+this.posX,de.y+this.posY,{angle:F.angle,align:B,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=We)},Y=function(F,B,H,W){W=W||0,this.pdf.internal.out(t(F+(H=H||0))+" "+o(B+W)+" l")},z=function(F,B,H){return this.pdf.lines(F,B,H,null,null)},me=function(F,B,H,W,oe,de,ue,ge){this.pdf.internal.out([i(r(H+F)),i(s(W+B)),i(r(oe+F)),i(s(de+B)),i(r(ue+F)),i(s(ge+B)),"c"].join(" "))},he=function(F,B,H,W){for(var oe=2*Math.PI,de=Math.PI/2;B>H;)B-=oe;var ue=Math.abs(H-B);ue<oe&&W&&(ue=oe-ue);for(var ge=[],Le=W?-1:1,Pe=B;ue>1e-5;){var We=Pe+Le*Math.min(ue,de);ge.push(we.call(this,F,Pe,We)),ue-=Math.abs(We-Pe),Pe=We}return ge},we=function(F,B,H){var W=(H-B)/2,oe=F*Math.cos(W),de=F*Math.sin(W),ue=oe,ge=-de,Le=ue*ue+ge*ge,Pe=Le+ue*oe+ge*de,We=4/3*(Math.sqrt(2*Le*Pe)-Pe)/(ue*de-ge*oe),qe=ue-We*ge,gt=ge+We*ue,Se=qe,q=-gt,St=W+B,tt=Math.cos(St),Me=Math.sin(St);return{x1:F*Math.cos(B),y1:F*Math.sin(B),x2:qe*tt-gt*Me,y2:qe*Me+gt*tt,x3:Se*tt-q*Me,y3:Se*Me+q*tt,x4:F*Math.cos(H),y4:F*Math.sin(H)}},ce=function(F){return 180*F/Math.PI},be=function(F,B,H,W,oe,de){var ue=F+.5*(H-F),ge=B+.5*(W-B),Le=oe+.5*(H-oe),Pe=de+.5*(W-de),We=Math.min(F,oe,ue,Le),qe=Math.max(F,oe,ue,Le),gt=Math.min(B,de,ge,Pe),Se=Math.max(B,de,ge,Pe);return new l(We,gt,qe-We,Se-gt)},xe=function(F,B,H,W,oe,de,ue,ge){var Le,Pe,We,qe,gt,Se,q,St,tt,Me,Be,Ye,Ve,st,wt=H-F,At=W-B,Dt=oe-H,Ot=de-W,Qt=ue-oe,ft=ge-de;for(Pe=0;Pe<41;Pe++)tt=(q=(We=F+(Le=Pe/40)*wt)+Le*((gt=H+Le*Dt)-We))+Le*(gt+Le*(oe+Le*Qt-gt)-q),Me=(St=(qe=B+Le*At)+Le*((Se=W+Le*Ot)-qe))+Le*(Se+Le*(de+Le*ft-Se)-St),0==Pe?(Be=tt,Ye=Me,Ve=tt,st=Me):(Be=Math.min(Be,tt),Ye=Math.min(Ye,Me),Ve=Math.max(Ve,tt),st=Math.max(st,Me));return new l(Math.round(Be),Math.round(Ye),Math.round(Ve-Be),Math.round(st-Ye))},je=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var H=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(dt.API),
/**
       * @license
       * jsPDF filters PlugIn
       * Copyright (c) 2014 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){var i=function(s){var a,l,c,d,h,g,m,f,y,b;for(/[^\x00-\xFF]/.test(s),l=[],c=0,d=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;d>c;c+=4)0!==(h=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))?(g=(h=((h=((h=((h=(h-(b=h%85))/85)-(y=h%85))/85)-(f=h%85))/85)-(m=h%85))/85)%85,l.push(g+33,m+33,f+33,y+33,b+33)):l.push(122);return function(S,_){for(var k=_;k>0;k--)S.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},t=function(s){var a,l,c,d,h,g=String,m="length",f=255,y="charCodeAt",b="slice",S="replace";for(s[b](-2),s=s[b](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),c=[],d=0,h=(s+=a="uuuuu"[b](s[m]%5||5))[m];h>d;d+=5)l=52200625*(s[y](d)-33)+614125*(s[y](d+1)-33)+7225*(s[y](d+2)-33)+85*(s[y](d+3)-33)+(s[y](d+4)-33),c.push(f&l>>24,f&l>>16,f&l>>8,f&l);return function(_,k){for(var E=k;E>0;E--)_.pop()}(c,a[m]),g.fromCharCode.apply(g,c)},o=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(s=s.replace(/\s/g,"")).indexOf(">")&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),!1===a.test(s))return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},r=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return(a=kl(a)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,a){var l=0,c=s||"",d=[];for("string"==typeof(a=a||[])&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=i(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=o(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=r(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(dt.API),
/**
       * @license
       * jsPDF fileloading PlugIn
       * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){e.loadFile=function(i,t,o){return function(r,s,a){s=!1!==s,a="function"==typeof a?a:function(){};var l=void 0;try{l=function(c,d,h){var g=new XMLHttpRequest,m=0,f=function(y){var b=y.length,S=[],_=String.fromCharCode;for(m=0;m<b;m+=1)S.push(_(255&y.charCodeAt(m)));return S.join("")};if(g.open("GET",c,!d),g.overrideMimeType("text/plain; charset=x-user-defined"),!1===d&&(g.onload=function(){h(200===g.status?f(this.responseText):void 0)}),g.send(null),d&&200===g.status)return f(g.responseText)}(r,s,a)}catch{}return l}(i,t,o)},e.loadImageFile=e.loadFile}(dt.API),function(e){function i(){return(ht.html2canvas?Promise.resolve(ht.html2canvas):Oe.e(456).then(Oe.t.bind(Oe,4456,23))).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(ht.DOMPurify?Promise.resolve(ht.DOMPurify):Oe.e(896).then(Oe.t.bind(Oe,896,23))).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var o=function(a){var l=jt(a);return"undefined"===l?"undefined":"string"===l||a instanceof String?"string":"number"===l||a instanceof Number?"number":"function"===l||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&1===a.nodeType?"element":"object"===l?"object":"unknown"},r=function(a,l){var c=document.createElement(a);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),c);return(d=d.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(o(c)){case"string":return"string";case"element":return"canvas"===c.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:r("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,h){for(var g=3===d.nodeType?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)!0!==h&&1===m.nodeType&&"SCRIPT"===m.nodeName||g.appendChild(c(m,h));return 1===d.nodeType&&("CANVAS"===d.nodeName?(g.width=d.width,g.height=d.height,g.getContext("2d").drawImage(d,0,0)):"TEXTAREA"!==d.nodeName&&"SELECT"!==d.nodeName||(g.value=d.value),g.addEventListener("load",function(){g.scrollTop=d.scrollTop,g.scrollLeft=d.scrollLeft},!0)),g}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===l.tagName&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(i).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(i).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,h="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var f=d[m],y=f.src.find(function(b){return"truetype"===b.format});y&&c.addFont(y.url,f.ref.name,f.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=0==g.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return"img"===(c=c||"pdf").toLowerCase()||"image"===c.toLowerCase()?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if("object"!==o(a))return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(o(a)){case"number":a=[a,a,a,a];case"array":if(2===a.length&&(a=[a[0],a[1],a[0],a[1]]),4===a.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(a=a||dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,d){return null!=a&&(this.progress.val=a),null!=l&&(this.progress.state=l),null!=c&&(this.progress.n=c),null!=d&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,d){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(d,h){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,d),g}).then(d,h).then(function(g){return c.updateProgress(1),g})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var d=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),h=c.call(d,a,l);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,dt.getPageSize=function(a,l,c){if("object"===jt(a)){var d=a;a=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var h,g=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+l}var f,y=0,b=0;if(m.hasOwnProperty(g))y=m[g][1]/h,b=m[g][0]/h;else try{y=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if("p"===a||"portrait"===a)a="p",b>y&&(f=b,b=y,y=f);else{if("l"!==a&&"landscape"!==a)throw"Invalid orientation: "+a;a="l",y>b&&(f=b,b=y,y=f)}return{width:b,height:y,unit:l,k:h,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(ep):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}}(dt.API),dt.API.addJS=function(e){return l0=e,this.internal.events.subscribe("postPutResources",function(){Dd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Dd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),a0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+l0+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Dd&&void 0!==a0&&this.internal.out("/Names <</JavaScript "+Dd+" 0 R>>")}),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){var i;e.events.push(["postPutResources",function(){var t=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),s=0;s<r.length;s++){var a=r[s],l=o.exec(a);null!=l&&t.internal.newObjectDeferredBegin(l[1],!1),t.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,h=[];for(s=0;s<d;s++){var g=t.internal.newObject();h.push(g);var m=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<h.length;s++)t.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");t.internal.write(" ] >>","endobj"),i=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+i+" 0 R"))}]),e.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(o,r,s){var a={title:r,options:s,children:[]};return null==o&&(o=this.root),o.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(o){o.id=t.internal.newObjectDeferred();for(var r=0;r<o.children.length;r++)this.genIds_r(o.children[r])},t.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},t.outline.renderItems=function(o){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<o.children.length;s++){var a=o.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(o)),s>0&&this.line("/Prev "+this.makeRef(o.children[s-1])),s<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var d=0;d<o.children.length;d++)this.renderItems(o.children[d])},t.outline.line=function(o){this.ctx.val+=o+"\r\n"},t.outline.makeRef=function(o){return o.id+" 0 R"},t.outline.makeString=function(o){return"("+t.internal.pdfEscape(o)+")"},t.outline.objStart=function(o){this.ctx.val+="\r\n"+o.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(o,r){for(var s=0;s<r.children.length;s++)o.count++,this.count_r(o,r.children[s]);return o.count}}])}(dt.API),
/**
       * @license
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){var i=[192,193,194,195,196,197,198,199];e.processJPEG=function(t,o,r,s,a,l){var c,d=this.decode.DCT_DECODE,h=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=this.__addimage__.isArrayBuffer(t=a||t)?new Uint8Array(t):t,(c=function(g){for(var m,f=256*g.charCodeAt(4)+g.charCodeAt(5),y=g.length,b={width:0,height:0,numcomponents:1},S=4;S<y;S+=2){if(-1!==i.indexOf(g.charCodeAt((S+=f)+1))){m=256*g.charCodeAt(S+5)+g.charCodeAt(S+6),b={width:256*g.charCodeAt(S+7)+g.charCodeAt(S+8),height:m,numcomponents:g.charCodeAt(S+9)};break}f=256*g.charCodeAt(S+2)+g.charCodeAt(S+3)}return b}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:t,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:o,alias:r}}return h}}(dt.API);var ma,Fd,c0,d0,u0,cF=function(){var e,i,t;function o(s){var a,c,d,h,g,m,f,y,b,S,_,k,E;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(a=this.readUInt32(),y=function(){var G,K;for(K=[],G=0;G<4;++G)K.push(String.fromCharCode(this.data[this.pos++]));return K}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),d=this.readUInt16()||100,g.delay=1e3*h/d,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for("fdAT"===y&&(this.pos+=4,a-=4),s=g?.data||this.imgData,_=0;0<=a?_<a:_>a;0<=a?++_:--_)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((b=c-this.transparency.indexed.length)>0)for(k=0;0<=b?k<b:k>b;0<=b?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(S=this.read(a)).indexOf(0),f=String.fromCharCode.apply(String,S.slice(0,m)),this.text[f]=String.fromCharCode.apply(String,S.slice(m+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(E=this.colorType)||6===E,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}o.prototype.read=function(s){var a,l;for(l=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)l.push(this.data[this.pos++]);return l},o.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),c=0,d=this;if(null==s&&(s=this.imgData),0===s.length)return new Uint8Array(0);function h(g,m,f,y){var b,S,_,k,E,G,K,ne,N,X,ve,L,I,Y,z,me,he,we,ce,be,xe=Math.ceil((d.width-g)/f),je=Math.ceil((d.height-m)/y),F=d.width==xe&&d.height==je;for(I=a*xe,ve=F?l:new Uint8Array(I*je),G=s.length,L=0,S=0;L<je&&c<G;){switch(s[c++]){case 0:for(k=me=0;me<I;k=me+=1)ve[S++]=s[c++];break;case 1:for(k=he=0;he<I;k=he+=1)b=s[c++],E=k<a?0:ve[S-a],ve[S++]=(b+E)%256;break;case 2:for(k=we=0;we<I;k=we+=1)b=s[c++],_=(k-k%a)/a,ve[S++]=((Y=L&&ve[(L-1)*I+_*a+k%a])+b)%256;break;case 3:for(k=ce=0;ce<I;k=ce+=1)b=s[c++],_=(k-k%a)/a,E=k<a?0:ve[S-a],Y=L&&ve[(L-1)*I+_*a+k%a],ve[S++]=(b+Math.floor((E+Y)/2))%256;break;case 4:for(k=be=0;be<I;k=be+=1)b=s[c++],_=(k-k%a)/a,0===L?Y=z=0:(Y=ve[(L-1)*I+_*a+k%a],z=_&&ve[(L-1)*I+(_-1)*a+k%a]),K=(E=k<a?0:ve[S-a])+Y-z,ne=Math.abs(K-E),N=Math.abs(K-Y),X=Math.abs(K-z),ve[S++]=(b+(ne<=N&&ne<=X?E:N<=X?Y:z))%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!F){var B=((m+L*y)*d.width+g)*a,H=L*I;for(k=0;k<xe;k+=1){for(var W=0;W<a;W+=1)l[B++]=ve[H++];B+=(f-1)*a}}L++}}return s=fd(s),1==d.interlaceMethod?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),l},o.prototype.decodePalette=function(){var s,a,l,c,d,h,g,m,f;for(l=this.palette,h=this.transparency.indexed||[],d=new Uint8Array((h.length||0)+l.length),c=0,s=0,a=g=0,m=l.length;g<m;a=g+=3)d[c++]=l[a],d[c++]=l[a+1],d[c++]=l[a+2],d[c++]=null!=(f=h[s++])?f:255;return d},o.prototype.copyToImageData=function(s,a){var l,c,d,h,g,m,f,y,b,S,_;if(c=this.colors,b=null,l=this.hasAlphaChannel,this.palette.length&&(b=null!=(_=this._decodedPalette)?_:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(d=s.data||s).length,g=b||a,h=m=0,1===c)for(;h<y;)f=b?4*a[h/4]:m,S=g[f++],d[h++]=S,d[h++]=S,d[h++]=S,d[h++]=l?g[f++]:255,m=f;else for(;h<y;)f=b?4*a[h/4]:m,d[h++]=g[f++],d[h++]=g[f++],d[h++]=g[f++],d[h++]=l?g[f++]:255,m=f},o.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var r=function(){if("[object Window]"===Object.prototype.toString.call(ht)){try{i=ht.document.createElement("canvas"),t=i.getContext("2d")}catch{return!1}return!0}return!1};return r(),e=function(s){var a;if(!0===r())return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=i.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},o.prototype.decodeFrames=function(s){var a,l,c,d,h,g,m,f;if(this.animation){for(f=[],l=h=0,g=(m=this.animation.frames).length;h<g;l=++h)c=s.createImageData((a=m[l]).width,a.height),d=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,d),a.imageData=c,f.push(a.image=e(c));return f}},o.prototype.renderFrame=function(s,a){var l,c,d;return l=(c=this.animation.frames)[a],d=c[a-1],0===a&&s.clearRect(0,0,this.width,this.height),1===d?.disposeOp?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):2===d?.disposeOp&&s.putImageData(d.imageData,d.xOffset,d.yOffset),0===l.blendOp&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},o.prototype.animate=function(s){var a,l,c,d,h,g,m=this;return l=0,d=(g=this.animation).numFrames,c=g.frames,h=g.numPlays,(a=function(){var f,y;if(f=l++%d,y=c[f],m.renderFrame(s,f),d>1&&l/d<h)return m.animation._timeout=setTimeout(a,y.delay)})()},o.prototype.stopAnimation=function(){var s;return clearTimeout(null!=(s=this.animation)?s._timeout:void 0)},o.prototype.render=function(s){var a,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},o}();function dF(e){var i=0;if(71!==e[i++]||73!==e[i++]||70!==e[i++]||56!==e[i++]||56!=(e[i++]+1&253)||97!==e[i++])throw new Error("Invalid GIF 87a/89a header.");var t=e[i++]|e[i++]<<8,o=e[i++]|e[i++]<<8,r=e[i++],a=1<<1+(7&r);i++,i++;var l=null,c=null;r>>7&&(l=i,c=a,i+=3*a);var d=!0,h=[],g=0,m=null,f=0,y=null;for(this.width=t,this.height=o;d&&i<e.length;)switch(e[i++]){case 33:switch(e[i++]){case 255:if(11!==e[i]||78==e[i+1]&&69==e[i+2]&&84==e[i+3]&&83==e[i+4]&&67==e[i+5]&&65==e[i+6]&&80==e[i+7]&&69==e[i+8]&&50==e[i+9]&&46==e[i+10]&&48==e[i+11]&&3==e[i+12]&&1==e[i+13]&&0==e[i+16])i+=14,y=e[i++]|e[i++]<<8,i++;else for(i+=12;;){if(!((L=e[i++])>=0))throw Error("Invalid block size");if(0===L)break;i+=L}break;case 249:if(4!==e[i++]||0!==e[i+4])throw new Error("Invalid graphics extension block.");var b=e[i++];g=e[i++]|e[i++]<<8,m=e[i++],!(1&b)&&(m=null),f=b>>2&7,i++;break;case 254:for(;;){if(!((L=e[i++])>=0))throw Error("Invalid block size");if(0===L)break;i+=L}break;default:throw new Error("Unknown graphic control label: 0x"+e[i-1].toString(16))}break;case 44:var S=e[i++]|e[i++]<<8,_=e[i++]|e[i++]<<8,k=e[i++]|e[i++]<<8,E=e[i++]|e[i++]<<8,G=e[i++],K=G>>6&1,ne=1<<1+(7&G),V=l,N=c,X=!1;G>>7&&(X=!0,V=i,N=ne,i+=3*ne);var ve=i;for(i++;;){var L;if(!((L=e[i++])>=0))throw Error("Invalid block size");if(0===L)break;i+=L}h.push({x:S,y:_,width:k,height:E,has_local_palette:X,palette_offset:V,palette_size:N,data_offset:ve,data_length:i-ve,transparent_index:m,interlaced:!!K,delay:g,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[i-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return y},this.frameInfo=function(I){if(I<0||I>=h.length)throw new Error("Frame index out of range.");return h[I]},this.decodeAndBlitFrameBGRA=function(I,Y){var z=this.frameInfo(I),me=z.width*z.height,he=new Uint8Array(me);h0(e,z.data_offset,he,me);var we=z.palette_offset,ce=z.transparent_index;null===ce&&(ce=256);var be=z.width,xe=t-be,je=be,F=4*(z.y*t+z.x),B=4*((z.y+z.height)*t+z.x),H=F,W=4*xe;!0===z.interlaced&&(W+=4*t*7);for(var oe=8,de=0,ue=he.length;de<ue;++de){var ge=he[de];if(0===je&&(je=be,(H+=W)>=B&&(W=4*xe+4*t*(oe-1),H=F+(be+xe)*(oe<<1),oe>>=1)),ge===ce)H+=4;else{var Le=e[we+3*ge],Pe=e[we+3*ge+1];Y[H++]=e[we+3*ge+2],Y[H++]=Pe,Y[H++]=Le,Y[H++]=255}--je}},this.decodeAndBlitFrameRGBA=function(I,Y){var z=this.frameInfo(I),me=z.width*z.height,he=new Uint8Array(me);h0(e,z.data_offset,he,me);var we=z.palette_offset,ce=z.transparent_index;null===ce&&(ce=256);var be=z.width,xe=t-be,je=be,F=4*(z.y*t+z.x),B=4*((z.y+z.height)*t+z.x),H=F,W=4*xe;!0===z.interlaced&&(W+=4*t*7);for(var oe=8,de=0,ue=he.length;de<ue;++de){var ge=he[de];if(0===je&&(je=be,(H+=W)>=B&&(W=4*xe+4*t*(oe-1),H=F+(be+xe)*(oe<<1),oe>>=1)),ge===ce)H+=4;else{var Pe=e[we+3*ge+1],We=e[we+3*ge+2];Y[H++]=e[we+3*ge],Y[H++]=Pe,Y[H++]=We,Y[H++]=255}--je}}}function h0(e,i,t,o){for(var r=e[i++],s=1<<r,a=s+1,l=a+1,c=r+1,d=(1<<c)-1,h=0,g=0,m=0,f=e[i++],y=new Int32Array(4096),b=null;;){for(;h<16&&0!==f;)g|=e[i++]<<h,h+=8,1===f?f=e[i++]:--f;if(h<c)break;var S=g&d;if(g>>=c,h-=c,S!==s){if(S===a)break;for(var _=S<l?S:b,k=0,E=_;E>s;)E=y[E]>>8,++k;var G=E;if(m+k+(_!==S?1:0)>o)return void ei.log("Warning, gif stream longer than expected.");t[m++]=G;var K=m+=k;for(_!==S&&(t[m++]=G),E=_;k--;)t[--K]=255&(E=y[E]),E>>=8;null!==b&&l<4096&&(y[l++]=b<<8|G,l>=d+1&&c<12&&(++c,d=d<<1|1)),b=S}else l=a+1,d=(1<<(c=r+1))-1,b=null}return m!==o&&ei.log("Warning, gif stream shorter than expected."),t}function ip(e){var i,t,o,r,s,a=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),h=new Array(64),g=new Array(65535),m=new Array(65535),f=new Array(64),y=new Array(64),b=[],S=0,_=7,k=new Array(64),E=new Array(64),G=new Array(64),K=new Array(256),ne=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],ve=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],me=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(F,B){for(var H=0,W=0,oe=new Array,de=1;de<=16;de++){for(var ue=1;ue<=F[de];ue++)oe[B[W]]=[],oe[B[W]][0]=H,oe[B[W]][1]=de,W++,H++;H*=2}return oe}function we(F){for(var B=F[0],H=F[1]-1;H>=0;)B&1<<H&&(S|=1<<_),H--,--_<0&&(255==S?(ce(255),ce(0)):ce(S),_=7,S=0)}function ce(F){b.push(F)}function be(F){ce(F>>8&255),ce(255&F)}function xe(F,B,H,W,oe){for(var de,ue=oe[0],ge=oe[240],Le=function(Me,Be){var Ye,Ve,st,wt,At,Dt,Ot,Qt,ft,Ft,$e=0;for(ft=0;ft<8;++ft){var hn=(Ye=Me[$e])+(Qt=Me[$e+7]),Zt=Ye-Qt,xo=(Ve=Me[$e+1])+(Ot=Me[$e+6]),ti=Ve-Ot,fi=(st=Me[$e+2])+(Dt=Me[$e+5]),Uo=st-Dt,zt=(wt=Me[$e+3])+(At=Me[$e+4]),bs=wt-At,bi=hn+zt,Ao=hn-zt,hr=xo+fi,Si=xo-fi;Me[$e]=bi+hr,Me[$e+4]=bi-hr;var yt=.707106781*(Si+Ao);Me[$e+2]=Ao+yt,Me[$e+6]=Ao-yt;var Vt=.382683433*((bi=bs+Uo)-(Si=ti+Zt)),Ss=.5411961*bi+Vt,Xi=1.306562965*Si+Vt,Wo=.707106781*(hr=Uo+ti),jo=Zt+Wo,ut=Zt-Wo;Me[$e+5]=ut+Ss,Me[$e+3]=ut-Ss,Me[$e+1]=jo+Xi,Me[$e+7]=jo-Xi,$e+=8}for($e=0,ft=0;ft<8;++ft){var ko=(Ye=Me[$e])+(Qt=Me[$e+56]),Yo=Ye-Qt,Ln=(Ve=Me[$e+8])+(Ot=Me[$e+48]),qi=Ve-Ot,Bi=(st=Me[$e+16])+(Dt=Me[$e+40]),zn=st-Dt,wa=(wt=Me[$e+24])+(At=Me[$e+32]),gr=wt-At,To=ko+wa,Do=ko-wa,Fo=Ln+Bi,$o=Ln-Bi;Me[$e]=To+Fo,Me[$e+32]=To-Fo;var no=.707106781*($o+Do);Me[$e+16]=Do+no,Me[$e+48]=Do-no;var Jo=.382683433*((To=gr+zn)-($o=qi+Yo)),_s=.5411961*To+Jo,ya=1.306562965*$o+Jo,ba=.707106781*(Fo=zn+qi),Sa=Yo+ba,_a=Yo-ba;Me[$e+40]=_a+_s,Me[$e+24]=_a-_s,Me[$e+8]=Sa+ya,Me[$e+56]=Sa-ya,$e++}for(ft=0;ft<64;++ft)f[ft]=(Ft=Me[ft]*Be[ft])>0?Ft+.5|0:Ft-.5|0;return f}(F,B),Pe=0;Pe<64;++Pe)y[V[Pe]]=Le[Pe];var We=y[0]-H;H=y[0],0==We?we(W[0]):(we(W[m[de=32767+We]]),we(g[de]));for(var qe=63;qe>0&&0==y[qe];)qe--;if(0==qe)return we(ue),H;for(var gt,Se=1;Se<=qe;){for(var q=Se;0==y[Se]&&Se<=qe;)++Se;var St=Se-q;if(St>=16){gt=St>>4;for(var tt=1;tt<=gt;++tt)we(ge);St&=15}we(oe[(St<<4)+m[de=32767+y[Se]]]),we(g[de]),Se++}return 63!=qe&&we(ue),H}function je(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(B){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var oe=a((H[W]*B+50)/100);oe=Math.min(Math.max(oe,1),255),l[V[W]]=oe}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var ge=a((de[ue]*B+50)/100);ge=Math.min(Math.max(ge,1),255),c[V[ue]]=ge}for(var Le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,We=0;We<8;We++)for(var qe=0;qe<8;qe++)d[Pe]=1/(l[V[Pe]]*Le[We]*Le[qe]*8),h[Pe]=1/(c[V[Pe]]*Le[We]*Le[qe]*8),Pe++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,B){var Ve,st;B&&je(B),b=new Array,S=0,_=7,be(65496),be(65504),be(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),be(1),be(1),ce(0),ce(0),function(){be(65499),be(132),ce(0);for(var Ve=0;Ve<64;Ve++)ce(l[Ve]);ce(1);for(var st=0;st<64;st++)ce(c[st])}(),Ve=F.width,st=F.height,be(65472),be(17),ce(8),be(st),be(Ve),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1),function(){be(65476),be(418),ce(0);for(var Ve=0;Ve<16;Ve++)ce(N[Ve+1]);for(var st=0;st<=11;st++)ce(X[st]);ce(16);for(var wt=0;wt<16;wt++)ce(ve[wt+1]);for(var At=0;At<=161;At++)ce(L[At]);ce(1);for(var Dt=0;Dt<16;Dt++)ce(I[Dt+1]);for(var Ot=0;Ot<=11;Ot++)ce(Y[Ot]);ce(17);for(var Qt=0;Qt<16;Qt++)ce(z[Qt+1]);for(var ft=0;ft<=161;ft++)ce(me[ft])}(),be(65498),be(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var H=0,W=0,oe=0;S=0,_=7,this.encode.displayName="_encode_";for(var de,ue,ge,Le,Pe,We,qe,gt,Se,q=F.data,tt=F.height,Me=4*F.width,Be=0;Be<tt;){for(de=0;de<Me;){for(Pe=Me*Be+de,qe=-1,gt=0,Se=0;Se<64;Se++)We=Pe+(gt=Se>>3)*Me+(qe=4*(7&Se)),Be+gt>=tt&&(We-=Me*(Be+1+gt-tt)),de+qe>=Me&&(We-=de+qe-Me+4),ue=q[We++],ge=q[We++],Le=q[We++],k[Se]=(ne[ue]+ne[ge+256>>0]+ne[Le+512>>0]>>16)-128,E[Se]=(ne[ue+768>>0]+ne[ge+1024>>0]+ne[Le+1280>>0]>>16)-128,G[Se]=(ne[ue+1280>>0]+ne[ge+1536>>0]+ne[Le+1792>>0]>>16)-128;H=xe(k,d,H,i,o),W=xe(E,h,W,t,r),oe=xe(G,h,oe,t,r),de+=32}Be+=8}if(_>=0){var Ye=[];Ye[1]=_+1,Ye[0]=(1<<_+1)-1,we(Ye)}return be(65497),new Uint8Array(b)},e=e||50,function(){for(var F=String.fromCharCode,B=0;B<256;B++)K[B]=F(B)}(),i=he(N,X),t=he(I,Y),o=he(ve,L),r=he(z,me),function(){for(var F=1,B=2,H=1;H<=15;H++){for(var W=F;W<B;W++)m[32767+W]=H,g[32767+W]=[],g[32767+W][1]=H,g[32767+W][0]=W;for(var oe=-(B-1);oe<=-F;oe++)m[32767+oe]=H,g[32767+oe]=[],g[32767+oe][1]=H,g[32767+oe][0]=B-1+oe;F<<=1,B<<=1}}(),function(){for(var F=0;F<256;F++)ne[F]=19595*F,ne[F+256>>0]=38470*F,ne[F+512>>0]=7471*F+32768,ne[F+768>>0]=-11059*F,ne[F+1024>>0]=-21709*F,ne[F+1280>>0]=32768*F+8421375,ne[F+1536>>0]=-27439*F,ne[F+1792>>0]=-5329*F}(),je(e)}function So(e,i){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!i,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function g0(e){function i(N){if(!N)throw Error("assert :P")}function t(N,X,ve){for(var L=0;4>L;L++)if(N[X+L]!=ve.charCodeAt(L))return!0;return!1}function o(N,X,ve,L,I){for(var Y=0;Y<I;Y++)N[X+Y]=ve[L+Y]}function r(N,X,ve,L){for(var I=0;I<L;I++)N[X+I]=ve}function s(N){return new Int32Array(N)}function a(N,X){for(var ve=[],L=0;L<N;L++)ve.push(new X);return ve}function l(N,X){var ve=[];return function L(I,Y,z){for(var me=z[Y],he=0;he<me&&(I.push(z.length>Y+1?[]:new X),!(z.length<Y+1));he++)L(I[he],Y+1,z)}(ve,0,N),ve}var c=function(){var N=this;function X(u,p){for(var C=1<<p-1>>>0;u&C;)C>>>=1;return C?(u&C-1)+C:u}function ve(u,p,C,w,x){i(!(w%C));do{u[p+(w-=C)]=x}while(0<w)}function L(u,p,C,w,x){if(i(2328>=x),512>=x)var T=s(512);else if(null==(T=s(x)))return 0;return function(D,R,P,O,j,se){var ae,ie,Te=R,Ce=1<<P,J=s(16),Q=s(16);for(i(0!=j),i(null!=O),i(null!=D),i(0<P),ie=0;ie<j;++ie){if(15<O[ie])return 0;++J[O[ie]]}if(J[0]==j)return 0;for(Q[1]=0,ae=1;15>ae;++ae){if(J[ae]>1<<ae)return 0;Q[ae+1]=Q[ae]+J[ae]}for(ie=0;ie<j;++ie)ae=O[ie],0<O[ie]&&(se[Q[ae]++]=ie);if(1==Q[15])return(O=new I).g=0,O.value=se[0],ve(D,Te,1,Ce,O),Ce;var Ae,De=-1,ke=Ce-1,Ke=0,Ze=1,ct=1,ze=1<<P;for(ie=0,ae=1,j=2;ae<=P;++ae,j<<=1){if(Ze+=ct<<=1,0>(ct-=J[ae]))return 0;for(;0<J[ae];--J[ae])(O=new I).g=ae,O.value=se[ie++],ve(D,Te+Ke,j,ze,O),Ke=X(Ke,ae)}for(ae=P+1,j=2;15>=ae;++ae,j<<=1){if(Ze+=ct<<=1,0>(ct-=J[ae]))return 0;for(;0<J[ae];--J[ae]){if(O=new I,(Ke&ke)!=De){for(Te+=ze,Ae=1<<(De=ae)-P;15>De&&!(0>=(Ae-=J[De]));)++De,Ae<<=1;Ce+=ze=1<<(Ae=De-P),D[R+(De=Ke&ke)].g=Ae+P,D[R+De].value=Te-R-De}O.g=ae-P,O.value=se[ie++],ve(D,Te+(Ke>>P),j,ze,O),Ke=X(Ke,ae)}}return Ze!=2*Q[15]-1?0:Ce}(u,p,C,w,x,T)}function I(){this.value=this.g=0}function Y(){this.value=this.g=0}function z(){this.G=a(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(en,Y)}function me(u,p,C,w){i(null!=u),i(null!=p),i(2147483648>w),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=p,u.pa=C,u.Jd=p,u.Yc=C+w,u.Zc=4<=w?C+w-4+1:C,de(u)}function he(u,p){for(var C=0;0<p--;)C|=ge(u,128)<<p;return C}function we(u,p){var C=he(u,p);return ue(u)?-C:C}function ce(u,p,C,w){var x,T=0;for(i(null!=u),i(null!=p),i(4294967288>w),u.Sb=w,u.Ra=0,u.u=0,u.h=0,4<w&&(w=4),x=0;x<w;++x)T+=p[C+x]<<8*x;u.Ra=T,u.bb=w,u.oa=p,u.pa=C}function be(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Ba-8>>>0,++u.bb,u.u-=8;H(u)&&(u.h=1,u.u=0)}function xe(u,p){if(i(0<=p),!u.h&&p<=Na){var C=B(u)&Oa[p];return u.u+=p,be(u),C}return u.h=1,u.u=0}function je(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(u){return u.Ra>>>(u.u&Ba-1)>>>0}function H(u){return i(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Ba}function W(u,p){u.u=p,u.h=H(u)}function oe(u){u.u>=Ql&&(i(u.u>=Ql),be(u))}function de(u){i(null!=u&&null!=u.oa),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(i(null!=u&&null!=u.oa),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ue(u){return he(u,1)}function ge(u,p){var C=u.Ca;0>u.b&&de(u);var w=u.b,x=C*p>>>8,T=(u.I>>>w>x)+0;for(T?(C-=x,u.I-=x+1<<w>>>0):C=x+1,w=C,x=0;256<=w;)x+=8,w>>=8;return u.b-=w=7^x+On[w],u.Ca=(C<<w)-1,T}function Le(u,p,C){u[p+0]=C>>24&255,u[p+1]=C>>16&255,u[p+2]=C>>8&255,u[p+3]=C>>0&255}function Pe(u,p){return u[p+0]<<0|u[p+1]<<8}function We(u,p){return Pe(u,p)|u[p+2]<<16}function qe(u,p){return Pe(u,p)|Pe(u,p+2)<<16}function gt(u,p){var C=1<<p;return i(null!=u),i(0<p),u.X=s(C),null==u.X?0:(u.Mb=32-p,u.Xa=p,1)}function Se(u,p){i(null!=u),i(null!=p),i(u.Xa==p.Xa),o(p.X,0,u.X,0,1<<p.Xa)}function q(){this.X=[],this.Xa=this.Mb=0}function St(u,p,C,w){i(null!=C),i(null!=w);var x=C[0],T=w[0];return 0==x&&(x=(u*T+p/2)/p),0==T&&(T=(p*x+u/2)/u),0>=x||0>=T?0:(C[0]=x,w[0]=T,1)}function tt(u,p){return u+(1<<p)-1>>>p}function Me(u,p){return((4278255360&u)+(4278255360&p)>>>0&4278255360)+((16711935&u)+(16711935&p)>>>0&16711935)>>>0}function Be(u,p){N[p]=function(C,w,x,T,D,R,P){var O;for(O=0;O<D;++O){var j=N[u](R[P+O-1],x,T+O);R[P+O]=Me(C[w+O],j)}}}function Ye(){this.ud=this.hd=this.jd=0}function Ve(u,p){return((4278124286&(u^p))>>>1)+(u&p)>>>0}function st(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function wt(u,p){return st(u+(u-p+.5>>1))}function At(u,p,C){return Math.abs(p-C)-Math.abs(u-C)}function Dt(u,p,C,w,x,T,D){for(w=T[D-1],C=0;C<x;++C)T[D+C]=w=Me(u[p+C],w)}function Ot(u,p,C,w,x){var T;for(T=0;T<C;++T){var D=u[p+T],R=D>>8&255,P=16711935&(P=(P=16711935&D)+((R<<16)+R));w[x+T]=(4278255360&D)+P>>>0}}function Qt(u,p){p.jd=u>>0&255,p.hd=u>>8&255,p.ud=u>>16&255}function ft(u,p,C,w,x,T){var D;for(D=0;D<w;++D){var R=p[C+D],P=R>>>8,O=R,j=255&(j=(j=R>>>16)+((u.jd<<24>>24)*(P<<24>>24)>>>5));O=255&(O=(O+=(u.hd<<24>>24)*(P<<24>>24)>>>5)+((u.ud<<24>>24)*(j<<24>>24)>>>5)),x[T+D]=(4278255360&R)+(j<<16)+O}}function Ft(u,p,C,w,x){N[p]=function(T,D,R,P,O,j,se,ae,ie){for(P=se;P<ae;++P)for(se=0;se<ie;++se)O[j++]=x(R[w(T[D++])])},N[u]=function(T,D,R,P,O,j,se){var ae=8>>T.b,ie=T.Ea,Te=T.K[0],Ce=T.w;if(8>ae)for(T=(1<<T.b)-1,Ce=(1<<ae)-1;D<R;++D){var J,Q=0;for(J=0;J<ie;++J)J&T||(Q=w(P[O++])),j[se++]=x(Te[Q&Ce]),Q>>=ae}else N["VP8LMapColor"+C](P,O,Te,Ce,j,se,D,R,ie)}}function $e(u,p,C,w,x){for(C=p+C;p<C;){var T=u[p++];w[x++]=T>>16&255,w[x++]=T>>8&255,w[x++]=T>>0&255}}function hn(u,p,C,w,x){for(C=p+C;p<C;){var T=u[p++];w[x++]=T>>16&255,w[x++]=T>>8&255,w[x++]=T>>0&255,w[x++]=T>>24&255}}function Zt(u,p,C,w,x){for(C=p+C;p<C;){var T=(D=u[p++])>>16&240|D>>12&15,D=D>>0&240|D>>28&15;w[x++]=T,w[x++]=D}}function xo(u,p,C,w,x){for(C=p+C;p<C;){var T=(D=u[p++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;w[x++]=T,w[x++]=D}}function ti(u,p,C,w,x){for(C=p+C;p<C;){var T=u[p++];w[x++]=T>>0&255,w[x++]=T>>8&255,w[x++]=T>>16&255}}function fi(u,p,C,w,x,T){if(0==T)for(C=p+C;p<C;)Le(w,((T=u[p++])[0]>>24|T[1]>>8&65280|T[2]<<8&16711680|T[3]<<24)>>>0),x+=32;else o(w,x,u,p,C)}function Uo(u,p){N[p][0]=N[u+"0"],N[p][1]=N[u+"1"],N[p][2]=N[u+"2"],N[p][3]=N[u+"3"],N[p][4]=N[u+"4"],N[p][5]=N[u+"5"],N[p][6]=N[u+"6"],N[p][7]=N[u+"7"],N[p][8]=N[u+"8"],N[p][9]=N[u+"9"],N[p][10]=N[u+"10"],N[p][11]=N[u+"11"],N[p][12]=N[u+"12"],N[p][13]=N[u+"13"],N[p][14]=N[u+"0"],N[p][15]=N[u+"0"]}function zt(u){return u==Zp||u==Gp||u==du||u==Hp}function bs(){this.eb=[],this.size=this.A=this.fb=0}function bi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ao(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new bs,this.f.kb=new bi,this.sd=null}function hr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Si(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yt(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Vt(u,p){var C=u.T,w=p.ba.f.RGBA,x=w.eb,T=w.fb+u.ka*w.A,D=co[p.ba.S],R=u.y,P=u.O,O=u.f,j=u.N,se=u.ea,ae=u.W,ie=p.cc,Te=p.dc,Ce=p.Mc,J=p.Nc,Q=u.ka,Ae=u.ka+u.T,De=u.U,ke=De+1>>1;for(0==Q?D(R,P,null,null,O,j,se,ae,O,j,se,ae,x,T,null,null,De):(D(p.ec,p.fc,R,P,ie,Te,Ce,J,O,j,se,ae,x,T-w.A,x,T,De),++C);Q+2<Ae;Q+=2)D(R,(P+=2*u.fa)-u.fa,R,P,ie=O,Te=j,Ce=se,J=ae,O,j+=u.Rc,se,ae+=u.Rc,x,(T+=2*w.A)-w.A,x,T,De);return P+=u.fa,u.j+Ae<u.o?(o(p.ec,p.fc,R,P,De),o(p.cc,p.dc,O,j,ke),o(p.Mc,p.Nc,se,ae,ke),C--):1&Ae||D(R,P,null,null,O,j,se,ae,O,j,se,ae,x,T+w.A,null,null,De),C}function Ss(u,p,C){var w=u.F,x=[u.J];if(null!=w){var T=u.U,D=p.ba.S,R=D==cu||D==du;p=p.ba.f.RGBA;var P=[0],O=u.ka;P[0]=u.T,u.Kb&&(0==O?--P[0]:(--O,x[0]-=u.width),u.j+u.ka+u.T==u.o&&(P[0]=u.o-u.j-O));var j=p.eb;u=si(w,x[0],u.width,T,P,j,(O=p.fb+O*p.A)+(R?0:3),p.A),i(C==P),u&&zt(D)&&ao(j,O,R,T,P,p.A)}return 0}function Xi(u){var p=u.ma,C=p.ba.S,w=11>C,x=C==au||C==lu||C==cu||C==Bp||12==C||zt(C);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!Jl(p.Oa,u,x?11:12))return 0;if(x&&zt(C)&&Re(),u.da)alert("todo:use_scaling");else{if(w){if(p.Ib=yt,u.Kb){if(p.memory=s(u.U+2*(C=u.U+1>>1)),null==p.memory)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+u.U,p.Mc=p.cc,p.Nc=p.dc+C,p.Ib=Vt,Re()}}else alert("todo:EmitYUV");x&&(p.Jb=Ss,w&&re())}if(w&&!rC){for(u=0;256>u;++u)rP[u]=89858*(u-128)+hu>>uu,lP[u]=-22014*(u-128)+hu,aP[u]=-45773*(u-128),sP[u]=113618*(u-128)+hu>>uu;for(u=rc;u<Vp;++u)cP[u-rc]=Vn(p=76283*(u-16)+hu>>uu,255),dP[u-rc]=Vn(p+8>>4,15);rC=1}return 1}function Wo(u){var p=u.ma,C=u.U,w=u.T;return i(!(1&u.ka)),0>=C||0>=w?0:(C=p.Ib(u,p),null!=p.Jb&&p.Jb(u,p,C),p.Dc+=C,1)}function jo(u){u.ma.memory=null}function ut(u,p,C,w){return 47!=xe(u,8)?0:(p[0]=xe(u,14)+1,C[0]=xe(u,14)+1,w[0]=xe(u,1),0!=xe(u,3)?0:!u.h)}function ko(u,p){if(4>u)return u+1;var C=u-2>>1;return(2+(1&u)<<C)+xe(p,C)+1}function Yo(u,p){return 120<p?p-120:1<=(C=((C=UE[p-1])>>4)*u+(8-(15&C)))?C:1;var C}function Ln(u,p,C){var w=B(C),x=u[p+=255&w].g-8;return 0<x&&(W(C,C.u+8),w=B(C),p+=u[p].value,p+=w&(1<<x)-1),W(C,C.u+u[p].g),u[p].value}function qi(u,p,C){return C.g+=u.g,C.value+=u.value<<p>>>0,i(8>=C.g),u.g}function Bi(u,p,C){var w=u.xc;return i((p=0==w?0:u.vc[u.md*(C>>w)+(p>>w)])<u.Wb),u.Ya[p]}function zn(u,p,C,w){var x=u.ab,T=u.c*p,D=u.C;p=D+p;var R=C,P=w;for(w=u.Ta,C=u.Ua;0<x--;){var O=u.gc[x],j=D,se=p,ae=R,ie=P,Te=(P=w,R=C,O.Ea);switch(i(j<se),i(se<=O.nc),O.hc){case 2:eu(ae,ie,(se-j)*Te,P,R);break;case 0:var Ce=j,J=se,Q=P,Ae=R,De=(ze=O).Ea;0==Ce&&(Op(ae,ie,null,null,1,Q,Ae),Dt(ae,ie+1,0,0,De-1,Q,Ae+1),ie+=De,Ae+=De,++Ce);for(var ke=1<<ze.b,Ke=ke-1,Ze=tt(De,ze.b),ct=ze.K,ze=ze.w+(Ce>>ze.b)*Ze;Ce<J;){var qt=ct,$t=ze,Nt=1;for(Xl(ae,ie,Q,Ae-De,1,Q,Ae);Nt<De;){var Et=(Nt&~Ke)+ke;Et>De&&(Et=De),(0,zr[qt[$t++]>>8&15])(ae,ie+ +Nt,Q,Ae+Nt-De,Et-Nt,Q,Ae+Nt),Nt=Et}ie+=De,Ae+=De,++Ce&Ke||(ze+=Ze)}se!=O.nc&&o(P,R-Te,P,R+(se-j-1)*Te,Te);break;case 1:for(Te=ae,J=ie,De=(ae=O.Ea)-(Ae=ae&~(Q=(ie=1<<O.b)-1)),Ce=tt(ae,O.b),ke=O.K,O=O.w+(j>>O.b)*Ce;j<se;){for(Ke=ke,Ze=O,ct=new Ye,ze=J+Ae,qt=J+ae;J<ze;)Qt(Ke[Ze++],ct),Ds(ct,Te,J,ie,P,R),J+=ie,R+=ie;J<qt&&(Qt(Ke[Ze++],ct),Ds(ct,Te,J,De,P,R),J+=De,R+=De),++j&Q||(O+=Ce)}break;case 3:if(ae==P&&ie==R&&0<O.b){for(J=P,ae=Te=R+(se-j)*Te-(Ae=(se-j)*tt(O.Ea,O.b)),ie=P,Q=R,Ce=[],Ae=(De=Ae)-1;0<=Ae;--Ae)Ce[Ae]=ie[Q+Ae];for(Ae=De-1;0<=Ae;--Ae)J[ae+Ae]=Ce[Ae];oo(O,j,se,P,Te,P,R)}else oo(O,j,se,ae,ie,P,R)}R=w,P=C}P!=C&&o(w,C,R,P,T)}function wa(u,p){var C=u.V,w=u.Ba+u.c*u.C,x=p-u.C;if(i(p<=u.l.o),i(16>=x),0<x){var T=u.l,D=u.Ta,R=u.Ua,P=T.width;if(zn(u,x,C,w),x=R=[R],i((C=u.C)<(w=p)),i(T.v<T.va),w>T.o&&(w=T.o),C<T.j){var O=T.j-C;C=T.j,x[0]+=O*P}if(C>=w?C=0:(x[0]+=4*T.v,T.ka=C-T.j,T.U=T.va-T.v,T.T=w-C,C=1),C){if(R=R[0],11>(C=u.ca).S){var j=C.f.RGBA,se=(w=C.S,x=T.U,T=T.T,O=j.eb,j.A),ae=T;for(j=j.fb+u.Ma*j.A;0<ae--;){var ie=D,Te=R,Ce=x,J=O,Q=j;switch(w){case su:Nn(ie,Te,Ce,J,Q);break;case au:Sn(ie,Te,Ce,J,Q);break;case Zp:Sn(ie,Te,Ce,J,Q),ao(J,Q,0,Ce,1,0);break;case $0:vr(ie,Te,Ce,J,Q);break;case lu:fi(ie,Te,Ce,J,Q,1);break;case Gp:fi(ie,Te,Ce,J,Q,1),ao(J,Q,0,Ce,1,0);break;case cu:fi(ie,Te,Ce,J,Q,0);break;case du:fi(ie,Te,Ce,J,Q,0),ao(J,Q,1,Ce,1,0);break;case Bp:Vr(ie,Te,Ce,J,Q);break;case Hp:Vr(ie,Te,Ce,J,Q),ri(J,Q,Ce,1,0);break;case J0:mr(ie,Te,Ce,J,Q);break;default:i(0)}R+=P,j+=se}u.Ma+=T}else alert("todo:EmitRescaledRowsYUVA");i(u.Ma<=C.height)}}u.C=p,i(u.C<=u.i)}function gr(u){var p;if(0<u.ua)return 0;for(p=0;p<u.Wb;++p){var C=u.Ya[p].G,w=u.Ya[p].H;if(0<C[1][w[1]+0].g||0<C[2][w[2]+0].g||0<C[3][w[3]+0].g)return 0}return 1}function To(u,p,C,w,x,T){if(0!=u.Z){var D=u.qd,R=u.rd;for(i(null!=Yr[u.Z]);p<C;++p)Yr[u.Z](D,R,w,x,w,x,T),D=w,R=x,x+=T;u.qd=D,u.rd=R}}function Do(u,p){var C=u.l.ma,w=0==C.Z||1==C.Z?u.l.j:u.C;if(w=u.C<w?w:u.C,i(p<=u.l.o),p>w){var x=u.l.width,T=C.ca,D=C.tb+x*w,R=u.V,P=u.Ba+u.c*w,O=u.gc;i(1==u.ab),i(3==O[0].hc),tu(O[0],w,p,R,P,T,D),To(C,w,p,T,D,x)}u.C=u.Ma=p}function Fo(u,p,C,w,x,T,D){var R=u.$/w,P=u.$%w,O=u.m,j=u.s,se=C+u.$,ae=se;x=C+w*x;var ie=C+w*T,Te=280+j.ua,Ce=u.Pb?R:16777216,J=0<j.ua?j.Wa:null,Q=j.wc,Ae=se<ie?Bi(j,P,R):null;i(u.C<T),i(ie<=x);var De=!1;e:for(;;){for(;De||se<ie;){var ke=0;if(R>=Ce){var Ke=se-C;i((Ce=u).Pb),Ce.wd=Ce.m,Ce.xd=Ke,0<Ce.s.ua&&Se(Ce.s.Wa,Ce.s.vb),Ce=R+jE}if(P&Q||(Ae=Bi(j,P,R)),i(null!=Ae),Ae.Qb&&(p[se]=Ae.qb,De=!0),!De)if(oe(O),Ae.jc){Ke=p;var Ze=se,ct=Ae.pd[B(ke=O)&en-1];i(Ae.jc),256>ct.g?(W(ke,ke.u+ct.g),Ke[Ze]=ct.value,ke=0):(W(ke,ke.u+ct.g-256),i(256<=ct.value),ke=ct.value),0==ke&&(De=!0)}else ke=Ln(Ae.G[0],Ae.H[0],O);if(O.h)break;if(De||256>ke){if(!De)if(Ae.nd)p[se]=(Ae.qb|ke<<8)>>>0;else{if(oe(O),De=Ln(Ae.G[1],Ae.H[1],O),oe(O),Ke=Ln(Ae.G[2],Ae.H[2],O),Ze=Ln(Ae.G[3],Ae.H[3],O),O.h)break;p[se]=(Ze<<24|De<<16|ke<<8|Ke)>>>0}if(De=!1,++se,++P>=w&&(P=0,++R,null!=D&&R<=T&&!(R%16)&&D(u,R),null!=J))for(;ae<se;)ke=p[ae++],J.X[(506832829*ke&4294967295)>>>J.Mb]=ke}else if(280>ke){if(ke=ko(ke-256,O),Ke=Ln(Ae.G[4],Ae.H[4],O),oe(O),Ke=Yo(w,Ke=ko(Ke,O)),O.h)break;if(se-C<Ke||x-se<ke)break e;for(Ze=0;Ze<ke;++Ze)p[se+Ze]=p[se+Ze-Ke];for(se+=ke,P+=ke;P>=w;)P-=w,++R,null!=D&&R<=T&&!(R%16)&&D(u,R);if(i(se<=x),P&Q&&(Ae=Bi(j,P,R)),null!=J)for(;ae<se;)ke=p[ae++],J.X[(506832829*ke&4294967295)>>>J.Mb]=ke}else{if(!(ke<Te))break e;for(De=ke-280,i(null!=J);ae<se;)ke=p[ae++],J.X[(506832829*ke&4294967295)>>>J.Mb]=ke;ke=se,i(!(De>>>(Ke=J).Xa)),p[ke]=Ke.X[De],De=!0}De||i(O.h==H(O))}if(u.Pb&&O.h&&se<x)i(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&Se(u.s.vb,u.s.Wa);else{if(O.h)break e;D?.(u,R>T?T:R),u.a=0,u.$=se-C}return 1}return u.a=3,0}function $o(u){i(null!=u),u.vc=null,u.yc=null,u.Ya=null;var p=u.Wa;null!=p&&(p.X=null),u.vb=null,i(null!=u)}function no(){var u=new Ip;return null==u?null:(u.a=0,u.xb=X0,Uo("Predictor","VP8LPredictors"),Uo("Predictor","VP8LPredictors_C"),Uo("PredictorAdd","VP8LPredictorsAdd"),Uo("PredictorAdd","VP8LPredictorsAdd_C"),eu=Ot,Ds=ft,Nn=$e,Sn=hn,Vr=Zt,mr=xo,vr=ti,N.VP8LMapColor32b=Za,N.VP8LMapColor8b=iu,u)}function Jo(u,p,C,w,x){var T=1,D=[u],R=[p],P=w.m,O=w.s,j=null,se=0;e:for(;;){if(C)for(;T&&xe(P,1);){var ae=D,ie=R,Te=w,Ce=1,J=Te.m,Q=Te.gc[Te.ab],Ae=xe(J,2);if(Te.Oc&1<<Ae)T=0;else{switch(Te.Oc|=1<<Ae,Q.hc=Ae,Q.Ea=ae[0],Q.nc=ie[0],Q.K=[null],++Te.ab,i(4>=Te.ab),Ae){case 0:case 1:Q.b=xe(J,3)+2,Ce=Jo(tt(Q.Ea,Q.b),tt(Q.nc,Q.b),0,Te,Q.K),Q.K=Q.K[0];break;case 3:var De,ke=xe(J,8)+1,Ke=16<ke?0:4<ke?1:2<ke?2:3;if(ae[0]=tt(Q.Ea,Ke),Q.b=Ke,De=Ce=Jo(ke,1,0,Te,Q.K)){var Ze,ct=ke,ze=Q,qt=1<<(8>>ze.b),$t=s(qt);if(null==$t)De=0;else{var Nt=ze.K[0],Et=ze.w;for($t[0]=ze.K[0][0],Ze=1;Ze<1*ct;++Ze)$t[Ze]=Me(Nt[Et+Ze],$t[Ze-1]);for(;Ze<4*qt;++Ze)$t[Ze]=0;ze.K[0]=null,ze.K[0]=$t,De=1}}Ce=De;break;case 2:break;default:i(0)}T=Ce}}if(D=D[0],R=R[0],T&&xe(P,1)&&!(T=1<=(se=xe(P,4))&&11>=se)){w.a=3;break e}var ii;if(ii=T)t:{var Xt,xt,Gi,Bn=w,Hi=D,Zn=R,Jt=se,Wn=C,jn=Bn.m,Wi=Bn.s,tn=[null],xn=1,uo=0,er=WE[Jt];i:for(;;){if(Wn&&xe(jn,1)){var ji=xe(jn,3)+2,br=tt(Hi,ji),Ps=tt(Zn,ji),Va=br*Ps;if(!Jo(br,Ps,0,Bn,tn))break i;for(tn=tn[0],Wi.xc=ji,Xt=0;Xt<Va;++Xt){var $r=tn[Xt]>>8&65535;tn[Xt]=$r,$r>=xn&&(xn=$r+1)}}if(jn.h)break i;for(xt=0;5>xt;++xt){var xi=K0[xt];!xt&&0<Jt&&(xi+=1<<Jt),uo<xi&&(uo=xi)}var Up=a(xn*er,I),lC=xn,cC=a(lC,z);if(null==cC)var pu=null;else i(65536>=lC),pu=cC;var sc=s(uo);if(null==pu||null==sc||null==Up){Bn.a=1;break i}var fu=Up;for(Xt=Gi=0;Xt<xn;++Xt){var Lo=pu[Xt],Ua=Lo.G,Wa=Lo.H,dC=0,mu=1,uC=0;for(xt=0;5>xt;++xt){xi=K0[xt],Ua[xt]=fu,Wa[xt]=Gi,!xt&&0<Jt&&(xi+=1<<Jt);o:{var vu,Wp=xi,Cu=Bn,ac=sc,gP=fu,pP=Gi,jp=0,Jr=Cu.m,fP=xe(Jr,1);if(r(ac,0,0,Wp),fP){var mP=xe(Jr,1)+1,vP=xe(Jr,1),hC=xe(Jr,0==vP?1:8);ac[hC]=1,2==mP&&(ac[hC=xe(Jr,8)]=1);var wu=1}else{var gC=s(19),pC=xe(Jr,4)+4;if(19<pC){Cu.a=3;var yu=0;break o}for(vu=0;vu<pC;++vu)gC[VE[vu]]=xe(Jr,3);var Yp=void 0,lc=void 0,fC=Cu,CP=gC,bu=Wp,mC=ac,$p=0,Kr=fC.m,vC=8,CC=a(128,I);n:for(;L(CC,0,7,CP,19);){if(xe(Kr,1)){var wP=2+2*xe(Kr,3);if((Yp=2+xe(Kr,wP))>bu)break n}else Yp=bu;for(lc=0;lc<bu&&Yp--;){oe(Kr);var wC=CC[0+(127&B(Kr))];W(Kr,Kr.u+wC.g);var ja=wC.value;if(16>ja)mC[lc++]=ja,0!=ja&&(vC=ja);else{var yP=16==ja,yC=ja-16,bP=qE[yC],bC=xe(Kr,HE[yC])+bP;if(lc+bC>bu)break n;for(var SP=yP?vC:0;0<bC--;)mC[lc++]=SP}}$p=1;break n}$p||(fC.a=3),wu=$p}(wu=wu&&!Jr.h)&&(jp=L(gP,pP,8,ac,Wp)),wu&&0!=jp?yu=jp:(Cu.a=3,yu=0)}if(0==yu)break i;if(mu&&1==zE[xt]&&(mu=0==fu[Gi].g),dC+=fu[Gi].g,Gi+=yu,3>=xt){var cc,Jp=sc[0];for(cc=1;cc<xi;++cc)sc[cc]>Jp&&(Jp=sc[cc]);uC+=Jp}}if(Lo.nd=mu,Lo.Qb=0,mu&&(Lo.qb=(Ua[3][Wa[3]+0].value<<24|Ua[1][Wa[1]+0].value<<16|Ua[2][Wa[2]+0].value)>>>0,0==dC&&256>Ua[0][Wa[0]+0].value&&(Lo.Qb=1,Lo.qb+=Ua[0][Wa[0]+0].value<<8)),Lo.jc=!Lo.Qb&&6>uC,Lo.jc){var Su,Sr=Lo;for(Su=0;Su<en;++Su){var Qr=Su,Xr=Sr.pd[Qr],_u=Sr.G[0][Sr.H[0]+Qr];256<=_u.value?(Xr.g=_u.g+256,Xr.value=_u.value):(Xr.g=0,Xr.value=0,Qr>>=qi(_u,8,Xr),Qr>>=qi(Sr.G[1][Sr.H[1]+Qr],16,Xr),Qr>>=qi(Sr.G[2][Sr.H[2]+Qr],0,Xr),qi(Sr.G[3][Sr.H[3]+Qr],24,Xr))}}}Wi.vc=tn,Wi.Wb=xn,Wi.Ya=pu,Wi.yc=Up,ii=1;break t}ii=0}if(!(T=ii)){w.a=3;break e}if(0<se){if(O.ua=1<<se,!gt(O.Wa,se)){w.a=1,T=0;break e}}else O.ua=0;var Kp=w,SC=D,_P=R,Qp=Kp.s,Xp=Qp.xc;if(Kp.c=SC,Kp.i=_P,Qp.md=tt(SC,Xp),Qp.wc=0==Xp?-1:(1<<Xp)-1,C){w.xb=eP;break e}if(null==(j=s(D*R))){w.a=1,T=0;break e}T=(T=Fo(w,j,0,D,R,R,null))&&!P.h;break e}return T?(null!=x?x[0]=j:(i(null==j),i(C)),w.$=0,C||$o(O)):$o(O),T}function _s(u,p){var C=u.c*u.i,w=C+p+16*p;return i(u.c<=p),u.V=s(w),null==u.V?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+C+p,1)}function ya(u,p){var C=u.C,w=p-C,x=u.V,T=u.Ba+u.c*C;for(i(p<=u.l.o);0<w;){var D=16<w?16:w,R=u.l.ma,P=u.l.width,O=P*D,j=R.ca,se=R.tb+P*C,ae=u.Ta,ie=u.Ua;zn(u,D,x,T),Li(ae,ie,j,se,O),To(R,C,C+D,j,se,P),w-=D,x+=D*u.c,C+=D}i(C==p),u.C=u.Ma=p}function ba(){this.ub=this.yd=this.td=this.Rb=0}function Sa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _a(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ld(){var u;this.Yb=(function p(C,w,x){for(var T=x[w],D=0;D<T&&(C.push(x.length>w+1?[]:0),!(x.length<w+1));D++)p(C[D],w+1,x)}(u=[],0,[3,11]),u)}function hp(){this.jb=s(3),this.Wc=l([4,8],Ld),this.Xc=l([4,17],Ld)}function gp(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function xa(){this.ld=this.La=this.dd=this.tc=0}function Id(){this.Na=this.la=0}function pp(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ll(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function fp(){this.uc=this.M=this.Nb=0,this.wa=Array(new xa),this.Y=0,this.ya=Array(new Ll),this.aa=0,this.l=new Aa}function Od(){this.y=s(16),this.f=s(8),this.ea=s(8)}function mp(){this.cb=this.a=0,this.sc="",this.m=new je,this.Od=new ba,this.Kc=new Sa,this.ed=new gp,this.Qa=new _a,this.Ic=this.$c=this.Aa=0,this.D=new fp,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,je),this.ia=0,this.pb=a(4,pp),this.Pa=new hp,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Od),this.Hd=0,this.rb=Array(new Id),this.sb=0,this.wa=Array(new xa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ll),this.L=this.aa=0,this.gd=l([4,2],xa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Aa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function vp(){var u=new mp;return null!=u&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,oc||(oc=Zd)),u}function Ei(u,p,C){return 0==u.a&&(u.a=p,u.sc=C,u.cb=0),0}function Nd(u,p,C){return 3<=C&&157==u[p+0]&&1==u[p+1]&&42==u[p+2]}function Bd(u,p){if(null==u)return 0;if(u.a=0,u.sc="OK",null==p)return Ei(u,2,"null VP8Io passed to VP8GetHeaders()");var C=p.data,w=p.w,x=p.ha;if(4>x)return Ei(u,7,"Truncated header.");var T=C[w+0]|C[w+1]<<8|C[w+2]<<16,D=u.Od;if(D.Rb=!(1&T),D.td=T>>1&7,D.yd=T>>4&1,D.ub=T>>5,3<D.td)return Ei(u,3,"Incorrect keyframe parameters.");if(!D.yd)return Ei(u,4,"Frame not displayable.");w+=3,x-=3;var R=u.Kc;if(D.Rb){if(7>x)return Ei(u,7,"cannot parse picture header");if(!Nd(C,w,x))return Ei(u,3,"Bad code word");R.c=16383&(C[w+4]<<8|C[w+3]),R.Td=C[w+4]>>6,R.i=16383&(C[w+6]<<8|C[w+5]),R.Ud=C[w+6]>>6,w+=7,x-=7,u.za=R.c+15>>4,u.Ub=R.i+15>>4,p.width=R.c,p.height=R.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,r((T=u.Pa).jb,0,255,T.jb.length),i(null!=(T=u.Qa)),T.Cb=0,T.Bb=0,T.Fb=1,r(T.Zb,0,0,T.Zb.length),r(T.Lb,0,0,T.Lb)}if(D.ub>x)return Ei(u,7,"bad partition length");me(T=u.m,C,w,D.ub),w+=D.ub,x-=D.ub,D.Rb&&(R.Ld=ue(T),R.Kd=ue(T)),R=u.Qa;var P,O=u.Pa;if(i(null!=T),i(null!=R),R.Cb=ue(T),R.Cb){if(R.Bb=ue(T),ue(T)){for(R.Fb=ue(T),P=0;4>P;++P)R.Zb[P]=ue(T)?we(T,7):0;for(P=0;4>P;++P)R.Lb[P]=ue(T)?we(T,6):0}if(R.Bb)for(P=0;3>P;++P)O.jb[P]=ue(T)?he(T,8):255}else R.Bb=0;if(T.Ka)return Ei(u,3,"cannot parse segment header");if((R=u.ed).zd=ue(T),R.Tb=he(T,6),R.wb=he(T,3),R.Pc=ue(T),R.Pc&&ue(T)){for(O=0;4>O;++O)ue(T)&&(R.vd[O]=we(T,6));for(O=0;4>O;++O)ue(T)&&(R.od[O]=we(T,6))}if(u.L=0==R.Tb?0:R.zd?1:2,T.Ka)return Ei(u,3,"cannot parse filter header");var j=x;if(x=P=w,w=P+j,R=j,u.Xb=(1<<he(u.m,2))-1,j<3*(O=u.Xb))C=7;else{for(P+=3*O,R-=3*O,j=0;j<O;++j){var se=C[x+0]|C[x+1]<<8|C[x+2]<<16;se>R&&(se=R),me(u.Jc[+j],C,P,se),P+=se,R-=se,x+=3}me(u.Jc[+O],C,P,R),C=P<w?0:5}if(0!=C)return Ei(u,C,"cannot parse partitions");for(C=he(P=u.m,7),x=ue(P)?we(P,4):0,w=ue(P)?we(P,4):0,R=ue(P)?we(P,4):0,O=ue(P)?we(P,4):0,P=ue(P)?we(P,4):0,j=u.Qa,se=0;4>se;++se){if(j.Cb){var ae=j.Zb[se];j.Fb||(ae+=C)}else{if(0<se){u.pb[se]=u.pb[0];continue}ae=C}var ie=u.pb[se];ie.Sc[0]=qp[Vn(ae+x,127)],ie.Sc[1]=zp[Vn(ae+0,127)],ie.Eb[0]=2*qp[Vn(ae+w,127)],ie.Eb[1]=101581*zp[Vn(ae+R,127)]>>16,8>ie.Eb[1]&&(ie.Eb[1]=8),ie.Qc[0]=qp[Vn(ae+O,117)],ie.Qc[1]=zp[Vn(ae+P,127)],ie.lc=ae+P}if(!D.Rb)return Ei(u,4,"Not a key frame.");for(ue(T),D=u.Pa,C=0;4>C;++C){for(x=0;8>x;++x)for(w=0;3>w;++w)for(R=0;11>R;++R)O=ge(T,QE[C][x][w][R])?he(T,8):JE[C][x][w][R],D.Wc[C][x].Yb[w][R]=O;for(x=0;17>x;++x)D.Xc[C][x]=D.Wc[C][XE[x]]}return u.kc=ue(T),u.kc&&(u.Bd=he(T,8)),u.cb=1}function Zd(u,p,C,w,x,T,D){var R=p[x].Yb[C];for(C=0;16>x;++x){if(!ge(u,R[C+0]))return x;for(;!ge(u,R[C+1]);)if(R=p[++x].Yb[0],C=0,16==x)return 16;var P=p[x+1].Yb;if(ge(u,R[C+2])){var O=u,j=0;if(ge(O,(ae=R)[(se=C)+3]))if(ge(O,ae[se+6])){for(R=0,se=2*(j=ge(O,ae[se+8]))+(ae=ge(O,ae[se+9+j])),j=0,ae=YE[se];ae[R];++R)j+=j+ge(O,ae[R]);j+=3+(8<<se)}else ge(O,ae[se+7])?(j=7+2*ge(O,165),j+=ge(O,145)):j=5+ge(O,159);else j=ge(O,ae[se+4])?3+ge(O,ae[se+5]):2;R=P[2]}else j=1,R=P[1];P=D+$E[x],0>(O=u).b&&de(O);var se,ae=O.b,ie=(se=O.Ca>>1)-(O.I>>ae)>>31;--O.b,O.Ca+=ie,O.Ca|=1,O.I-=(se+1&ie)<<ae,T[P]=((j^ie)-ie)*w[(0<x)+0]}return 16}function Il(u){var p=u.rb[u.sb-1];p.la=0,p.Na=0,r(u.zc,0,0,u.zc.length),u.ja=0}function Ro(u,p,C,w,x){u[p+C+32*w]=-256&(x=u[p+C+32*w]+(x>>3))?0>x?0:255:x}function ka(u,p,C,w,x,T){Ro(u,p,0,C,w+x),Ro(u,p,1,C,w+T),Ro(u,p,2,C,w-T),Ro(u,p,3,C,w-x)}function In(u){return(20091*u>>16)+u}function Ol(u,p,C,w){var x,T=0,D=s(16);for(x=0;4>x;++x){var R=u[p+0]+u[p+8],P=u[p+0]-u[p+8],O=(35468*u[p+4]>>16)-In(u[p+12]),j=In(u[p+4])+(35468*u[p+12]>>16);D[T+0]=R+j,D[T+1]=P+O,D[T+2]=P-O,D[T+3]=R-j,T+=4,p++}for(x=T=0;4>x;++x)R=(u=D[T+0]+4)+D[T+8],P=u-D[T+8],O=(35468*D[T+4]>>16)-In(D[T+12]),Ro(C,w,0,0,R+(j=In(D[T+4])+(35468*D[T+12]>>16))),Ro(C,w,1,0,P+O),Ro(C,w,2,0,P-O),Ro(C,w,3,0,R-j),T++,w+=32}function Gd(u,p,C,w){var x=u[p+0]+4,T=35468*u[p+4]>>16,D=In(u[p+4]),R=35468*u[p+1]>>16;ka(C,w,0,x+D,u=In(u[p+1]),R),ka(C,w,1,x+T,u,R),ka(C,w,2,x-T,u,R),ka(C,w,3,x-D,u,R)}function wp(u,p,C,w,x){Ol(u,p,C,w),x&&Ol(u,p+16,C,w+4)}function Hd(u,p,C,w){Cr(u,p+0,C,w,1),Cr(u,p+32,C,w+128,1)}function yp(u,p,C,w){var x;for(u=u[p+0]+4,x=0;4>x;++x)for(p=0;4>p;++p)Ro(C,w,p,x,u)}function qd(u,p,C,w){u[p+0]&&_n(u,p+0,C,w),u[p+16]&&_n(u,p+16,C,w+4),u[p+32]&&_n(u,p+32,C,w+128),u[p+48]&&_n(u,p+48,C,w+128+4)}function bp(u,p,C,w){var x,T=s(16);for(x=0;4>x;++x){var D=u[p+0+x]+u[p+12+x],R=u[p+4+x]+u[p+8+x],P=u[p+4+x]-u[p+8+x],O=u[p+0+x]-u[p+12+x];T[0+x]=D+R,T[8+x]=D-R,T[4+x]=O+P,T[12+x]=O-P}for(x=0;4>x;++x)D=(u=T[0+4*x]+3)+T[3+4*x],P=T[1+4*x]-T[2+4*x],O=u-T[3+4*x],C[w+0]=D+(R=T[1+4*x]+T[2+4*x])>>3,C[w+16]=O+P>>3,C[w+32]=D-R>>3,C[w+48]=O-P>>3,w+=64}function Nl(u,p,C){var w,x=p-32,T=Un,D=255-u[x-1];for(w=0;w<C;++w){var R,P=T,O=D+u[p-1];for(R=0;R<C;++R)u[p+R]=P[O+u[x+R]];p+=32}}function Sp(u,p){Nl(u,p,4)}function _p(u,p){Nl(u,p,8)}function xp(u,p){Nl(u,p,16)}function pr(u,p){var C;for(C=0;16>C;++C)o(u,p+32*C,u,p-32,16)}function Ta(u,p){var C;for(C=16;0<C;--C)r(u,p,u[p-1],16),p+=32}function Da(u,p,C){var w;for(w=0;16>w;++w)r(p,C+32*w,u,16)}function zd(u,p){var C,w=16;for(C=0;16>C;++C)w+=u[p-1+32*C]+u[p+C-32];Da(w>>5,u,p)}function gn(u,p){var C,w=8;for(C=0;16>C;++C)w+=u[p-1+32*C];Da(w>>4,u,p)}function Ap(u,p){var C,w=8;for(C=0;16>C;++C)w+=u[p+C-32];Da(w>>4,u,p)}function Vd(u,p){Da(128,u,p)}function vt(u,p,C){return u+2*p+C+2>>2}function kp(u,p){var C,w=p-32;for(w=new Uint8Array([vt(u[w-1],u[w+0],u[w+1]),vt(u[w+0],u[w+1],u[w+2]),vt(u[w+1],u[w+2],u[w+3]),vt(u[w+2],u[w+3],u[w+4])]),C=0;4>C;++C)o(u,p+32*C,w,0,w.length)}function Tp(u,p){var C=u[p-1],w=u[p-1+32],x=u[p-1+64],T=u[p-1+96];Le(u,p+0,16843009*vt(u[p-1-32],C,w)),Le(u,p+32,16843009*vt(C,w,x)),Le(u,p+64,16843009*vt(w,x,T)),Le(u,p+96,16843009*vt(x,T,T))}function Ko(u,p){var C,w=4;for(C=0;4>C;++C)w+=u[p+C-32]+u[p-1+32*C];for(w>>=3,C=0;4>C;++C)r(u,p+32*C,w,4)}function Ud(u,p){var C=u[p-1+0],w=u[p-1+32],x=u[p-1+64],T=u[p-1-32],D=u[p+0-32],R=u[p+1-32],P=u[p+2-32],O=u[p+3-32];u[p+0+96]=vt(w,x,u[p-1+96]),u[p+1+96]=u[p+0+64]=vt(C,w,x),u[p+2+96]=u[p+1+64]=u[p+0+32]=vt(T,C,w),u[p+3+96]=u[p+2+64]=u[p+1+32]=u[p+0+0]=vt(D,T,C),u[p+3+64]=u[p+2+32]=u[p+1+0]=vt(R,D,T),u[p+3+32]=u[p+2+0]=vt(P,R,D),u[p+3+0]=vt(O,P,R)}function Wd(u,p){var C=u[p+1-32],w=u[p+2-32],x=u[p+3-32],T=u[p+4-32],D=u[p+5-32],R=u[p+6-32],P=u[p+7-32];u[p+0+0]=vt(u[p+0-32],C,w),u[p+1+0]=u[p+0+32]=vt(C,w,x),u[p+2+0]=u[p+1+32]=u[p+0+64]=vt(w,x,T),u[p+3+0]=u[p+2+32]=u[p+1+64]=u[p+0+96]=vt(x,T,D),u[p+3+32]=u[p+2+64]=u[p+1+96]=vt(T,D,R),u[p+3+64]=u[p+2+96]=vt(D,R,P),u[p+3+96]=vt(R,P,P)}function Fa(u,p){var C=u[p-1+0],w=u[p-1+32],x=u[p-1+64],T=u[p-1-32],D=u[p+0-32],R=u[p+1-32],P=u[p+2-32],O=u[p+3-32];u[p+0+0]=u[p+1+64]=T+D+1>>1,u[p+1+0]=u[p+2+64]=D+R+1>>1,u[p+2+0]=u[p+3+64]=R+P+1>>1,u[p+3+0]=P+O+1>>1,u[p+0+96]=vt(x,w,C),u[p+0+64]=vt(w,C,T),u[p+0+32]=u[p+1+96]=vt(C,T,D),u[p+1+32]=u[p+2+96]=vt(T,D,R),u[p+2+32]=u[p+3+96]=vt(D,R,P),u[p+3+32]=vt(R,P,O)}function Bl(u,p){var C=u[p+0-32],w=u[p+1-32],x=u[p+2-32],T=u[p+3-32],D=u[p+4-32],R=u[p+5-32],P=u[p+6-32],O=u[p+7-32];u[p+0+0]=C+w+1>>1,u[p+1+0]=u[p+0+64]=w+x+1>>1,u[p+2+0]=u[p+1+64]=x+T+1>>1,u[p+3+0]=u[p+2+64]=T+D+1>>1,u[p+0+32]=vt(C,w,x),u[p+1+32]=u[p+0+96]=vt(w,x,T),u[p+2+32]=u[p+1+96]=vt(x,T,D),u[p+3+32]=u[p+2+96]=vt(T,D,R),u[p+3+64]=vt(D,R,P),u[p+3+96]=vt(R,P,O)}function Dp(u,p){var C=u[p-1+0],w=u[p-1+32],x=u[p-1+64],T=u[p-1+96];u[p+0+0]=C+w+1>>1,u[p+2+0]=u[p+0+32]=w+x+1>>1,u[p+2+32]=u[p+0+64]=x+T+1>>1,u[p+1+0]=vt(C,w,x),u[p+3+0]=u[p+1+32]=vt(w,x,T),u[p+3+32]=u[p+1+64]=vt(x,T,T),u[p+3+64]=u[p+2+64]=u[p+0+96]=u[p+1+96]=u[p+2+96]=u[p+3+96]=T}function Fp(u,p){var C=u[p-1+0],w=u[p-1+32],x=u[p-1+64],T=u[p-1+96],D=u[p-1-32],R=u[p+0-32],P=u[p+1-32],O=u[p+2-32];u[p+0+0]=u[p+2+32]=C+D+1>>1,u[p+0+32]=u[p+2+64]=w+C+1>>1,u[p+0+64]=u[p+2+96]=x+w+1>>1,u[p+0+96]=T+x+1>>1,u[p+3+0]=vt(R,P,O),u[p+2+0]=vt(D,R,P),u[p+1+0]=u[p+3+32]=vt(C,D,R),u[p+1+32]=u[p+3+64]=vt(w,C,D),u[p+1+64]=u[p+3+96]=vt(x,w,C),u[p+1+96]=vt(T,x,w)}function Rp(u,p){var C;for(C=0;8>C;++C)o(u,p+32*C,u,p-32,8)}function Zl(u,p){var C;for(C=0;8>C;++C)r(u,p,u[p-1],8),p+=32}function xs(u,p,C){var w;for(w=0;8>w;++w)r(p,C+32*w,u,8)}function Gr(u,p){var C,w=8;for(C=0;8>C;++C)w+=u[p+C-32]+u[p-1+32*C];xs(w>>4,u,p)}function Mp(u,p){var C,w=4;for(C=0;8>C;++C)w+=u[p+C-32];xs(w>>3,u,p)}function As(u,p){var C,w=4;for(C=0;8>C;++C)w+=u[p-1+32*C];xs(w>>3,u,p)}function Gl(u,p){xs(128,u,p)}function Ra(u,p,C){var w=u[p-C],x=u[p+0],T=3*(x-w)+Np[1020+u[p-2*C]-u[p+C]],D=ru[112+(T+4>>3)];u[p-C]=Un[255+w+ru[112+(T+3>>3)]],u[p+0]=Un[255+x-D]}function jd(u,p,C,w){return lo[255+u[p-2*C]-u[p-C]]>w||lo[255+u[p+C]-u[p+0]]>w}function Yd(u,p,C,w){return 4*lo[255+u[p-C]-u[p+0]]+lo[255+u[p-2*C]-u[p+C]]<=w}function $d(u,p,C,w,x){var T=u[p-3*C],D=u[p-2*C],R=u[p-C],P=u[p+0],O=u[p+C],j=u[p+2*C];return 4*lo[255+R-P]+lo[255+D-O]>w?0:lo[255+u[p-4*C]-T]<=x&&lo[255+T-D]<=x&&lo[255+D-R]<=x&&lo[255+u[p+3*C]-j]<=x&&lo[255+j-O]<=x&&lo[255+O-P]<=x}function Jd(u,p,C,w){var x=2*w+1;for(w=0;16>w;++w)Yd(u,p+w,C,x)&&Ra(u,p+w,C)}function Qo(u,p,C,w){var x=2*w+1;for(w=0;16>w;++w)Yd(u,p+w*C,1,x)&&Ra(u,p+w*C,1)}function fr(u,p,C,w){var x;for(x=3;0<x;--x)Jd(u,p+=4*C,C,w)}function Ep(u,p,C,w){var x;for(x=3;0<x;--x)Qo(u,p+=4,C,w)}function Hr(u,p,C,w,x,T,D,R){for(T=2*T+1;0<x--;){if($d(u,p,C,T,D))if(jd(u,p,C,R))Ra(u,p,C);else{var P=u,O=p,j=C,se=P[O-2*j],ae=P[O-j],ie=P[O+0],Te=P[O+j],Ce=P[O+2*j],J=27*(Ae=Np[1020+3*(ie-ae)+Np[1020+se-Te]])+63>>7,Q=18*Ae+63>>7,Ae=9*Ae+63>>7;P[O-3*j]=Un[255+P[O-3*j]+Ae],P[O-2*j]=Un[255+se+Q],P[O-j]=Un[255+ae+J],P[O+0]=Un[255+ie-J],P[O+j]=Un[255+Te-Q],P[O+2*j]=Un[255+Ce-Ae]}p+=w}}function Mo(u,p,C,w,x,T,D,R){for(T=2*T+1;0<x--;){if($d(u,p,C,T,D))if(jd(u,p,C,R))Ra(u,p,C);else{var P=u,O=p,j=C,se=P[O-j],ae=P[O+0],ie=P[O+j],Te=ru[112+(4+(Ce=3*(ae-se))>>3)],Ce=ru[112+(Ce+3>>3)],J=Te+1>>1;P[O-2*j]=Un[255+P[O-2*j]+J],P[O-j]=Un[255+se+Ce],P[O+0]=Un[255+ae-Te],P[O+j]=Un[255+ie-J]}p+=w}}function Hl(u,p,C,w,x,T){Hr(u,p,C,1,16,w,x,T)}function ks(u,p,C,w,x,T){Hr(u,p,1,C,16,w,x,T)}function Pp(u,p,C,w,x,T){var D;for(D=3;0<D;--D)Mo(u,p+=4*C,C,1,16,w,x,T)}function Ma(u,p,C,w,x,T){var D;for(D=3;0<D;--D)Mo(u,p+=4,1,C,16,w,x,T)}function Lp(u,p,C,w,x,T,D,R){Hr(u,p,x,1,8,T,D,R),Hr(C,w,x,1,8,T,D,R)}function ql(u,p,C,w,x,T,D,R){Hr(u,p,1,x,8,T,D,R),Hr(C,w,1,x,8,T,D,R)}function zl(u,p,C,w,x,T,D,R){Mo(u,p+4*x,x,1,8,T,D,R),Mo(C,w+4*x,x,1,8,T,D,R)}function Kd(u,p,C,w,x,T,D,R){Mo(u,p+4,1,x,8,T,D,R),Mo(C,w+4,1,x,8,T,D,R)}function Ea(){this.ba=new Ao,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Si,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Vl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ul(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Qd(){this.ua=0,this.Wa=new q,this.vb=new q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new I}function Ip(){this.xb=this.a=0,this.l=new Aa,this.ca=new Ao,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Qd,this.ab=0,this.gc=a(4,Ul),this.Oc=0}function Pa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Aa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ts(u,p,C,w,x,T,D){for(u=null==u?0:u[p+0],p=0;p<D;++p)x[T+p]=u+C[w+p]&255,u=x[T+p]}function Wl(u,p,C,w,x,T,D){var R;if(null==u)Ts(null,null,C,w,x,T,D);else for(R=0;R<D;++R)x[T+R]=u[p+R]+C[w+R]&255}function qr(u,p,C,w,x,T,D){if(null==u)Ts(null,null,C,w,x,T,D);else{var R,P=u[p+0],O=P,j=P;for(R=0;R<D;++R)O=j+(P=u[p+R])-O,j=C[w+R]+(-256&O?0>O?0:255:O)&255,O=P,x[T+R]=j}}function jl(u,p,C,w){var x=p.width,T=p.o;if(i(null!=u&&null!=p),0>C||0>=w||C+w>T)return null;if(!u.Cc){if(null==u.ga){var D;if(u.ga=new Pa,(D=null==u.ga)||(D=p.width*p.o,i(0==u.Gb.length),u.Gb=s(D),u.Uc=0,null==u.Gb?D=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,D=1),D=!D),!D){var R=u.Fa,P=u.P,O=u.qc,j=u.mb,se=u.nb,ae=P+1,ie=O-1,Te=(D=u.ga).l;if(i(null!=R&&null!=j&&null!=p),Yr[0]=null,Yr[1]=Ts,Yr[2]=Wl,Yr[3]=qr,D.ca=j,D.tb=se,D.c=p.width,D.i=p.height,i(0<D.c&&0<D.i),1>=O)p=0;else if(D.$a=R[P+0]>>0&3,D.Z=R[P+0]>>2&3,D.Lc=R[P+0]>>4&3,P=R[P+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||P)p=0;else if(Te.put=Wo,Te.ac=Xi,Te.bc=jo,Te.ma=D,Te.width=p.width,Te.height=p.height,Te.Da=p.Da,Te.v=p.v,Te.va=p.va,Te.j=p.j,Te.o=p.o,D.$a)e:{i(1==D.$a),p=no();t:for(;;){if(null==p){p=0;break e}if(i(null!=D),D.mc=p,p.c=D.c,p.i=D.i,p.l=D.l,p.l.ma=D,p.l.width=D.c,p.l.height=D.i,p.a=0,ce(p.m,R,ae,ie),!Jo(D.c,D.i,1,p,null)||(1==p.ab&&3==p.gc[0].hc&&gr(p.s)?(D.ic=1,R=p.c*p.i,p.Ta=null,p.Ua=0,p.V=s(R),p.Ba=0,null==p.V?(p.a=1,p=0):p=1):(D.ic=0,p=_s(p,D.c)),!p))break t;p=1;break e}D.mc=null,p=0}else p=ie>=D.c*D.i;D=!p}if(D)return null;1!=u.ga.Lc?u.Ga=0:w=T-C}i(null!=u.ga),i(C+w<=T);e:{if(p=(R=u.ga).c,T=R.l.o,0==R.$a){if(ae=u.rc,ie=u.Vc,Te=u.Fa,O=u.mb,j=u.nb+C*p,i((P=u.P+1+C*p)<=u.P+u.qc),0!=R.Z)for(i(null!=Yr[R.Z]),D=0;D<w;++D)Yr[R.Z](ae,ie,Te,P,O,j,p),ae=O,ie=j,j+=p,P+=p;else for(D=0;D<w;++D)o(O,j,Te,P,p),ae=O,ie=j,j+=p,P+=p;u.rc=ae,u.Vc=ie}else{if(i(null!=R.mc),p=C+w,i(null!=(D=R.mc)),i(p<=D.i),D.C>=p)p=1;else if(R.ic||re(),R.ic){R=D.V,ae=D.Ba;var Ce=D.i,J=(Te=1,P=D.$/(ie=D.c),O=D.$%ie,j=D.m,se=D.s,D.$),Q=ie*Ce,Ae=ie*p,De=se.wc,ke=J<Ae?Bi(se,O,P):null;i(J<=Q),i(p<=Ce),i(gr(se));t:for(;;){for(;!j.h&&J<Ae;){if(O&De||(ke=Bi(se,O,P)),i(null!=ke),oe(j),256>(Ce=Ln(ke.G[0],ke.H[0],j)))R[ae+J]=Ce,++J,++O>=ie&&(O=0,++P<=p&&!(P%16)&&Do(D,P));else{if(!(280>Ce)){Te=0;break t}Ce=ko(Ce-256,j);var Ke,Ze=Ln(ke.G[4],ke.H[4],j);if(oe(j),!(J>=(Ze=Yo(ie,Ze=ko(Ze,j)))&&Q-J>=Ce)){Te=0;break t}for(Ke=0;Ke<Ce;++Ke)R[ae+J+Ke]=R[ae+J+Ke-Ze];for(J+=Ce,O+=Ce;O>=ie;)O-=ie,++P<=p&&!(P%16)&&Do(D,P);J<Ae&&O&De&&(ke=Bi(se,O,P))}i(j.h==H(j))}Do(D,P>p?p:P);break t}!Te||j.h&&J<Q?(Te=0,D.a=j.h?5:3):D.$=J,p=Te}else p=Fo(D,D.V,D.Ba,D.c,D.i,p,ya);if(!p){w=0;break e}}C+w>=T&&(u.Cc=1),w=1}if(!w)return null;if(u.Cc&&(null!=(w=u.ga)&&(w.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+C*x}function v(u,p,C,w,x,T){for(;0<x--;){var D,R=u,P=p+(C?1:0),O=u,j=p+(C?0:3);for(D=0;D<w;++D){var se=O[j+4*D];255!=se&&(R[P+4*D+0]=R[P+4*D+0]*(se*=32897)>>23,R[P+4*D+1]=R[P+4*D+1]*se>>23,R[P+4*D+2]=R[P+4*D+2]*se>>23)}p+=T}}function A(u,p,C,w,x){for(;0<w--;){var T;for(T=0;T<C;++T){var D=u[p+2*T+0],R=15&(O=u[p+2*T+1]),P=4369*R,O=(240&O|O>>4)*P>>16;u[p+2*T+0]=(240&D|D>>4)*P>>16&240|(15&D|D<<4)*P>>16>>4&15,u[p+2*T+1]=240&O|R}p+=x}}function Z(u,p,C,w,x,T,D,R){var P,O,j=255;for(O=0;O<x;++O){for(P=0;P<w;++P){var se=u[p+P];T[D+4*P]=se,j&=se}p+=C,D+=R}return 255!=j}function U(u,p,C,w,x){var T;for(T=0;T<x;++T)C[w+T]=u[p+T]>>8}function re(){ao=v,ri=A,si=Z,Li=U}function ye(u,p,C){N[u]=function(w,x,T,D,R,P,O,j,se,ae,ie,Te,Ce,J,Q,Ae,De){var ke,Ke=De-1>>1,Ze=R[P+0]|O[j+0]<<16,ct=se[ae+0]|ie[Te+0]<<16;i(null!=w);var ze=3*Ze+ct+131074>>2;for(p(w[x+0],255&ze,ze>>16,Ce,J),null!=T&&p(T[D+0],255&(ze=3*ct+Ze+131074>>2),ze>>16,Q,Ae),ke=1;ke<=Ke;++ke){var qt=R[P+ke]|O[j+ke]<<16,$t=se[ae+ke]|ie[Te+ke]<<16,Nt=Ze+qt+ct+$t+524296,Et=Nt+2*(qt+ct)>>3;ze=Et+Ze>>1,Ze=(Nt=Nt+2*(Ze+$t)>>3)+qt>>1,p(w[x+2*ke-1],255&ze,ze>>16,Ce,J+(2*ke-1)*C),p(w[x+2*ke-0],255&Ze,Ze>>16,Ce,J+(2*ke-0)*C),null!=T&&(Ze=Et+$t>>1,p(T[D+2*ke-1],255&(ze=Nt+ct>>1),ze>>16,Q,Ae+(2*ke-1)*C),p(T[D+2*ke+0],255&Ze,Ze>>16,Q,Ae+(2*ke+0)*C)),Ze=qt,ct=$t}1&De||(p(w[x+De-1],255&(ze=3*Ze+ct+131074>>2),ze>>16,Ce,J+(De-1)*C),null!=T&&p(T[D+De-1],255&(ze=3*ct+Ze+131074>>2),ze>>16,Q,Ae+(De-1)*C))}}function Re(){co[su]=tP,co[au]=eC,co[$0]=iP,co[lu]=tC,co[cu]=iC,co[Bp]=nC,co[J0]=nP,co[Zp]=eC,co[Gp]=tC,co[du]=iC,co[Hp]=nC}function Je(u){return u&~oP?0>u?0:255:u>>oC}function at(u,p){return Je((19077*u>>8)+(26149*p>>8)-14234)}function _t(u,p,C){return Je((19077*u>>8)-(6419*p>>8)-(13320*C>>8)+8708)}function bt(u,p){return Je((19077*u>>8)+(33050*p>>8)-17685)}function It(u,p,C,w,x){w[x+0]=at(u,C),w[x+1]=_t(u,p,C),w[x+2]=bt(u,p)}function Ci(u,p,C,w,x){w[x+0]=bt(u,p),w[x+1]=_t(u,p,C),w[x+2]=at(u,C)}function _i(u,p,C,w,x){var T=_t(u,p,C);p=T<<3&224|bt(u,p)>>3,w[x+0]=248&at(u,C)|T>>5,w[x+1]=p}function Zi(u,p,C,w,x){var T=240&bt(u,p)|15;w[x+0]=240&at(u,C)|_t(u,p,C)>>4,w[x+1]=T}function pn(u,p,C,w,x){w[x+0]=255,It(u,p,C,w,x+1)}function Ui(u,p,C,w,x){Ci(u,p,C,w,x),w[x+3]=255}function Eo(u,p,C,w,x){It(u,p,C,w,x),w[x+3]=255}function Vn(u,p){return 0>u?0:u>p?p:u}function Xo(u,p,C){N[u]=function(w,x,T,D,R,P,O,j,se){for(var ae=j+(-2&se)*C;j!=ae;)p(w[x+0],T[D+0],R[P+0],O,j),p(w[x+1],T[D+0],R[P+0],O,j+C),x+=2,++D,++P,j+=2*C;1&se&&p(w[x+0],T[D+0],R[P+0],O,j)}}function Xd(u,p,C){return 0==C?0==u?0==p?6:5:0==p?4:0:C}function Yl(u,p,C,w,x){switch(u>>>30){case 3:Cr(p,C,w,x,0);break;case 2:Pi(p,C,w,x);break;case 1:_n(p,C,w,x)}}function $l(u,p){var C,w,x=p.M,T=p.Nb,D=u.oc,R=u.pc+40,P=u.oc,O=u.pc+584,j=u.oc,se=u.pc+600;for(C=0;16>C;++C)D[R+32*C-1]=129;for(C=0;8>C;++C)P[O+32*C-1]=129,j[se+32*C-1]=129;for(0<x?D[R-1-32]=P[O-1-32]=j[se-1-32]=129:(r(D,R-32-1,127,21),r(P,O-32-1,127,9),r(j,se-32-1,127,9)),w=0;w<u.za;++w){var ae=p.ya[p.aa+w];if(0<w){for(C=-1;16>C;++C)o(D,R+32*C-4,D,R+32*C+12,4);for(C=-1;8>C;++C)o(P,O+32*C-4,P,O+32*C+4,4),o(j,se+32*C-4,j,se+32*C+4,4)}var ie=u.Gd,Te=u.Hd+w,Ce=ae.ad,J=ae.Hc;if(0<x&&(o(D,R-32,ie[Te].y,0,16),o(P,O-32,ie[Te].f,0,8),o(j,se-32,ie[Te].ea,0,8)),ae.Za){var Q=D,Ae=R-32+16;for(0<x&&(w>=u.za-1?r(Q,Ae,ie[Te].y[15],4):o(Q,Ae,ie[Te+1].y,0,4)),C=0;4>C;C++)Q[Ae+128+C]=Q[Ae+256+C]=Q[Ae+384+C]=Q[Ae+0+C];for(C=0;16>C;++C,J<<=2)Po[ae.Ob[C]](Q=D,Ae=R+sC[C]),Yl(J,Ce,16*+C,Q,Ae)}else if(Q=Xd(w,x,ae.Ob[0]),jr[Q](D,R),0!=J)for(C=0;16>C;++C,J<<=2)Yl(J,Ce,16*+C,D,R+sC[C]);for(C=ae.Gc,Q=Xd(w,x,ae.Dd),yr[Q](P,O),yr[Q](j,se),J=Ce,Q=P,Ae=O,255&(ae=C>>0)&&(170&ae?ec(J,256,Q,Ae):ro(J,256,Q,Ae)),ae=j,J=se,255&(C>>=8)&&(170&C?ec(Ce,320,ae,J):ro(Ce,320,ae,J)),x<u.Ub-1&&(o(ie[Te].y,0,D,R+480,16),o(ie[Te].f,0,P,O+224,8),o(ie[Te].ea,0,j,se+224,8)),ie=u.sa,Te=u.ta+16*w+16*T*u.R,Ce=u.qa,ae=u.ra+8*w+(C=8*T*u.B),J=u.Ha,Q=u.Ia+8*w+C,C=0;16>C;++C)o(ie,Te+C*u.R,D,R+32*C,16);for(C=0;8>C;++C)o(Ce,ae+C*u.B,P,O+32*C,8),o(J,Q+C*u.B,j,se+32*C,8)}}function La(u,p,C,w,x,T,D,R,P){var O=[0],j=[0],se=0,ae=null!=P?P.kd:0,ie=P??new Vl;if(null==u||12>C)return 7;ie.data=u,ie.w=p,ie.ha=C,p=[p],C=[C],ie.gb=[ie.gb];e:{var Te=p,Ce=C,J=ie.gb;if(i(null!=u),i(null!=Ce),i(null!=J),J[0]=0,12<=Ce[0]&&!t(u,Te[0],"RIFF")){if(t(u,Te[0]+8,"WEBP")){J=3;break e}var Q=qe(u,Te[0]+4);if(12>Q||4294967286<Q){J=3;break e}if(ae&&Q>Ce[0]-8){J=7;break e}J[0]=Q,Te[0]+=12,Ce[0]-=12}J=0}if(0!=J)return J;for(Q=0<ie.gb[0],C=C[0];;){e:{var Ae=u;Ce=p,J=C;var De=O,ke=j,Ke=Te=[0];if((ze=se=[se])[0]=0,8>J[0])J=7;else{if(!t(Ae,Ce[0],"VP8X")){if(10!=qe(Ae,Ce[0]+4)){J=3;break e}if(18>J[0]){J=7;break e}var Ze=qe(Ae,Ce[0]+8),ct=1+We(Ae,Ce[0]+12);if(2147483648<=ct*(Ae=1+We(Ae,Ce[0]+15))){J=3;break e}null!=Ke&&(Ke[0]=Ze),null!=De&&(De[0]=ct),null!=ke&&(ke[0]=Ae),Ce[0]+=18,J[0]-=18,ze[0]=1}J=0}}if(se=se[0],0!=J)return J;if(Ce=!!(2&(Te=Te[0])),!Q&&se)return 3;if(null!=T&&(T[0]=!!(16&Te)),null!=D&&(D[0]=Ce),null!=R&&(R[0]=0),D=O[0],Te=j[0],se&&Ce&&null==P){J=0;break}if(4>C){J=7;break}if(Q&&se||!Q&&!se&&!t(u,p[0],"ALPH")){C=[C],ie.na=[ie.na],ie.P=[ie.P],ie.Sa=[ie.Sa];e:{J=p,Q=C;var ze=ie.gb;De=ie.na,ke=ie.P,Ke=ie.Sa,ct=22,i(null!=(Ze=u)),i(null!=Q),Ae=J[0];var qt=Q[0];for(i(null!=De),i(null!=Ke),De[0]=null,ke[0]=null,Ke[0]=0;;){if(J[0]=Ae,Q[0]=qt,8>qt){J=7;break e}var $t=qe(Ze,Ae+4);if(4294967286<$t){J=3;break e}var Nt=8+$t+1&-2;if(ct+=Nt,0<ze&&ct>ze){J=3;break e}if(!t(Ze,Ae,"VP8 ")||!t(Ze,Ae,"VP8L")){J=0;break e}if(qt[0]<Nt){J=7;break e}t(Ze,Ae,"ALPH")||(De[0]=Ze,ke[0]=Ae+8,Ke[0]=$t),Ae+=Nt,qt-=Nt}}if(C=C[0],ie.na=ie.na[0],ie.P=ie.P[0],ie.Sa=ie.Sa[0],0!=J)break}C=[C],ie.Ja=[ie.Ja],ie.xa=[ie.xa];e:if(ze=u,J=p,Q=C,De=ie.gb[0],ke=ie.Ja,Ke=ie.xa,Ze=J[0],Ae=!t(ze,Ze,"VP8 "),ct=!t(ze,Ze,"VP8L"),i(null!=ze),i(null!=Q),i(null!=ke),i(null!=Ke),8>Q[0])J=7;else{if(Ae||ct){if(ze=qe(ze,Ze+4),12<=De&&ze>De-12){J=3;break e}if(ae&&ze>Q[0]-8){J=7;break e}ke[0]=ze,J[0]+=8,Q[0]-=8,Ke[0]=ct}else Ke[0]=5<=Q[0]&&47==ze[Ze+0]&&!(ze[Ze+4]>>5),ke[0]=Q[0];J=0}if(C=C[0],ie.Ja=ie.Ja[0],ie.xa=ie.xa[0],p=p[0],0!=J)break;if(4294967286<ie.Ja)return 3;if(null==R||Ce||(R[0]=ie.xa?2:1),D=[D],Te=[Te],ie.xa){if(5>C){J=7;break}R=D,ae=Te,Ce=T,null==u||5>C?u=0:5<=C&&47==u[p+0]&&!(u[p+4]>>5)?(Q=[0],ze=[0],De=[0],ce(ke=new F,u,p,C),ut(ke,Q,ze,De)?(null!=R&&(R[0]=Q[0]),null!=ae&&(ae[0]=ze[0]),null!=Ce&&(Ce[0]=De[0]),u=1):u=0):u=0}else{if(10>C){J=7;break}R=Te,null==u||10>C||!Nd(u,p+3,C-3)?u=0:(ae=u[p+0]|u[p+1]<<8|u[p+2]<<16,Ce=16383&(u[p+7]<<8|u[p+6]),u=16383&(u[p+9]<<8|u[p+8]),1&ae||3<(ae>>1&7)||!(ae>>4&1)||ae>>5>=ie.Ja||!Ce||!u?u=0:(D&&(D[0]=Ce),R&&(R[0]=u),u=1))}if(!u||(D=D[0],Te=Te[0],se&&(O[0]!=D||j[0]!=Te)))return 3;null!=P&&(P[0]=ie,P.offset=p-P.w,i(4294967286>p-P.w),i(P.offset==P.ha-C));break}return 0==J||7==J&&se&&null==P?(null!=T&&(T[0]|=null!=ie.na&&0<ie.na.length),null!=w&&(w[0]=D),null!=x&&(x[0]=Te),0):J}function Jl(u,p,C){var w=p.width,x=p.height,T=0,D=0,R=w,P=x;if(p.Da=null!=u&&0<u.Da,p.Da&&(R=u.cd,P=u.bd,T=u.v,D=u.j,11>C||(T&=-2,D&=-2),0>T||0>D||0>=R||0>=P||T+R>w||D+P>x))return 0;if(p.v=T,p.j=D,p.va=T+R,p.o=D+P,p.U=R,p.T=P,p.da=null!=u&&0<u.da,p.da){if(!St(R,P,C=[u.ib],T=[u.hb]))return 0;p.ib=C[0],p.hb=T[0]}return p.ob=null!=u&&u.ob,p.Kb=null==u||!u.Sd,p.da&&(p.ob=p.ib<3*w/4&&p.hb<3*x/4,p.Kb=0),1}function Kl(u){if(null==u)return 2;if(11>u.S){var p=u.f.RGBA;p.fb+=(u.height-1)*p.A,p.A=-p.A}else(p=u.f.kb).O+=((u=u.height)-1)*p.fa,p.fa=-p.fa,p.N+=(u-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(u-1>>1)*p.Db,p.Db=-p.Db,null!=p.F&&(p.J+=(u-1)*p.lb,p.lb=-p.lb);return 0}function Ia(u,p,C,w){if(null==w||0>=u||0>=p)return 2;if(null!=C){if(C.Da){var x=C.cd,T=C.bd,D=-2&C.v,R=-2&C.j;if(0>D||0>R||0>=x||0>=T||D+x>u||R+T>p)return 2;u=x,p=T}if(C.da){if(!St(u,p,x=[C.ib],T=[C.hb]))return 2;u=x[0],p=T[0]}}w.width=u,w.height=p;e:{var P=w.width,O=w.height;if(u=w.S,0>=P||0>=O||!(u>=su&&13>u))u=2;else{if(0>=w.Rd&&null==w.sd){D=T=x=p=0;var j=(R=P*aC[u])*O;if(11>u||(T=(O+1)/2*(p=(P+1)/2),12==u&&(D=(x=P)*O)),null==(O=s(j+2*T+D))){u=1;break e}w.sd=O,11>u?((P=w.f.RGBA).eb=O,P.fb=0,P.A=R,P.size=j):((P=w.f.kb).y=O,P.O=0,P.fa=R,P.Fd=j,P.f=O,P.N=0+j,P.Ab=p,P.Cd=T,P.ea=O,P.W=0+j+T,P.Db=p,P.Ed=T,12==u&&(P.F=O,P.J=0+j+2*T),P.Tc=D,P.lb=x)}if(p=1,T=w.width,D=w.height,(x=w.S)>=su&&13>x)if(11>x)u=w.f.RGBA,p&=(R=Math.abs(u.A))*(D-1)+T<=u.size,p&=R>=T*aC[x],p&=null!=u.eb;else{u=w.f.kb,R=(T+1)/2,j=(D+1)/2,P=Math.abs(u.fa),O=Math.abs(u.Ab);var se=Math.abs(u.Db),ae=Math.abs(u.lb);p&=P*(D-1)+T<=u.Fd,p&=O*(j-1)+R<=u.Cd,p=(p&=se*(j-1)+R<=u.Ed)&P>=T&O>=R&se>=R,p&=null!=u.y,p&=null!=u.f,p&=null!=u.ea,12==x&&(p&=ae>=T,p&=ae*(D-1)+T<=u.Tc,p&=null!=u.F)}else p=0;u=p?0:2}}return 0!=u||null!=C&&C.fd&&(u=Kl(w)),u}var en=64,Oa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Na=24,Ba=32,Ql=8,On=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(u){return u},N.Predictor2=function(u,p,C){return p[C+0]},N.Predictor3=function(u,p,C){return p[C+1]},N.Predictor4=function(u,p,C){return p[C-1]},N.Predictor5=function(u,p,C){return Ve(Ve(u,p[C+1]),p[C+0])},N.Predictor6=function(u,p,C){return Ve(u,p[C-1])},N.Predictor7=function(u,p,C){return Ve(u,p[C+0])},N.Predictor8=function(u,p,C){return Ve(p[C-1],p[C+0])},N.Predictor9=function(u,p,C){return Ve(p[C+0],p[C+1])},N.Predictor10=function(u,p,C){return Ve(Ve(u,p[C-1]),Ve(p[C+0],p[C+1]))},N.Predictor11=function(u,p,C){var w=p[C+0];return 0>=At(w>>24&255,u>>24&255,(p=p[C-1])>>24&255)+At(w>>16&255,u>>16&255,p>>16&255)+At(w>>8&255,u>>8&255,p>>8&255)+At(255&w,255&u,255&p)?w:u},N.Predictor12=function(u,p,C){var w=p[C+0];return(st((u>>24&255)+(w>>24&255)-((p=p[C-1])>>24&255))<<24|st((u>>16&255)+(w>>16&255)-(p>>16&255))<<16|st((u>>8&255)+(w>>8&255)-(p>>8&255))<<8|st((255&u)+(255&w)-(255&p)))>>>0},N.Predictor13=function(u,p,C){var w=p[C-1];return(wt((u=Ve(u,p[C+0]))>>24&255,w>>24&255)<<24|wt(u>>16&255,w>>16&255)<<16|wt(u>>8&255,w>>8&255)<<8|wt(u>>0&255,w>>0&255))>>>0};var Op=N.PredictorAdd0;N.PredictorAdd1=Dt,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var Xl=N.PredictorAdd2;Ft("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),Ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var eu,oo=N.ColorIndexInverseTransform,Za=N.MapARGB,tu=N.VP8LColorIndexInverseTransformAlpha,iu=N.MapAlpha,zr=N.VP8LPredictorsAdd=[];zr.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Ds,Nn,Sn,Vr,mr,vr,Ga,Cr,Pi,ec,_n,ro,Ha,nu,tc,Fs,Rs,Ur,Ms,qa,Es,Wr,ic,so,ao,ri,si,Li,zi=s(511),wr=s(2041),nc=s(225),za=s(767),ou=0,Np=wr,ru=nc,Un=za,lo=zi,su=0,au=1,$0=2,lu=3,cu=4,Bp=5,J0=6,Zp=7,Gp=8,du=9,Hp=10,HE=[2,3,7],qE=[3,3,11],K0=[280,256,256,256,40],zE=[0,1,1,1,0],VE=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],UE=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],WE=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jE=8,qp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],oc=null,YE=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],$E=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Q0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],JE=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],KE=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],QE=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],XE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],jr=[],Po=[],yr=[],eP=1,X0=2,Yr=[],co=[];ye("UpsampleRgbLinePair",It,3),ye("UpsampleBgrLinePair",Ci,3),ye("UpsampleRgbaLinePair",Eo,4),ye("UpsampleBgraLinePair",Ui,4),ye("UpsampleArgbLinePair",pn,4),ye("UpsampleRgba4444LinePair",Zi,2),ye("UpsampleRgb565LinePair",_i,2);var tP=N.UpsampleRgbLinePair,iP=N.UpsampleBgrLinePair,eC=N.UpsampleRgbaLinePair,tC=N.UpsampleBgraLinePair,iC=N.UpsampleArgbLinePair,nC=N.UpsampleRgba4444LinePair,nP=N.UpsampleRgb565LinePair,uu=16,hu=1<<uu-1,rc=-227,Vp=482,oC=6,oP=(256<<oC)-1,rC=0,rP=s(256),sP=s(256),aP=s(256),lP=s(256),cP=s(Vp-rc),dP=s(Vp-rc);Xo("YuvToRgbRow",It,3),Xo("YuvToBgrRow",Ci,3),Xo("YuvToRgbaRow",Eo,4),Xo("YuvToBgraRow",Ui,4),Xo("YuvToArgbRow",pn,4),Xo("YuvToRgba4444Row",Zi,2),Xo("YuvToRgb565Row",_i,2);var sC=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gu=[0,2,8],uP=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(u,p,C,w,x){var T=au,D=new Ea,R=new Ao;D.ba=R,R.S=T,R.width=[R.width],R.height=[R.height];var P=R.width,O=R.height,j=new hr;if(null==j||null==u)var se=2;else i(null!=j),se=La(u,p,C,j.width,j.height,j.Pd,j.Qd,j.format,null);if(0!=se?P=0:(null!=P&&(P[0]=j.width[0]),null!=O&&(O[0]=j.height[0]),P=1),P){R.width=R.width[0],R.height=R.height[0],null!=w&&(w[0]=R.width),null!=x&&(x[0]=R.height);e:{if(w=new Aa,(x=new Vl).data=u,x.w=p,x.ha=C,x.kd=1,p=[0],i(null!=x),(0==(u=La(x.data,x.w,x.ha,null,null,null,p,null,x))||7==u)&&p[0]&&(u=4),0==(p=u)){if(i(null!=D),w.data=x.data,w.w=x.w+x.offset,w.ha=x.ha-x.offset,w.put=Wo,w.ac=Xi,w.bc=jo,w.ma=D,x.xa){if(null==(u=no())){D=1;break e}if(function(ae,ie){var Te=[0],Ce=[0],J=[0];t:for(;;){if(null==ae)return 0;if(null==ie)return ae.a=2,0;if(ae.l=ie,ae.a=0,ce(ae.m,ie.data,ie.w,ie.ha),!ut(ae.m,Te,Ce,J)){ae.a=3;break t}if(ae.xb=X0,ie.width=Te[0],ie.height=Ce[0],!Jo(Te[0],Ce[0],1,ae,null))break t;return 1}return i(0!=ae.a),0}(u,w)){if(w=0==(p=Ia(w.width,w.height,D.Oa,D.ba))){t:{w=u;i:for(;;){if(null==w){w=0;break t}if(i(null!=w.s.yc),i(null!=w.s.Ya),i(0<w.s.Wb),i(null!=(C=w.l)),i(null!=(x=C.ma)),0!=w.xb){if(w.ca=x.ba,w.tb=x.tb,i(null!=w.ca),!Jl(x.Oa,C,lu)){w.a=2;break i}if(!_s(w,C.width)||C.da)break i;if((C.da||zt(w.ca.S))&&re(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=w.ca.f.kb.F&&re()),w.Pb&&0<w.s.ua&&null==w.s.vb.X&&!gt(w.s.vb,w.s.Wa.Xa)){w.a=1;break i}w.xb=0}if(!Fo(w,w.V,w.Ba,w.c,w.i,C.o,wa))break i;x.Dc=w.Ma,w=1;break t}i(0!=w.a),w=0}w=!w}w&&(p=u.a)}else p=u.a}else{if(null==(u=new vp)){D=1;break e}if(u.Fa=x.na,u.P=x.P,u.qc=x.Sa,Bd(u,w)){if(0==(p=Ia(w.width,w.height,D.Oa,D.ba))){if(u.Aa=0,C=D.Oa,i(null!=(x=u)),null!=C){if(0<(P=0>(P=C.Md)?0:100<P?255:255*P/100)){for(O=j=0;4>O;++O)12>(se=x.pb[O]).lc&&(se.ia=P*uP[0>se.lc?0:se.lc]>>3),j|=se.ia;j&&(alert("todo:VP8InitRandom"),x.ia=1)}x.Ga=C.Id,100<x.Ga?x.Ga=100:0>x.Ga&&(x.Ga=0)}(function Cp(u,p){if(null==u)return 0;if(null==p)return Ei(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!Bd(u,p))return 0;if(i(u.cb),null==p.ac||p.ac(p)){p.ob&&(u.L=0);var C=gu[u.L];if(2==u.L?(u.yb=0,u.zb=0):(u.yb=p.v-C>>4,u.zb=p.j-C>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=p.o+15+C>>4,u.Hb=p.va+15+C>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var w=u.ed;for(C=0;4>C;++C){var x;if(u.Qa.Cb){var T=u.Qa.Lb[C];u.Qa.Fb||(T+=w.Tb)}else T=w.Tb;for(x=0;1>=x;++x){var D=u.gd[C][x],R=T;if(w.Pc&&(R+=w.vd[0],x&&(R+=w.od[0])),0<(R=0>R?0:63<R?63:R)){var P=R;0<w.wb&&(P=4<w.wb?P>>2:P>>1)>9-w.wb&&(P=9-w.wb),1>P&&(P=1),D.dd=P,D.tc=2*R+P,D.ld=40<=R?2:15<=R?1:0}else D.tc=0;D.La=x}}}C=0}else Ei(u,6,"Frame setup failed"),C=u.a;if(C=0==C){if(C){u.$c=0,0<u.Aa||(u.Ic=1);e:{w=4*(P=u.za);var O=32*P,j=P+1,se=0<u.L?P*(0<u.Aa?2:1):0,ae=(2==u.Aa?2:1)*P;if((D=w+832+(x=3*(16*(C=u.Ic)+gu[u.L])/2*O)+(T=null!=u.Fa&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=D)C=0;else{if(D>u.Vb){if(u.Vb=0,u.Ec=s(D),u.Fc=0,null==u.Ec){C=Ei(u,1,"no memory during frame initialization.");break e}u.Vb=D}R=u.Fc,u.Ac=D=u.Ec,u.Bc=R,R+=w,u.Gd=a(O,Od),u.Hd=0,u.rb=a(j+1,Id),u.sb=1,u.wa=se?a(se,xa):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=P),i(!0),u.oc=D,u.pc=R,R+=832,u.ya=a(ae,Ll),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,2==u.Aa&&(u.D.aa+=P),u.R=16*P,u.B=8*P,P=(O=gu[u.L])*u.R,O=O/2*u.B,u.sa=D,u.ta=R+P,u.qa=u.sa,u.ra=u.ta+16*C*u.R+O,u.Ha=u.qa,u.Ia=u.ra+8*C*u.B+O,u.$c=0,R+=x,u.mb=T?D:null,u.nb=T?R:null,i(R+T<=u.Fc+u.Vb),Il(u),r(u.Ac,u.Bc,0,w),C=1}}if(C){if(p.ka=0,p.y=u.sa,p.O=u.ta,p.f=u.qa,p.N=u.ra,p.ea=u.Ha,p.Vd=u.Ia,p.fa=u.R,p.Rc=u.B,p.F=null,p.J=0,!ou){for(C=-255;255>=C;++C)zi[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)wr[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)nc[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)za[255+C]=0>C?0:255<C?255:C;ou=1}Ga=bp,Cr=wp,ec=Hd,_n=yp,ro=qd,Pi=Gd,Ha=Hl,nu=ks,tc=Lp,Fs=ql,Rs=Pp,Ur=Ma,Ms=zl,qa=Kd,Es=Jd,Wr=Qo,ic=fr,so=Ep,Po[0]=Ko,Po[1]=Sp,Po[2]=kp,Po[3]=Tp,Po[4]=Ud,Po[5]=Fa,Po[6]=Wd,Po[7]=Bl,Po[8]=Fp,Po[9]=Dp,jr[0]=zd,jr[1]=xp,jr[2]=pr,jr[3]=Ta,jr[4]=gn,jr[5]=Ap,jr[6]=Vd,yr[0]=Gr,yr[1]=_p,yr[2]=Rp,yr[3]=Zl,yr[4]=As,yr[5]=Mp,yr[6]=Gl,C=1}else C=0}C&&(C=function(ie,Te){for(ie.M=0;ie.M<ie.Va;++ie.M){var Ce,J=ie.Jc[ie.M&ie.Xb],Q=ie.m,Ae=ie;for(Ce=0;Ce<Ae.za;++Ce){var De=Q,ke=Ae,Ke=ke.Ac,Ze=ke.Bc+4*Ce,ct=ke.zc,ze=ke.ya[ke.aa+Ce];if(ze.$b=ke.Qa.Bb?ge(De,ke.Pa.jb[0])?2+ge(De,ke.Pa.jb[2]):ge(De,ke.Pa.jb[1]):0,ke.kc&&(ze.Ad=ge(De,ke.Bd)),ze.Za=!ge(De,145)+0,ze.Za){var qt=ze.Ob,$t=0;for(ke=0;4>ke;++ke){var Nt,Et=ct[0+ke];for(Nt=0;4>Nt;++Nt){for(var ii=Q0[ge(De,(Et=KE[Ke[Ze+Nt]][Et])[0])];0<ii;)ii=Q0[2*ii+ge(De,Et[ii])];Ke[Ze+Nt]=Et=-ii}o(qt,$t,Ke,Ze,4),$t+=4,ct[0+ke]=Et}}else Et=ge(De,156)?ge(De,128)?1:3:ge(De,163)?2:0,ze.Ob[0]=Et,r(Ke,Ze,Et,4),r(ct,0,Et,4);ze.Dd=ge(De,142)?ge(De,114)?ge(De,183)?1:3:2:0}if(Ae.m.Ka)return Ei(ie,7,"Premature end-of-partition0 encountered.");for(;ie.ja<ie.za;++ie.ja){if(Ae=J,De=(Q=ie).rb[Q.sb-1],Ke=Q.rb[Q.sb+Q.ja],Ce=Q.ya[Q.aa+Q.ja],Ze=Q.kc?Ce.Ad:0)De.la=Ke.la=0,Ce.Za||(De.Na=Ke.Na=0),Ce.Hc=0,Ce.Gc=0,Ce.ia=0;else{var Xt,xt;if(De=Ke,Ke=Ae,Ze=Q.Pa.Xc,ze=Q.pb[(ct=Q.ya[Q.aa+Q.ja]).$b],$t=Q.rb[Q.sb-1],Et=Nt=0,r(ke=ct.ad,qt=0,0,384),ct.Za)var Gi=0,Bn=Ze[3];else{ii=s(16);var Hi=De.Na+$t.Na;if(Hi=oc(Ke,Ze[1],Hi,ze.Eb,0,ii,0),De.Na=$t.Na=(0<Hi)+0,1<Hi)Ga(ii,0,ke,qt);else{var Zn=ii[0]+3>>3;for(ii=0;256>ii;ii+=16)ke[qt+ii]=Zn}Gi=1,Bn=Ze[0]}var Jt=15&De.la,Wn=15&$t.la;for(ii=0;4>ii;++ii){var jn=1&Wn;for(Zn=xt=0;4>Zn;++Zn)Jt=Jt>>1|(jn=(Hi=oc(Ke,Bn,Hi=jn+(1&Jt),ze.Sc,Gi,ke,qt))>Gi)<<7,xt=xt<<2|(3<Hi?3:1<Hi?2:0!=ke[qt+0]),qt+=16;Jt>>=4,Wn=Wn>>1|jn<<7,Nt=(Nt<<8|xt)>>>0}for(Bn=Jt,Gi=Wn>>4,Xt=0;4>Xt;Xt+=2){for(xt=0,Jt=De.la>>4+Xt,Wn=$t.la>>4+Xt,ii=0;2>ii;++ii){for(jn=1&Wn,Zn=0;2>Zn;++Zn)Jt=Jt>>1|(jn=0<(Hi=oc(Ke,Ze[2],Hi=jn+(1&Jt),ze.Qc,0,ke,qt)))<<3,xt=xt<<2|(3<Hi?3:1<Hi?2:0!=ke[qt+0]),qt+=16;Jt>>=2,Wn=Wn>>1|jn<<5}Et|=xt<<4*Xt,Bn|=Jt<<4<<Xt,Gi|=(240&Wn)<<Xt}De.la=Bn,$t.la=Gi,ct.Hc=Nt,ct.Gc=Et,ct.ia=43690&Et?0:ze.ia,Ze=!(Nt|Et)}if(0<Q.L&&(Q.wa[Q.Y+Q.ja]=Q.gd[Ce.$b][Ce.Za],Q.wa[Q.Y+Q.ja].La|=!Ze),Ae.Ka)return Ei(ie,7,"Premature end-of-file encountered.")}if(Il(ie),Q=Te,Ae=1,Ce=(J=ie).D,De=0<J.L&&J.M>=J.zb&&J.M<=J.Va,0==J.Aa)e:{if(Ce.M=J.M,Ce.uc=De,$l(J,Ce),Ae=1,Ce=(xt=J.D).Nb,De=(Et=gu[J.L])*J.R,Ze=J.sa,ct=J.ta-De+(ii=16*Ce*J.R),ze=J.qa,ke=J.ra-(Ke=Et/2*J.B)+(Zn=8*Ce*J.B),qt=J.Ha,$t=J.Ia-Ke+Zn,Wn=0==(Jt=xt.M),Nt=Jt>=J.Va-1,2==J.Aa&&$l(J,xt),xt.uc)for(jn=(Hi=J).D.M,i(Hi.D.uc),xt=Hi.yb;xt<Hi.Hb;++xt){Bn=jn;var Wi=(tn=(xi=Hi).D).Nb,tn=tn.wa[tn.Y+(Gi=xt)],xn=xi.sa,uo=xi.ta+16*Wi*(Xt=xi.R)+16*Gi,er=tn.dd,ji=tn.tc;if(0!=ji)if(i(3<=ji),1==xi.L)0<Gi&&Wr(xn,uo,Xt,ji+4),tn.La&&so(xn,uo,Xt,ji),0<Bn&&Es(xn,uo,Xt,ji+4),tn.La&&ic(xn,uo,Xt,ji);else{var br=xi.B,Ps=xi.qa,Va=xi.ra+8*Wi*br+8*Gi,$r=xi.Ha,xi=xi.Ia+8*Wi*br+8*Gi;Wi=tn.ld,0<Gi&&(nu(xn,uo,Xt,ji+4,er,Wi),Fs(Ps,Va,$r,xi,br,ji+4,er,Wi)),tn.La&&(Ur(xn,uo,Xt,ji,er,Wi),qa(Ps,Va,$r,xi,br,ji,er,Wi)),0<Bn&&(Ha(xn,uo,Xt,ji+4,er,Wi),tc(Ps,Va,$r,xi,br,ji+4,er,Wi)),tn.La&&(Rs(xn,uo,Xt,ji,er,Wi),Ms(Ps,Va,$r,xi,br,ji,er,Wi))}}if(J.ia&&alert("todo:DitherRow"),null!=Q.put){if(xt=16*Jt,Jt=16*(Jt+1),Wn?(Q.y=J.sa,Q.O=J.ta+ii,Q.f=J.qa,Q.N=J.ra+Zn,Q.ea=J.Ha,Q.W=J.Ia+Zn):(xt-=Et,Q.y=Ze,Q.O=ct,Q.f=ze,Q.N=ke,Q.ea=qt,Q.W=$t),Nt||(Jt-=Et),Jt>Q.o&&(Jt=Q.o),Q.F=null,Q.J=null,null!=J.Fa&&0<J.Fa.length&&xt<Jt&&(Q.J=jl(J,Q,xt,Jt-xt),Q.F=J.mb,null==Q.F&&0==Q.F.length)){Ae=Ei(J,3,"Could not decode alpha data.");break e}xt<Q.j&&(Et=Q.j-xt,xt=Q.j,i(!(1&Et)),Q.O+=J.R*Et,Q.N+=J.B*(Et>>1),Q.W+=J.B*(Et>>1),null!=Q.F&&(Q.J+=Q.width*Et)),xt<Jt&&(Q.O+=Q.v,Q.N+=Q.v>>1,Q.W+=Q.v>>1,null!=Q.F&&(Q.J+=Q.v),Q.ka=xt-Q.j,Q.U=Q.va-Q.v,Q.T=Jt-xt,Ae=Q.put(Q))}Ce+1!=J.Ic||Nt||(o(J.sa,J.ta-De,Ze,ct+16*J.R,De),o(J.qa,J.ra-Ke,ze,ke+8*J.B,Ke),o(J.Ha,J.Ia-Ke,qt,$t+8*J.B,Ke))}if(!Ae)return Ei(ie,6,"Output aborted.")}return 1}(u,p)),null!=p.bc&&p.bc(p),C&=1}return C?(u.cb=0,C):0})(u,w)||(p=u.a)}}else p=u.a}0==p&&null!=D.Oa&&D.Oa.fd&&(p=Kl(D.ba))}D=p}T=0!=D?null:11>T?R.f.RGBA.eb:R.f.kb.y}else T=null;return T};var aC=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(N,X){for(var ve="",L=0;L<4;L++)ve+=String.fromCharCode(N[X++]);return ve}function h(N,X){return(N[X+0]<<0|N[X+1]<<8|N[X+2]<<16)>>>0}function g(N,X){return(N[X+0]<<0|N[X+1]<<8|N[X+2]<<16|N[X+3]<<24)>>>0}new c;var m=[0],f=[0],y=[],b=new c,S=e,_=function(N,X){var ve={},L=0,I=!1,Y=0,z=0;if(ve.frames=[],!
/** @license
             * Copyright (c) 2017 Dominik Homberger
            Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
            The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
            https://webpjs.appspot.com
            WebPRiffParser dominikhlbg@gmail.com
            */
function(B,H,W,oe){for(var de=0;de<4;de++)if(B[H+de]!="RIFF".charCodeAt(de))return!0;return!1}(N,X)){var me,he;for(g(N,X+=4),X+=8;X<N.length;){var we=d(N,X),ce=g(N,X+=4);X+=4;var be=ce+(1&ce);switch(we){case"VP8 ":case"VP8L":void 0===ve.frames[L]&&(ve.frames[L]={}),(F=ve.frames[L]).src_off=I?z:X-8,F.src_size=Y+ce+8,L++,I&&(I=!1,Y=0,z=0);break;case"VP8X":(F=ve.header={}).feature_flags=N[X];var xe=X+4;F.canvas_width=1+h(N,xe),F.canvas_height=1+h(N,xe+=3),xe+=3;break;case"ALPH":I=!0,Y=be+8,z=X-8;break;case"ANIM":(F=ve.header).bgcolor=g(N,X),F.loop_count=(me=N)[(he=xe=X+4)+0]<<0|me[he+1]<<8,xe+=2;break;case"ANMF":var je,F;(F=ve.frames[L]={}).offset_x=2*h(N,X),F.offset_y=2*h(N,X+=3),F.width=1+h(N,X+=3),F.height=1+h(N,X+=3),F.duration=h(N,X+=3),X+=3,je=N[X++],F.dispose=1&je,F.blend=je>>1&1}"ANMF"!=we&&(X+=be)}return ve}}(S,0);_.response=S,_.rgbaoutput=!0,_.dataurl=!1;var k=_.header?_.header:null,E=_.frames?_.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],f=[k.canvas_width];for(var G=0;G<E.length&&0!=E[G].blend;G++);}var K=E[0],ne=b.WebPDecodeRGBA(S,K.src_off,K.src_size,f,m);K.rgba=ne,K.imgwidth=f[0],K.imgheight=m[0];for(var V=0;V<f[0]*m[0]*4;V++)y[V]=ne[V];return this.width=f,this.height=m,this.data=y,this}(function(e){var t=function(m,f,y,b){var S=4,_=a;switch(b){case e.image_compression.FAST:S=1,_=s;break;case e.image_compression.MEDIUM:S=6,_=l;break;case e.image_compression.SLOW:S=9,_=c}var k=kl(m=o(m,f,y,_),{level:S});return e.__addimage__.arrayBufferToBinaryString(k)},o=function(m,f,y,b){for(var S,_,k,E=m.length/f,G=new Uint8Array(m.length+E),K=h(),ne=0;ne<E;ne+=1){if(S=m.subarray(k=ne*f,k+f),b)G.set(b(S,y,_),k+ne);else{for(var V,N=K.length,X=[];V<N;V+=1)X[V]=K[V](S,y,_);var ve=g(X.concat());G.set(X[ve],k+ne)}_=S}return G},r=function(m){var f=Array.apply([],m);return f.unshift(0),f},s=function(m,f){var b=[],S=m.length;b[0]=1;for(var _=0;_<S;_+=1)b[_+1]=m[_]-(m[_-f]||0)+256&255;return b},a=function(m,f,y){var S=[],_=m.length;S[0]=2;for(var k=0;k<_;k+=1)S[k+1]=m[k]-(y&&y[k]||0)+256&255;return S},l=function(m,f,y){var _=[],k=m.length;_[0]=3;for(var E=0;E<k;E+=1)_[E+1]=m[E]+256-((m[E-f]||0)+(y&&y[E]||0)>>>1)&255;return _},c=function(m,f,y){var k,E=[],G=m.length;E[0]=4;for(var K=0;K<G;K+=1)k=d(m[K-f]||0,y&&y[K]||0,y&&y[K-f]||0),E[K+1]=m[K]-k+256&255;return E},d=function(m,f,y){if(m===f&&f===y)return m;var b=Math.abs(f-y),S=Math.abs(m-y),_=Math.abs(m+f-y-y);return b<=S&&b<=_?m:S<=_?f:y},h=function(){return[r,s,a,l,c]},g=function(m){var f=m.map(function(y){return y.reduce(function(b,S){return b+Math.abs(S)},0)});return f.indexOf(Math.min.apply(null,f))};e.processPNG=function(m,f,y,b){var S,_,k,E,G,K,ne,V,N,X,ve,L,I,Y,z,me=this.decode.FLATE_DECODE,he="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(k=new cF(m)).imgData,_=k.bits,S=k.colorSpace,G=k.colors,-1!==[4,6].indexOf(k.colorType)){if(8===k.bits){N=(V=32==k.pixelBitlength?new Uint32Array(k.decodePixels().buffer):16==k.pixelBitlength?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,ve=new Uint8Array(N*k.colors),X=new Uint8Array(N);var we,ce=k.pixelBitlength-k.bits;for(Y=0,z=0;Y<N;Y++){for(I=V[Y],we=0;we<ce;)ve[z++]=I>>>we&255,we+=k.bits;X[Y]=I>>>we&255}}if(16===k.bits){N=(V=new Uint32Array(k.decodePixels().buffer)).length,ve=new Uint8Array(N*(32/k.pixelBitlength)*k.colors),X=new Uint8Array(N*(32/k.pixelBitlength)),L=k.colors>1,Y=0,z=0;for(var be=0;Y<N;)I=V[Y++],ve[z++]=I>>>0&255,L&&(ve[z++]=I>>>16&255,I=V[Y++],ve[z++]=I>>>0&255),X[be++]=I>>>16&255;_=8}b!==e.image_compression.NONE?(m=t(ve,k.width*k.colors,k.colors,b),ne=t(X,k.width,1,b)):(m=ve,ne=X,me=void 0)}if(3===k.colorType&&(S=this.color_spaces.INDEXED,K=k.palette,k.transparency.indexed)){var xe=k.transparency.indexed,je=0;for(Y=0,N=xe.length;Y<N;++Y)je+=xe[Y];if((je/=255)==N-1&&-1!==xe.indexOf(0))E=[xe.indexOf(0)];else if(je!==N){for(V=k.decodePixels(),X=new Uint8Array(V.length),Y=0,N=V.length;Y<N;Y++)X[Y]=xe[V[Y]];ne=t(X,k.width,1)}}var F=function(B){var H;switch(B){case e.image_compression.FAST:H=11;break;case e.image_compression.MEDIUM:H=13;break;case e.image_compression.SLOW:H=14;break;default:H=12}return H}(b);return me===this.decode.FLATE_DECODE&&(he="/Predictor "+F+" "),he+="/Colors "+G+" /BitsPerComponent "+_+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(ne&&this.__addimage__.isArrayBuffer(ne)||this.__addimage__.isArrayBufferView(ne))&&(ne=this.__addimage__.arrayBufferToBinaryString(ne)),{alias:y,data:m,index:f,filter:me,decodeParameters:he,transparency:E,palette:K,sMask:ne,predictor:F,width:k.width,height:k.height,bitsPerComponent:_,colorSpace:S}}}})(dt.API),function(e){e.processGIF89A=function(i,t,o,r){var s=new dF(i),a=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:a,height:l},h=new ip(100).encode(d,100);return e.processJPEG.call(this,h,t,o,r)},e.processGIF87A=e.processGIF89A}(dt.API),So.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var i=0;i<e;i++){var t=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[i]={red:r,green:o,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},So.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[e]()}catch(t){ei.log("bit decode error:"+t)}},So.prototype.bit1=function(){var e,i=Math.ceil(this.width/8),t=i%4;for(e=this.height-1;e>=0;e--){for(var o=this.bottom_up?e:this.height-1-e,r=0;r<i;r++)for(var s=this.datav.getUint8(this.pos++,!0),a=o*this.width*4+8*r*4,l=0;l<8&&8*r+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}0!==t&&(this.pos+=4-t)}},So.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),i=e%4,t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,r=0;r<e;r++){var s=this.datav.getUint8(this.pos++,!0),a=o*this.width*4+2*r*4,c=15&s,d=this.palette[s>>4];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*r+1>=this.width)break;this.data[a+4]=(d=this.palette[c]).blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}0!==i&&(this.pos+=4-i)}},So.prototype.bit8=function(){for(var e=this.width%4,i=this.height-1;i>=0;i--){for(var t=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var r=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*o;if(r<this.palette.length){var a=this.palette[r];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==e&&(this.pos+=4-e)}},So.prototype.bit15=function(){for(var e=this.width%3,i=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&i)/i*255|0,l=(s>>5&i)/i*255|0,d=s>>15?255:0,h=o*this.width*4+4*r;this.data[h]=(s>>10&i)/i*255|0,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=d}this.pos+=e}},So.prototype.bit16=function(){for(var e=this.width%3,i=parseInt("11111",2),t=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var r=this.bottom_up?o:this.height-1-o,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&i)/i*255|0,c=(a>>5&t)/t*255|0,h=r*this.width*4+4*s;this.data[h]=(a>>11)/i*255|0,this.data[h+1]=c,this.data[h+2]=l,this.data[h+3]=255}this.pos+=e}},So.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+4*t;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=o,this.data[a+3]=255}this.pos+=this.width%4}},So.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var i=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+4*t;this.data[l]=s,this.data[l+1]=r,this.data[l+2]=o,this.data[l+3]=a}},So.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2018 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){e.processBMP=function(i,t,o,r){var s=new So(i,!1),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},d=new ip(100).encode(c,100);return e.processJPEG.call(this,d,t,o,r)}}(dt.API),g0.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2019 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){e.processWEBP=function(i,t,o,r){var s=new g0(i,!1),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},d=new ip(100).encode(c,100);return e.processJPEG.call(this,d,t,o,r)}}(dt.API),dt.API.processRGBA=function(e,i,t){for(var o=e.data,r=o.length,s=new Uint8Array(r/4*3),a=new Uint8Array(r/4),l=0,c=0,d=0;d<r;d+=4){var g=o[d+1],m=o[d+2],f=o[d+3];s[l++]=o[d],s[l++]=g,s[l++]=m,a[c++]=f}var y=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:y,index:i,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},dt.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fd=(ma=dt.API).getCharWidthsArray=function(e,i){var t,o,r=(i=i||{}).font||this.internal.getFont(),s=i.fontSize||this.internal.getFontSize(),a=i.charSpace||this.internal.getCharSpace(),l=i.widths?i.widths:r.metadata.Unicode.widths,c=l.fof?l.fof:1,d=i.kerning?i.kerning:r.metadata.Unicode.kerning,h=d.fof?d.fof:1,g=!1!==i.doKerning,m=0,f=e.length,y=0,b=l[0]||c,S=[];for(t=0;t<f;t++)o=e.charCodeAt(t),"function"==typeof r.metadata.widthOfString?S.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(o))+a*(1e3/s)||0)/1e3):(m=g&&"object"===jt(d[o])&&!isNaN(parseInt(d[o][y],10))?d[o][y]/h:0,S.push((l[o]||b)/c+m)),y=o;return S},c0=ma.getStringUnitWidth=function(e,i){var t=(i=i||{}).fontSize||this.internal.getFontSize(),o=i.font||this.internal.getFont(),r=i.charSpace||this.internal.getCharSpace();return ma.processArabic&&(e=ma.processArabic(e)),"function"==typeof o.metadata.widthOfString?o.metadata.widthOfString(e,t,r)/t:Fd.apply(this,arguments).reduce(function(s,a){return s+a},0)},d0=function(e,i,t,o){for(var r=[],s=0,a=e.length,l=0;s!==a&&l+i[s]<t;)l+=i[s],s++;r.push(e.slice(0,s));var c=s;for(l=0;s!==a;)l+i[s]>o&&(r.push(e.slice(c,s)),l=0,c=s),l+=i[s],s++;return c!==s&&r.push(e.slice(c,s)),r},u0=function(e,i,t){t||(t={});var o,r,s,a,l,c,h=[],g=[h],m=t.textIndent||0,f=0,y=0,b=e.split(" "),S=Fd.apply(this,[" ",t])[0];if(c=-1===t.lineIndent?b[0].length+2:t.lineIndent||0){var _=Array(c).join(" "),k=[];b.map(function(G){(G=G.split(/\s*\n/)).length>1?k=k.concat(G.map(function(K,ne){return(ne&&K.length?"\n":"")+K})):k.push(G[0])}),b=k,c=c0.apply(this,[_,t])}for(s=0,a=b.length;s<a;s++){var E=0;if(o=b[s],c&&"\n"==o[0]&&(o=o.substr(1),E=1),m+f+(y=(r=Fd.apply(this,[o,t])).reduce(function(G,K){return G+K},0))>i||E){if(y>i){for(l=d0.apply(this,[o,r,i-(m+f),i]),h.push(l.shift()),h=[l.pop()];l.length;)g.push([l.shift()]);y=r.slice(o.length-(h[0]?h[0].length:0)).reduce(function(G,K){return G+K},0)}else h=[o];g.push(h),m=y+c,f=S}else h.push(o),m+=f+y,f=S}return g.map(c?function(G,K){return(K?_:"")+G.join(" ")}:function(G){return G.join(" ")})},ma.splitTextToSize=function(e,i,t){var o,r=(t=t||{}).fontSize||this.internal.getFontSize(),s=function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var g=this.internal.getFont(h.fontName,h.fontStyle);return g.metadata.Unicode?{widths:g.metadata.Unicode.widths||{0:1},kerning:g.metadata.Unicode.kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);o=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*i/r;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=t.lineIndent;var l,c,d=[];for(l=0,c=o.length;l<c;l++)d=d.concat(u0.apply(this,[o[l],a,s]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var i="klmnopqrstuvwxyz",t={},o={},r=0;r<16;r++)t[i[r]]="0123456789abcdef"[r],o["0123456789abcdef"[r]]=i[r];var s=function(g){return"0x"+parseInt(g,10).toString(16)},a=e.__fontmetrics__.compress=function(g){var m,f,y,b,S=["{"];for(var _ in g){if(m=g[_],isNaN(parseInt(_,10))?f="'"+_+"'":(_=parseInt(_,10),f=(f=s(_).slice(2)).slice(0,-1)+o[f.slice(-1)]),"number"==typeof m)m<0?(y=s(m).slice(3),b="-"):(y=s(m).slice(2),b=""),y=b+y.slice(0,-1)+o[y.slice(-1)];else{if("object"!==jt(m))throw new Error("Don't know what to do with value type "+jt(m)+".");y=a(m)}S.push(f+y)}return S.push("}"),S.join("")},l=e.__fontmetrics__.uncompress=function(g){if("string"!=typeof g)throw new Error("Invalid argument passed to uncompress.");for(var m,f,y,b,S={},_=1,k=S,E=[],G="",K="",ne=g.length-1,V=1;V<ne;V+=1)"'"==(b=g[V])?m?(y=m.join(""),m=void 0):m=[]:m?m.push(b):"{"==b?(E.push([k,y]),k={},y=void 0):"}"==b?((f=E.pop())[0][f[1]]=k,y=void 0,k=f[0]):"-"==b?_=-1:void 0===y?t.hasOwnProperty(b)?(G+=t[b],y=parseInt(G,16)*_,_=1,G=""):G+=b:t.hasOwnProperty(b)?(K+=t[b],k[y]=parseInt(K,16)*_,_=1,y=void 0,K=""):K+=b;return S},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},h={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(g){var m=g.font,f=h.Unicode[m.postScriptName];f&&(m.metadata.Unicode={},m.metadata.Unicode.widths=f.widths,m.metadata.Unicode.kerning=f.kerning);var y=d.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])}(dt.API),
/**
       * @license
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){var i=function(t){for(var o=t.length,r=new Uint8Array(o),s=0;s<o;s++)r[s]=t.charCodeAt(s);return r};e.API.events.push(["addFont",function(t){var a,l,o=void 0,r=t.font,s=t.instance;if(!r.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if("string"!=typeof(o=!1===s.existsFileInVFS(r.postScriptName)?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");a=r,l=/^\x00\x01\x00\x00/.test(l=o)?i(l):i(Dl(l)),a.metadata=e.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]}}])}(dt),dt.API.addSvgAsImage=function(t,o,r,s,a,l,c,d){if(isNaN(o)||isNaN(r))throw ei.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw ei.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=a;var g=h.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return function i(){return(ht.canvg?Promise.resolve(ht.canvg):Oe.e(665).then(Oe.bind(Oe,3665))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}().then(function(y){return y.fromString(g,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(m)}).then(function(){f.addImage(h.toDataURL("image/jpeg",1),o,r,s,a,c,d)})},dt.API.putTotalPages=function(e){var i,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(i=new RegExp(e,"g"),t=this.internal.getNumberOfPages()):(i=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var r=0;r<this.internal.pages[o].length;r++)this.internal.pages[o][r]=this.internal.pages[o][r].replace(i,t);return this},dt.API.viewerPreferences=function(e,i){var t;e=e||{},i=i||!1;var o,r,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],d=0,h=0,g=0;function m(y,b){var S,_=!1;for(S=0;S<y.length;S+=1)y[S]===b&&(_=!0);return _}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,"reset"===e||!0===i){var f=l.length;for(g=0;g<f;g+=1)t[l[g]].value=t[l[g]].defaultValue,t[l[g]].explicitSet=!1}if("object"===jt(e))for(r in e)if(s=e[r],m(l,r)&&void 0!==s){if("boolean"===t[r].type&&"boolean"==typeof s)t[r].value=s;else if("name"===t[r].type&&m(t[r].valueSet,s))t[r].value=s;else if("integer"===t[r].type&&Number.isInteger(s))t[r].value=s;else if("array"===t[r].type){for(d=0;d<s.length;d+=1)if(o=!0,1===s[d].length&&"number"==typeof s[d][0])c.push(String(s[d]-1));else if(s[d].length>1){for(h=0;h<s[d].length;h+=1)"number"!=typeof s[d][h]&&(o=!1);!0===o&&c.push([s[d][0]-1,s[d][1]-1].join(" "))}t[r].value="["+c.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var y,b=[];for(y in t)!0===t[y].explicitSet&&b.push("name"===t[y].type?"/"+y+" /"+t[y].value:"/"+y+" "+t[y].value);0!==b.length&&this.internal.write("/ViewerPreferences\n<<\n"+b.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},
/** ====================================================================
       * @license
       * jsPDF XMP metadata plugin
       * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
       *
       * Permission is hereby granted, free of charge, to any person obtaining
       * a copy of this software and associated documentation files (the
       * "Software"), to deal in the Software without restriction, including
       * without limitation the rights to use, copy, modify, merge, publish,
       * distribute, sublicense, and/or sell copies of the Software, and to
       * permit persons to whom the Software is furnished to do so, subject to
       * the following conditions:
       *
       * The above copyright notice and this permission notice shall be
       * included in all copies or substantial portions of the Software.
       *
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
       * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
       * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
       * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
       * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
       * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
       * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
       * ====================================================================
       */
function(e){var i=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(o)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+a.length+l.length+r.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(r+s+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(o,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:o,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",i)),this}}(dt.API),function(e){var i=e.API,t=i.pdfEscape16=function(s,a){for(var l,c=a.metadata.Unicode.widths,d=["","0","00","000","0000"],h=[""],g=0,m=s.length;g<m;++g){if(l=a.metadata.characterToGlyph(s.charCodeAt(g)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=s.charCodeAt(g),-1==c.indexOf(l)&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),"0"==l)return h.join("");l=l.toString(16),h.push(d[4-l.length],l)}return h.join("")},o=function(s){var a,l,c,d,h,g,m;for(h="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",c=[],g=0,m=(l=Object.keys(s).sort(function(f,y){return f-y})).length;g<m;g++)a=l[g],c.length>=100&&(h+="\n"+c.length+" beginbfchar\n"+c.join("\n")+"\nendbfchar",c=[]),null!=s[a]&&"function"==typeof s[a].toString&&(d=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+d+">"));return c.length&&(h+="\n"+c.length+" beginbfchar\n"+c.join("\n")+"\nendbfchar\n"),h+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};i.events.push(["putFont",function(s){!function(a){var l=a.font,c=a.out,d=a.newObject,h=a.putStream;if(l.metadata instanceof e.API.TTFFont&&"Identity-H"===l.encoding){for(var g=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",y=0;y<m.length;y++)f+=String.fromCharCode(m[y]);var b=d();h({data:f,addLength1:!0,objectId:b}),c("endobj");var S=d();h({data:o(l.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var _=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ca(l.fontName)),c("/FontFile2 "+b+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var k=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+ca(l.fontName)),c("/FontDescriptor "+_+" 0 R"),c("/W "+e.API.PDFObject.convert(g)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+S+" 0 R"),c("/BaseFont /"+ca(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+k+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}}(s)}]),i.events.push(["putFont",function(s){!function(a){var l=a.font,c=a.out,d=a.newObject,h=a.putStream;if(l.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===l.encoding){for(var g=l.metadata.rawData,m="",f=0;f<g.length;f++)m+=String.fromCharCode(g[f]);var y=d();h({data:m,addLength1:!0,objectId:y}),c("endobj");var b=d();h({data:o(l.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var S=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ca(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var _=0;_<l.metadata.hmtx.widths.length;_++)l.metadata.hmtx.widths[_]=parseInt(l.metadata.hmtx.widths[_]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+ca(l.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}}(s)}]);var r=function(s){var a,l=s.text||"",c=s.x,d=s.y,h=s.options||{},g=s.mutex||{},m=g.pdfEscape,f=g.activeFontKey,y=g.fonts,b=f,S="",_=0,k="",E=y[b].encoding;if("Identity-H"!==y[b].encoding)return{text:l,x:c,y:d,options:h,mutex:g};for(k=l,b=f,Array.isArray(l)&&(k=l[0]),_=0;_<k.length;_+=1)y[b].metadata.hasOwnProperty("cmap")&&(a=y[b].metadata.cmap.unicode.codeMap[k[_].charCodeAt(0)]),a||k[_].charCodeAt(0)<256&&y[b].metadata.hasOwnProperty("Unicode")?S+=k[_]:S+="";var G="";return parseInt(b.slice(1))<14||"WinAnsiEncoding"===E?G=m(S,b).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):"Identity-H"===E&&(G=t(S,y[b])),g.isHex=!0,{text:G,x:c,y:d,options:h,mutex:g}};i.events.push(["postProcessText",function(s){var a=s.text||"",l=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&3===a[d].length?l.push([r(Object.assign({},c,{text:a[d][0]})).text,a[d][1],a[d][2]]):l.push(r(Object.assign({},c,{text:a[d]})).text);s.text=l}else s.text=r(Object.assign({},c,{text:a})).text}])}(dt),
/**
       * @license
       * jsPDF virtual FileSystem functionality
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(e){var i=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(t){return i.call(this),void 0!==this.internal.vFS[t]},e.addFileToVFS=function(t,o){return i.call(this),this.internal.vFS[t]=o,this},e.getFileFromVFS=function(t){return i.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(dt.API),
/**
       * @license
       * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
       * MIT License
       */
function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(o){var r,s,a,l,c,d,h,g=i,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,E=0;this.__bidiEngine__={};var G=function(L){var I=L.charCodeAt(),Y=I>>8,z=b[Y];return void 0!==z?g[256*z+(255&I)]:252===Y||253===Y?"AL":_.test(Y)?"L":8===Y?"R":"N"},K=function(L){for(var I,Y=0;Y<L.length;Y++){if("L"===(I=G(L.charAt(Y))))return!1;if("R"===I)return!0}return!1},ne=function(L,I,Y,z){var me,he,we,ce,be=I[z];switch(be){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"N":case"AN":break;case"EN":k&&(be="AN");break;case"AL":k=!0,be="R";break;case"WS":case"BN":be="N";break;case"CS":z<1||z+1>=I.length||"EN"!==(me=Y[z-1])&&"AN"!==me||"EN"!==(he=I[z+1])&&"AN"!==he?be="N":k&&(he="AN"),be=he===me?he:"N";break;case"ES":be="EN"===(me=z>0?Y[z-1]:"B")&&z+1<I.length&&"EN"===I[z+1]?"EN":"N";break;case"ET":if(z>0&&"EN"===Y[z-1]){be="EN";break}if(k){be="N";break}for(we=z+1,ce=I.length;we<ce&&"ET"===I[we];)we++;be=we<ce&&"EN"===I[we]?"EN":"N";break;case"NSM":if(a&&!l){for(ce=I.length,we=z+1;we<ce&&"NSM"===I[we];)we++;if(we<ce){var xe=L[z];if(me=I[we],(xe>=1425&&xe<=2303||64286===xe)&&("R"===me||"AL"===me)){be="R";break}}}be=z<1||"B"===(me=I[z-1])?"N":Y[z-1];break;case"B":k=!1,r=!0,be=E;break;case"S":s=!0,be="N"}return be},V=function(L,I,Y){var z=L.split("");return Y&&N(z,Y,{hiLevel:E}),z.reverse(),I&&I.reverse(),z.join("")},N=function(L,I,Y){var z,me,he,we,ce,be=-1,xe=L.length,je=0,F=[],B=E?f:m,H=[];for(k=!1,r=!1,s=!1,me=0;me<xe;me++)H[me]=G(L[me]);for(he=0;he<xe;he++){if(ce=je,F[he]=ne(L,H,F,he),z=240&(je=B[ce][y[F[he]]]),I[he]=we=B[je&=15][5],z>0)if(16===z){for(me=be;me<he;me++)I[me]=1;be=-1}else be=-1;if(B[je][6])-1===be&&(be=he);else if(be>-1){for(me=be;me<he;me++)I[me]=we;be=-1}"B"===H[he]&&(I[he]=0),Y.hiLevel|=we}s&&function(W,oe,de){for(var ue=0;ue<de;ue++)if("S"===W[ue]){oe[ue]=E;for(var ge=ue-1;ge>=0&&"WS"===W[ge];ge--)oe[ge]=E}}(H,I,xe)},X=function(L,I,Y,z,me){if(!(me.hiLevel<L)){if(1===L&&1===E&&!r)return I.reverse(),void(Y&&Y.reverse());for(var he,we,ce,be,xe=I.length,je=0;je<xe;){if(z[je]>=L){for(ce=je+1;ce<xe&&z[ce]>=L;)ce++;for(be=je,we=ce-1;be<we;be++,we--)he=I[be],I[be]=I[we],I[we]=he,Y&&(he=Y[be],Y[be]=Y[we],Y[we]=he);je=ce}je++}}},ve=function(L,I,Y){var z=L.split(""),me={hiLevel:E};return Y||(Y=[]),N(z,Y,me),function(he,we,ce){if(0!==ce.hiLevel&&h)for(var be,xe=0;xe<he.length;xe++)1===we[xe]&&(be=S.indexOf(he[xe]))>=0&&(he[xe]=S[be+1])}(z,Y,me),X(2,z,I,Y,me),X(1,z,I,Y,me),z.join("")};return this.__bidiEngine__.doBidiReorder=function(L,I,Y){if(function(me,he){if(he)for(var we=0;we<me.length;we++)he[we]=we;void 0===l&&(l=K(me)),void 0===d&&(d=K(me))}(L,I),a||!c||d)if(a&&c&&l^d)E=l?1:0,L=V(L,I,Y);else if(!a&&c&&d)E=l?1:0,L=ve(L,I,Y),L=V(L,I);else if(!a||l||c||d){if(a&&!c&&l^d)L=V(L,I),l?(E=0,L=ve(L,I,Y)):(E=1,L=ve(L,I,Y),L=V(L,I));else if(a&&l&&!c&&d)E=1,L=ve(L,I,Y),L=V(L,I);else if(!a&&!c&&l^d){var z=h;l?(E=1,L=ve(L,I,Y),E=0,h=!1,L=ve(L,I,Y),h=z):(E=0,L=ve(L,I,Y),L=V(L,I),E=1,h=!1,L=ve(L,I,Y),h=z,L=V(L,I))}}else E=0,L=ve(L,I,Y);else E=l?1:0,L=ve(L,I,Y);return L},this.__bidiEngine__.setOptions=function(L){L&&(a=L.isInputVisual,c=L.isOutputVisual,l=L.isInputRtl,d=L.isOutputRtl,h=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var i=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(o){var r=o.text,s=o.options||{},a=[];if(s.isInputVisual="boolean"!=typeof s.isInputVisual||s.isInputVisual,t.setOptions(s),"[object Array]"===Object.prototype.toString.call(r)){var l=0;for(a=[],l=0;l<r.length;l+=1)"[object Array]"===Object.prototype.toString.call(r[l])?a.push([t.doBidiReorder(r[l][0]),r[l][1],r[l][2]]):a.push([t.doBidiReorder(r[l])]);o.text=a}else o.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])}(dt),dt.API.TTFFont=function(){function e(i){var t;if(this.rawData=i,t=this.contents=new Nr(i),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new AF(this),this.registerTTF()}return e.open=function(i){return new e(i)},e.prototype.parse=function(){return this.directory=new uF(this.contents),this.head=new gF(this),this.name=new CF(this),this.cmap=new f0(this),this.toUnicode={},this.hhea=new pF(this),this.maxp=new wF(this),this.hmtx=new yF(this),this.post=new mF(this),this.os2=new fF(this),this.loca=new xF(this),this.glyf=new bF(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,o,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var a,l,c,d;for(d=[],a=0,l=(c=this.bbox).length;a<l;a++)d.push(Math.round(c[a]*this.scaleFactor));return d}.call(this),this.stemV=0,this.post.exists?(o=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(s=this.familyClass)||2===s||3===s||4===s||5===s||7===s,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(i){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[i]:void 0)||0},e.prototype.widthOfGlyph=function(i){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(i).advance*t},e.prototype.widthOfString=function(i,t,o){var r,s,a,l;for(a=0,s=0,l=(i=""+i).length;0<=l?s<l:s>l;s=0<=l?++s:--s)r=i.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(r))+o*(1e3/t)||0;return a*(t/1e3)},e.prototype.lineHeight=function(i,t){return null==t&&(t=!1),(this.ascender+(t?this.lineGap:0)-this.decender)/1e3*i},e}();var _o,Nr=function(){function e(i){this.data=i??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(i){return this.data[this.pos++]=i},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(i){return this.writeByte(i>>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt32=function(){var i;return(i=this.readUInt32())>=2147483648?i-4294967296:i},e.prototype.writeInt32=function(i){return i<0&&(i+=4294967296),this.writeUInt32(i)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(i){return this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt16=function(){var i;return(i=this.readUInt16())>=32768?i-65536:i},e.prototype.writeInt16=function(i){return i<0&&(i+=65536),this.writeUInt16(i)},e.prototype.readString=function(i){var t,o;for(o=[],t=0;0<=i?t<i:t>i;t=0<=i?++t:--t)o[t]=String.fromCharCode(this.readByte());return o.join("")},e.prototype.writeString=function(i){var t,o,r;for(r=[],t=0,o=i.length;0<=o?t<o:t>o;t=0<=o?++t:--t)r.push(this.writeByte(i.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(i){return this.writeInt16(i)},e.prototype.readLongLong=function(){var i,t,o,r,s,a,l,c;return i=this.readByte(),t=this.readByte(),o=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&i?-1*(72057594037927940*(255^i)+281474976710656*(255^t)+1099511627776*(255^o)+4294967296*(255^r)+16777216*(255^s)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*i+281474976710656*t+1099511627776*o+4294967296*r+16777216*s+65536*a+256*l+c},e.prototype.writeLongLong=function(i){var t,o;return t=Math.floor(i/4294967296),o=4294967295&i,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(i){return this.writeInt32(i)},e.prototype.read=function(i){var t,o;for(t=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)t.push(this.readByte());return t},e.prototype.write=function(i){var o,r,s;for(s=[],o=0,r=i.length;o<r;o++)s.push(this.writeByte(i[o]));return s},e}(),uF=function(){var e;function i(t){var o,r,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)o={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[o.tag]=o}return i.prototype.encode=function(t){var o,r,a,l,c,d,h,g,m,f,y,b;for(b in f=Object.keys(t).length,c=Math.log(2),g=16*Math.floor(Math.log(f)/c),a=Math.floor(g/c),h=16*f-g,(r=new Nr).writeInt(this.scalarType),r.writeShort(f),r.writeShort(g),r.writeShort(a),r.writeShort(h),d=r.pos+16*f,l=null,y=[],t)for(m=t[b],r.writeString(b),r.writeInt(e(m)),r.writeInt(d),r.writeInt(m.length),y=y.concat(m),"head"===b&&(l=d),d+=m.length;d%4;)y.push(0),d++;return r.write(y),o=2981146554-e(r.data),r.pos=l+8,r.writeUInt32(o),r.data},e=function(t){var o,r,s,a;for(t=m0.call(t);t.length%4;)t.push(0);for(s=new Nr(t),r=0,o=0,a=t.length;o<a;o=o+=4)r+=s.readUInt32();return 4294967295&r},i}(),hF={}.hasOwnProperty,Vo=function(e,i){for(var t in i)hF.call(i,t)&&(e[t]=i[t]);function o(){this.constructor=e}return o.prototype=i.prototype,e.prototype=new o,e.__super__=i.prototype,e};_o=function(){function e(i){var t;this.file=i,this.exists=!!(t=this.file.directory.tables[this.tag]),t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var gF=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="head",i.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},i.prototype.encode=function(t){var o;return(o=new Nr).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(t),o.writeShort(this.glyphDataFormat),o.data},i}(),p0=function(){function e(i,t){var o,r,s,a,l,c,d,h,g,m,f,y,b,S,_,k,E;switch(this.platformID=i.readUInt16(),this.encodingID=i.readShort(),this.offset=t+i.readInt(),g=i.pos,i.pos=this.offset,this.format=i.readUInt16(),this.length=i.readUInt16(),this.language=i.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=i.readByte();break;case 4:for(f=i.readUInt16(),m=f/2,i.pos+=6,s=function(){var G,K;for(K=[],c=G=0;0<=m?G<m:G>m;c=0<=m?++G:--G)K.push(i.readUInt16());return K}(),i.pos+=2,b=function(){var G,K;for(K=[],c=G=0;0<=m?G<m:G>m;c=0<=m?++G:--G)K.push(i.readUInt16());return K}(),d=function(){var G,K;for(K=[],c=G=0;0<=m?G<m:G>m;c=0<=m?++G:--G)K.push(i.readUInt16());return K}(),h=function(){var G,K;for(K=[],c=G=0;0<=m?G<m:G>m;c=0<=m?++G:--G)K.push(i.readUInt16());return K}(),r=(this.length-i.pos+this.offset)/2,l=function(){var G,K;for(K=[],c=G=0;0<=r?G<r:G>r;c=0<=r?++G:--G)K.push(i.readUInt16());return K}(),c=_=0,E=s.length;_<E;c=++_)for(S=s[c],o=k=y=b[c];y<=S?k<=S:k>=S;o=y<=S?++k:--k)0===h[c]?a=o+d[c]:0!==(a=l[h[c]/2+(o-y)-(m-c)]||0)&&(a+=d[c]),this.codeMap[o]=65535&a}i.pos=g}return e.encode=function(i,t){var o,r,s,a,l,c,d,h,g,m,f,y,b,S,_,k,E,K,ne,V,N,X,ve,L,I,Y,z,me,he,we,ce,be,xe,je,F,B,H,W,oe,de,ue,ge,Le,Pe,We;switch(z=new Nr,a=Object.keys(i).sort(function(qe,gt){return qe-gt}),t){case"macroman":for(b=0,S=function(){var qe=[];for(y=0;y<256;++y)qe.push(0);return qe}(),k={0:0},s={},me=0,be=a.length;me<be;me++)null==k[ge=i[r=a[me]]]&&(k[ge]=++b),s[r]={old:i[r],new:k[i[r]]},S[r]=k[i[r]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(S),{charMap:s,subtable:z.data,maxGlyphID:b+1};case"unicode":for(I=[],g=[],E=0,k={},o={},_=d=null,he=0,xe=a.length;he<xe;he++)null==k[K=i[r=a[he]]]&&(k[K]=++E),o[r]={old:K,new:k[K]},l=k[K]-r,null!=_&&l===d||(_&&g.push(_),I.push(r),d=l),_=r;for(_&&g.push(_),g.push(65535),I.push(65535),ve=2*(X=I.length),N=2*Math.pow(Math.log(X)/Math.LN2,2),m=Math.log(N/2)/Math.LN2,V=2*X-N,c=[],ne=[],f=[],y=we=0,je=I.length;we<je;y=++we){if(h=g[y],65535===(L=I[y])){c.push(0),ne.push(0);break}if(L-(Y=o[L].new)>=32768)for(c.push(0),ne.push(2*(f.length+X-y)),r=ce=L;L<=h?ce<=h:ce>=h;r=L<=h?++ce:--ce)f.push(o[r].new);else c.push(Y-L),ne.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*X+2*f.length),z.writeUInt16(0),z.writeUInt16(ve),z.writeUInt16(N),z.writeUInt16(m),z.writeUInt16(V),de=0,F=g.length;de<F;de++)z.writeUInt16(r=g[de]);for(z.writeUInt16(0),ue=0,B=I.length;ue<B;ue++)z.writeUInt16(r=I[ue]);for(Le=0,H=c.length;Le<H;Le++)z.writeUInt16(l=c[Le]);for(Pe=0,W=ne.length;Pe<W;Pe++)z.writeUInt16(ne[Pe]);for(We=0,oe=f.length;We<oe;We++)z.writeUInt16(b=f[We]);return{charMap:o,subtable:z.data,maxGlyphID:E+1}}},e}(),f0=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="cmap",i.prototype.parse=function(t){var o,r,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)o=new p0(t,this.offset),this.tables.push(o),o.isUnicode&&null==this.unicode&&(this.unicode=o);return!0},i.encode=function(t,o){var r,s;return null==o&&(o="macroman"),r=p0.encode(t,o),(s=new Nr).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},i}(),pF=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="hhea",i.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},i}(),fF=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="OS/2",i.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var o,r;for(r=[],o=0;o<10;++o)r.push(t.readByte());return r}(),this.charRange=function(){var o,r;for(r=[],o=0;o<4;++o)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var o,r;for(r=[],o=0;o<2;o=++o)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},i}(),mF=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="post",i.prototype.parse=function(t){var o,r,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)o=t.readByte(),s.push(this.names.push(t.readString(o)));return s;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=function(){var l,c,d;for(d=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)d.push(t.readUInt32());return d}.call(this)}},i}(),vF=function(e,i){this.raw=e,this.length=e.length,this.platformID=i.platformID,this.encodingID=i.encodingID,this.languageID=i.languageID},CF=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="name",i.prototype.parse=function(t){var o,r,s,a,l,c,d,h,g,m,f;for(t.pos=this.offset,t.readShort(),o=t.readShort(),c=t.readShort(),r=[],a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(d={},a=g=0,m=r.length;g<m;a=++g)t.pos=(s=r[a]).offset,h=t.readString(s.length),l=new vF(h,s),null==d[f=s.nameID]&&(d[f]=[]),d[s.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},i}(),wF=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="maxp",i.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},i}(),yF=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="hmtx",i.prototype.parse=function(t){var o,r,s,l,c,d;for(t.pos=this.offset,this.metrics=[],o=0,c=this.file.hhea.numberOfMetrics;0<=c?o<c:o>c;o=0<=c?++o:--o)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,g;for(g=[],o=h=0;0<=s?h<s:h>s;o=0<=s?++h:--h)g.push(t.readInt16());return g}(),this.widths=function(){var h,g,m,f;for(f=[],h=0,g=(m=this.metrics).length;h<g;h++)f.push(m[h].advance);return f}.call(this),r=this.widths[this.widths.length-1],d=[],o=l=0;0<=s?l<s:l>s;o=0<=s?++l:--l)d.push(this.widths.push(r));return d},i.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},i}(),m0=[].slice,bF=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="glyf",i.prototype.parse=function(){return this.cache={}},i.prototype.glyphFor=function(t){var o,r,s,a,l,c,d,h,g,m;return t in this.cache?this.cache[t]:(o=this.file.contents,r=(a=this.file.loca).indexOf(t),0===(s=a.lengthOf(t))?this.cache[t]=null:(o.pos=this.offset+r,l=(c=new Nr(o.read(s))).readShort(),h=c.readShort(),m=c.readShort(),d=c.readShort(),g=c.readShort(),this.cache[t]=-1===l?new _F(c,h,m,d,g):new SF(c,l,h,m,d,g),this.cache[t]))},i.prototype.encode=function(t,o,r){var s,a,l,c,d;for(l=[],a=[],c=0,d=o.length;c<d;c++)s=t[o[c]],a.push(l.length),s&&(l=l.concat(s.encode(r)));return a.push(l.length),{table:l,offsets:a}},i}(),SF=function(){function e(i,t,o,r,s,a){this.raw=i,this.numberOfContours=t,this.xMin=o,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),_F=function(){function e(i,t,o,r,s){var a,l;for(this.raw=i,this.xMin=t,this.yMin=o,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return e.prototype.encode=function(){var i,t,o;for(t=new Nr(m0.call(this.raw.data)),i=0,o=this.glyphIDs.length;i<o;++i)t.pos=this.glyphOffsets[i];return t.data},e}(),xF=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Vo(i,_o),i.prototype.tag="loca",i.prototype.parse=function(t){var r;return t.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=2)a.push(2*t.readUInt16());return a}.call(this):function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=4)a.push(t.readUInt32());return a}.call(this)},i.prototype.indexOf=function(t){return this.offsets[t]},i.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},i.prototype.encode=function(t,o){for(var r=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<r.length;++l)if(r[l]=s,a<o.length&&o[a]==l){++a,r[l]=s;var d=this.offsets[l+1]-this.offsets[l];d>0&&(s+=d)}for(var h=new Array(4*r.length),g=0;g<r.length;++g)h[4*g+3]=255&r[g],h[4*g+2]=(65280&r[g])>>8,h[4*g+1]=(16711680&r[g])>>16,h[4*g]=(4278190080&r[g])>>24;return h},i}(),AF=function(){function e(i){this.font=i,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var i,t,r,s;for(t in r=this.font.cmap.tables[0].codeMap,i={},s=this.subset)i[t]=r[s[t]];return i},e.prototype.glyphsFor=function(i){var t,o,r,s,a,l,c;for(r={},a=0,l=i.length;a<l;a++)r[s=i[a]]=this.font.glyf.glyphFor(s);for(s in t=[],r)null!=(o=r[s])&&o.compound&&t.push.apply(t,o.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))r[s]=o=c[s];return r},e.prototype.encode=function(i,t){var o,r,s,a,c,d,h,g,m,f,y,b,S,_;for(r in o=f0.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(i),f={0:0},_=o.charMap)f[(c=_[r]).old]=c.new;for(y in m=o.maxGlyphID,a)y in f||(f[y]=m++);return h=function(k){var E,G;for(E in G={},k)G[k[E]]=E;return G}(f),g=Object.keys(h).sort(function(k,E){return k-E}),b=function(){var k,E,G;for(G=[],k=0,E=g.length;k<E;k++)G.push(h[g[k]]);return G}(),s=this.font.glyf.encode(a,b,f),d=this.font.loca.encode(s.offsets,b),S={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},e}();dt.API.PDFObject=function(){var e;function i(){}return e=function(t,o){return(Array(o+1).join("0")+t).slice(-o)},i.convert=function(t){var r,s;if(Array.isArray(t))return"["+function(){var l,c,d;for(d=[],l=0,c=t.length;l<c;l++)d.push(i.convert(t[l]));return d}().join(" ")+"]";if("string"==typeof t)return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+e(t.getUTCFullYear(),4)+e(t.getUTCMonth(),2)+e(t.getUTCDate(),2)+e(t.getUTCHours(),2)+e(t.getUTCMinutes(),2)+e(t.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(t)){for(r in s=["<<"],t)s.push("/"+r+" "+i.convert(t[r]));return s.push(">>"),s.join("\n")}return""+t},i}();var kF=Oe(217),TF=Oe.n(kF);const Fl=function(e){return{remarks:e}};function DF(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.ALo(2,"wt"),n.ALo(3,"filter"),n.qZA()),2&e){const t=n.oxw().$implicit,o=n.oxw();n.xp6(1),n.hij("",n.lcZ(2,1,100*o.api.getSum(n.xi3(3,3,null==o.stock?null:o.stock.Lot,n.VKq(6,Fl,t)),"pwt")/(null==o.stock?null:o.stock.actweight))," %")}}function FF(e,i){if(1&e&&(n.TgZ(0,"tr",23)(1,"th"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.ALo(5,"filter"),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.ALo(8,"wt"),n.ALo(9,"filter"),n.qZA(),n.TgZ(10,"td"),n._uU(11),n.ALo(12,"wt"),n.ALo(13,"filter"),n.qZA(),n.YNc(14,DF,4,8,"td",70),n.ALo(15,"filter"),n.qZA()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(t),n.xp6(2),n.Oqu(o.api.getSum(n.xi3(5,5,null==o.stock?null:o.stock.Lot,n.VKq(21,Fl,t)),"pcs")),n.xp6(3),n.Oqu(n.lcZ(8,8,o.api.getSum(n.xi3(9,10,null==o.stock?null:o.stock.Lot,n.VKq(23,Fl,t)),"rwt"))),n.xp6(4),n.Oqu(n.lcZ(12,13,o.api.getSum(n.xi3(13,15,null==o.stock?null:o.stock.Lot,n.VKq(25,Fl,t)),"pwt"))),n.xp6(3),n.Q6J("ngIf",o.api.getSum(n.xi3(15,18,null==o.stock?null:o.stock.Lot,n.VKq(27,Fl,t)),"pwt")>0)}}function RF(e,i){if(1&e&&(n.TgZ(0,"th",15),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t)}}function MF(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"td",72)(1,"input",73),n.NdJ("input",function(){n.CHM(t);const r=n.oxw(2);return n.KtG(r.calculate())})("keydown.enter",function(){const s=n.CHM(t).index,a=n.oxw().index,l=n.oxw();return n.KtG(l.stepOverW(a,s))}),n.qZA()()}if(2&e){const t=i.index,o=n.oxw().index;n.xp6(1),n.MT6("form-control text-center input-sm excel_input ",o,"",t,"_wi"),n.hYB("id","",o,"",t,"_w")}}function EF(e,i){if(1&e&&(n.TgZ(0,"tr")(1,"th"),n._uU(2),n.qZA(),n.YNc(3,MF,2,6,"td",71),n.qZA()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(t),n.xp6(1),n.Q6J("ngForOf",o.size)}}function PF(e,i){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t)}}function LF(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"td",72)(1,"input",73),n.NdJ("input",function(){n.CHM(t);const r=n.oxw(2);return n.KtG(r.calculate())})("keydown.enter",function(){const s=n.CHM(t).index,a=n.oxw().index,l=n.oxw();return n.KtG(l.stepOverR(a,s))}),n.qZA()()}if(2&e){const t=i.index,o=n.oxw().index;n.xp6(1),n.MT6("form-control text-center input-sm excel_input ",o,"",t,"_ri"),n.hYB("id","",o,"",t,"_r")}}function IF(e,i){if(1&e&&(n.TgZ(0,"tr")(1,"th",74),n._uU(2),n.qZA(),n.YNc(3,LF,2,6,"td",71),n.qZA()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(t),n.xp6(1),n.Q6J("ngForOf",o.size)}}function OF(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"label",75)(1,"input",76),n.NdJ("change",function(){const s=n.CHM(t).index,a=n.oxw();return n.KtG(a.selTier(s))}),n.qZA(),n.TgZ(2,"span"),n._uU(3),n.qZA()()}if(2&e){const t=i.$implicit;n.xp6(1),n.Q6J("value",t),n.xp6(2),n.hij(" ",t,"")}}function NF(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",77),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.remove())}),n._UZ(1,"i",78),n._uU(2,"Delete?"),n.qZA()}}let BF=(()=>{class e{constructor(t,o,r){this.api=t,this.pdf=o,this.zone=r,this.stock={},this.changed=new n.vpe,this.loading=!1,this.size=[],this.quality=[],this.tiers=[],this.rate=[],this.mlist=[],this.glist=["\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2","XXX","\u0a9a\u0acb\u0a95\u0ac0","\u0aae\u0abe\u0ab0\u0acd\u0a95\u0abf\u0ab8","\u0aaa\u0abe\u0aa8","\u0a85\u0aa8\u0acd\u0aaf","4P \u0a95\u0abe\u0a9a\u0ac1"]}ngOnInit(){var t=this;return(0,ee.Z)(function*(){var o=yield t.api.getInfo("temp");t.size=o.find(s=>"size"==s.name).description,t.quality=o.find(s=>"quality"==s.name).description,t.tiers=o.find(s=>"price"==s.name).description,t.rate=o.find(s=>"rate"==s.name).description,t.zone.run(()=>{$(function(){})})})()}calculate(){for(var t=[],o=0;o<this.quality.length;o++)for(var r=0;r<this.size.length;r++){var s=Number($(`#${o}${r}_w`).val()),a=Number($(`#${o}${r}_r`).val());$(`#${o}${r}_w`).removeClass("bg-red"),0==$(`#${o}${r}_r`).val().length&&$(`#${o}${r}_w`).addClass("bg-red");var l=s*a;$(`#${o}${r}_w`).val().length>0&&t.push({code:`${this.size[r]}_${this.quality[o]}`,quality:this.quality[o],size:this.size[r],weight:s,rate:a,total:l})}let c=M.sumBy(t,"weight");c=M.round(c,2);let d=t.map(m=>m.weight*m.rate),h=M.sum(d),g=h/(0==c?1:c);this.stock.weight=c,this.stock.total=Math.floor(1e3*h),this.stock.rate=Math.floor(1e3*g),this.stock.items=t}stepOverW(t,o){this.quality.length==t+1?$(`.0${o+1}_wi`).focus():$(`.${t+1}${o}_wi`).focus()}stepOverR(t,o){this.quality.length==t+1?$(`.0${o+1}_ri`).focus():$(`.${t+1}${o}_ri`).focus()}onDateChage(t,o){console.log(t.target.value,o),this.stock[o]=t.target.value&&""!=t.target.value?t.target.value+"T00:00:00.000Z":null}update(){var t=this;return(0,ee.Z)(function*(){if(t.stock.dayDiff=t.stock?.issueDate&&t.stock?.closeDate?t.api.getDaysDiff(t.stock?.issueDate,t.stock?.closeDate):0,t.stock.actweight<t.stock.weight)window.alert("Weight Exceeded!");else{t.loading=!0;try{var o=Object.assign({},t.stock);delete o.Lot,delete o.production,delete o.inventory,delete o.bill,console.log(o),yield t.api.putInfo("stock",o),toastr.success("Stock Update Successfully"),$("#polish_form_modal").modal("toggle"),t.changed.emit(!0)}catch{toastr.error("Something went wrong")}t.loading=!1}})()}selTier(t){var o=this;return(0,ee.Z)(function*(){for(var r=0;r<o.quality.length;r++)for(var s=0;s<o.size.length;s++)$(`#${r}${s}_r`).val(o.rate[t][`I${r}${s}`]);o.calculate()})()}getDiff(){return this.stock?.actweight&&this.stock?.rweight?100*(this.api.getSum(this.stock?.Lot,"pwt")-this.stock?.pweight)/this.stock?.actweight+100*(this.stock?.aweight-this.stock?.pweight)/this.stock?.rweight:0}printTable(){var t=this;return(0,ee.Z)(function*(){const o=yield g1(document.getElementById("overview_tb"));var r=document.createElement("a");r.download=t.stock?.srno+".png",r.href=o,r.click()})()}remove(){var t=this;return(0,ee.Z)(function*(){if(window.confirm("Are you sure want to delete?"))try{if(!(yield t.api.deleteInfo("stock/"+t.stock?.id)))return;toastr.success("Stock Update Successfully"),$("#polish_form_modal").modal("toggle"),t.changed.emit(!0)}catch{toastr.error("Something went wrong")}})()}download(t="png"){var o=this;return(0,ee.Z)(function*(){if("png"==t){var r=yield function RD(e){return Dg.apply(this,arguments)}(document.getElementById("overview_tb"));return void(window.saveAs?window.saveAs(r,o.stock?.srno+".png"):TF().saveAs(r,o.stock?.srno+".png"))}const s=new dt;var a=yield g1(document.getElementById("overview_tb"));s.addImage(a,"PNG",2,2,207,268),s.save(o.stock?.srno+".pdf")})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(Yh.F),n.Y36(n.R0b))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-polish-form"]],inputs:{stock:"stock"},outputs:{changed:"changed"},decls:252,vars:99,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body","pm0","row"],[1,"nav-tabs-custom","pm0",2,"padding","5px","box-shadow","none"],[1,"nav","nav-tabs","pull-right"],["href","#stock_rate","data-toggle","tab"],["href","#stock_weight","data-toggle","tab"],[1,"active"],["href","#overview","data-toggle","tab"],[1,"pull-left","header"],[2,"font-size","16px"],[1,"tab-content","pm0"],["id","overview",1,"tab-pane","active"],["id","overview_tb",1,"table","table-condensed","table-responsive","table-bordered","table-striped","text-center",2,"background-color","white !important"],[1,"bg-blue"],["scope","col",1,"col-sm-auto"],[1,"bg-white"],[1,"p2","jc","w100"],["appFocusNavigate","","type","text","name","employee",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","date",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],[1,"col-sm-auto"],["type","text","name","fy",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"bg-yellow"],["scope","row"],["appFocusNavigate","","type","text","name","empRecut",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"w100"],["scope","row",1,"bg-grey"],[1,"p2","jc"],["appFocusNavigate","","type","number","name","cweight",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["scope","row",4,"ngFor","ngForOf"],["scope","row",1,"bg-lightyellow"],["colspan","2",1,"p2","jc"],["appFocusNavigate","","type","text","name","size",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","text","name","remarks",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"bg-lightred"],["appFocusNavigate","","type","number","name","rweight",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","actweight",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","pweight",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","aweight",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","rpcs",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","pcs",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"bg-lightgreen"],["colspan","2"],["id","stock_weight",1,"tab-pane"],["id","stock_weight_table",1,"sel","table","table-responsive","table-condensed","table-striped","table-bordered","text-center"],["scope","col",1,"col-sm-auto",2,"background-color","red","color","white"],["class","col-sm-auto","scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["id","stock_rate",1,"tab-pane"],[1,"sel","table","table-responsive","table-condensed","table-striped","table-bordered","text-center","pm0"],[2,"background-color","red","color","white"],[1,"row","text-center",2,"margin-top","5px"],["id","rd",1,"form-group",2,"margin-bottom","0px !important"],["class","mr-5",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button","class","btn btn-sm btn-danger mr-5",3,"click",4,"ngIf"],[1,"btn-group","mr-5"],["type","button",1,"btn","btn-sm","btn-success"],[1,"fa","fa-download"],["type","button","data-toggle","dropdown",1,"btn","btn-sm","btn-success","dropdown-toggle"],[1,"caret"],[1,"sr-only"],["role","menu",1,"dropdown-menu"],[3,"click"],[1,"fa","fa-file-image-o"],[1,"fa","fa-file-pdf-o"],["target","_blank","type","button",1,"btn","btn-sm","btn-success",3,"href"],[1,"fa","fa-print"],["type","button",1,"btn","btn-sm","btn-primary",3,"disabled","click"],[4,"ngIf"],["class","p2 jc w60",4,"ngFor","ngForOf"],[1,"p2","jc","w60"],["type","number",3,"id","input","keydown.enter"],[1,"text-center",2,"text-align","center"],[1,"mr-5"],["type","radio","name","tier_sel",1,"minimal",3,"value","change"],["type","button",1,"btn","btn-sm","btn-danger","mr-5",3,"click"],[1,"fa","fa-trash"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li")(6,"a",5),n._uU(7,"Rate Entry"),n.qZA()(),n.TgZ(8,"li")(9,"a",6),n._uU(10,"Weight Entry"),n.qZA()(),n.TgZ(11,"li",7)(12,"a",8),n._uU(13,"Overview"),n.qZA()(),n.TgZ(14,"li",9)(15,"b",10),n._UZ(16,"i"),n._uU(17),n.qZA()()(),n.TgZ(18,"div",11)(19,"div",12)(20,"table",13)(21,"thead")(22,"tr",14)(23,"th",15),n._uU(24,"EMP"),n.qZA(),n.TgZ(25,"th",15),n._uU(26,"ISSUE"),n.qZA(),n.TgZ(27,"th",15),n._uU(28,"END"),n.qZA(),n.TgZ(29,"th",15),n._uU(30,"DAYS"),n.qZA(),n.TgZ(31,"th",15),n._uU(32,"YEAR"),n.qZA()(),n.TgZ(33,"tr",16)(34,"td",17)(35,"input",18),n.NdJ("ngModelChange",function(a){return r.stock.employee=a}),n.qZA()(),n.TgZ(36,"td",17)(37,"input",19),n.NdJ("change",function(a){return r.onDateChage(a,"issueDate")}),n.ALo(38,"momentDate"),n.qZA()(),n.TgZ(39,"td",17)(40,"input",19),n.NdJ("change",function(a){return r.onDateChage(a,"closeDate")}),n.ALo(41,"momentDate"),n.qZA()(),n.TgZ(42,"td",20),n._uU(43),n.qZA(),n.TgZ(44,"td",17)(45,"input",21),n.NdJ("ngModelChange",function(a){return r.stock.fy=a}),n.qZA()()(),n.TgZ(46,"tr",22)(47,"th",15),n._uU(48,"\u0ab0\u0abf\u0a95\u0a9f"),n.qZA(),n.TgZ(49,"th",15),n._uU(50,"\u0aa5\u0abe\u0aa8"),n.qZA(),n.TgZ(51,"th",15),n._uU(52,"\u0a95\u0ac7\u0ab0\u0ac7\u0a9f"),n.qZA(),n.TgZ(53,"th",15),n._uU(54,"\u0ab8\u0abe\u0a88\u0a9d"),n.qZA(),n.TgZ(55,"th",15),n._uU(56,"\u0a9f\u0a95\u0abe %"),n.qZA()()(),n.TgZ(57,"tbody")(58,"tr",23)(59,"td",17)(60,"input",24),n.NdJ("ngModelChange",function(a){return r.stock.empRecut=a}),n.qZA()(),n.TgZ(61,"td",25),n._uU(62),n.qZA(),n.TgZ(63,"td",25),n._uU(64),n.ALo(65,"wt"),n.qZA(),n.TgZ(66,"td",25),n._uU(67),n.ALo(68,"wt"),n.qZA(),n.TgZ(69,"td",25),n._uU(70),n.ALo(71,"wt"),n.qZA()(),n.TgZ(72,"tr",26)(73,"th"),n._uU(74),n.qZA(),n.TgZ(75,"th"),n._uU(76,"\u0aa5\u0abe\u0aa8"),n.qZA(),n.TgZ(77,"td"),n._uU(78,"\u0a95\u0abe\u0a9a\u0ac1"),n.qZA(),n.TgZ(79,"th"),n._uU(80,"\u0aa4\u0ac8-\u0ab5\u0a9c\u0aa8"),n.qZA(),n.TgZ(81,"th"),n._uU(82,"\u0aa4\u0ac8-\u0ab5\u0a9c\u0aa8 %"),n.qZA()(),n.TgZ(83,"tr",23)(84,"th"),n._uU(85,"\u0a9b\u0acb\u0ab2\u0abe\u0aa3"),n.qZA(),n._UZ(86,"th"),n.TgZ(87,"td",27)(88,"input",28),n.NdJ("ngModelChange",function(a){return r.stock.cweight=a}),n.qZA()(),n._UZ(89,"th"),n.TgZ(90,"td"),n._uU(91),n.ALo(92,"wt"),n.qZA()(),n.TgZ(93,"tr",23)(94,"th"),n._uU(95,"LOSS"),n.qZA(),n._UZ(96,"th"),n.TgZ(97,"td"),n._uU(98),n.ALo(99,"wt"),n.qZA(),n._UZ(100,"th"),n.TgZ(101,"td"),n._uU(102),n.ALo(103,"wt"),n.qZA()(),n.YNc(104,FF,16,29,"tr",29),n.TgZ(105,"tr",30)(106,"th"),n._uU(107,"\u0a9f\u0acb\u0a9f\u0ab2"),n.qZA(),n.TgZ(108,"td"),n._uU(109),n.qZA(),n.TgZ(110,"td"),n._uU(111),n.ALo(112,"wt"),n.qZA(),n.TgZ(113,"td"),n._uU(114),n.ALo(115,"wt"),n.qZA(),n.TgZ(116,"td"),n._uU(117),n.ALo(118,"wt"),n.qZA()(),n.TgZ(119,"tr",23)(120,"th"),n._uU(121,"SIZE"),n.qZA(),n.TgZ(122,"td",31)(123,"input",32),n.NdJ("ngModelChange",function(a){return r.stock.size=a}),n.qZA()(),n.TgZ(124,"th"),n._uU(125,"Avg. Wt"),n.qZA(),n.TgZ(126,"td"),n._uU(127),n.ALo(128,"wt"),n.qZA()(),n.TgZ(129,"tr",23)(130,"th"),n._uU(131,"ITEM"),n.qZA(),n.TgZ(132,"td",31)(133,"input",33),n.NdJ("ngModelChange",function(a){return r.stock.remarks=a}),n.qZA()(),n.TgZ(134,"th"),n._uU(135,"Avg. Rate"),n.qZA(),n.TgZ(136,"td"),n._uU(137),n.ALo(138,"inr"),n.qZA()(),n.TgZ(139,"tr",34),n._UZ(140,"th",15),n.TgZ(141,"th",15),n._uU(142,"\u0ab0\u0aab"),n.qZA(),n.TgZ(143,"th",15),n._uU(144,"\u0a97\u0ac7\u0ab2\u0ac7\u0a95\u0acd\u0ab8\u0ac0"),n.qZA(),n.TgZ(145,"th",15),n._uU(146,"\u0aaa\u0acd\u0ab2\u0abe\u0aa8"),n.qZA(),n.TgZ(147,"th",15),n._uU(148,"\u0aaa\u0acb\u0ab2\u0ac0\u0ab6"),n.qZA()(),n.TgZ(149,"tr",23)(150,"td"),n._uU(151,"Weight"),n.qZA(),n.TgZ(152,"td",27)(153,"input",35),n.NdJ("ngModelChange",function(a){return r.stock.rweight=a}),n.qZA()(),n.TgZ(154,"td",27)(155,"input",36),n.NdJ("ngModelChange",function(a){return r.stock.actweight=a}),n.qZA()(),n.TgZ(156,"td",27)(157,"input",37),n.NdJ("ngModelChange",function(a){return r.stock.pweight=a}),n.qZA()(),n.TgZ(158,"td",27)(159,"input",38),n.NdJ("ngModelChange",function(a){return r.stock.aweight=a}),n.qZA()()(),n.TgZ(160,"tr",23)(161,"td"),n._uU(162,"Pcs"),n.qZA(),n._UZ(163,"td"),n.TgZ(164,"td",27)(165,"input",39),n.NdJ("ngModelChange",function(a){return r.stock.rpcs=a}),n.qZA()(),n.TgZ(166,"td"),n._uU(167),n.qZA(),n.TgZ(168,"td",27)(169,"input",40),n.NdJ("ngModelChange",function(a){return r.stock.pcs=a}),n.qZA()()(),n.TgZ(170,"tr",41),n._UZ(171,"th",15),n.TgZ(172,"th",15),n._uU(173,"PG %"),n.qZA(),n.TgZ(174,"th",15),n._uU(175,"LG %"),n.qZA(),n.TgZ(176,"th",15),n._uU(177,"PR %"),n.qZA(),n.TgZ(178,"th",15),n._uU(179,"R2P %"),n.qZA()(),n.TgZ(180,"tr",23),n._UZ(181,"td"),n.TgZ(182,"td"),n._uU(183),n.ALo(184,"wt"),n.qZA(),n.TgZ(185,"td"),n._uU(186),n.ALo(187,"wt"),n.qZA(),n.TgZ(188,"td"),n._uU(189),n.ALo(190,"wt"),n.qZA(),n.TgZ(191,"td"),n._uU(192),n.ALo(193,"wt"),n.qZA()(),n.TgZ(194,"tr",23)(195,"td"),n._uU(196),n.ALo(197,"wt"),n.qZA(),n.TgZ(198,"td",42),n._uU(199),n.ALo(200,"wt"),n.qZA(),n.TgZ(201,"td",42),n._uU(202),n.ALo(203,"wt"),n.qZA()()()()(),n.TgZ(204,"div",43)(205,"table",44)(206,"thead")(207,"tr")(208,"th",45),n._uU(209),n.qZA(),n.YNc(210,RF,2,1,"th",46),n.qZA()(),n.TgZ(211,"tbody"),n.YNc(212,EF,4,2,"tr",47),n.qZA()()(),n.TgZ(213,"div",48)(214,"table",49)(215,"thead")(216,"tr")(217,"th",50),n._uU(218),n.qZA(),n.YNc(219,PF,2,1,"th",47),n.qZA()(),n.TgZ(220,"tbody"),n.YNc(221,IF,4,2,"tr",47),n.qZA()(),n.TgZ(222,"div",51)(223,"form")(224,"div",52),n.YNc(225,OF,4,2,"label",53),n.qZA()()()()()()(),n.TgZ(226,"div",54)(227,"button",55),n._uU(228,"Close"),n.qZA(),n.YNc(229,NF,3,0,"a",56),n.TgZ(230,"div",57)(231,"button",58),n._UZ(232,"i",59),n._uU(233,"Download"),n.qZA(),n.TgZ(234,"button",60),n._UZ(235,"span",61),n.TgZ(236,"span",62),n._uU(237,"Toggle Dropdown"),n.qZA()(),n.TgZ(238,"ul",63)(239,"li")(240,"a",64),n.NdJ("click",function(){return r.download("png")}),n._UZ(241,"i",65),n._uU(242,"PNG"),n.qZA()(),n.TgZ(243,"li")(244,"a",64),n.NdJ("click",function(){return r.download("pdf")}),n._UZ(245,"i",66),n._uU(246,"PDF"),n.qZA()()()(),n.TgZ(247,"a",67),n._UZ(248,"i",68),n._uU(249,"Print"),n.qZA(),n.TgZ(250,"button",69),n.NdJ("click",function(){return r.update()}),n._uU(251,"Submit"),n.qZA()()()()),2&o&&(n.xp6(16),n.Tol(null!=r.stock&&r.stock.color?"fa fa-square":"fa fa-square-o"),n.Udp("color",null==r.stock?null:r.stock.color),n.xp6(1),n.Oqu(null==r.stock?null:r.stock.srno),n.xp6(18),n.Q6J("ngModel",r.stock.employee),n.xp6(2),n.Q6J("value",n.xi3(38,57,null==r.stock?null:r.stock.issueDate,"YYYY-MM-DD")),n.xp6(3),n.Q6J("value",n.xi3(41,60,null==r.stock?null:r.stock.closeDate,"YYYY-MM-DD")),n.xp6(3),n.Oqu(r.api.getDaysDiff(null==r.stock?null:r.stock.issueDate,null==r.stock?null:r.stock.closeDate)),n.xp6(2),n.Q6J("ngModel",r.stock.fy),n.xp6(15),n.Q6J("ngModel",r.stock.empRecut),n.xp6(2),n.Oqu(null==r.stock?null:r.stock.rpcs),n.xp6(2),n.Oqu(n.lcZ(65,63,null==r.stock?null:r.stock.actweight)),n.xp6(3),n.Oqu(n.lcZ(68,65,(null==r.stock?null:r.stock.actweight)/(null==r.stock?null:r.stock.rpcs))),n.xp6(3),n.hij("",null!=r.stock&&r.stock.rweight?n.lcZ(71,67,100*(null==r.stock?null:r.stock.actweight)/(null==r.stock?null:r.stock.rweight)):0," %"),n.xp6(3),n.Tol(null!=r.stock&&r.stock.ltStatus?"bg-lightgreen":""),n.xp6(1),n.Oqu(null!=r.stock&&r.stock.ltStatus?"LT DONE":"LT PEND."),n.xp6(14),n.Q6J("ngModel",r.stock.cweight),n.xp6(3),n.hij("",n.lcZ(92,69,100*(null==r.stock?null:r.stock.cweight)/(null==r.stock?null:r.stock.actweight))," %"),n.xp6(7),n.Oqu(n.lcZ(99,71,r.stock.actweight-r.stock.cweight-r.api.getSum(null==r.stock?null:r.stock.Lot,"rwt"))),n.xp6(4),n.hij("",n.lcZ(103,73,100*(r.stock.actweight-r.stock.cweight-r.api.getSum(null==r.stock?null:r.stock.Lot,"rwt"))/r.stock.actweight)," %"),n.xp6(2),n.Q6J("ngForOf",r.glist),n.xp6(5),n.Oqu(r.api.getSum(null==r.stock?null:r.stock.Lot,"pcs")),n.xp6(2),n.Oqu(n.lcZ(112,75,r.stock.actweight)),n.xp6(3),n.Oqu(n.lcZ(115,77,r.api.getSum(null==r.stock?null:r.stock.Lot,"pwt"))),n.xp6(3),n.hij("",n.lcZ(118,79,100*r.api.getSum(null==r.stock?null:r.stock.Lot,"pwt")/(null==r.stock?null:r.stock.actweight))," %"),n.xp6(6),n.Q6J("ngModel",r.stock.size),n.xp6(4),n.Oqu(n.lcZ(128,81,null==r.stock?null:r.stock.weight)),n.xp6(6),n.Q6J("ngModel",r.stock.remarks),n.xp6(4),n.Oqu(n.lcZ(138,83,null==r.stock?null:r.stock.rate)),n.xp6(16),n.Q6J("ngModel",r.stock.rweight),n.xp6(2),n.Q6J("ngModel",r.stock.actweight),n.xp6(2),n.Q6J("ngModel",r.stock.pweight),n.xp6(2),n.Q6J("ngModel",r.stock.aweight),n.xp6(6),n.Q6J("ngModel",r.stock.rpcs),n.xp6(2),n.Oqu(r.api.getSum(r.stock.Lot,"pcs")),n.xp6(2),n.Q6J("ngModel",r.stock.pcs),n.xp6(14),n.Oqu(null!=r.stock&&r.stock.actweight?n.lcZ(184,85,100*(null==r.stock?null:r.stock.pweight)/(null==r.stock?null:r.stock.actweight))+" %":""),n.xp6(3),n.Oqu(null!=r.stock&&r.stock.actweight?n.lcZ(187,87,100*r.api.getSum(null==r.stock?null:r.stock.Lot,"pwt")/(null==r.stock?null:r.stock.actweight))+" %":""),n.xp6(3),n.Oqu(null!=r.stock&&r.stock.rweight?n.lcZ(190,89,100*(null==r.stock?null:r.stock.pweight)/(null==r.stock?null:r.stock.rweight))+" %":""),n.xp6(3),n.Oqu(null!=r.stock&&r.stock.rweight?n.lcZ(193,91,100*(null==r.stock?null:r.stock.aweight)/(null==r.stock?null:r.stock.rweight))+" %":""),n.xp6(3),n.Tol(r.getDiff()>0?"bg-green":"bg-red"),n.xp6(1),n.hij("",n.lcZ(197,93,r.getDiff())," %"),n.xp6(3),n.Oqu(null!=r.stock&&r.stock.actweight?n.lcZ(200,95,100*(r.api.getSum(null==r.stock?null:r.stock.Lot,"pwt")-(null==r.stock?null:r.stock.pweight))/(null==r.stock?null:r.stock.actweight))+" %":""),n.xp6(3),n.Oqu(null!=r.stock&&r.stock.rweight?n.lcZ(203,97,100*((null==r.stock?null:r.stock.aweight)-(null==r.stock?null:r.stock.pweight))/(null==r.stock?null:r.stock.rweight))+" %":""),n.xp6(7),n.Oqu(null==r.stock?null:r.stock.weight),n.xp6(1),n.Q6J("ngForOf",r.size),n.xp6(2),n.Q6J("ngForOf",r.quality),n.xp6(6),n.Oqu(null==r.stock?null:r.stock.total),n.xp6(1),n.Q6J("ngForOf",r.size),n.xp6(2),n.Q6J("ngForOf",r.quality),n.xp6(4),n.Q6J("ngForOf",r.tiers),n.xp6(4),n.Q6J("ngIf",!(null!=r.stock&&r.stock.billId||null!=r.stock&&r.stock.inventoryId)),n.xp6(18),n.MGl("href","/print/[",null==r.stock?null:r.stock.id,"]",n.LSH),n.xp6(3),n.Q6J("disabled",r.loading||r.stock.actweight<r.stock.weight))},dependencies:[Ee.sg,Ee.O5,te._Y,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ut,Oi.g,Xs.K,Bt.J,Rt.v],styles:["td[_ngcontent-%COMP%]{font-weight:600!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important;height:20px!important}.excel_input[_ngcontent-%COMP%]{background-color:#e4e8ed!important}#overview_tb[_ngcontent-%COMP%], #stock_weight_table[_ngcontent-%COMP%]{margin-bottom:5px!important}"]})}return e})(),ZF=(()=>{class e{constructor(t,o){var r=this;this.api=t,this.excel=o,this.stock={},this.size=[],this.quality=[],this.slist={"bg-1":"1.GALAXY","bg-2":"2.PLANING","bg-3":"3.LASER","bg-4":"4.LOTTING","bg-5":"5.FINISH"},this.rowData=[],this.sdata=[],this.selectedRow=[],this.pinnedRow=[],this.gridOptions={getRowClass:this.getRowClass.bind(this)},this.rowSelection={mode:"multiRow"},this.columnDefs=[{headerName:"S.NO",field:"srno",pinned:"left",width:100,cellStyle:s=>{if(s.data?.color?.length>0)return{background:s.data?.color}}},{headerName:"REF NO",field:"refno"},{headerName:"STATUS",valueGetter:s=>{if(s?.node?.rowPinned)return"";var a=this.getRowClass(s);return this.slist[a]}},{headerName:"EMP",field:"employee"},{headerName:"PL PCS",field:"rpcs"},{headerName:"PL WT",field:"actweight"},{headerName:"AVG WT",field:"weight"},{headerName:"AVG RATE",field:"rate"},{headerName:"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2",valueGetter:s=>s?.data?.pcs?s?.data?.pcs:M.sumBy(s.data.Lot.filter(a=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==a.remarks),"pcs")},{headerName:"XXX",valueGetter:s=>M.sumBy(s.data.Lot.filter(a=>"XXX"==a.remarks),"pcs")},{headerName:"\u0a9a\u0acb\u0a95\u0ac0",valueGetter:s=>M.sumBy(s.data.Lot.filter(a=>"\u0a9a\u0acb\u0a95\u0ac0"==a.remarks),"pcs")},{headerName:"\u0aae\u0abe\u0ab0\u0acd\u0a95\u0abf\u0ab8",valueGetter:s=>M.sumBy(s.data.Lot.filter(a=>"\u0aae\u0abe\u0ab0\u0acd\u0a95\u0abf\u0ab8"==a.remarks),"pcs")},{headerName:"\u0aaa\u0abe\u0aa8",valueGetter:s=>M.sumBy(s.data.Lot.filter(a=>"\u0aaa\u0abe\u0aa8"==a.remarks),"pcs")},{headerName:"\u0a85\u0aa8\u0acd\u0aaf",valueGetter:s=>M.sumBy(s.data.Lot.filter(a=>"\u0a85\u0aa8\u0acd\u0aaf"==a.remarks),"pcs")},{headerName:"START DATE",field:"issueDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"END DATE",field:"closeDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"DAYS",field:"dayDiff",width:50},{headerName:"#",width:50,cellStyle:{textAlign:"center"},cellRenderer:ZT,valueGetter:s=>s.data.fvStatus}],this.defaultColDef={flex:1,minWidth:50,filter:!0,sortable:!0,resizable:!0},this.onRowDoubleClicked=function(){var s=(0,ee.Z)(function*(a){const l=a.data;if(console.log(l),l?.id>0){r.stock=yield r.api.getInfo("stock/"+l.id);for(var c=0;c<r.quality.length;c++)for(var d=0;d<r.size.length;d++){var h=r.stock.items.find(g=>g.quality==r.quality[c]&&g.size==r.size[d]);$(`#${c}${d}_w`).val(h?.weight??""),$(`#${c}${d}_r`).val(h?.rate??"")}$("#polish_form_modal").modal("toggle")}else{if(!(l?.srno?.indexOf("Total")>-1))return l?.ids?(window.open("/print/"+JSON.stringify(l.ids),"_blank"),void r.download()):void 0;r.download()}});return function(a){return s.apply(this,arguments)}}(),this.onSelectionChanged=s=>{var a=s?.api?.getSelectedRows();if(this.selectedRow=[],this.sdata=[],a?.length>1){var l={ids:a.map(h=>[h.id]),srno:"Selected: "+a.length,rpcs:M.sumBy(a,"rpcs"),actweight:M.round(M.sumBy(a,"actweight"),2),weight:M.round(M.sumBy(a,"weight"),2),Lot:[]},c=a.map(h=>h.Lot);for(var d of c)l.Lot=[...l.Lot,...d];this.selectedRow.push(l),this.sdata=a}},this.onFilterChanged=s=>{var a=[];if(this.selectedRow=[],this.sdata=[],s?.api?.forEachNodeAfterFilter(h=>{h.data&&a.push(h.data)}),a?.length!=this.rowData.length&&(console.log(a),this.selectedRow=[],a?.length>1)){var l={ids:a.map(h=>[h.id]),srno:"Filtered: "+a.length,rpcs:M.sumBy(a,"rpcs"),actweight:M.round(M.sumBy(a,"actweight"),2),weight:M.round(M.sumBy(a,"weight"),2),Lot:[]},c=a.map(h=>h.Lot);for(var d of c)l.Lot=[...l.Lot,...d];this.selectedRow.push(l),this.sdata=a}}}ngOnInit(){var t=this;return(0,ee.Z)(function*(){var o=yield t.api.getInfo("temp");t.size=o.find(r=>"size"==r.name).description,t.quality=o.find(r=>"quality"==r.name).description,yield t.loadData()})()}loadData(){var t=this;return(0,ee.Z)(function*(){var o=yield t.api.getInfo("stock");t.rowData=o.filter(l=>1==l.categoryId),t.pinnedRow=[];var r={srno:"Total: "+t.rowData.length,rpcs:M.sumBy(t.rowData,"rpcs"),actweight:M.round(M.sumBy(t.rowData,"actweight"),2),weight:M.round(M.sumBy(t.rowData,"weight"),2),Lot:[]},s=t.rowData.map(l=>l.Lot);for(var a of s)r.Lot=[...r.Lot,...a];t.pinnedRow.push(r)})()}reloadData(t){var o=this;return(0,ee.Z)(function*(){yield o.loadData(),o.gridOptions?.api?.setRowData(o.rowData)})()}onGridReady(t){t.api.sizeColumnsToFit()}getRowClass(t){return t.data.weight>0||t.data.pcs>0?"bg-5":t.data?.Lot?.length>0?"bg-4":t.data.closeDate?.length>0?"bg-3":t.data?.employee?.length>0?"bg-2":t.data?.employee?.length?"":"bg-1"}getRowStatus(t){return t?.weight>0||t?.pcs>0?"bg-5":t?.Lot?.length>0?"bg-4":t?.closeDate?.length>0?"bg-3":t?.employee?.length>0?"bg-2":t?.employee?.length?"":"bg-1"}download(){var r=(this.sdata.length?this.sdata:this.rowData).map(s=>[s.srno,s.refno,this.slist[this.getRowStatus(s)],s.employee,s.rpcs,s.actweight,s.weight,s.rate,s?.pcs?s.pcs:M.sumBy(s?.Lot?.filter(a=>"\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2"==a.remarks),"pcs"),M.sumBy(s?.Lot?.filter(a=>"XXX"==a.remarks),"pcs"),M.sumBy(s?.Lot?.filter(a=>"\u0a9a\u0acb\u0a95\u0ac0"==a.remarks),"pcs"),M.sumBy(s?.Lot?.filter(a=>"\u0aae\u0abe\u0ab0\u0acd\u0a95\u0abf\u0ab8"==a.remarks),"pcs"),M.sumBy(s?.Lot?.filter(a=>"\u0aaa\u0abe\u0aa8"==a.remarks),"pcs"),M.sumBy(s?.Lot?.filter(a=>"\u0a85\u0aa8\u0acd\u0aaf"==a.remarks),"pcs"),s?.issueDate?.length?_e(s.issueDate).format("YYYY-MM-DD"):"",s?.closeDate?.length?_e(s.closeDate).format("YYYY-MM-DD"):"",this.api.getDaysDiff(s?.issueDate,s?.closeDate)]);this.excel.generateExcel(["S.NO.","REF NO","STATUS","EMP","PL PCS","PL WT","AVG WT","AVG RATE","\u0aae\u0ac7\u0a82\u200c\u0a95\u0ac7\u0aac\u0ab2","XXX","\u0a9a\u0acb\u0a95\u0ac0","\u0aae\u0abe\u0ab0\u0acd\u0a95\u0abf\u0ab8","\u0aaa\u0abe\u0aa8","\u0a85\u0aa8\u0acd\u0aaf","START DATE","END DATE","DAYS"],r,this.sdata.length?"POLISH_FILTER":"POLISH_TOTAL")}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(et.x))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-polish"]],decls:4,vars:8,consts:[["id","details",1,"tab-pane"],[1,"ag-theme-balham",2,"width","100%","height","80vh",3,"rowData","columnDefs","defaultColDef","gridOptions","rowSelection","pinnedTopRowData","pinnedBottomRowData","gridReady","selectionChanged","filterChanged","rowDoubleClicked"],["id","polish_form_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"stock","changed"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"ag-grid-angular",1),n.NdJ("gridReady",function(a){return r.onGridReady(a)})("selectionChanged",function(a){return r.onSelectionChanged(a)})("filterChanged",function(a){return r.onFilterChanged(a)})("rowDoubleClicked",function(a){return r.onRowDoubleClicked(a)}),n.qZA()(),n.TgZ(2,"div",2)(3,"app-polish-form",3),n.NdJ("changed",function(a){return r.reloadData(a)}),n.qZA()()),2&o&&(n.xp6(1),n.Q6J("rowData",r.rowData)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("gridOptions",r.gridOptions)("rowSelection",r.rowSelection)("pinnedTopRowData",r.selectedRow)("pinnedBottomRowData",r.pinnedRow),n.xp6(2),n.Q6J("stock",r.stock))},dependencies:[wo,BF]})}return e})();var Mi=Oe(6825);const GF=["hueSlider"],HF=["alphaSlider"];function qF(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",8),n.NdJ("newValue",function(r){n.CHM(t);const s=n.oxw();return n.KtG(s.onSliderChange("saturation-lightness",r))}),n.TgZ(1,"div",9),n._UZ(2,"div"),n.qZA()()}if(2&e){const t=n.oxw();n.Udp("background-color",t.hueSliderColor),n.Q6J("rgX",1)("rgY",1),n.xp6(1),n.Udp("top",null==t.slider?null:t.slider.v,"px")("left",null==t.slider?null:t.slider.s,"px")}}function zF(e,i){if(1&e&&(n.TgZ(0,"div",10),n._UZ(1,"div",11)(2,"div",12),n.qZA()),2&e){const t=n.oxw();n.xp6(2),n.Udp("background-color",t.selectedColor)}}function VF(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",13,14),n.NdJ("newValue",function(r){n.CHM(t);const s=n.oxw();return n.KtG(s.onSliderChange("hue",r))}),n.TgZ(2,"div",15)(3,"div"),n._UZ(4,"div"),n.qZA()()()}if(2&e){const t=n.oxw();n.Q6J("rgX",1),n.xp6(2),n.Udp("left",null==t.slider?null:t.slider.h,"px")}}function UF(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",16,17),n.NdJ("newValue",function(r){n.CHM(t);const s=n.oxw();return n.KtG(s.onSliderChange("alpha",r))}),n._UZ(2,"div",18),n.TgZ(3,"div",15)(4,"div"),n._UZ(5,"div"),n.qZA()()()}if(2&e){const t=n.oxw();n.Q6J("rgX",1),n.xp6(2),n.Q6J("ngStyle",t.getBackgroundColor(t.alphaSliderColor)),n.xp6(1),n.Udp("left",null==t.slider?null:t.slider.a,"px")}}const WF=["dialog"];function jF(e,i){1&e&&n._UZ(0,"div",11)}function YF(e,i){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",8)(2,"div",9),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw(2);return n.KtG(a.onColorClick(s))}),n.YNc(3,jF,1,0,"div",10),n.qZA()(),n.BQk()}if(2&e){const t=i.$implicit,o=i.index,r=n.oxw(2);n.xp6(2),n.ekj("colornull",!t),n.Q6J("ngStyle",r.getBackgroundColor(t)),n.xp6(1),n.Q6J("ngIf",o==r.indexSeleccionado)}}function $F(e,i){if(1&e&&n._UZ(0,"div",17),2&e){const t=n.oxw(3);n.Q6J("ngStyle",t.getBackgroundColor(t.color))}}function JF(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",12),n.NdJ("click",function(){n.CHM(t);const r=n.oxw(2);return n.KtG(r.addColor())}),n.YNc(1,$F,1,1,"div",13),n.O4$(),n.TgZ(2,"svg",14),n._UZ(3,"path",15)(4,"path",16),n.qZA()()}if(2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("ngIf",void 0===t.indexSeleccionado)}}function KF(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"color-picker",18),n.NdJ("colorChange",function(r){n.CHM(t);const s=n.oxw(2);return n.KtG(s.onChangeColorPicker(r))})("onAlphaChange",function(r){n.CHM(t);const s=n.oxw(2);return n.KtG(s.onAlphaChange(r))}),n.qZA()}if(2&e){const t=n.oxw(2);n.Q6J("controls",t.colorPickerControls)("color",t.hsva)}}function QF(e,i){if(1&e&&(n.ynx(0),n.TgZ(1,"div",4),n.YNc(2,YF,4,4,"ng-container",5),n.YNc(3,JF,5,1,"div",6),n.YNc(4,KF,1,2,"color-picker",7),n.qZA(),n.BQk()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("@colorsAnimation",t.colorsAnimationEffect),n.xp6(1),n.Q6J("ngForOf",t.palette),n.xp6(1),n.Q6J("ngIf",!t.hideColorPicker&&"only-alpha"!=t.colorPickerControls),n.xp6(1),n.Q6J("ngIf",!t.hideColorPicker&&"only-alpha"==t.colorPickerControls)}}function XF(e,i){1&e&&n._UZ(0,"div",11)}const v0=function(e){return{background:e}};function eR(e,i){if(1&e){const t=n.EpF();n.O4$(),n.kcU(),n.ynx(0),n.TgZ(1,"div",8)(2,"div",24),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw(2);return n.KtG(a.changeColor(s))}),n.YNc(3,XF,1,0,"div",10),n.qZA()(),n.BQk()}if(2&e){const t=i.$implicit,o=n.oxw(2);n.xp6(2),n.ekj("colornull",!t),n.Q6J("ngStyle",n.VKq(4,v0,t)),n.xp6(1),n.Q6J("ngIf",o.isSelected(t))}}function tR(e,i){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",4)(2,"div",19)(3,"div",20),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.onClickBack())}),n.O4$(),n.TgZ(4,"svg",21),n._UZ(5,"path",22)(6,"path",23),n.qZA()()(),n.YNc(7,eR,4,6,"ng-container",5),n.qZA(),n.BQk()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("@colorsAnimation",t.colorsAnimationEffect),n.xp6(6),n.Q6J("ngForOf",t.variants)}}function iR(e,i){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",25)(2,"div",26),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.onClickBack())}),n.O4$(),n.TgZ(3,"svg",21),n._UZ(4,"path",22)(5,"path",23),n.qZA()(),n.kcU(),n.TgZ(6,"button",27),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.emitClose("cancel"))}),n._uU(7),n.qZA(),n.TgZ(8,"button",27),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.emitClose("accept"))}),n._uU(9),n.qZA()(),n.TgZ(10,"div",28)(11,"color-picker",29),n.NdJ("sliderChange",function(r){n.CHM(t);const s=n.oxw();return n.KtG(s.onChangeColorPicker(r))}),n.qZA()(),n.BQk()}if(2&e){const t=n.oxw();n.xp6(7),n.hij(" ",t.cancelLabel," "),n.xp6(2),n.hij(" ",t.acceptLabel," "),n.xp6(2),n.Q6J("controls",t.colorPickerControls)("color",t.hsva)}}function nR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",30)(1,"p",31),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.nextFormat())}),n._uU(2),n.qZA(),n.TgZ(3,"div",32)(4,"input",33,34),n.NdJ("keyup",function(){n.CHM(t);const r=n.MAs(5),s=n.oxw();return n.KtG(s.changeColorManual(r.value))})("keydown.enter",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.emitClose("accept"))}),n.qZA()()()}if(2&e){const t=n.oxw();n.xp6(2),n.Oqu(t.colorFormats[t.format]),n.xp6(2),n.Udp("font-size",t.color&&t.color.length>23?9:10,"px")("letter-spacing",t.color&&t.color.length>16?0:1.5,"px"),n.Q6J("placeholder",t.placeholder)("value",t.color)}}const np=["hex","rgba","hsla","cmyk"];var Pn=function(e){return e[e.HEX=0]="HEX",e[e.RGBA=1]="RGBA",e[e.HSLA=2]="HSLA",e[e.CMYK=3]="CMYK",e}(Pn||{});const C0=[{color:"rojo",preview:"#E57373",variants:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828"]},{color:"rosa",preview:"#F06292",variants:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457"]},{color:"purpura",preview:"#BA68C8",variants:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A"]},{color:"purpura oscuro",preview:"#9575CD",variants:["#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0"]},{color:"indigo",preview:"#7986CB",variants:["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593"]},{color:"azul",preview:"#64B5F6",variants:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0"]},{color:"celeste",preview:"#4FC3F7",variants:["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD"]},{color:"cyan",preview:"#4DD0E1",variants:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F"]},{color:"color",preview:"#4DB6AC",variants:["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C"]},{color:"verde",preview:"#81C784",variants:["#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32"]},{color:"verde claro",preview:"#AED581",variants:["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F"]},{color:"lima",preview:"#DCE775",variants:["#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24"]},{color:"amarillo",preview:"#FFF176",variants:["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825"]},{color:"ambar",preview:"#FFD54F",variants:["#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00"]},{color:"naranja",preview:"#FFB74D",variants:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00"]},{color:"naranja oscuro",preview:"#FF8A65",variants:["#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315"]},{color:"marron",preview:"#A1887F",variants:["#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E"]},{color:"escala de grises",preview:"#E0E0E0",variants:["#FFFFFF","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#000000"]},{color:"azul gris",preview:"#90A4AE",variants:["#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F"]}];class Br{constructor(i,t,o,r){this.r=i,this.g=t,this.b=o,this.a=r}denormalize(){return this.r=Math.round(255*this.r),this.g=Math.round(255*this.g),this.b=Math.round(255*this.b),this}toString(){return this.denormalize(),"rgb"+(1!=this.a?"a(":"(")+this.r+", "+this.g+", "+this.b+(1!=this.a?", "+this.a.toPrecision(2)+")":")")}}class ur{constructor(i,t,o,r){this.h=i,this.s=t,this.v=o,this.a=r,this.onChange=new n.vpe(!0)}onColorChange(i){this.s=i.s/i.rgX,this.v=i.v/i.rgY}onHueChange(i){this.h=i.v/i.rgX}onValueChange(i){this.v=i.v/i.rgX}onAlphaChange(i){this.a=i.v/i.rgX}}class Rl{constructor(i,t,o,r){this.h=i,this.s=t,this.l=o,this.a=r}denormalize(){return this.h=Math.round(360*this.h),this.s=Math.round(100*this.s),this.l=Math.round(100*this.l),this}toString(){return"hsl"+(1!=this.a?"a(":"(")+this.h+", "+this.s+"%, "+this.l+"%"+(1!=this.a?", "+this.a.toPrecision(2)+")":")")}}class va{constructor(i,t,o,r,s=1){this.c=i,this.m=t,this.y=o,this.k=r,this.a=s}denormalize(){return this.c=Math.round(100*this.c),this.m=Math.round(100*this.m),this.y=Math.round(100*this.y),this.k=Math.round(100*this.k),this}toString(){return this.denormalize(),"cmyk("+this.c+", "+this.m+", "+this.y+", "+this.k+")"}}class oR{constructor(i){i&&(this.preview=i.preview,this.variants=i.variants)}}let Rd=(()=>{class e{constructor(){}toFormat(t,o){var r="";if(t)switch(o){case Pn.HEX:(a=this.hsvaToRgba(t)).denormalize(),r=this.rgbaToHex(a,!0);break;case Pn.HSLA:var s=this.hsva2hsla(t);s.denormalize(),r=s.toString();break;case Pn.RGBA:var a;r=(a=this.hsvaToRgba(t)).toString();break;case Pn.CMYK:r=this.hsvaToCmyk(t).toString()}return r}stringToFormat(t,o){var r=this.stringToHsva(t,!0);return this.toFormat(r,o)}hsva2hsla(t){const o=t.h,r=t.s,s=t.v,a=t.a;if(0===s)return new Rl(o,0,0,a);if(0===r&&1===s)return new Rl(o,1,1,a);{const l=s*(2-r)/2;return new Rl(o,s*r/(1-Math.abs(2*l-1)),l,a)}}hsla2hsva(t){const o=Math.min(t.h,1),r=Math.min(t.s,1),s=Math.min(t.l,1),a=Math.min(t.a,1);if(0===s)return new ur(o,0,0,a);{const l=s+r*(1-Math.abs(2*s-1))/2;return new ur(o,2*(l-s)/l,l,a)}}hsvaToRgba(t){let o,r,s;const a=t.h,l=t.s,c=t.v,d=t.a,h=Math.floor(6*a),g=6*a-h,m=c*(1-l),f=c*(1-g*l),y=c*(1-(1-g)*l);switch(h%6){case 0:o=c,r=y,s=m;break;case 1:o=f,r=c,s=m;break;case 2:o=m,r=c,s=y;break;case 3:o=m,r=f,s=c;break;case 4:o=y,r=m,s=c;break;case 5:o=c,r=m,s=f;break;default:o=0,r=0,s=0}return new Br(o,r,s,d)}cmykToRgb(t){return new Br((1-t.c)*(1-t.k),(1-t.m)*(1-t.k),(1-t.y)*(1-t.k),t.a)}rgbaToCmyk(t){const o=1-Math.max(t.r,t.g,t.b);return 1===o?new va(0,0,0,1,t.a):new va((1-t.r-o)/(1-o),(1-t.g-o)/(1-o),(1-t.b-o)/(1-o),o,t.a)}hsvaToCmyk(t){let o=this.hsvaToRgba(t);return this.rgbaToCmyk(o)}rgbaToHsva(t){let o,r;const s=Math.min(t.r,1),a=Math.min(t.g,1),l=Math.min(t.b,1),c=Math.min(t.a,1),d=Math.max(s,a,l),h=Math.min(s,a,l),g=d,m=d-h;if(r=0===d?0:m/d,d===h)o=0;else{switch(d){case s:o=(a-l)/m+(a<l?6:0);break;case a:o=(l-s)/m+2;break;case l:o=(s-a)/m+4;break;default:o=0}o/=6}return new ur(o,r,g,c)}rgbaToHex(t,o){let r="#"+(16777216|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return 1!=t.a&&(r+=(256|Math.round(255*t.a)).toString(16).substr(1)),r}normalizeCMYK(t){return new va(t.c/100,t.m/100,t.y/100,t.k/100,t.a)}denormalizeCMYK(t){return new va(Math.floor(100*t.c),Math.floor(100*t.m),Math.floor(100*t.y),Math.floor(100*t.k),t.a)}denormalizeRGBA(t){return new Br(Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b),t.a)}stringToHsva(t="",o=!0){let r=null;t=(t||"").toLowerCase();const s=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new Br(parseInt(a[2],10)/255,parseInt(a[3],10)/255,parseInt(a[4],10)/255,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new Rl(parseInt(a[2],10)/360,parseInt(a[3],10)/100,parseInt(a[4],10)/100,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}},{re:/cmyk?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new va(parseInt(a[1],10)/100,parseInt(a[2],10)/100,parseInt(a[3],10)/100,parseInt(a[4],10)/100)}}];s.push(o?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(a){return new Br(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,parseInt(a[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(a){return new Br(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,1)}}),s.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(a){return new Br(parseInt(a[1]+a[1],16)/255,parseInt(a[2]+a[2],16)/255,parseInt(a[3]+a[3],16)/255,1)}});for(const a in s)if(s.hasOwnProperty(a)){const l=s[a],c=l.re.exec(t),d=c&&l.parse(c);if(d){if(d instanceof Br)r=this.rgbaToHsva(d);else if(d instanceof Rl)r=this.hsla2hsva(d);else if(d instanceof va){let h=this.cmykToRgb(d);r=this.rgbaToHsva(h)}return r}}return r}outputFormat(t){return this.hsvaToRgba(t).toString()}getFormatByString(t){if(t){t=t.toLowerCase();let r=/(rgba\((\d{1,3},\s?){3}(1|0?\.\d+)\)|rgb\(\d{1,3}(,\s?\d{1,3}){2}\))/,s=/(hsla\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)|hsl\(\d{1,3}%?(,\s?\d{1,3}%?){2}\))/,a=/(cmyk\(\d{1,3}(,\s?\d{1,3}){3}\))/;if(/(#([\da-f]{3}(?:[\da-f]{3})?(?:[\da-f]{2})?))/.test(t))return"hex";if(r.test(t))return"rgba";if(s.test(t))return"hsla";if(a.test(t))return"cmyk"}return"hex"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();class w0{constructor(i,t,o,r){this.h=i,this.s=t,this.v=o,this.a=r}}class rR{constructor(i,t,o,r){this.h=i,this.s=t,this.v=o,this.a=r}}let sR=(()=>{class e{mouseDown(t){this.start(t)}touchStart(t){this.start(t)}constructor(t){this.elRef=t,this.dragEnd=new n.vpe,this.dragStart=new n.vpe,this.newValue=new n.vpe,this.listenerMove=o=>this.move(o),this.listenerStop=()=>this.stop()}move(t){t.preventDefault(),this.setCursor(t)}start(t){this.setCursor(t),t.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(t){const o=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageX?t.pageX:t.touches[0].pageX)-o.left-window.pageXOffset}getY(t){const o=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageY?t.pageY:t.touches[0].pageY)-o.top-window.pageYOffset}setCursor(t){const o=this.elRef.nativeElement.offsetWidth,r=this.elRef.nativeElement.offsetHeight,s=Math.max(0,Math.min(this.getX(t),o)),a=Math.max(0,Math.min(this.getY(t),r));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:s/o,v:1-a/r,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:a/r,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:s/o,rgX:this.rgX})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq))},e.\u0275dir=n.lG2({type:e,selectors:[["","slider",""]],hostBindings:function(t,o){1&t&&n.NdJ("mousedown",function(s){return o.mouseDown(s)})("touchstart",function(s){return o.touchStart(s)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),e})(),aR=(()=>{class e{constructor(t,o){this.service=t,this.cdr=o,this.color=new ur(0,1,1,1),this.controls="default",this.sliderChange=new n.vpe(!1),this.onAlphaChange=new n.vpe(!1),this.hsva=new ur(0,1,1,1),this.selectedColor="#000000",this.fallbackColor="#000000"}ngOnInit(){this.color||(this.color=new ur(0,1,1,1)),this.slider=new w0(0,0,0,0),this.update()}ngOnDestroy(){}ngOnChanges(t){t.color&&this.color&&this.update()}ngAfterViewInit(){this.sliderDimMax=new rR(this.hueSlider?.nativeElement.offsetWidth||140,220,130,this.alphaSlider?.nativeElement.offsetWidth||140),this.update()}onSliderChange(t,o){switch(t){case"saturation-lightness":this.hsva.onColorChange(o);break;case"hue":this.hsva.onHueChange(o);break;case"alpha":this.hsva.onAlphaChange(o),this.onAlphaChange.emit(o);break;case"value":this.hsva.onValueChange(o)}this.update(),this.setColor(this.outputColor)}setColor(t){this.color=t,this.sliderChange.emit(this.color)}getBackgroundColor(t){return{background:"linear-gradient(90deg, rgba(36,0,0,0) 0%, "+t+" 100%)"}}update(){if(this.hsva=this.color,this.sliderDimMax){let t=this.service.hsvaToRgba(this.hsva).denormalize(),o=this.service.hsvaToRgba(new ur(this.hsva.h,1,1,1)).denormalize();this.hueSliderColor="rgb("+o.r+","+o.g+","+o.b+")",this.alphaSliderColor="rgb("+t.r+","+t.g+","+t.b+")",this.outputColor=this.hsva,this.selectedColor=this.service.hsvaToRgba(this.hsva).toString(),this.slider=new w0(this.hsva.h*this.sliderDimMax.h-5,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-5),this.cdr.detectChanges()}}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(Rd),n.Y36(n.sBO))},e.\u0275cmp=n.Xpm({type:e,selectors:[["color-picker"]],viewQuery:function(t,o){if(1&t&&(n.Gf(GF,5),n.Gf(HF,5)),2&t){let r;n.iGM(r=n.CRH())&&(o.hueSlider=r.first),n.iGM(r=n.CRH())&&(o.alphaSlider=r.first)}},inputs:{color:"color",controls:"controls"},outputs:{sliderChange:"sliderChange",onAlphaChange:"onAlphaChange"},features:[n.TTD],decls:8,vars:4,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue",4,"ngIf"],[1,"hue-alpha","box"],["class","left",4,"ngIf"],[1,"right"],["class","hue",3,"slider","rgX","newValue",4,"ngIf"],["class","alpha",3,"slider","rgX","newValue",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue"],[1,"cursor"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],[1,"hue",3,"slider","rgX","newValue"],["hueSlider",""],[1,"sliderCursor"],[1,"alpha",3,"slider","rgX","newValue"],["alphaSlider",""],[1,"alpha-gradient",3,"ngStyle"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0,1),n.NdJ("click",function(s){return s.stopPropagation()}),n.YNc(2,qF,3,8,"div",2),n.TgZ(3,"div",3),n.YNc(4,zF,3,2,"div",4),n.TgZ(5,"div",5),n.YNc(6,VF,5,3,"div",6),n.YNc(7,UF,6,4,"div",7),n.qZA()()()),2&t&&(n.xp6(2),n.Q6J("ngIf","only-alpha"!=o.controls),n.xp6(2),n.Q6J("ngIf","only-alpha"!=o.controls),n.xp6(2),n.Q6J("ngIf","only-alpha"!=o.controls),n.xp6(1),n.Q6J("ngIf","no-alpha"!=o.controls))},dependencies:[Ee.O5,Ee.PC,sR],styles:[".color-picker{position:relative;z-index:1000;width:220px;height:auto;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .sliderCursor{width:10px;border-radius:5px;position:absolute;margin-top:-3px;border:1px solid black}.color-picker .sliderCursor>div{border:2px solid white;border-radius:5px}.color-picker .sliderCursor>div>div{border-radius:5px;border:1px solid black;height:24px}.color-picker .cursor{position:absolute;width:21px;border:3px solid black;border-radius:100%;margin:-2px 0 0 -2px}.color-picker .cursor>div{height:15px;border:3px solid white;border-radius:100%}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;display:flex;flex-direction:column;gap:10px;padding:12px 8px}.color-picker .hue-alpha{display:flex;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:24px;border:none;border-radius:5px;position:relative;cursor:pointer;background-size:100% 100%;background:linear-gradient(to right,red 0%,#ff0 17%,lime 33%,cyan 50%,blue 66%,#f0f 83%,red 100%)}.color-picker .alpha{direction:ltr;position:relative;width:100%;height:24px;border:none;border-radius:5px;cursor:pointer;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .alpha-gradient{width:100%;height:100%;border-radius:5px;position:absolute}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;box-shadow:0 1px 1px 1px #00000026;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .saturation-lightness{direction:ltr;cursor:crosshair;width:100%;position:relative;height:130px;border:none;touch-action:manipulation;background-image:linear-gradient(to top,#000 0%,transparent 100%),linear-gradient(to right,#fff 0%,transparent 100%)}\n"],encapsulation:2}),e})(),lR=(()=>{class e{click(t){this.isOutside(t)&&this.emitClose("cancel")}onScroll(){this.onScreenMovement()}onResize(){this.onScreenMovement()}constructor(t,o){this.service=t,this.cdr=o,this.color="#000000",this.previewColor="#000000",this.hsva=new ur(0,1,1,1),this.colorsAnimationEffect="slide-in",this.palette=C0,this.variants=[],this.userFormats=[],this.colorFormats=np,this.format=Pn.HEX,this.formatMap={hex:Pn.HEX,rgba:Pn.RGBA,hsla:Pn.HSLA,cmyk:Pn.CMYK},this.canChangeFormat=!0,this.menu=1,this.hideColorPicker=!1,this.hideTextInput=!1,this.colorPickerControls="default",this.placeholder="#FFFFFF"}ngOnInit(){this.setPosition(),this.hsva=this.service.stringToHsva(this.color),this.indexSeleccionado=this.findIndexSelectedColor(this.palette)}ngAfterViewInit(){this.setPositionY()}onScreenMovement(){this.setPosition(),this.setPositionY(),this.panelRef.nativeElement.style.transition||(this.panelRef.nativeElement.style.transition="transform 0.5s ease-out")}findIndexSelectedColor(t){let o;if(this.color)for(let r=0;r<t.length;r++){const s=t[r];"string"==typeof s?this.service.stringToFormat(this.color,Pn.HEX)==this.service.stringToFormat(s,Pn.HEX)&&(o=r):void 0===s?this.color=void 0:null!=this.findIndexSelectedColor(s.variants)&&(o=r)}return o}iniciate(t,o,r,s,a,l,c,d,h,g,m,f,y=[]){if(this.colorPickerControls=m,this.triggerInstance=t,this.TriggerBBox=o,this.color=r,this.hideColorPicker=d,this.hideTextInput=c,this.acceptLabel=h,this.cancelLabel=g,y.length&&y.every(S=>np.includes(S))&&(this.colorFormats=y),l?this.colorFormats.includes(l)?(this.format=this.colorFormats.indexOf(l.toLowerCase()),this.canChangeFormat=!1,this.service.getFormatByString(this.color)!=l.toLowerCase()&&this.setColor(this.service.stringToHsva(this.color))):(console.error("Format provided is invalid, using HEX"),this.format=Pn.HEX):(this.format=this.colorFormats.indexOf(this.service.getFormatByString(this.color)),this.format<0&&(this.format=0)),this.previewColor=this.color,this.palette=s??C0,this.colorsAnimationEffect=a,"top"==f){let b=this.TriggerBBox.nativeElement.getBoundingClientRect();this.positionString="transform: translateY(calc( -100% - "+b.height+"px ))"}}setPosition(){if(this.TriggerBBox){const o=this.TriggerBBox.nativeElement.getBoundingClientRect();this.top=o.top+o.height,this.left=o.left+250>window.innerWidth?o.right<250?window.innerWidth/2-125:o.right-250:o.left}}setPositionY(){const t=this.TriggerBBox.nativeElement.getBoundingClientRect(),o=this.panelRef.nativeElement.getBoundingClientRect();this.positionString=t.bottom+o.height>window.innerHeight?t.top<o.height?"transform: translateY(-"+t.bottom+"px );":"transform: translateY(calc( -100% - "+t.height+"px ));":"",this.cdr.detectChanges()}hasVariant(t){return!!this.previewColor&&"string"!=typeof t&&t.variants.some(o=>o.toUpperCase()==this.previewColor.toUpperCase())}isSelected(t){return!!this.previewColor&&"string"==typeof t&&t.toUpperCase()==this.previewColor.toUpperCase()}getBackgroundColor(t){return"string"==typeof t?{background:t}:{background:t?.preview}}onAlphaChange(t){this.palette=this.ChangeAlphaOnPalette(t,this.palette)}ChangeAlphaOnPalette(t,o){var r=[];for(let s=0;s<o.length;s++){const a=o[s];if("string"==typeof a){let l=this.service.stringToHsva(a);l.onAlphaChange(t),r.push(this.service.toFormat(l,this.format))}else{let l=new oR,c=this.service.stringToHsva(a.preview);c.onAlphaChange(t),l.preview=this.service.toFormat(c,this.format),l.variants=this.ChangeAlphaOnPalette(t,a.variants),r.push(l)}}return r}changeColor(t){this.setColor(this.service.stringToHsva(t)),this.emitClose("accept")}onChangeColorPicker(t){this.temporalColor=t,this.color=this.service.toFormat(t,this.format),this.triggerInstance.sliderChange(this.service.toFormat(t,this.format))}changeColorManual(t){this.previewColor=t,this.color=t,this.hsva=this.service.stringToHsva(t),this.setPreviewColor(this.hsva),this.temporalColor=this.hsva,this.triggerInstance.setColor(this.color,this.previewColor)}setColor(t,o=-1){this.hsva=t;let s=o;s<0&&(s=this.formatMap[this.colorFormats[this.format]]),this.color=this.service.toFormat(t,s),this.setPreviewColor(t),this.triggerInstance.setColor(this.color,this.previewColor)}setPreviewColor(t){this.previewColor=t?this.service.hsvaToRgba(t).toString():void 0}onChange(){}onColorClick(t){"string"==typeof t||void 0===t?this.changeColor(t):(this.variants=t.variants,this.menu=2)}addColor(){this.menu=3,this.backupColor=this.color,this.temporalColor=this.service.stringToHsva(this.color)}nextFormat(){if(this.canChangeFormat){this.format=(this.format+1)%this.colorFormats.length;let o=this.formatMap[this.colorFormats[this.format]];this.setColor(this.hsva,o),this.placeholder=this.service.toFormat(new ur(0,0,1,1),o)}}emitClose(t){3==this.menu&&("cancel"==t||"accept"==t&&this.setColor(this.temporalColor)),this.triggerInstance.closePanel()}onClickBack(){3==this.menu&&(this.color=this.backupColor,this.hsva=this.service.stringToHsva(this.color)),this.indexSeleccionado=this.findIndexSelectedColor(this.palette),this.menu=1}isOutside(t){return t.target.classList.contains("ngx-colors-overlay")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(Rd),n.Y36(n.sBO))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ngx-colors-panel"]],viewQuery:function(t,o){if(1&t&&n.Gf(WF,5),2&t){let r;n.iGM(r=n.CRH())&&(o.panelRef=r.first)}},hostVars:4,hostBindings:function(t,o){1&t&&n.NdJ("mousedown",function(s){return o.click(s)},!1,n.evT)("scroll",function(){return o.onScroll()},!1,n.evT)("resize",function(){return o.onResize()},!1,n.Jf7),2&t&&n.Udp("top",o.top,"px")("left",o.left,"px")},decls:6,vars:6,consts:[[1,"opened"],["dialog",""],[4,"ngIf"],["class","manual-input-wrapper",4,"ngIf"],[1,"colors"],[4,"ngFor","ngForOf"],["style","background: rgb(245 245 245); position: relative","class","circle button",3,"click",4,"ngIf"],[3,"controls","color","colorChange","onAlphaChange",4,"ngIf"],[1,"circle","wrapper","color"],[1,"circle","color","circle-border",3,"ngStyle","click"],["class","selected",4,"ngIf"],[1,"selected"],[1,"circle","button",2,"background","rgb(245 245 245)","position","relative",3,"click"],["style","\n            position: absolute;\n            height: 7px;\n            width: 7px;\n            border: 1px solid rgba(0, 0, 0, 0.03);\n            border-radius: 100%;\n            top: 0;\n            right: 0;\n          ",3,"ngStyle",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#222222"],["d","M24 24H0V0h24v24z","fill","none","opacity",".87"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"],[2,"position","absolute","height","7px","width","7px","border","1px solid rgba(0, 0, 0, 0.03)","border-radius","100%","top","0","right","0",3,"ngStyle"],[3,"controls","color","colorChange","onAlphaChange"],[1,"circle","wrapper"],[1,"add",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M0 0h24v24H0z","fill","none"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"circle","circle-border",3,"ngStyle","click"],[1,"nav-wrapper"],[1,"round-button","button",2,"float","left",3,"click"],[2,"float","right",3,"click"],[1,"color-picker-wrapper"],[3,"controls","color","sliderChange"],[1,"manual-input-wrapper"],[2,"cursor","pointer",3,"click"],[1,"g-input"],["type","text",3,"placeholder","value","keyup","keydown.enter"],["paintInput",""]],template:function(t,o){1&t&&(n.TgZ(0,"div",0,1),n.YNc(2,QF,5,4,"ng-container",2),n.YNc(3,tR,8,2,"ng-container",2),n.YNc(4,iR,12,4,"ng-container",2),n.YNc(5,nR,6,7,"div",3),n.qZA()),2&t&&(n.Akn(o.positionString),n.xp6(2),n.Q6J("ngIf",1==o.menu),n.xp6(1),n.Q6J("ngIf",2==o.menu),n.xp6(1),n.Q6J("ngIf",3==o.menu),n.xp6(1),n.Q6J("ngIf",!o.hideTextInput))},dependencies:[Ee.sg,Ee.O5,Ee.PC,aR],styles:["[_nghost-%COMP%]{position:fixed;z-index:2001}.hidden[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.top[_ngcontent-%COMP%]{transform:translateY(-100%)}.opened[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background:#fff;width:250px;border-radius:5px;position:absolute}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-family:inherit;font-size:12px;background-color:unset;-webkit-user-select:none;user-select:none;padding:10px;letter-spacing:1px;color:#222;border-radius:3px;line-height:20px}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .opened[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0000000d;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1);transition-property:opacity,background-color;transition-duration:.2s,.2s;transition-timing-function:cubic-bezier(.35,0,.25,1),cubic-bezier(.35,0,.25,1);transition-delay:0s,0s}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:15px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:34px;width:34px;box-sizing:border-box;border-radius:100%;cursor:pointer}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:20px;line-height:45px;text-align:center}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:2px solid white;border-radius:100%;height:28px;width:28px;box-sizing:border-box;margin:2px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper[_ngcontent-%COMP%]{margin:0 5px 5px;flex:34px 0 0}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.button[_ngcontent-%COMP%]{margin:0 5px 5px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper.color[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.03)}.opened[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{margin:5px 15px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{overflow:hidden;margin:5px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .round-button[_ngcontent-%COMP%]{padding:5px 0;width:40px;height:40px;box-sizing:border-box;border-radius:100%;text-align:center;line-height:45px}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]{display:flex;margin:15px;font-family:sans-serif}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:48px;width:145px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:100%}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:9px;border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}"],data:{animation:[(0,Mi.X$)("colorsAnimation",[(0,Mi.eR)("void => slide-in",[(0,Mi.IO)(":enter",(0,Mi.oB)({opacity:0}),{optional:!0}),(0,Mi.IO)(":enter",(0,Mi.EY)("10ms",[(0,Mi.jt)(".3s ease-in",(0,Mi.F4)([(0,Mi.oB)({opacity:0,transform:"translatex(-50%)",offset:0}),(0,Mi.oB)({opacity:.5,transform:"translatex(-10px) scale(1.1)",offset:.3}),(0,Mi.oB)({opacity:1,transform:"translatex(0)",offset:1})]))]),{optional:!0})]),(0,Mi.eR)("void => popup",[(0,Mi.IO)(":enter",(0,Mi.oB)({opacity:0,transform:"scale(0)"}),{optional:!0}),(0,Mi.IO)(":enter",(0,Mi.EY)("10ms",[(0,Mi.jt)("500ms ease-out",(0,Mi.F4)([(0,Mi.oB)({opacity:.5,transform:"scale(.5)",offset:.3}),(0,Mi.oB)({opacity:1,transform:"scale(1.1)",offset:.8}),(0,Mi.oB)({opacity:1,transform:"scale(1)",offset:1})]))]),{optional:!0})])])]}}),e})();const y0={position:"fixed",height:"100%",width:"100%","z-index":2e3,top:0,left:0};let b0=(()=>{class e{constructor(t,o,r){this.resolver=t,this.applicationRef=o,this.injector=r}createPanel(t,o){null!=this.componentRef&&this.removePanel();const r=this.resolver.resolveComponentFactory(lR);this.componentRef=r.create(this.injector),this.applicationRef.attachView(this.componentRef.hostView);const s=this.componentRef.hostView.rootNodes[0];return this.overlay=document.createElement("div"),this.overlay.id="ngx-colors-overlay",this.overlay.classList.add("ngx-colors-overlay"),this.overlay.classList.add(o),Object.keys(y0).forEach(a=>{this.overlay.style[a]=y0[a]}),t?document.getElementById(t).appendChild(this.overlay):document.body.appendChild(this.overlay),this.overlay.appendChild(s),this.componentRef}removePanel(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.overlay.remove()}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(n._Vd),n.LFG(n.z2F),n.LFG(n.zs3))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),S0=(()=>{class e{onClick(){this.openPanel()}constructor(t,o,r){this.triggerRef=t,this.panelFactory=o,this.service=r,this.color="",this.colorsAnimation="slide-in",this.position="bottom",this.attachTo=void 0,this.overlayClassName=void 0,this.colorPickerControls="default",this.acceptLabel="ACCEPT",this.cancelLabel="CANCEL",this.change=new n.vpe,this.input=new n.vpe,this.slider=new n.vpe,this.close=new n.vpe,this.open=new n.vpe,this.isDisabled=!1,this.onTouchedCallback=()=>{},this.onChangeCallback=()=>{}}ngOnDestroy(){this.panelRef&&this.panelFactory.removePanel()}openPanel(){this.isDisabled||(this.panelRef=this.panelFactory.createPanel(this.attachTo,this.overlayClassName),this.panelRef.instance.iniciate(this,this.triggerRef,this.color,this.palette,this.colorsAnimation,this.format,this.hideTextInput,this.hideColorPicker,this.acceptLabel,this.cancelLabel,this.colorPickerControls,this.position,this.formats)),this.open.emit(this.color)}closePanel(){this.panelFactory.removePanel(),this.onTouchedCallback(),this.close.emit(this.color)}setDisabledState(t){this.isDisabled=t,this.triggerRef.nativeElement.style.opacity=t?.5:1}setColor(t,o=""){this.writeValue(t,o),this.onChangeCallback(t),this.input.emit(t)}sliderChange(t){this.slider.emit(t)}get value(){return this.color}set value(t){this.setColor(t),this.onChangeCallback(t)}writeValue(t,o=""){if(t!==this.color){if(this.format){let s=np.indexOf(this.format.toLowerCase());t=this.service.stringToFormat(t,s)}this.color=t;let r=!1;t&&t.startsWith("cmyk")&&(r=!0,o||(o=this.service.stringToFormat(t,Pn.RGBA))),this.change.emit(r?o:t)}}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(b0),n.Y36(Rd))},e.\u0275dir=n.lG2({type:e,selectors:[["","ngx-colors-trigger",""]],hostBindings:function(t,o){1&t&&n.NdJ("click",function(){return o.onClick()})},inputs:{colorsAnimation:"colorsAnimation",palette:"palette",format:"format",formats:"formats",position:"position",hideTextInput:"hideTextInput",hideColorPicker:"hideColorPicker",attachTo:"attachTo",overlayClassName:"overlayClassName",colorPickerControls:"colorPickerControls",acceptLabel:"acceptLabel",cancelLabel:"cancelLabel"},outputs:{change:"change",input:"input",slider:"slider",close:"close",open:"open"},features:[n._Bn([{provide:te.JU,useExisting:(0,n.Gpc)(()=>e),multi:!0}])]}),e})(),cR=(()=>{class e{constructor(t,o){this.cdRef=t,this.triggerDirective=o,this.triggerDirectiveColorChangeSubscription=null,this.color=this.triggerDirective.color}ngOnInit(){this.triggerDirectiveColorChangeSubscription=this.triggerDirective.change.subscribe(t=>{this.color=t,this.cdRef.markForCheck()})}ngOnDestroy(){this.triggerDirectiveColorChangeSubscription&&this.triggerDirectiveColorChangeSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.sBO),n.Y36(S0,1))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ngx-colors"]],decls:4,vars:5,consts:[[1,"app-color-picker"],[1,"preview"],[1,"preview-background"],[1,"circle",3,"ngStyle"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"div",3),n.qZA()()()),2&t&&(n.xp6(3),n.ekj("colornull",!o.color),n.Q6J("ngStyle",n.VKq(3,v0,o.color)))},dependencies:[Ee.PC],styles:["[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]{line-height:1px;font-family:sans-serif}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin:2px;display:inline-block;box-sizing:border-box;border-radius:100%;background:white;cursor:pointer;padding:3px;box-shadow:0 1px 1px #0003,0 1px 1px 1px #00000024,0 1px 1px 1px #0000001f}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-background[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:100%}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:20px;width:20px;box-sizing:border-box;border-radius:100%;cursor:pointer}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .noselected[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}"]}),e})(),_0=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({providers:[Rd,b0],imports:[Ee.ez]}),e})();function dR(e,i){if(1&e&&(n.TgZ(0,"h4",43),n._uU(1),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Oqu(null==t.production||null==t.production.bill?null:t.production.bill.code)}}function uR(e,i){if(1&e&&(n.TgZ(0,"h4",43),n._uU(1),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.AsE("",2==(null==t.production||null==t.production.inventory?null:t.production.inventory.categoryId)?"T/":"J/","",t.api.padleft(null==t.production||null==t.production.inventory?null:t.production.inventory.srno),"")}}function hR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",46),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.remove(r))}),n._UZ(1,"span",48),n.qZA()}}function gR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",10)(1,"td"),n.YNc(2,hR,2,0,"a",36),n.qZA(),n.TgZ(3,"td",14)(4,"input",44),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.srno=r)}),n.qZA()(),n.TgZ(5,"td")(6,"ngx-colors",29),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.color=r)}),n.qZA()(),n.TgZ(7,"td",14)(8,"input",44),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.employee=r)}),n.qZA()(),n.TgZ(9,"td",14)(10,"input",45),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.rpcs=r)}),n.qZA()(),n.TgZ(11,"td",14)(12,"input",45),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.actweight=r)}),n.qZA()(),n.TgZ(13,"td",14)(14,"input",45),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.rweight=r)}),n.qZA()(),n.TgZ(15,"td",14)(16,"input",45),n.NdJ("ngModelChange",function(r){const a=n.CHM(t).$implicit;return n.KtG(a.price=r)}),n.qZA()(),n.TgZ(17,"td",35),n._uU(18),n.ALo(19,"wt"),n.qZA(),n.TgZ(20,"td",35),n._uU(21),n.ALo(22,"wt"),n.qZA(),n.TgZ(23,"th")(24,"a",46),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.stockUpdate(s))}),n._UZ(25,"span",47),n.qZA()()()}if(2&e){const t=i.$implicit,o=i.index,r=n.oxw();n.xp6(2),n.Q6J("ngIf",!(null!=t&&null!=t.Lot&&t.Lot.length||null!=t&&null!=t.items&&t.items.length)),n.xp6(2),n.MGl("name","stock_",o,"_srno"),n.Q6J("ngModel",t.srno),n.xp6(2),n.Q6J("ngModel",t.color),n.xp6(2),n.MGl("name","stock_",o,"_employee"),n.Q6J("ngModel",t.employee),n.xp6(2),n.MGl("name","stock_",o,"_rpcs"),n.Q6J("ngModel",t.rpcs),n.xp6(2),n.MGl("name","stock_",o,"_actweight"),n.Q6J("ngModel",t.actweight),n.xp6(2),n.MGl("name","stock_",o,"_rweight"),n.Q6J("ngModel",t.rweight),n.xp6(2),n.MGl("name","stock_",o,"_price"),n.Q6J("ngModel",t.price),n.xp6(2),n.Oqu(null!=t&&t.rpcs?n.lcZ(19,16,(null==t?null:t.actweight)/(null==t?null:t.rpcs)):""),n.xp6(3),n.Oqu(null!=t&&t.actweight?n.lcZ(22,18,100*(null==t?null:t.actweight)/(null==r.production?null:r.production.actweight))+" %":"")}}function pR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",46),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.update())}),n._UZ(1,"span",47),n.qZA()}}function fR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",49),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.removeProduction())}),n._uU(1,"Delete?"),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("disabled",t.loading)}}const x0=function(){return{categoryId:1}};let mR=(()=>{class e{constructor(t){this.api=t,this.production={},this.changed=new n.vpe,this.categories=[],this.newStock=!1,this.stock={},this.loading=!1,this.color=""}ngOnInit(){return(0,ee.Z)(function*(){})()}loadList(){var t=this;return(0,ee.Z)(function*(){t.production=yield t.api.getInfo("production/"+t.production.id)})()}addNewStock(){this.newStock=!this.newStock}update(){var t=this;return(0,ee.Z)(function*(){if(t.stock.storeId=1,t.stock?.srno)if(t.stock?.actweight){t.stock.fy=t.production.fy,t.stock.categoryId=t.stock?.rpcs>0?1:3,3==t.stock.categoryId&&(delete t.stock.rweight,delete t.stock.rpcs,delete t.stock.employee),t.stock?.price||delete t.stock.price,t.stock.productionId=t.production.id,t.stock.issueDate=moment().format("YYYY-MM-DD")+"T00:00:00.000Z",t.stock.closeDate=null,t.production?.billId>0&&(t.stock.billId=t.production.billId,t.stock.refno=t.production.bill.code),t.production?.inventoryId>0&&(t.stock.inventoryId=t.production.inventoryId,t.stock.refno=t.production.inventory.code),console.log(t.stock);try{let o=Object.assign({},t.stock);yield t.api.postInfo("stock",o),toastr.success("Added Successfully!"),t.newStock=!1,t.stock={},yield t.loadList(),t.changed.emit(!0)}catch{toastr.error("Something Went Wrong")}}else toastr.warning("Enter Weight");else toastr.warning("Enter Code")})()}remove(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm("Are you sure to delete?"))try{(yield o.api.deleteInfo("stock/"+t.id))&&(toastr.success("Added Successfully!"),o.newStock=!1,o.stock={},yield o.loadList(),o.changed.emit(!0))}catch{toastr.error("Something Went Wrong")}})()}submit(){var t=this;return(0,ee.Z)(function*(){console.log(t.production);var o=M.cloneDeep(t.production);try{yield t.api.putInfo("production",{id:o.id,code:o.code,size:o.size,remarks:o.remarks,actweight:o.actweight,issueDate:o.issueDate,closeDate:o.closeDate}),toastr.success(`Production #${t.production?.code} Updated`),t.changed.emit(!0),$("#stock_form_modal").modal("toggle")}catch{toastr.error("Please Try Again")}})()}validate(){return!this.production?.Stock?.length||!M.round(this.api.getSum(this.production?.Stock,"rweight")-this.production.actweight,4)}removeProduction(){var t=this;return(0,ee.Z)(function*(){try{(yield t.api.removeInfo("production/"+t.production.id))&&(toastr.success(`Production #${t.production?.code} Deleted`),window.location.reload())}catch{toastr.error("Please Try Again")}})()}onDateChange(t,o){this.production[o]=t.target.value?t.target.value+"T00:00:00.000Z":null}stockUpdate(t){var o=this;return(0,ee.Z)(function*(){var r={id:t.id,srno:t.srno,employee:t.employee,color:t.color,rpcs:t?.rpcs??0,actweight:t?.actweight??0,rweight:t?.rweight??0,price:t?.price??0};if(r?.id){if(""==r?.srno||!r?.srno?.length)return void toastr.warning("Code must required");if(window.confirm("Are you sure to update?"))try{yield o.api.putInfo("stock",r),toastr.success("Successfully Updated!")}catch{toastr.error("Something Went Wrong!")}}})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-stock-form"]],inputs:{production:"production"},outputs:{changed:"changed"},decls:144,vars:57,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","with-border"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-title",4,"ngIf"],[1,"modal-body",2,"min-height","200px"],[1,"table","table-hover","table-responsive","table-condensed","table-striped","text-center","table-bordered"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],["scope","row"],[1,"p2","jc","w90"],["type","text","name","code",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["type","text","name","size",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"p2","jc"],["type","text","name","remarks",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["type","number","name","actweight",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"w90"],["type","date",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],[1,"table","table-hover","table-responsive","table-condensed","table-bordered","table-striped","text-center"],[1,"bg-grey"],["scope","col",1,"col-sm-auto","w50"],["scope","col",1,"col-sm-auto",2,"width","120px !important"],["scope","col",1,"col-sm-auto",2,"width","90px !important"],["scope","col",1,"col-sm-auto","bg-lightyellowgreen",2,"width","70px !important"],["scope","col",1,"col-sm-auto","bg-lightyellowgreen",2,"width","120px !important"],["scope","row",4,"ngFor","ngForOf"],[1,"p2","jc","w70"],["appFocusNavigate","","type","text","name","stock_srno",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["ngx-colors-trigger","",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","text","name","stock_employee",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","stock_rpcs",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","stock_actweight",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","stock_rweight",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","stock_price",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"bg-lightgreen1"],[3,"click",4,"ngIf"],[1,"bg-lightyellow"],[1,"bg-lightgreen"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button","class","btn btn-sm btn-danger",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-success",3,"disabled","click"],[1,"modal-title"],["appFocusNavigate","","type","text",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","name","ngModelChange"],["appFocusNavigate","","type","number",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","name","ngModelChange"],[3,"click"],[1,"fa","fa-check","text-green"],[1,"fa","fa-minus-circle","text-red"],["type","button",1,"btn","btn-sm","btn-danger",3,"disabled","click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.YNc(6,dR,2,1,"h4",5),n.YNc(7,uR,2,2,"h4",5),n.qZA(),n.TgZ(8,"div",6)(9,"table",7)(10,"thead")(11,"tr",8)(12,"th",9),n._uU(13,"SR NO"),n.qZA(),n.TgZ(14,"th",9),n._uU(15,"SIZE"),n.qZA(),n.TgZ(16,"th",9),n._uU(17,"ITEM"),n.qZA(),n.TgZ(18,"th",9),n._uU(19,"WEIGHT"),n.qZA(),n.TgZ(20,"th",9),n._uU(21,"GALAXY"),n.qZA(),n.TgZ(22,"th",9),n._uU(23,"%"),n.qZA(),n.TgZ(24,"th",9),n._uU(25,"ISSUE DATE"),n.qZA(),n.TgZ(26,"th",9),n._uU(27,"CLOSE DATE"),n.qZA()()(),n.TgZ(28,"tbody")(29,"tr",10)(30,"td",11)(31,"input",12),n.NdJ("ngModelChange",function(a){return r.production.code=a}),n.qZA()(),n.TgZ(32,"td",11)(33,"input",13),n.NdJ("ngModelChange",function(a){return r.production.size=a}),n.qZA()(),n.TgZ(34,"td",14)(35,"input",15),n.NdJ("ngModelChange",function(a){return r.production.remarks=a}),n.qZA()(),n.TgZ(36,"td",11)(37,"input",16),n.NdJ("ngModelChange",function(a){return r.production.actweight=a}),n.qZA()(),n.TgZ(38,"td",17),n._uU(39),n.ALo(40,"wt"),n.ALo(41,"filter"),n.qZA(),n.TgZ(42,"td",17),n._uU(43),n.ALo(44,"wt"),n.ALo(45,"filter"),n.qZA(),n.TgZ(46,"td",14)(47,"input",18),n.NdJ("change",function(a){return r.onDateChange(a,"issueDate")}),n.ALo(48,"momentDate"),n.qZA()(),n.TgZ(49,"td",14)(50,"input",18),n.NdJ("change",function(a){return r.onDateChange(a,"closeDate")}),n.ALo(51,"momentDate"),n.qZA()()()()(),n.TgZ(52,"table",19)(53,"thead")(54,"tr",20)(55,"th",21),n._uU(56,"#"),n.qZA(),n.TgZ(57,"th",22),n._uU(58,"Code"),n.qZA(),n.TgZ(59,"th",23),n._uU(60,"Color"),n.qZA(),n.TgZ(61,"th",23),n._uU(62,"Emp"),n.qZA(),n.TgZ(63,"th",23),n._uU(64,"Pcs"),n.qZA(),n.TgZ(65,"th",23),n._uU(66,"Weight"),n.qZA(),n.TgZ(67,"th",23),n._uU(68,"R. Wt"),n.qZA(),n.TgZ(69,"th",23),n._uU(70,"Price"),n.qZA(),n.TgZ(71,"th",24),n._uU(72,"Size"),n.qZA(),n.TgZ(73,"th",25),n._uU(74,"Perc %"),n.qZA(),n.TgZ(75,"th",9),n._uU(76,"#"),n.qZA()()(),n.TgZ(77,"tbody"),n.YNc(78,gR,26,20,"tr",26),n.TgZ(79,"tr",10),n._UZ(80,"td"),n.TgZ(81,"td",27)(82,"input",28),n.NdJ("ngModelChange",function(a){return r.stock.srno=a}),n.qZA()(),n.TgZ(83,"td")(84,"ngx-colors",29),n.NdJ("ngModelChange",function(a){return r.stock.color=a}),n.qZA()(),n.TgZ(85,"td",14)(86,"input",30),n.NdJ("ngModelChange",function(a){return r.stock.employee=a}),n.qZA()(),n.TgZ(87,"td",14)(88,"input",31),n.NdJ("ngModelChange",function(a){return r.stock.rpcs=a}),n.qZA()(),n.TgZ(89,"td",14)(90,"input",32),n.NdJ("ngModelChange",function(a){return r.stock.actweight=a}),n.qZA()(),n.TgZ(91,"td",14)(92,"input",33),n.NdJ("ngModelChange",function(a){return r.stock.rweight=a}),n.qZA()(),n.TgZ(93,"td",14)(94,"input",34),n.NdJ("ngModelChange",function(a){return r.stock.price=a}),n.qZA()(),n.TgZ(95,"td",35),n._uU(96),n.ALo(97,"wt"),n.qZA(),n.TgZ(98,"td",35),n._uU(99),n.ALo(100,"wt"),n.qZA(),n.TgZ(101,"th"),n.YNc(102,pR,2,0,"a",36),n.qZA()()(),n.TgZ(103,"tfoot")(104,"tr",37),n._UZ(105,"th"),n.TgZ(106,"th"),n._uU(107,"LOSS"),n.qZA(),n._UZ(108,"th")(109,"th")(110,"th"),n.TgZ(111,"th"),n._uU(112),n.ALo(113,"wt"),n.qZA(),n._UZ(114,"th")(115,"th")(116,"th",35),n.TgZ(117,"th",35),n._uU(118),n.ALo(119,"wt"),n.qZA(),n._UZ(120,"th"),n.qZA(),n.TgZ(121,"tr",38),n._UZ(122,"th"),n.TgZ(123,"th"),n._uU(124,"TOTAL"),n.qZA(),n._UZ(125,"th")(126,"th")(127,"th"),n.TgZ(128,"th"),n._uU(129),n.ALo(130,"wt"),n.qZA(),n.TgZ(131,"th"),n._uU(132),n.ALo(133,"wt"),n.qZA(),n._UZ(134,"th")(135,"th",35)(136,"th",35)(137,"th"),n.qZA()()()(),n.TgZ(138,"div",39)(139,"button",40),n._uU(140,"Close"),n.qZA(),n.YNc(141,fR,2,1,"button",41),n.TgZ(142,"button",42),n.NdJ("click",function(){return r.submit()}),n._uU(143,"Update"),n.qZA()()()()),2&o&&(n.xp6(6),n.Q6J("ngIf",(null==r.production?null:r.production.billId)>0),n.xp6(1),n.Q6J("ngIf",(null==r.production?null:r.production.inventoryId)>0),n.xp6(24),n.Q6J("ngModel",r.production.code),n.xp6(2),n.Q6J("ngModel",r.production.size),n.xp6(2),n.Q6J("ngModel",r.production.remarks),n.xp6(2),n.Q6J("ngModel",r.production.actweight),n.xp6(2),n.Oqu(n.lcZ(40,27,r.api.getSum(n.xi3(41,29,null==r.production?null:r.production.Stock,n.DdM(55,x0)),"actweight"))),n.xp6(4),n.hij("",null!=r.production&&r.production.actweight?n.lcZ(44,32,100*r.api.getSum(n.xi3(45,34,null==r.production?null:r.production.Stock,n.DdM(56,x0)),"actweight")/r.production.actweight):"0.00"," %"),n.xp6(4),n.Q6J("value",n.xi3(48,37,null==r.production?null:r.production.issueDate,"YYYY-MM-DD")),n.xp6(3),n.Q6J("value",n.xi3(51,40,null==r.production?null:r.production.closeDate,"YYYY-MM-DD")),n.xp6(28),n.Q6J("ngForOf",null==r.production?null:r.production.Stock),n.xp6(4),n.Q6J("ngModel",r.stock.srno),n.xp6(2),n.Q6J("ngModel",r.stock.color),n.xp6(2),n.Q6J("ngModel",r.stock.employee),n.xp6(2),n.Q6J("ngModel",r.stock.rpcs),n.xp6(2),n.Q6J("ngModel",r.stock.actweight),n.xp6(2),n.Q6J("ngModel",r.stock.rweight),n.xp6(2),n.Q6J("ngModel",r.stock.price),n.xp6(2),n.Oqu(null!=r.stock&&r.stock.rpcs?n.lcZ(97,43,(null==r.stock?null:r.stock.actweight)/(null==r.stock?null:r.stock.rpcs)):""),n.xp6(3),n.Oqu(null!=r.stock&&r.stock.actweight?n.lcZ(100,45,100*(null==r.stock?null:r.stock.actweight)/(null==r.production?null:r.production.rweight))+" %":""),n.xp6(3),n.Q6J("ngIf",(null==r.stock?null:r.stock.actweight)>0),n.xp6(10),n.Oqu(n.lcZ(113,47,(null==r.production?null:r.production.actweight)-r.api.getSum(null==r.production?null:r.production.Stock,"actweight"))),n.xp6(6),n.Oqu((null==r.production?null:r.production.actweight)-r.api.getSum(null==r.production?null:r.production.Stock,"actweight")?n.lcZ(119,49,100*((null==r.production?null:r.production.actweight)-r.api.getSum(null==r.production?null:r.production.Stock,"actweight"))/(null==r.production?null:r.production.actweight))+" %":""),n.xp6(11),n.Oqu(n.lcZ(130,51,null==r.production?null:r.production.actweight)),n.xp6(3),n.Oqu(n.lcZ(133,53,r.api.getSum(null==r.production?null:r.production.Stock,"rweight"))),n.xp6(9),n.Q6J("ngIf",!(null!=r.production&&null!=r.production.Stock&&r.production.Stock.length)),n.xp6(1),n.Q6J("disabled",r.loading))},dependencies:[Ee.sg,Ee.O5,te.Fj,te.wV,te.JJ,te.On,Ut,cR,S0,Oi.g,Bt.J,Rt.v],styles:[".excel_input[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-weight:600!important}.mb-0[_ngcontent-%COMP%]{margin-bottom:0!important}"]})}return e})(),vR=(()=>{class e{constructor(t,o){var r=this;this.api=t,this.excel=o,this.production={fy:ta.N.fy},this.rowData=[],this.sdata=[],this.selectedRow=[],this.pinnedRow=[],this.gridOptions={getRowClass:this.getRowClass.bind(this)},this.rowSelection={mode:"multiRow"},this.columnDefs=[{headerName:"S.NO.",pinned:"left",width:150,valueGetter:s=>s.data.code+" ["+s.data.Stock.filter(a=>1==a.categoryId).length+"]"},{headerName:"REF .NO.",valueGetter:s=>s.data?.bill?s.data?.bill?.code:s.data?.inventory?.code},{headerName:"START DATE",field:"issueDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"ITEM",field:"remarks"},{headerName:"SIZE",field:"size"},{headerName:"WEIGHT",field:"actweight"},{headerName:"\u0a97\u0ac7\u0ab2\u0ac7\u0a95\u0acd\u0ab8\u0ac0",valueGetter:s=>M.round(M.sumBy(s.data.Stock.filter(a=>1==a.categoryId),"actweight"),2)},{headerName:"\u0ab8\u0ac7\u0aae\u0ac0",valueGetter:s=>M.round(M.sumBy(s.data.Stock.filter(a=>"\u0ab8\u0ac7\u0aae\u0ac0"==a.srno),"actweight"),2)},{headerName:"\u0a9b\u0acb\u0ab2\u0abe\u0aa3",valueGetter:s=>M.round(M.sumBy(s.data.Stock.filter(a=>"\u0a9b\u0acb\u0ab2\u0abe\u0aa3"==a.srno),"actweight"),2)},{headerName:"\u0aaa\u0ab2\u0a9a\u0ac1",valueGetter:s=>M.round(M.sumBy(s.data.Stock.filter(a=>"\u0aaa\u0ab2\u0a9a\u0ac1"==a.srno),"actweight"),2)},{headerName:"O-\u0a86\u0a89\u0a9f",valueGetter:s=>M.round(M.sumBy(s.data.Stock.filter(a=>"O-\u0a86\u0a89\u0a9f"==a.srno),"actweight"),2)},{headerName:"**",valueGetter:s=>M.round(M.sumBy(s.data.Stock.filter(a=>"**"==a.srno),"actweight"),2)},{headerName:"END DATE",field:"closeDate",cellDataType:"dateString",valueFormatter:s=>s.value?_e(s.value).format("DD/MM/YYYY"):""},{headerName:"DAYS",valueGetter:s=>this.api.getDaysDiff(s.data?.issueDate,s.data?.closeDate)}],this.defaultColDef={flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0},this.onSelectionChanged=s=>{var a=s?.api?.getSelectedRows();if(this.selectedRow=[],this.sdata=[],a?.length>1){var l={code:"Selected: "+a.length,actweight:M.round(M.sumBy(a,"actweight"),2),weight:M.round(M.sumBy(a,"weight"),2),Stock:[]},c=a.map(h=>h.Stock);for(var d of c)l.Stock=[...l.Stock,...d];this.selectedRow.push(l),this.sdata=a}},this.onFilterChanged=s=>{var a=[];if(this.selectedRow=[],this.sdata=[],s?.api?.forEachNodeAfterFilter(h=>{h.data&&a.push(h.data)}),a?.length!=this.rowData.length&&(console.log(a),this.selectedRow=[],a?.length>1)){var l={code:"Filtered: "+a.length,actweight:M.round(M.sumBy(a,"actweight"),2),weight:M.round(M.sumBy(a,"weight"),2),Stock:[]},c=a.map(h=>h.Stock);for(var d of c)l.Stock=[...l.Stock,...d];this.selectedRow.push(l),this.sdata=a}},this.onRowDoubleClicked=function(){var s=(0,ee.Z)(function*(a){const l=a.data;if(console.log(l),l?.id>0)return r.production=yield r.api.getInfo("production/"+l.id),void $("#stock_form_modal").modal("toggle");r.download()});return function(a){return s.apply(this,arguments)}}()}ngOnInit(){var t=this;return(0,ee.Z)(function*(){yield t.loadData()})()}loadData(){var t=this;return(0,ee.Z)(function*(){var o=yield t.api.getInfo("production");t.rowData=o,t.pinnedRow=[];var r={code:"Total: "+o.length,actweight:M.round(M.sumBy(o,"actweight"),2),weight:M.round(M.sumBy(o,"weight"),2),Stock:[]},s=o.map(l=>l.Stock);for(var a of s)r.Stock=[...r.Stock,...a];t.pinnedRow.push(r)})()}getRowClass(t){return t.data.weight>0?"bg-lightyellowgreen":""}onGridReady(t){t.api.sizeColumnsToFit()}reloadData(t){var o=this;return(0,ee.Z)(function*(){yield o.loadData(),o.gridOptions?.api?.setRowData(o.rowData)})()}download(){var r=(this.sdata.length?this.sdata:this.rowData).map(s=>[`${s.code} [${s?.Stock?.filter(a=>1==a.categoryId)?.length}]`,s?.bill?s?.bill?.code:s?.inventory?.code,s?.issueDate?.length?_e(s.issueDate).format("YYYY-MM-DD"):"",s?.remarks,s?.size,s?.actweight,M.round(M.sumBy(s?.Stock.filter(a=>1==a?.categoryId),"actweight"),2),M.round(M.sumBy(s?.Stock.filter(a=>"\u0ab8\u0ac7\u0aae\u0ac0"==a?.srno),"actweight"),2),M.round(M.sumBy(s?.Stock.filter(a=>"\u0a9b\u0acb\u0ab2\u0abe\u0aa3"==a?.srno),"actweight"),2),M.round(M.sumBy(s?.Stock.filter(a=>"\u0aaa\u0ab2\u0a9a\u0ac1"==a?.srno),"actweight"),2),M.round(M.sumBy(s?.Stock.filter(a=>"O-\u0a86\u0a89\u0a9f"==a?.srno),"actweight"),2),M.round(M.sumBy(s?.Stock.filter(a=>"**"==a?.srno),"actweight"),2),s?.closeDate?.length?_e(s.closeDate).format("YYYY-MM-DD"):"",this.api.getDaysDiff(s?.issueDate,s?.closeDate)]);this.excel.generateExcel(["S.NO.","REF NO.","START DATE","ITEM","SIZE","WEIGHT","\u0a97\u0ac7\u0ab2\u0ac7\u0a95\u0acd\u0ab8\u0ac0","\u0ab8\u0ac7\u0aae\u0ac0","\u0a9b\u0acb\u0ab2\u0abe\u0aa3","\u0aaa\u0ab2\u0a9a\u0ac1","O-\u0a86\u0a89\u0a9f","**","END DATE","DAYS"],r,this.sdata.length?"PRODUCTION_FILTER":"PRODUCTION_TOTAL")}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(et.x))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-stock"]],decls:3,vars:8,consts:[[1,"ag-theme-balham",2,"width","100%","height","80vh",3,"rowData","columnDefs","defaultColDef","gridOptions","rowSelection","pinnedTopRowData","pinnedBottomRowData","gridReady","selectionChanged","filterChanged","rowDoubleClicked"],["id","stock_form_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"production","changed"]],template:function(o,r){1&o&&(n.TgZ(0,"ag-grid-angular",0),n.NdJ("gridReady",function(a){return r.onGridReady(a)})("selectionChanged",function(a){return r.onSelectionChanged(a)})("filterChanged",function(a){return r.onFilterChanged(a)})("rowDoubleClicked",function(a){return r.onRowDoubleClicked(a)}),n.qZA(),n.TgZ(1,"div",1)(2,"app-stock-form",2),n.NdJ("changed",function(a){return r.reloadData(a)}),n.qZA()()),2&o&&(n.Q6J("rowData",r.rowData)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("gridOptions",r.gridOptions)("rowSelection",r.rowSelection)("pinnedTopRowData",r.selectedRow)("pinnedBottomRowData",r.pinnedRow),n.xp6(2),n.Q6J("production",r.production))},dependencies:[wo,mR]})}return e})(),CR=(()=>{class e{constructor(){this.code=""}load(){}static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-track"]],decls:20,vars:4,consts:[[1,"row"],[1,"col-sm-12"],[1,"form-horizontal"],[1,"col-sm-3"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-5"],["type","text","id","code","name","code",1,"form-control","input-sm",3,"ngModel","value","ngModelChange","input"],[1,"col-sm-6"],[1,"table","table-responsive","table-condensed","table-striped","text-center"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),n._uU(6,"\u0a95\u0aaa\u0aa8 \u0a95\u0acb\u0aa1"),n.qZA(),n.TgZ(7,"div",6)(8,"input",7),n.NdJ("ngModelChange",function(a){return r.code=a})("input",function(){return r.load()}),n.ALo(9,"uppercase"),n.qZA()()()()()(),n.TgZ(10,"div",8)(11,"table",9)(12,"thead")(13,"tr",10)(14,"th",11),n._uU(15,"Process Name"),n.qZA(),n.TgZ(16,"th",11),n._uU(17,"Start Date"),n.qZA(),n.TgZ(18,"th",11),n._uU(19,"End Date"),n.qZA()()()()()()),2&o&&(n.xp6(8),n.Q6J("ngModel",r.code)("value",n.lcZ(9,2,r.code)))},dependencies:[te.Fj,te.JJ,te.On,Ee.gd]})}return e})(),wR=(()=>{class e{constructor(t){this.api=t,this.f={},this.changed=new n.vpe}update(){var t=this;return(0,ee.Z)(function*(){try{yield t.api.putInfo("report/final",t.f),toastr.success("Successfully Updated!"),$("#final_entry_modal").modal("toggle"),t.changed.emit(!0)}catch{toastr.error("Something Went Wrong!")}})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-final-entry"]],inputs:{f:"f"},outputs:{changed:"changed"},decls:56,vars:12,consts:[[1,"modal-dialog","modal-sm"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-6","control-label"],[1,"col-sm-6"],["appFocusNavigate","","type","number","name","chapka",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","gthan",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","gweight",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","thaliya",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","pel",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","mathala",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","final",1,"form-control",3,"ngModel","ngModelChange"],["appFocusNavigate","","type","number","name","marking",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button",1,"btn","btn-sm","btn-success",3,"click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.ALo(8,"momentDate"),n.qZA()(),n.TgZ(9,"div",6)(10,"form",7)(11,"div",8)(12,"label",9),n._uU(13,"CHAPKA"),n.qZA(),n.TgZ(14,"div",10)(15,"input",11),n.NdJ("ngModelChange",function(a){return r.f.chapka=a}),n.qZA()()(),n.TgZ(16,"div",8)(17,"label",9),n._uU(18,"G CHAPKA THAN"),n.qZA(),n.TgZ(19,"div",10)(20,"input",12),n.NdJ("ngModelChange",function(a){return r.f.gthan=a}),n.qZA()()(),n.TgZ(21,"div",8)(22,"label",9),n._uU(23,"G CHAPKA WT"),n.qZA(),n.TgZ(24,"div",10)(25,"input",13),n.NdJ("ngModelChange",function(a){return r.f.gweight=a}),n.qZA()()(),n.TgZ(26,"div",8)(27,"label",9),n._uU(28,"TALIYA"),n.qZA(),n.TgZ(29,"div",10)(30,"input",14),n.NdJ("ngModelChange",function(a){return r.f.thaliya=a}),n.qZA()()(),n.TgZ(31,"div",8)(32,"label",9),n._uU(33,"PEL"),n.qZA(),n.TgZ(34,"div",10)(35,"input",15),n.NdJ("ngModelChange",function(a){return r.f.pel=a}),n.qZA()()(),n.TgZ(36,"div",8)(37,"label",9),n._uU(38,"MATHALA"),n.qZA(),n.TgZ(39,"div",10)(40,"input",16),n.NdJ("ngModelChange",function(a){return r.f.mathala=a}),n.qZA()()(),n.TgZ(41,"div",8)(42,"label",9),n._uU(43,"FINAL"),n.qZA(),n.TgZ(44,"div",10)(45,"input",17),n.NdJ("ngModelChange",function(a){return r.f.final=a}),n.qZA()()(),n.TgZ(46,"div",8)(47,"label",9),n._uU(48,"MARKING"),n.qZA(),n.TgZ(49,"div",10)(50,"input",18),n.NdJ("ngModelChange",function(a){return r.f.marking=a}),n.qZA()()()()(),n.TgZ(51,"div",19)(52,"button",20),n._uU(53,"Cancel"),n.qZA(),n.TgZ(54,"button",21),n.NdJ("click",function(){return r.update()}),n._uU(55,"Update"),n.qZA()()()()),2&o&&(n.xp6(7),n.Oqu(n.xi3(8,9,r.f.date,"DD/MM/YYYY")),n.xp6(8),n.Q6J("ngModel",r.f.chapka),n.xp6(5),n.Q6J("ngModel",r.f.gthan),n.xp6(5),n.Q6J("ngModel",r.f.gweight),n.xp6(5),n.Q6J("ngModel",r.f.thaliya),n.xp6(5),n.Q6J("ngModel",r.f.pel),n.xp6(5),n.Q6J("ngModel",r.f.mathala),n.xp6(5),n.Q6J("ngModel",r.f.final),n.xp6(5),n.Q6J("ngModel",r.f.marking))},dependencies:[te._Y,te.Fj,te.wV,te.JJ,te.JL,te.On,te.F,Ut,Rt.v]})}return e})();function yR(e,i){if(1&e&&(n.TgZ(0,"th",11),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.Tol(i.index%2==0?"bg-2":"bg-3"),n.xp6(1),n.Oqu(t)}}function bR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",15)(1,"th")(2,"a",16),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.edit(s))}),n._uU(3),n.ALo(4,"momentDate"),n.qZA(),n.TgZ(5,"a",9),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.refresh(s.date))}),n._UZ(6,"span",17),n.qZA()(),n.TgZ(7,"td",18),n._uU(8),n.qZA(),n.TgZ(9,"td",19),n._uU(10),n.qZA(),n.TgZ(11,"td",18),n._uU(12),n.qZA(),n.TgZ(13,"td",19),n._uU(14),n.ALo(15,"wt"),n.qZA(),n.TgZ(16,"td",18),n._uU(17),n.ALo(18,"wt"),n.qZA(),n.TgZ(19,"td",19),n._uU(20),n.qZA(),n.TgZ(21,"td",18),n._uU(22),n.ALo(23,"wt"),n.qZA(),n.TgZ(24,"td",19),n._uU(25),n.ALo(26,"wt"),n.qZA(),n.TgZ(27,"td",18),n._uU(28),n.qZA(),n.TgZ(29,"td",19),n._uU(30),n.qZA(),n.TgZ(31,"td",18),n._uU(32),n.qZA(),n.TgZ(33,"td",19),n._uU(34),n.qZA(),n.TgZ(35,"td",18),n._uU(36),n.qZA(),n.TgZ(37,"td",19),n._uU(38),n.qZA(),n.TgZ(39,"td",18),n._uU(40),n.qZA(),n.TgZ(41,"td",19),n._uU(42),n.ALo(43,"wt"),n.qZA(),n.TgZ(44,"td",18),n._uU(45),n.qZA(),n.TgZ(46,"td",19),n._uU(47),n.qZA(),n.TgZ(48,"td",18),n._uU(49),n.qZA(),n.TgZ(50,"td",19),n._uU(51),n.qZA()()}if(2&e){const t=i.$implicit;n.xp6(3),n.Oqu(n.xi3(4,21,t.date,"DD")),n.xp6(5),n.Oqu(t.galaxy),n.xp6(2),n.Oqu(t.stn),n.xp6(2),n.Oqu(t.qthan),n.xp6(2),n.Oqu(n.lcZ(15,24,t.qweight)),n.xp6(3),n.Oqu(t.qthan?n.lcZ(18,26,t.qweight/t.qthan):0),n.xp6(3),n.Oqu(t.pthan),n.xp6(2),n.Oqu(n.lcZ(23,28,t.pweight)),n.xp6(3),n.Oqu(t.pthan?n.lcZ(26,30,t.pweight/t.pthan):0),n.xp6(3),n.Oqu(t.marking),n.xp6(2),n.Oqu(t.sarin),n.xp6(2),n.Oqu(t.laser),n.xp6(2),n.Oqu(t.fpthan),n.xp6(2),n.Oqu(t.chapka),n.xp6(2),n.Oqu(t.mthan),n.xp6(2),n.Oqu(t.gthan),n.xp6(2),n.Oqu(n.lcZ(43,32,t.gweight)),n.xp6(3),n.Oqu(t.thaliya),n.xp6(2),n.Oqu(t.pel),n.xp6(2),n.Oqu(t.mathala),n.xp6(2),n.Oqu(t.final)}}let SR=(()=>{class e{constructor(t,o){this.api=t,this.excel=o,this.list=["GALAXY","STN","QC","WEI","SIZE","'O' PLANIG","PLA. WT","SIZE","MARKING","SARIN","LASER","4P.THAN","CHAPKA","M.THAN","G.C THAN","G.C WT ","TALIYA","PEL","MATHALA","FINAL"],this.month=_e().format("YYYY-MM"),this.dates=[],this.report=[],this.finalEntry={}}loadData(){var t=this;return(0,ee.Z)(function*(){t.dates=t.api.getMonthDays(t.month);var o=t.dates.length,a={where:{date:{gte:_e(t.dates[0]).format("YYYY-MM-DD")+"T00:00:00.000Z",lte:_e(t.dates[o-1]).format("YYYY-MM-DD")+"T00:00:00.000Z"}},orderBy:{date:"asc"}};yield t.api.getInfo("report/run?date="+_e().add(-1,"days").format("YYYY-MM-DD")),console.log(a),t.report=yield t.api.postInfo("report/enquiry",a)})()}ngOnInit(){this.loadData()}onChangeMonth(t){var o=this;return(0,ee.Z)(function*(){t.target.value?.length&&(o.month=t.target.value,yield o.loadData())})()}edit(t){this.finalEntry=M.cloneDeep(t),console.log(this.finalEntry),$("#final_entry_modal").modal("toggle")}refresh(t){var o=this;return(0,ee.Z)(function*(){yield o.api.getInfo("report/run?date="+_e(t).format("YYYY-MM-DD")),yield o.loadData()})()}download(){var t=["DATE",...this.list],o=this.report.map(r=>[_e(r.date).format("YYYY-MM-DD"),r.galaxy,r.stn,r.qthan,r.qweight,r.qthan?M.round(r.qweight/r.qthan,2):0,r.pthan,r.pweight,r.pthan?M.round(r.pweight/r.pthan,2):0,r.marking,r.sarin,r.laser,r.fpthan,r.chapka,r.mthan,r.gthan,r.gweight,r.thaliya,r.pel,r.mathala,r.final]);this.excel.generateExcel(t,o,"FINAL_REPORT_"+_e(this.month).format("MMM_YYYY").toUpperCase())}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(et.x))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-final-report"]],decls:63,vars:34,consts:[[1,"row"],[1,"col-sm-12"],[1,"table-container"],[1,"table","table-responsive","table-hover","table-condensed","table-striped","table-bordered","text-center","table-fixed-header"],["scope","col",1,"w100","p2","jc"],["type","month",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],["class","w100",3,"class",4,"ngFor","ngForOf"],[1,"bg-4"],[1,"bg-lightgrey"],[1,"pull-right",3,"click"],[1,"fa","fa-download"],[1,"w100"],["scope","row",4,"ngFor","ngForOf"],["id","final_entry_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"f","changed"],["scope","row"],[3,"click"],[1,"fa","fa-refresh"],[1,"bg-2"],[1,"bg-3"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"th",4)(7,"input",5),n.NdJ("change",function(a){return r.onChangeMonth(a)}),n.qZA()(),n.YNc(8,yR,2,3,"th",6),n.qZA(),n.TgZ(9,"tr",7)(10,"th",8),n._uU(11,"Total"),n.TgZ(12,"a",9),n.NdJ("click",function(){return r.download()}),n._UZ(13,"span",10),n.qZA()(),n.TgZ(14,"th",11),n._uU(15),n.qZA(),n.TgZ(16,"th",11),n._uU(17),n.qZA(),n.TgZ(18,"th",11),n._uU(19),n.qZA(),n.TgZ(20,"th",11),n._uU(21),n.ALo(22,"wt"),n.qZA(),n.TgZ(23,"th",11),n._uU(24),n.ALo(25,"wt"),n.qZA(),n.TgZ(26,"th",11),n._uU(27),n.qZA(),n.TgZ(28,"th",11),n._uU(29),n.ALo(30,"wt"),n.qZA(),n.TgZ(31,"th",11),n._uU(32),n.ALo(33,"wt"),n.qZA(),n.TgZ(34,"th",11),n._uU(35),n.qZA(),n.TgZ(36,"th",11),n._uU(37),n.qZA(),n.TgZ(38,"th",11),n._uU(39),n.qZA(),n.TgZ(40,"th",11),n._uU(41),n.qZA(),n.TgZ(42,"th",11),n._uU(43),n.qZA(),n.TgZ(44,"th",11),n._uU(45),n.qZA(),n.TgZ(46,"th",11),n._uU(47),n.qZA(),n.TgZ(48,"th",11),n._uU(49),n.ALo(50,"wt"),n.qZA(),n.TgZ(51,"th",11),n._uU(52),n.qZA(),n.TgZ(53,"th",11),n._uU(54),n.qZA(),n.TgZ(55,"th",11),n._uU(56),n.qZA(),n.TgZ(57,"th",11),n._uU(58),n.qZA()()(),n.TgZ(59,"tbody"),n.YNc(60,bR,52,34,"tr",12),n.qZA()()()()(),n.TgZ(61,"div",13)(62,"app-final-entry",14),n.NdJ("changed",function(){return r.loadData()}),n.qZA()()),2&o&&(n.xp6(7),n.Q6J("value",r.month),n.xp6(1),n.Q6J("ngForOf",r.list),n.xp6(7),n.Oqu(r.api.getSum(r.report,"galaxy")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"stn")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"qthan")),n.xp6(2),n.Oqu(n.lcZ(22,24,r.api.getSum(r.report,"qweight"))),n.xp6(3),n.Oqu(r.api.getSum(r.report,"qthan")?n.lcZ(25,26,r.api.getSum(r.report,"qweight")/r.api.getSum(r.report,"qthan")):0),n.xp6(3),n.Oqu(r.api.getSum(r.report,"pthan")),n.xp6(2),n.Oqu(n.lcZ(30,28,r.api.getSum(r.report,"pweight"))),n.xp6(3),n.Oqu(r.api.getSum(r.report,"pthan")?n.lcZ(33,30,r.api.getSum(r.report,"pweight")/r.api.getSum(r.report,"pthan")):0),n.xp6(3),n.Oqu(r.api.getSum(r.report,"marking")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"sarin")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"laser")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"fpthan")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"chapka")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"mthan")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"gthan")),n.xp6(2),n.Oqu(n.lcZ(50,32,r.api.getSum(r.report,"gweight"))),n.xp6(3),n.Oqu(r.api.getSum(r.report,"thaliya")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"pel")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"mathala")),n.xp6(2),n.Oqu(r.api.getSum(r.report,"final")),n.xp6(2),n.Q6J("ngForOf",r.report),n.xp6(2),n.Q6J("f",r.finalEntry))},dependencies:[Ee.sg,wR,Bt.J,Rt.v]})}return e})();function _R(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"li")(1,"a",19),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.setFy(s))}),n._UZ(2,"i",36),n._uU(3),n.qZA()()}if(2&e){const t=i.$implicit;n.xp6(3),n.Oqu(t)}}let xR=(()=>{class e{constructor(t){this.api=t,this.flist=["Y2025","Y2024"],this.cfy=ta.N.fy,this.fy=ta.N.fy,this.lst={},this.bills=[],this.inventory=[],this.stock={},this.mstock={}}ngOnInit(){var t=this;return(0,ee.Z)(function*(){var o=yield t.api.getInfo("bill"),r=yield t.api.getInfo("inventory");t.bills=o.filter(s=>2==s.categoryId&&"P"==s.cc),t.inventory=r.filter(s=>2==s.categoryId)})()}setFy(t){this.fy=t}download(t){}add(t){this.stock={fy:ta.N.fy},this.lst={list:"P"==t?this.bills:this.inventory,s:t},$("#stock_item_id").val(null).trigger("change"),$("#production_entry_modal").modal("toggle")}addM(){this.mstock={storeId:1,fy:ta.N.fy,categoryId:1},$("#stock_mn_modal").modal("toggle")}reload(t){window.location.reload()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-production"]],decls:70,vars:9,consts:[[1,"content"],[1,"container-fluid"],[1,"row"],[1,"nav-tabs-custom"],[1,"nav","nav-tabs"],[1,"active"],["href","#summary","data-toggle","tab"],["href","#details","data-toggle","tab"],["href","#planners","data-toggle","tab"],["href","#track","data-toggle","tab"],["href","#final-report","data-toggle","tab"],[1,"pull-right","header",2,"line-height","1.5em !important"],[1,"btn-group",2,"margin-left","10px"],["type","button",1,"btn","btn-sm","btn-primary"],[1,"fa","fa-plus",2,"margin-right","10px"],["type","button","data-toggle","dropdown",1,"btn","btn-sm","btn-primary","dropdown-toggle"],[1,"caret"],[1,"sr-only"],["role","menu",1,"dropdown-menu"],[3,"click"],[1,"fa","fa-plus"],["hidden","",1,"btn-group",2,"margin-left","10px"],["type","button",1,"btn","btn-sm"],[1,"fa","fa-calendar",2,"margin-right","10px"],["type","button","data-toggle","dropdown",1,"btn","btn-sm","dropdown-toggle"],[4,"ngFor","ngForOf"],[1,"tab-content",2,"min-height","500px"],["id","details",1,"tab-pane"],["id","summary",1,"tab-pane","active"],["id","track",1,"tab-pane"],["id","final-report",1,"tab-pane"],["id","planners",1,"tab-pane"],["id","production_entry_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"lst","stock","changed"],["id","stock_mn_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"stock","changed"],[1,"fa","fa-calendar"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),n._uU(7,"Summary"),n.qZA()(),n.TgZ(8,"li")(9,"a",7),n._uU(10,"Details"),n.qZA()(),n.TgZ(11,"li")(12,"a",8),n._uU(13,"Planners"),n.qZA()(),n.TgZ(14,"li")(15,"a",9),n._uU(16,"Track"),n.qZA()(),n.TgZ(17,"li")(18,"a",10),n._uU(19,"Final Report"),n.qZA()(),n.TgZ(20,"li",11)(21,"div",12)(22,"button",13),n._UZ(23,"span",14),n._uU(24,"ADD PRODUCTION"),n.qZA(),n.TgZ(25,"button",15),n._UZ(26,"span",16),n.TgZ(27,"span",17),n._uU(28,"Toggle Dropdown"),n.qZA()(),n.TgZ(29,"ul",18)(30,"li")(31,"a",19),n.NdJ("click",function(){return r.add("P")}),n._UZ(32,"i",20),n._uU(33,"From Purchase"),n.qZA()(),n.TgZ(34,"li")(35,"a",19),n.NdJ("click",function(){return r.add("I")}),n._UZ(36,"i",20),n._uU(37,"From OP Stock"),n.qZA()(),n.TgZ(38,"li")(39,"a",19),n.NdJ("click",function(){return r.addM()}),n._UZ(40,"i",20),n._uU(41,"Manual Stock"),n.qZA()()()(),n.TgZ(42,"div",21)(43,"button",22),n._UZ(44,"span",23),n._uU(45),n.qZA(),n.TgZ(46,"button",24),n._UZ(47,"span",16),n.TgZ(48,"span",17),n._uU(49,"Toggle Dropdown"),n.qZA()(),n.TgZ(50,"ul",18),n.YNc(51,_R,4,1,"li",25),n.TgZ(52,"li")(53,"a",19),n.NdJ("click",function(){return r.setFy("All Years")}),n._uU(54,"All Years"),n.qZA()()()()()(),n.TgZ(55,"div",26)(56,"div",27),n._UZ(57,"app-polish"),n.qZA(),n.TgZ(58,"div",28),n._UZ(59,"app-stock"),n.qZA(),n.TgZ(60,"div",29),n._UZ(61,"app-track"),n.qZA(),n.TgZ(62,"div",30),n._UZ(63,"app-final-report"),n.qZA(),n.TgZ(64,"div",31),n._UZ(65,"app-planners"),n.qZA()()()()()(),n.TgZ(66,"div",32)(67,"app-production-entry",33),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()(),n.TgZ(68,"div",34)(69,"app-stock-mn",35),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()()),2&o&&(n.xp6(43),n.Tol(r.fy!=r.cfy?"bg-maroon":"btn-success"),n.xp6(2),n.Oqu(r.fy),n.xp6(1),n.Tol(r.fy!=r.cfy?"bg-maroon":"btn-success"),n.xp6(5),n.Q6J("ngForOf",r.flist),n.xp6(16),n.Q6J("lst",r.lst)("stock",r.stock),n.xp6(2),n.Q6J("stock",r.mstock))},dependencies:[Ee.sg,MT,OT,NT,ZF,vR,CR,SR]})}return e})();function AR(e,i){1&e&&n._UZ(0,"span",3)}function kR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"span",1),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.onClick("delete"))}),n.YNc(1,AR,1,0,"span",2),n.qZA()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",!(null!=t.params&&t.params.value))}}let TR=(()=>{class e{constructor(t){this.api=t,this.user=JSON.parse(localStorage.getItem("user"))}agInit(t){this.params=t,console.log(this.params.node.rowPinned)}refresh(t){return this.params=t,!0}onClick(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=o.user.pin)return void toastr.warning("Invalid PIN");try{var s={id:Number(o.params.data.id)};s[o.params.ty+"Date"]=null,s[o.params.nm]=null,yield o.api.putInfo("jangad",s),toastr.success("Removed Successfully!"),o.params.context.componentParent.reloadList()}catch(a){console.log(a),toastr.error("Something Went Wrong!")}}}})()}isPinnedRow(){return"top"===this.params?.node?.rowPinned||"bottom"===this.params?.node?.rowPinned}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-delete-cell-renderer"]],decls:1,vars:1,consts:[["class","icon","title","Delete",3,"click",4,"ngIf"],["title","Delete",1,"icon",3,"click"],["class","fa fa-minus-circle text-red",4,"ngIf"],[1,"fa","fa-minus-circle","text-red"]],template:function(o,r){1&o&&n.YNc(0,kR,2,1,"span",0),2&o&&n.Q6J("ngIf",!r.isPinnedRow())},dependencies:[Ee.O5],styles:[".icon[_ngcontent-%COMP%]{text-align:center;cursor:pointer}"]})}return e})(),DR=(()=>{class e{getRowClass(t){return t.data[this.ty+"Status"]?"bg-lightgreen":""}constructor(t,o){this.api=t,this.inrPipe=o,this.user=JSON.parse(localStorage.getItem("user")),this.employee={},this.list=[],this.ty="",this.nm="",this.changed=new n.vpe,this.costList=[],this.sdata=[],this.selectedRow=[],this.pinnedRow=[],this.gridOptions={context:{componentParent:this},getRowClass:this.getRowClass.bind(this)},this.rowSelection={mode:"multiRow"},this.defaultColDef={flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0},this.columnDefs=[],this.onSelectionChanged=r=>{var s=r?.api?.getSelectedRows();if(this.selectedRow=[],this.sdata=[],s?.length>1){var a={id:"Selected: "+s.length,Lot:[]};a[this.ty]=mt().round(mt().sumBy(s,this.ty),0);var l=s.map(d=>d.Lot);for(var c of l)a.Lot=[...a.Lot,...c];this.selectedRow.push(a),this.sdata=s}},this.onFilterChanged=r=>{var s=[];if(this.selectedRow=[],this.sdata=[],r?.api?.forEachNodeAfterFilter(d=>{d.data&&s.push(d.data)}),s?.length!=this.list.length&&(this.selectedRow=[],this.sdata=[],s?.length>1)){var a={id:"Selected: "+s.length,Lot:[]};a[this.ty]=mt().round(mt().sumBy(s,this.ty),0);var l=s.map(d=>d.Lot);for(var c of l)a.Lot=[...a.Lot,...c];this.selectedRow.push(a),this.sdata=s}},this.onRowDoubleClicked=r=>{}}ngOnChanges(t){console.log(this.employee,this.list),this.list=this.list,this.pinnedRow=[];var o={id:"Total: "+this.list.length,Lot:[]};o[this.ty]=mt().round(mt().sumBy(this.list,this.ty),0);var r=this.list.map(d=>d.Lot);for(var s of r)o.Lot=[...o.Lot,...s];var a=this.list.filter(d=>!d[this.ty+"EndDate"]?.length),l={id:"Pending: "+a.length,Lot:[]},c=a.map(d=>d.Lot);for(var s of(l[this.ty]=mt().round(mt().sumBy(a,this.ty),0),c))l.Lot=[...l.Lot,...s];this.pinnedRow=[o,l]}ngOnInit(){var t=this;return(0,ee.Z)(function*(){var o=yield t.api.getInfo("temp");t.costList=o.find(r=>"cost"==r.name)?.description,t.columnDefs=[{headerName:"CH NO",field:"id",valueFormatter:r=>"#"+mt().padStart(r.value.toLocaleString(),4,"0").toString()},{headerName:"CUT NO",valueGetter:r=>r.data?.stock?.srno},{headerName:"NAME",valueGetter:r=>r.data?.contractor?.name},{headerName:"LOT",valueGetter:r=>r.data?.Lot?.length},{headerName:"PCS",valueGetter:r=>mt().sumBy(r.data?.Lot,"pcs")},{headerName:"RWT",valueGetter:r=>mt().round(mt().sumBy(r.data?.Lot,"rwt"),2)},{headerName:"PWT",valueGetter:r=>mt().round(mt().sumBy(r.data?.Lot,"pwt"),2)},{headerName:"AMOUNT",field:t.ty,valueFormatter:r=>t.inrPipe.transform(r.value),cellStyle:{textAlign:"right"}},{headerName:"DATE",field:t.ty+"Date",cellDataType:"dateString",valueFormatter:r=>r.value?moment(r.value).format("DD/MM/YYYY HH:mm:ss"):""},{headerName:"#",width:50,field:t.ty+"Status",cellStyle:{textAlign:"center"},cellRenderer:TR,cellRendererParams:{ty:t.ty,nm:t.nm}}]})()}onGridReady(t){t.api.sizeColumnsToFit()}getAmount(t){var o=0;for(var r of t){var s=this.costList.find(a=>a.division==r.division);o+=r.pcs*s[this.ty]}return o}scanQr(t){var o=this;return(0,ee.Z)(function*(){var r=t.target.value;if(r?.length){var s=yield o.api.getInfo("jangad?id="+r);if(s){if(s[o.nm]>0)return void window.alert("Aready Assiged!");try{var a={id:Number(r)};a[o.ty+"Date"]=(new Date).toISOString(),a[o.nm]=o.employee.id,a[o.ty]=o.getAmount(s.Lot),yield o.api.putInfo("jangad",a),toastr.success("Done!");var l={};l[o.nm]=o.employee.id,o.list=yield o.api.postInfo("jangad/equiry",l)}catch{toastr.error("Something Went Wrong!")}o.changed.emit(!0),$("#scan_qr").val(""),$("#scan_qr").focus()}}})()}remove(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm("Are you sure?")){var r=window.prompt("Enter your PIN");if(r?.length){if(r!=o.user.pin)return void toastr.warning("Invalid PIN");try{var s={id:Number(t.id)};s[o.ty+"Date"]=null,s[o.nm]=null,yield o.api.putInfo("jangad",s),toastr.success("Done!");var a={};a[o.nm]=o.employee.id,o.list=yield o.api.postInfo("jangad/equiry",a)}catch{toastr.error("Something Went Wrong!")}}}})()}reloadList(){var t=this;return(0,ee.Z)(function*(){var o={};o[t.nm]=t.employee.id,t.list=yield t.api.postInfo("jangad/equiry",o),t.changed.emit(!0),$("#scan_qr").val(""),$("#scan_qr").focus()})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s),n.Y36(Xs.K))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-jangad-assign"]],inputs:{employee:"employee",list:"list",ty:"ty",nm:"nm"},outputs:{changed:"changed"},features:[n.TTD],decls:19,vars:8,consts:[[1,"modal-dialog",2,"width","70% !important"],[1,"modal-content"],[1,"modal-header","with-border"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body",2,"min-height","200px"],[1,"row"],[1,"col-sm-12","form-horizontal"],[1,"col-sm-3"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-5"],["type","text","id","scan_qr",1,"form-control","input-sm","qrcode",3,"keyup.enter"],[1,"col-sm-12"],[1,"ag-theme-balham",2,"width","100%","height","80vh","font-weight","500",3,"rowData","columnDefs","defaultColDef","gridOptions","rowSelection","pinnedTopRowData","pinnedBottomRowData","gridReady","selectionChanged","filterChanged","rowDoubleClicked"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),n._uU(14,"CH NO."),n.qZA(),n.TgZ(15,"div",12)(16,"input",13),n.NdJ("keyup.enter",function(a){return r.scanQr(a)}),n.qZA()()()()(),n.TgZ(17,"div",14)(18,"ag-grid-angular",15),n.NdJ("gridReady",function(a){return r.onGridReady(a)})("selectionChanged",function(a){return r.onSelectionChanged(a)})("filterChanged",function(a){return r.onFilterChanged(a)})("rowDoubleClicked",function(a){return r.onRowDoubleClicked(a)}),n.qZA()()()()()()),2&o&&(n.xp6(7),n.Oqu(r.employee.name),n.xp6(11),n.Q6J("rowData",r.list)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("gridOptions",r.gridOptions)("rowSelection",r.rowSelection)("pinnedTopRowData",r.selectedRow)("pinnedBottomRowData",r.pinnedRow))},dependencies:[wo]})}return e})(),FR=(()=>{class e{constructor(t){this.api=t,this.jangad={},this.facet={},this.em={},this.nm={},this.changed=new n.vpe,this.user=JSON.parse(localStorage.getItem("user")),this.loading=!1}submit(){var t=this;return(0,ee.Z)(function*(){if(window.confirm("Are you sure?")){var o=window.prompt("Enter your PIN");if(o?.length){if(o!=t.user.pin)return void toastr.warning("Invalid PIN");try{var r={id:t.jangad.id};r[t.facet+"EndDate"]=t.jangad[t.facet+"EndDate"],r[t.facet+"Status"]=t.jangad[t.facet+"EndDate"]?.length>0,yield t.api.putInfo("jangad",r),toastr.success("Updated Successfully"),t.changed.emit(!0),$("#jangad_collect_modal").modal("toggle")}catch{toastr.error("Something Went Wrong!")}}}})()}onDateChange(t){this.jangad[this.facet+"EndDate"]=t?.target?.value?new Date(t.target.value).toISOString():null}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-jangad-collect"]],inputs:{jangad:"jangad",facet:"facet",em:"em",nm:"nm"},outputs:{changed:"changed"},decls:60,vars:22,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-2","p-r-0"],["type","text","disabled","",1,"form-control",3,"value"],[1,"col-sm-2","p-l-5"],[1,"col-sm-4"],["type","number","disabled","",1,"form-control",3,"value"],["type","text","disabled","",1,"form-control","text-right",3,"value"],["type","date","disabled","",1,"form-control",3,"value"],["type","date",1,"form-control",3,"value","change"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default","pull-left"],["type","button",1,"btn","btn-sm","btn-success",3,"disabled","click"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),n._uU(12,"CH No. && Kapan"),n.qZA(),n.TgZ(13,"div",10),n._UZ(14,"input",11),n.qZA(),n.TgZ(15,"div",12),n._UZ(16,"input",11),n.qZA()(),n.TgZ(17,"div",8)(18,"label",9),n._uU(19,"Employee"),n.qZA(),n.TgZ(20,"div",13),n._UZ(21,"input",11),n.qZA()(),n.TgZ(22,"div",8)(23,"label",9),n._uU(24,"Karkana"),n.qZA(),n.TgZ(25,"div",13),n._UZ(26,"input",11),n.qZA()(),n.TgZ(27,"div",8)(28,"label",9),n._uU(29,"Total Lot & Pcs"),n.qZA(),n.TgZ(30,"div",10),n._UZ(31,"input",14),n.qZA(),n.TgZ(32,"div",12),n._UZ(33,"input",14),n.qZA()(),n.TgZ(34,"div",8)(35,"label",9),n._uU(36,"Rwt & Pwt"),n.qZA(),n.TgZ(37,"div",10),n._UZ(38,"input",15),n.ALo(39,"wt"),n.qZA(),n.TgZ(40,"div",12),n._UZ(41,"input",15),n.ALo(42,"wt"),n.qZA()(),n.TgZ(43,"div",8)(44,"label",9),n._uU(45,"Issue Date"),n.qZA(),n.TgZ(46,"div",13),n._UZ(47,"input",16),n.ALo(48,"momentDate"),n.qZA()(),n.TgZ(49,"div",8)(50,"label",9),n._uU(51,"Close Date"),n.qZA(),n.TgZ(52,"div",13)(53,"input",17),n.NdJ("change",function(a){return r.onDateChange(a)}),n.ALo(54,"momentDate"),n.qZA()()()()(),n.TgZ(55,"div",18)(56,"button",19),n._uU(57,"Cancel"),n.qZA(),n.TgZ(58,"button",20),n.NdJ("click",function(){return r.submit()}),n._uU(59,"Update"),n.qZA()()()()),2&o&&(n.xp6(7),n.hij("#",r.api.padleft(null==r.jangad?null:r.jangad.id),""),n.xp6(7),n.Q6J("value",r.api.padleft(null==r.jangad?null:r.jangad.id)),n.xp6(2),n.Q6J("value",null==r.jangad||null==r.jangad.stock?null:r.jangad.stock.srno),n.xp6(5),n.Q6J("value",null==r.jangad[r.em]?null:r.jangad[r.em].name),n.xp6(5),n.Q6J("value",null==r.jangad||null==r.jangad.contractor?null:r.jangad.contractor.name),n.xp6(5),n.Q6J("value",null==r.jangad||null==r.jangad.Lot?null:r.jangad.Lot.length),n.xp6(2),n.Q6J("value",r.api.getSum(null==r.jangad?null:r.jangad.Lot,"pcs")),n.xp6(5),n.Q6J("value",n.lcZ(39,12,r.api.getSum(null==r.jangad?null:r.jangad.Lot,"rwt"))),n.xp6(3),n.Q6J("value",n.lcZ(42,14,r.api.getSum(null==r.jangad?null:r.jangad.Lot,"pwt"))),n.xp6(6),n.Q6J("value",n.xi3(48,16,r.jangad[r.facet+"Date"],"YYYY-MM-DD")),n.xp6(6),n.Q6J("value",n.xi3(54,19,r.jangad[r.facet+"EndDate"],"YYYY-MM-DD")),n.xp6(5),n.Q6J("disabled",r.loading))},dependencies:[te._Y,te.JL,te.F,Bt.J,Rt.v]})}return e})();function RR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"a",36),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.removeEmployee(r))}),n._UZ(1,"span",41),n.qZA()}}function MR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr")(1,"th")(2,"a",36),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.editEmployee(s.id))}),n._uU(3),n.qZA(),n.TgZ(4,"a",37),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.assignLot(s))}),n._UZ(5,"span",38),n.qZA()(),n.TgZ(6,"td",28),n._uU(7),n.qZA(),n.TgZ(8,"td",28),n._uU(9),n.qZA(),n.TgZ(10,"td",28),n._uU(11),n.ALo(12,"wt"),n.qZA(),n.TgZ(13,"td",28),n._uU(14),n.ALo(15,"inr"),n.qZA(),n.TgZ(16,"td",39),n._uU(17),n.qZA(),n.TgZ(18,"td",39),n._uU(19),n.qZA(),n.TgZ(20,"td",39),n._uU(21),n.ALo(22,"wt"),n.qZA(),n.TgZ(23,"td"),n.YNc(24,RR,2,0,"a",40),n.qZA()()}if(2&e){const t=i.$implicit,o=n.oxw();n.xp6(3),n.Oqu(t.name),n.xp6(4),n.Oqu(o.api.getSubCount(o.getFilterForEmp(t.id),"Lot")),n.xp6(2),n.Oqu(o.api.getSubSum(o.getFilterForEmp(t.id),"Lot","pcs")),n.xp6(2),n.Oqu(n.lcZ(12,9,o.api.getSubSum(o.getFilterForEmp(t.id),"Lot","pwt"))),n.xp6(3),n.Oqu(n.lcZ(15,11,o.api.getSum(o.getFilterForEmp(t.id),o.facet))),n.xp6(3),n.Oqu(o.api.getSubCount(o.getFilterForEmp(t.id,!0),"Lot")),n.xp6(2),n.Oqu(o.api.getSubSum(o.getFilterForEmp(t.id,!0),"Lot","pcs")),n.xp6(2),n.Oqu(n.lcZ(22,13,o.api.getSubSum(o.getFilterForEmp(t.id,!0),"Lot","pwt"))),n.xp6(3),n.Q6J("ngIf",!o.api.getSubCount(o.getFilterForEmp(t.id),"Lot"))}}function ER(e,i){if(1&e&&(n.TgZ(0,"th",42),n._uU(1),n.qZA()),2&e){const t=i.$implicit;n.xp6(1),n.Oqu(t.code)}}function PR(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(1),n.Oqu(o.api.getSum(o.getFilterForDate(o.month,t.id),"than",""))}}function LR(e,i){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&e){const t=i.$implicit,o=n.oxw().$implicit,r=n.oxw();n.xp6(1),n.hij(" ",r.api.getSum(r.getFilterForEmpDate(t.id,o),"than",""),"")}}const IR=function(e){return{date:e}};function OR(e,i){if(1&e&&(n.TgZ(0,"tr",43)(1,"th"),n._uU(2),n.ALo(3,"momentDate"),n.qZA(),n.YNc(4,LR,2,1,"td",19),n.TgZ(5,"th"),n._uU(6),n.ALo(7,"contains"),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(n.xi3(3,3,t,"DD/MM/YYYY")),n.xp6(2),n.Q6J("ngForOf",o.employees),n.xp6(2),n.Oqu(o.api.getSum(n.xi3(7,6,o.kapans,n.VKq(9,IR,t)),"than",""))}}let NR=(()=>{class e{getRowClass(t){return t.data[this.facet+"EndDate"]?.length>0?"bg-lightgreen":""}constructor(t){var o=this;this.api=t,this.facet="",this.nm="",this.em="",this.user=JSON.parse(localStorage.getItem("user")),this.kapans=[],this.list=[],this.employees=[],this.employee={},this.kcode="",this.fkapans=[],this.dates=[],this.costList=[],this.jangad={},this.month=_e().format("YYYY-MM"),this.fobj={},this.rowData=[],this.sdata=[],this.selectedRow=[],this.pinnedRow=[],this.gridOptions={getRowClass:this.getRowClass.bind(this)},this.rowSelection={mode:"multiRow"},this.defaultColDef={flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0},this.columnDefs=[],this.onSelectionChanged=r=>{var s=r?.api?.getSelectedRows();if(this.selectedRow=[],this.sdata=[],s?.length>1){var a={id:"Selected: "+s.length,Lot:[]},l=s.map(d=>d.Lot);for(var c of l)a.Lot=[...a.Lot,...c];this.selectedRow.push(a),this.sdata=s}},this.onFilterChanged=r=>{var s=[];if(this.selectedRow=[],this.sdata=[],r?.api?.forEachNodeAfterFilter(d=>{d.data&&s.push(d.data)}),s?.length!=this.rowData.length&&(console.log(s),this.selectedRow=[],s?.length>1)){var a={id:"Filtered: "+s.length,Lot:[]},l=s.map(d=>d.Lot);for(var c of l)a.Lot=[...a.Lot,...c];this.selectedRow.push(a),this.sdata=s}},this.onRowDoubleClicked=function(){var r=(0,ee.Z)(function*(s){const a=s.data;a?.id>0&&(o.jangad=M.cloneDeep(a),o.jangad[o.facet+"EndDate"]?.length||(o.jangad[o.facet+"EndDate"]=(new Date).toISOString()),$("#jangad_collect_modal").modal("toggle"))});return function(s){return r.apply(this,arguments)}}()}ngAfterViewInit(){}ngOnInit(){var t=this;return(0,ee.Z)(function*(){t.fobj[t.facet+"Date"]={not:null};var o=yield t.api.getInfo("temp");t.costList=o.find(r=>"cost"==r.name)?.description,t.dates=t.api.getDaysOfMonth(),yield t.reload(!0),t.columnDefs=[{headerName:"CH NO",field:"id",valueFormatter:r=>r?.value>0?"#"+M.padStart(r.value.toLocaleString(),4,"0").toString():r.value},{headerName:"EMP",valueGetter:r=>r.data[t.em]?.name},{headerName:"CUT NO",valueGetter:r=>r.data?.stock?.srno},{headerName:"NAME",valueGetter:r=>r.data?.contractor?.name},{headerName:"LOT",valueGetter:r=>r.data?.Lot?.length},{headerName:"PCS",valueGetter:r=>M.sumBy(r.data?.Lot,"pcs")},{headerName:"RWT",valueGetter:r=>M.round(M.sumBy(r.data?.Lot,"rwt"),2)},{headerName:"PWT",valueGetter:r=>M.round(M.sumBy(r.data?.Lot,"pwt"),2)},{headerName:"ISSUE DATE",field:t.facet+"Date",cellDataType:"dateString",valueFormatter:r=>r.value?_e(r.value).format("DD/MM/YYYY"):""},{headerName:"CLOSE DATE",field:t.facet+"EndDate",cellDataType:"dateString",valueFormatter:r=>r.value?_e(r.value).format("DD/MM/YYYY"):""},{headerName:"DAYS",valueGetter:r=>t.api.getDaysDiff(r.data[t.facet+"Date"],r.data[t.facet+"EndDate"])}]})()}reload(t){var o=this;return(0,ee.Z)(function*(){o.kapans=yield o.api.postInfo("jangad/equiry",o.fobj),o.fkapans=o.kapans,o.rowData=o.kapans,o.pinnedRow=[];var r={id:"Total: "+o.rowData.length,Lot:[]},s=o.rowData.map(h=>h.Lot);for(var a of s)r.Lot=[...r.Lot,...a];var l=o.rowData.filter(h=>!h[o.facet+"EndDate"]?.length),c={id:"Pending: "+l.length,Lot:[]},d=l.map(h=>h.Lot);for(var a of d)c.Lot=[...c.Lot,...a];o.pinnedRow=[r,c],o.employees=yield o.api.getInfo("employee?dId="+o.user.id)})()}onGridReady(t){t.api.sizeColumnsToFit()}editEmployee(t){var o=this;return(0,ee.Z)(function*(){o.employee=yield o.api.getInfo("employee/"+t),$("#employee_modal").modal("toggle")})()}removeEmployee(t){var o=this;return(0,ee.Z)(function*(){if(console.log(t),window.confirm(`Are you sure to delete the employee ${t?.name}?`))try{if(!(yield o.api.deleteInfo("employee/"+t.id)))return void toastr.error("Something Went Wrong!");toastr.success("Deleted Successfully!"),window.location.reload()}catch{toastr.error("Something Went Wrong!")}})()}addEmployee(){this.employee={departmentHeadId:this.user.id},$("#employee_modal").modal("toggle")}assignLot(t){this.employee=Object.assign({},t),this.list=M.cloneDeep(this.kapans.filter(o=>o[this.nm]==t.id)),$("#lot_modal").modal("toggle")}getFilterForEmp(t,o=!1){return this.kapans.filter(o?r=>r[this.nm]==t&&1==r[this.facet+"Status"]:r=>r[this.nm]==t)}getFilterNullKapans(){return this.kapans.filter(t=>null==t[this.facet+"EndDate"])}getFilterForDate(t,o=0){return this.kapans.filter(o>0?r=>r[this.nm]==o&&r[this.facet+"Date"].indexOf(t)>-1:r=>r[this.facet+"Date"].indexOf(t)>-1)}getFilterForEmpDate(t,o){return this.kapans.filter(r=>r[this.nm]==t&&r[this.facet+"Date"].indexOf(o)>-1)}onChageMonth(t){console.log(t.target.value),t.target.value&&(this.dates=this.api.getMonthDays(t.target.value),this.month=t.target.value)}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-facets"]],inputs:{facet:"facet",nm:"nm",em:"em"},decls:78,vars:21,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"nav-tabs-custom"],[1,"nav","nav-tabs"],[1,"active"],["href","#details","data-toggle","tab"],["href","#reporting","data-toggle","tab"],["href","#history","data-toggle","tab"],[1,"tab-content",2,"min-height","500px"],["id","details",1,"tab-pane","active"],[1,"col-sm-12"],[1,"table","table-responsive","table-hover","table-condensed","table-striped","text-center"],["colspan","4",1,"bg-lightyellow"],["colspan","3",1,"bg-lightgreen"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],[1,"ml-5",3,"click"],[1,"fa","fa-plus-circle","text-green"],[4,"ngFor","ngForOf"],["id","reporting",1,"tab-pane"],[1,"ag-theme-balham",2,"width","100%","height","80vh","font-weight","500",3,"rowData","columnDefs","defaultColDef","gridOptions","rowSelection","pinnedTopRowData","pinnedBottomRowData","gridReady","selectionChanged","filterChanged","rowDoubleClicked"],["id","history",1,"tab-pane"],[1,"table-container"],[1,"table","table-responsive","table-bordered","table-condensed","table-striped","table-striped","text-center","table-fixed-header"],["scope","col",1,"col-sm-auto","p2","jc","bg-lightgreen",2,"width","120px !important"],["type","month",1,"form-control","input-sm","excel_input","text-center",3,"value","change"],["scope","col","class","col-sm-auto bg-lightblue",4,"ngFor","ngForOf"],[1,"bg-lightyellow"],["scope","row",4,"ngFor","ngForOf"],["id","employee_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"employee","changed"],["id","lot_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"ty","nm","employee","list","changed"],["id","jangad_collect_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"jangad","facet","em","changed"],[3,"click"],[1,"pull-right",3,"click"],[1,"fa","fa-inbox"],[1,"bg-lightgreen"],[3,"click",4,"ngIf"],[1,"fa","fa-minus-circle","text-red"],["scope","col",1,"col-sm-auto","bg-lightblue"],["scope","row"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),n._uU(7,"Details"),n.qZA()(),n.TgZ(8,"li")(9,"a",7),n._uU(10,"Reporting"),n.qZA()(),n.TgZ(11,"li")(12,"a",8),n._uU(13,"History"),n.qZA()()(),n.TgZ(14,"div",9)(15,"div",10)(16,"div",2)(17,"div",11)(18,"table",12)(19,"thead")(20,"tr"),n._UZ(21,"th"),n.TgZ(22,"th",13),n._uU(23,"\u0aa6\u0abf\u0aaf\u0abe"),n.qZA(),n.TgZ(24,"th",14),n._uU(25,"\u0a86\u0aaf\u0abe"),n.qZA(),n._UZ(26,"th"),n.qZA(),n.TgZ(27,"tr",15)(28,"th",16),n._uU(29,"Name "),n.TgZ(30,"a",17),n.NdJ("click",function(){return r.addEmployee()}),n._UZ(31,"span",18),n.qZA()(),n.TgZ(32,"th",16),n._uU(33,"Lot"),n.qZA(),n.TgZ(34,"th",16),n._uU(35,"Pcs"),n.qZA(),n.TgZ(36,"th",16),n._uU(37,"Pwt"),n.qZA(),n.TgZ(38,"th",16),n._uU(39,"Amount"),n.qZA(),n.TgZ(40,"th",16),n._uU(41,"Lot"),n.qZA(),n.TgZ(42,"th",16),n._uU(43,"Pcs"),n.qZA(),n.TgZ(44,"th",16),n._uU(45,"Pwt"),n.qZA(),n.TgZ(46,"th",16),n._uU(47,"#"),n.qZA()()(),n.TgZ(48,"tbody"),n.YNc(49,MR,25,15,"tr",19),n.qZA()()()()(),n.TgZ(50,"div",20)(51,"ag-grid-angular",21),n.NdJ("gridReady",function(a){return r.onGridReady(a)})("selectionChanged",function(a){return r.onSelectionChanged(a)})("filterChanged",function(a){return r.onFilterChanged(a)})("rowDoubleClicked",function(a){return r.onRowDoubleClicked(a)}),n.qZA()(),n.TgZ(52,"div",22)(53,"div",2)(54,"div",11)(55,"div",23)(56,"table",24)(57,"thead")(58,"tr")(59,"th",25)(60,"input",26),n.NdJ("change",function(a){return r.onChageMonth(a)}),n.qZA()(),n.YNc(61,ER,2,1,"th",27),n.TgZ(62,"th",16),n._uU(63,"Total"),n.qZA()(),n.TgZ(64,"tr",28)(65,"th"),n._uU(66,"Total"),n.qZA(),n.YNc(67,PR,2,1,"td",19),n.TgZ(68,"th"),n._uU(69),n.qZA()()(),n.TgZ(70,"tbody"),n.YNc(71,OR,8,11,"tr",29),n.qZA()()()()()()()()()()(),n.TgZ(72,"div",30)(73,"app-employee",31),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()(),n.TgZ(74,"div",32)(75,"app-jangad-assign",33),n.NdJ("changed",function(){return r.reload(!0)}),n.qZA()(),n.TgZ(76,"div",34)(77,"app-jangad-collect",35),n.NdJ("changed",function(a){return r.reload(a)}),n.qZA()()),2&o&&(n.xp6(49),n.Q6J("ngForOf",r.employees),n.xp6(2),n.Q6J("rowData",r.rowData)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("gridOptions",r.gridOptions)("rowSelection",r.rowSelection)("pinnedTopRowData",r.selectedRow)("pinnedBottomRowData",r.pinnedRow),n.xp6(9),n.Q6J("value",r.month),n.xp6(1),n.Q6J("ngForOf",r.employees),n.xp6(6),n.Q6J("ngForOf",r.employees),n.xp6(2),n.Oqu(r.api.getSum(r.getFilterForDate(r.month),"than","")),n.xp6(2),n.Q6J("ngForOf",r.dates),n.xp6(2),n.Q6J("employee",r.employee),n.xp6(2),n.Q6J("ty",r.facet)("nm",r.nm)("employee",r.employee)("list",r.list),n.xp6(2),n.Q6J("jangad",r.jangad)("facet",r.facet)("em",r.em))},dependencies:[Ee.sg,Ee.O5,wo,Ji,DR,FR,Xs.K,Bt.J,Rt.v,vi]})}return e})(),op=(()=>{class e{transform(t){return new Intl.NumberFormat("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0}).format(t?M.round(t,0):0)}static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275pipe=n.Yjl({name:"amt",type:e,pure:!0})}return e})();function BR(e,i){if(1&e&&(n.TgZ(0,"tr",22)(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.qZA(),n.TgZ(17,"td"),n._uU(18),n.qZA()()),2&e){const t=i.$implicit;n.Tol(null!=t&&null!=t.fourPLot&&t.fourPLot.employeeId?"bg-lightgreen":""),n.xp6(2),n.Oqu(t.srno),n.xp6(2),n.Oqu(t.rwt),n.xp6(2),n.Oqu(t.pwt),n.xp6(2),n.Oqu(t.diameter),n.xp6(2),n.Oqu(t.division),n.xp6(2),n.Oqu(t.price),n.xp6(2),n.Oqu(t.issueDate),n.xp6(2),n.Oqu(t.issueTime),n.xp6(2),n.Oqu(null==t||null==t.fourPLot?null:t.fourPLot.id)}}let ZR=(()=>{class e{constructor(t){this.api=t,this.list=[]}scanQr(t){var o=this;return(0,ee.Z)(function*(){if(t.target.value?.length){var r=t.target.value;o.list=[],o.list=yield o.api.postInfo("fourpwork/enquiry",{srno:{startsWith:r,mode:"insensitive"}})}else o.list=[]})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-fourp-search"]],decls:60,vars:12,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body",2,"min-height","600px"],[1,"row"],[1,"col-sm-12","form-horizontal"],[1,"col-sm-6"],[1,"form-group"],[1,"col-sm-6","control-label"],["type","text","id","qrcode",1,"form-control","input-sm","qrcode",3,"keyup.enter"],[1,"col-sm-12"],[1,"table-container"],[1,"table","table-responsive","table-striped","table-condensed","table-hover","text-center","table-fixed-header"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],[1,"bg-lightyellow"],["colspan","2"],["colspan","3"],["scope","row",3,"class",4,"ngFor","ngForOf"],["scope","row"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7,"Search Packets"),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),n._uU(14,"\u0aac\u0abe\u0ab0\u0a95\u0acb\u0aa1/Cut NO."),n.qZA(),n.TgZ(15,"div",9)(16,"input",12),n.NdJ("keyup.enter",function(a){return r.scanQr(a)}),n.qZA()()()(),n.TgZ(17,"div",9)(18,"div",10)(19,"label",11),n._uU(20),n.qZA()()()(),n.TgZ(21,"div",13)(22,"div",14)(23,"table",15)(24,"thead")(25,"tr",16)(26,"th",17),n._uU(27,"STONE ID"),n.qZA(),n.TgZ(28,"th",17),n._uU(29,"R.WT"),n.qZA(),n.TgZ(30,"th",17),n._uU(31,"P.WT"),n.qZA(),n.TgZ(32,"th",17),n._uU(33,"DIA"),n.qZA(),n.TgZ(34,"th",17),n._uU(35,"GROUP"),n.qZA(),n.TgZ(36,"th",17),n._uU(37,"PRICE"),n.qZA(),n.TgZ(38,"th",17),n._uU(39,"DATE"),n.qZA(),n.TgZ(40,"th",17),n._uU(41,"TIME"),n.qZA(),n.TgZ(42,"th",17),n._uU(43,"#"),n.qZA()(),n.TgZ(44,"tr",18)(45,"th"),n._uU(46),n.qZA(),n.TgZ(47,"th"),n._uU(48),n.ALo(49,"wt"),n.qZA(),n.TgZ(50,"th"),n._uU(51),n.ALo(52,"wt"),n.qZA(),n._UZ(53,"th",19),n.TgZ(54,"th"),n._uU(55),n.ALo(56,"amt"),n.qZA(),n._UZ(57,"th",20),n.qZA()(),n.TgZ(58,"tbody"),n.YNc(59,BR,19,11,"tr",21),n.qZA()()()()()()()()),2&o&&(n.xp6(20),n.hij("TOTAL: ",r.list.length,""),n.xp6(26),n.hij("T: ",r.list.length,""),n.xp6(2),n.Oqu(n.lcZ(49,6,r.api.getSum(r.list,"pwt"))),n.xp6(3),n.Oqu(n.lcZ(52,8,r.api.getSum(r.list,"rwt"))),n.xp6(4),n.Oqu(n.lcZ(56,10,r.api.getSum(r.list,"price"))),n.xp6(4),n.Q6J("ngForOf",r.list))},dependencies:[Ee.sg,Bt.J,op]})}return e})();function GR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",38)(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.qZA(),n.TgZ(17,"td")(18,"a",31),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.remove(s))}),n._UZ(19,"span",39),n.qZA()()()}if(2&e){const t=i.$implicit;n.Tol("F"==t.remarks?"bg-lightred2":""),n.xp6(2),n.Oqu(t.srno),n.xp6(2),n.Oqu(t.rwt),n.xp6(2),n.Oqu(t.pwt),n.xp6(2),n.Oqu(t.diameter),n.xp6(2),n.Oqu(t.division),n.xp6(2),n.Oqu(t.price),n.xp6(2),n.Oqu(t.issueDate),n.xp6(2),n.Oqu(t.issueTime)}}function HR(e,i){if(1&e&&(n.TgZ(0,"tr",38)(1,"th"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA()()),2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(t.division),n.xp6(2),n.Oqu(t.range),n.xp6(2),n.Oqu(t.rate),n.xp6(2),n.Oqu(o.getPcs(t.division)),n.xp6(2),n.Oqu(t.rate*o.getPcs(t.division))}}function qR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"th")(1,"a",31),n.NdJ("click",function(){n.CHM(t);const r=n.oxw().$implicit,s=n.oxw();return n.KtG(s.checkBNo(r.id))}),n._uU(2),n.qZA()()}if(2&e){const t=n.oxw().$implicit;n.xp6(2),n.Oqu(t.id)}}function zR(e,i){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.id)}}function VR(e,i){if(1&e&&(n.TgZ(0,"tr",38),n.YNc(1,qR,3,1,"th",40),n.YNc(2,zR,2,1,"th",40),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.ALo(9,"momentDate"),n.qZA()()),2&e){const t=i.$implicit,o=i.index,r=n.oxw();n.Tol(null!=t&&t.employeeId?"bg-lightgreen":""),n.xp6(1),n.Q6J("ngIf",!(null!=t&&t.employeeId)),n.xp6(1),n.Q6J("ngIf",(null==t?null:t.employeeId)>0),n.xp6(2),n.Oqu(r.blist.length-o),n.xp6(2),n.Oqu(t.FourPWork.length),n.xp6(2),n.Oqu(n.xi3(9,7,t.createdAt,"DD/MM/YYYY HH:mm:ss"))}}let UR=(()=>{class e{constructor(t){this.api=t,this.blist=[],this.list=[],this.costList=[],this.divisions=[{division:"A",range:"0 - 1.39",rate:2,min:0,max:1.39},{division:"B",range:"1.4 - 1.97",rate:2.5,min:1.4,max:1.97},{division:"C",range:"1.98 - 3.37",rate:3.25,min:1.98,max:3.37},{division:"D",range:"3.38 - 10",rate:6.5,min:3.38,max:10}],this.barcodeValue="1234"}ngOnChanges(t){}ngAfterViewInit(){}ngOnInit(){var t=this;return(0,ee.Z)(function*(){$(function(){$("#bno").val(0)}),yield t.loadbList()})()}loadbList(){var t=this;return(0,ee.Z)(function*(){var o=$("#cut_no").val();$("#bno").val(0),t.list=[],t.blist=o?.length?yield t.api.postInfo("fourplot/equiry",{where:{code:o},include:{FourPWork:!0},orderBy:{id:"desc"}}):[]})()}remove(t){var o=this;return(0,ee.Z)(function*(){if(t?.fourPLotId)try{var r=yield o.api.deleteInfo("fourpwork/"+t?.id);r?toastr.success("Deleted Successfully"):toastr.error("Something Went Wrong!"),r&&(o.list=o.list.filter(s=>s!=t),yield o.loadbList())}catch{toastr.error("Something Went Wrong!")}else o.list=o.list.filter(s=>s!=t)})()}checkBNo(t){var o=this;return(0,ee.Z)(function*(){var r=yield o.api.getInfo("fourplot/"+t);o.list=r?M.cloneDeep(r?.FourPWork):[],$("#bno").val(r?.id??0),$("#cut_no").val(r?.code??"")})()}scanQr(t){var o=this;return(0,ee.Z)(function*(){if(!t.target.value?.length)return $("#qrcode").val(""),$("#qrcode").focus(),void toastr.error("Invalid qr code");if(t.target.value?.indexOf(",")<0)return toastr.error("Invalid qr code"),window.alert("Invalid qr code"),$("#qrcode").val(""),void $("#qrcode").focus();var r=t.target.value.split(","),s=Number(r[0]),a=r.length,l=r[9].trim();if(l?.indexOf("-")<0)return toastr.error("Invalid qr code"),window.alert("Invalid qr code"),$("#qrcode").val(""),void $("#qrcode").focus();var c=yield o.api.postInfo("stock/query",{srno:l?.split("-")[0]});if(o.list.find(S=>S.srno==l&&S.diameter==Number(r[0])&&S.pwt==Number(r[8])&&S.rwt==Number(r[7])))return toastr.warning("Already Scanned!"),window.alert("Already Scanned!"),$("#qrcode").val(""),void $("#qrcode").focus();var h=yield o.api.postInfo("fourpwork/query",{srno:l,diameter:Number(r[0]),pwt:Number(r[8]),rwt:Number(r[7])});if(h?.fourPLotId>0)return toastr.error("Already Exists In Another"),window.alert("Already Exists In Another"),$("#qrcode").val(""),void $("#qrcode").focus();var g=$("#cut_no").val();if(g!=l?.split("-")[0]&&g?.length>0&&!h?.id)return toastr.error("Not same cut no"),window.alert("Not same cut no"),$("#qrcode").val(""),void $("#qrcode").focus();if("MIX"==g&&!h?.id)return toastr.error("Its Not Repair & Please check!"),window.alert("Its Not Repair & Please check!"),$("#qrcode").val(""),void $("#qrcode").focus();if("MIX"!=g&&h?.id>0)return toastr.error("Its Repair & Please check!"),window.alert("Its Repair & Please check!"),$("#qrcode").val(""),void $("#qrcode").focus();$("#cut_no").val(h?.id?"MIX":l?.split("-")[0]),$("#cut_no").prop("disabled",h?.id>0);var m=o.divisions?.find(S=>S.min<=s&&S.max>=s);if(!m)return toastr.error("Range Not Detected!"),window.alert("Range Not Detected!"),$("#qrcode").val(""),void $("#qrcode").focus();var f=Number($("#bno").val());if(0==f){var y={stockId:c?.id??null,srno:l,rwt:Number(r[7]),pwt:Number(r[8]),diameter:Number(r[0]),remarks:r[a-4]?.toLowerCase().indexOf("round")>-1?"R":"F",division:m.division,price:m.rate,issueDate:r[a-2],issueTime:r[a-1],date:(new Date).toISOString()};return h?.id>0&&(y.id=h.id),console.log(y),o.list.push(y),$("#qrcode").val(""),void $("#qrcode").focus()}var b={fourPLotId:f,stockId:c?.id??null,srno:l,rwt:Number(r[7]),pwt:Number(r[8]),diameter:Number(r[0]),remarks:r[a-4]?.toLowerCase().indexOf("round")>-1?"R":"F",division:m.division,price:m.rate,issueDate:r[a-2],issueTime:r[a-1],date:(new Date).toISOString()};console.log(b);try{yield o.api.postInfo("fourpwork",b),toastr.success("Added Successfully!"),yield o.checkBNo(f),yield o.loadbList(),$("#qrcode").val(""),$("#qrcode").focus()}catch{toastr.error("Something Went Wrong!"),window.alert("Something Went Wrong!")}})()}getPcs(t=null){return t?this.list.filter(o=>o.division==t)?.length:this.list.length}printData(){let t,o;t=document.getElementById("myPrint")?.outerHTML,o=window.open("","_blank","top=0,left=0,height=100%,width=auto"),o?.document.open(),o?.document.write(`\n      <html>\n        <head>     \n          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">\n          <style>.text-center { text-align: center !important; } </style> \n        </head>\n    <body onload="window.print();window.close()">${t}</body>\n      </html>`),o?.document.close()}closeList(){var t=this;return(0,ee.Z)(function*(){var o=Number($("#bno").val());if(0==o){var r={code:$("#cut_no").val(),status:!0,FourPWork:{create:t.list.filter(a=>!a?.id),connect:t.list.filter(a=>a?.id>0).map(a=>({id:a.id}))}};if(console.log(t.list,r),!r?.code?.length||!t.list?.length)return void toastr.error("Not Lot created");if(!window.confirm("Are you want to close?"))return;try{var s=yield t.api.postInfo("fourplot",r);console.log(s),window.open("/report/"+s.id,"_blank"),yield t.loadbList(),toastr.success("Successfully Created!")}catch{toastr.error("Something Went Wrong!")}}else window.open("/report/"+o,"_blank"),yield t.loadbList()})()}getTotalPcs(){return this.blist?.length?M.sum(this.blist?.map(t=>t?.FourPWork?.length)):0}searchPopup(){$("#fourp_search_modal").modal("toggle")}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-four-p"]],features:[n.TTD],decls:104,vars:6,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"box","box-solid"],[1,"box-header","with-border"],[1,"box-title"],[1,"box-body",2,"min-height","800px !important"],[1,"col-sm-12","form-horizontal"],[1,"col-sm-3"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-7"],["type","text","id","cut_no",1,"form-control","input-sm","fs16",3,"input"],[1,"col-sm-8"],["type","text","id","qrcode",1,"form-control","input-sm","qrcode",3,"keyup.enter"],[1,"col-sm-6"],["type","number","id","bno","disabled","",1,"form-control","input-sm","fs16"],[1,"btn","btn-sm","btn-primary","pull-right",3,"click"],[1,"fa","fa-search"],[1,"col-sm-7","p-r-0"],[1,"table-container"],[1,"table","table-responsive","table-condensed","table-striped","table-hover","text-center","table-fixed-header"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],["scope","row",3,"class",4,"ngFor","ngForOf"],["id","myPrint",1,"col-sm-5","p-l-5"],[1,"table","table-responsive","table-bordered","table-condensed","table-striped","table-hover","text-center"],[1,"bg-lightgreen"],["scope","row",4,"ngFor","ngForOf"],[1,"bg-lightyellow"],[3,"click"],[1,"fa","fa-print"],["colspan","2"],[1,"text-center"],[1,"mb-0","table","table-responsive","table-bordered","table-condensed","table-striped","table-hover","text-center"],[1,"bg-lightred"],["id","fourp_search_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],["scope","row"],[1,"fa","fa-minus-circle","text-red"],[4,"ngIf"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),n._uU(7,"4P Scaning"),n.qZA()(),n.TgZ(8,"div",7)(9,"div",2)(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),n._uU(14,"Cut No."),n.qZA(),n.TgZ(15,"div",12)(16,"input",13),n.NdJ("input",function(){return r.loadbList()}),n.qZA()()()(),n.TgZ(17,"div",9)(18,"div",10)(19,"label",11),n._uU(20,"\u0aac\u0abe\u0ab0\u0a95\u0acb\u0aa1"),n.qZA(),n.TgZ(21,"div",14)(22,"input",15),n.NdJ("keyup.enter",function(a){return r.scanQr(a)}),n.qZA()()()(),n.TgZ(23,"div",9)(24,"div",10)(25,"label",11),n._uU(26,"B.NO.#"),n.qZA(),n.TgZ(27,"div",16),n._UZ(28,"input",17),n.qZA()()(),n.TgZ(29,"div",9)(30,"div",10),n._UZ(31,"label",11),n.TgZ(32,"div",14)(33,"button",18),n.NdJ("click",function(){return r.searchPopup()}),n._UZ(34,"i",19),n._uU(35,"Search"),n.qZA()()()()(),n.TgZ(36,"div",20)(37,"div",21)(38,"table",22)(39,"thead")(40,"tr",23)(41,"th",24),n._uU(42,"STONE ID"),n.qZA(),n.TgZ(43,"th",24),n._uU(44,"R.WT"),n.qZA(),n.TgZ(45,"th",24),n._uU(46,"P.WT"),n.qZA(),n.TgZ(47,"th",24),n._uU(48,"DIA"),n.qZA(),n.TgZ(49,"th",24),n._uU(50,"GROUP"),n.qZA(),n.TgZ(51,"th",24),n._uU(52,"PRICE"),n.qZA(),n.TgZ(53,"th",24),n._uU(54,"DATE"),n.qZA(),n.TgZ(55,"th",24),n._uU(56,"TIME"),n.qZA(),n.TgZ(57,"th",24),n._uU(58,"#"),n.qZA()()(),n.TgZ(59,"tbody"),n.YNc(60,GR,20,10,"tr",25),n.qZA()()()(),n.TgZ(61,"div",26)(62,"table",27)(63,"thead")(64,"tr",28)(65,"th",24),n._uU(66,"GROUP"),n.qZA(),n.TgZ(67,"th",24),n._uU(68,"RANGE"),n.qZA(),n.TgZ(69,"th",24),n._uU(70,"RATE"),n.qZA(),n.TgZ(71,"th",24),n._uU(72,"PCS"),n.qZA(),n.TgZ(73,"th",24),n._uU(74,"TOTAL"),n.qZA()()(),n.TgZ(75,"tbody"),n.YNc(76,HR,11,5,"tr",29),n.qZA(),n.TgZ(77,"tfoot")(78,"tr",30)(79,"th")(80,"a",31),n.NdJ("click",function(){return r.closeList()}),n._UZ(81,"i",32),n._uU(82," Close & Print"),n.qZA()(),n._UZ(83,"th",33),n.TgZ(84,"th",34),n._uU(85),n.qZA(),n.TgZ(86,"th",34),n._uU(87),n.qZA()()()(),n.TgZ(88,"div",21)(89,"table",35)(90,"thead")(91,"tr",36)(92,"th",24),n._uU(93,"B.NO."),n.qZA(),n.TgZ(94,"th",24),n._uU(95,"S.NO."),n.qZA(),n.TgZ(96,"th",24),n._uU(97,"PCS"),n.qZA(),n.TgZ(98,"th",24),n._uU(99),n.qZA()()(),n.TgZ(100,"tbody"),n.YNc(101,VR,10,10,"tr",25),n.qZA()()()()()()()()()()(),n.TgZ(102,"div",37),n._UZ(103,"app-fourp-search"),n.qZA()),2&o&&(n.xp6(60),n.Q6J("ngForOf",r.list),n.xp6(16),n.Q6J("ngForOf",r.divisions),n.xp6(9),n.Oqu(r.getPcs()),n.xp6(2),n.Oqu(r.api.getSum(r.list,"price")),n.xp6(12),n.hij("TOTAL: ",r.getTotalPcs(),""),n.xp6(2),n.Q6J("ngForOf",r.blist))},dependencies:[Ee.sg,Ee.O5,ZR,Rt.v],styles:[".mb-0[_ngcontent-%COMP%]{margin-bottom:0!important}input[_ngcontent-%COMP%]{font-weight:900!important}.fs16[_ngcontent-%COMP%]{font-size:16px!important}"]})}return e})();function WR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",23)(1,"th"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.ALo(7,"momentDate"),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.qZA(),n.TgZ(10,"td"),n._uU(11),n.qZA(),n.TgZ(12,"td"),n._uU(13),n.qZA(),n.TgZ(14,"td"),n._uU(15),n.qZA(),n.TgZ(16,"td"),n._uU(17),n.qZA(),n.TgZ(18,"th"),n._uU(19),n.ALo(20,"inr"),n.qZA(),n.TgZ(21,"td")(22,"a",24),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.remove(s))}),n._UZ(23,"span",25),n.qZA()()()}if(2&e){const t=i.$implicit,o=n.oxw();n.xp6(2),n.Oqu(t.id),n.xp6(2),n.Oqu(t.code),n.xp6(2),n.Oqu(n.xi3(7,9,t.date,"DD/MM/YYYY")),n.xp6(3),n.Oqu(null==t||null==t.FourPWork?null:t.FourPWork.length),n.xp6(2),n.Oqu(o.getPcs("A",null==t?null:t.FourPWork)),n.xp6(2),n.Oqu(o.getPcs("B",null==t?null:t.FourPWork)),n.xp6(2),n.Oqu(o.getPcs("C",null==t?null:t.FourPWork)),n.xp6(2),n.Oqu(o.getPcs("D",null==t?null:t.FourPWork)),n.xp6(2),n.Oqu(n.lcZ(20,12,o.api.getSum(null==t?null:t.FourPWork,"price")))}}const A0=function(e){return{date:e}};let jR=(()=>{class e{constructor(t){this.api=t,this.employee={},this.list=[],this.sel_date=_e().format("YYYY-MM-DD"),this.changed=new n.vpe}scanQr(t){var o=this;return(0,ee.Z)(function*(){if(!o.employee?.id)return $("#qrcode").val(""),$("#qrcode").focus(),void toastr.error("Not a Valid Employee");var r=t.target.value;if(console.log(r),!r?.length)return $("#qrcode").val(""),$("#qrcode").focus(),void toastr.error("Invalid qr code");try{var s=yield o.api.getInfo("fourplot/"+r);if(!s)return $("#qrcode").val(""),$("#qrcode").focus(),void toastr.error("Invalid qr code");if(s?.employeeId>0)return $("#qrcode").val(""),$("#qrcode").focus(),void toastr.error("Already Scanned!");var a=new Date(o.sel_date).toISOString(),l={id:Number(r),employeeId:o.employee.id,status:!1,date:a};console.log(l),yield o.api.putInfo("fourplot",l),$("#qrcode").val(""),$("#qrcode").focus(),toastr.success("Successfully Updated");var c=yield o.api.getInfo("fourplot?id="+o.employee.id);return o.list=M.orderBy(c,["date"],["desc"]),console.log(o.list),void o.changed.emit(!0)}catch{$("#qrcode").val(""),$("#qrcode").focus(),toastr.error("Something Went Wrong!")}})()}getPcs(t=null,o){return t?o.filter(r=>r.division==t)?.length:o.length}remove(t){var o=this;return(0,ee.Z)(function*(){if(window.confirm("Are you want to unlink?"))try{yield o.api.putInfo("fourplot",{id:t.id,employeeId:null,status:!0,date:null});var r=yield o.api.getInfo("fourplot?id="+o.employee.id);o.list=M.orderBy(r,["date"],["desc"]),o.changed.emit(!0),toastr.success("Successfully Updated")}catch{toastr.error("Something Went Wrong!")}})()}getTotalPcs(t=null){return t?this.list?.length?M.sum(this.list?.filter(o=>o?.date?.indexOf(this.sel_date)>-1).map(o=>this.getPcs(t,o?.FourPWork))):0:this.list?.length?M.sum(this.list?.filter(o=>o?.date?.indexOf(this.sel_date)>-1).map(o=>o?.FourPWork?.length)):0}getTotalAmount(){return this.list?.length?M.sum(this.list?.filter(t=>t?.date?.indexOf(this.sel_date)>-1).map(t=>M.sumBy(t?.FourPWork,"price"))):0}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-fourp-assign"]],inputs:{employee:"employee",list:"list",sel_date:"sel_date"},outputs:{changed:"changed"},decls:70,vars:23,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body",2,"min-height","600px"],[1,"row"],[1,"col-sm-12","form-horizontal"],[1,"col-sm-6"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-8"],["type","text","id","qrcode",1,"form-control","qrcode",3,"keyup.enter"],["type","date","name","sel_date",1,"form-control","text-center",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"table-container"],[1,"table","table-responsive","table-striped","table-condensed","table-hover","text-center","table-fixed-header"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],[1,"bg-lightyellow"],["colspan","2"],["scope","row",4,"ngFor","ngForOf"],["scope","row"],[3,"click"],[1,"fa","fa-minus-circle","text-red"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),n._uU(14,"\u0aac\u0abe\u0ab0\u0a95\u0acb\u0aa1/B.NO."),n.qZA(),n.TgZ(15,"div",12)(16,"input",13),n.NdJ("keyup.enter",function(a){return r.scanQr(a)}),n.qZA()()()(),n.TgZ(17,"div",9)(18,"div",10)(19,"label",11),n._uU(20,"Date"),n.qZA(),n.TgZ(21,"div",12)(22,"input",14),n.NdJ("ngModelChange",function(a){return r.sel_date=a}),n.qZA()()()()(),n.TgZ(23,"div",15)(24,"div",16)(25,"table",17)(26,"thead")(27,"tr",18)(28,"th",19),n._uU(29,"B.No #"),n.qZA(),n.TgZ(30,"th",19),n._uU(31,"Cut No"),n.qZA(),n.TgZ(32,"th",19),n._uU(33,"Date"),n.qZA(),n.TgZ(34,"th",19),n._uU(35,"Pcs"),n.qZA(),n.TgZ(36,"th",19),n._uU(37,"A"),n.qZA(),n.TgZ(38,"th",19),n._uU(39,"B"),n.qZA(),n.TgZ(40,"th",19),n._uU(41,"C"),n.qZA(),n.TgZ(42,"th",19),n._uU(43,"D"),n.qZA(),n.TgZ(44,"th",19),n._uU(45,"Total"),n.qZA(),n.TgZ(46,"th",19),n._uU(47,"#"),n.qZA()(),n.TgZ(48,"tr",20)(49,"th"),n._uU(50),n.ALo(51,"contains"),n.qZA(),n._UZ(52,"th",21),n.TgZ(53,"th"),n._uU(54),n.qZA(),n.TgZ(55,"th"),n._uU(56),n.qZA(),n.TgZ(57,"th"),n._uU(58),n.qZA(),n.TgZ(59,"th"),n._uU(60),n.qZA(),n.TgZ(61,"th"),n._uU(62),n.qZA(),n.TgZ(63,"th"),n._uU(64),n.ALo(65,"inr"),n.qZA(),n._UZ(66,"th"),n.qZA()(),n.TgZ(67,"tbody"),n.YNc(68,WR,24,14,"tr",22),n.ALo(69,"contains"),n.qZA()()()()()()()()),2&o&&(n.xp6(7),n.AsE("",null==r.employee?null:r.employee.name," [",null==r.employee?null:r.employee.code,"]"),n.xp6(15),n.Q6J("ngModel",r.sel_date),n.xp6(28),n.hij("T: ",r.api.getCount(n.xi3(51,11,r.list,n.VKq(19,A0,r.sel_date))),""),n.xp6(4),n.Oqu(r.getTotalPcs()),n.xp6(2),n.Oqu(r.getTotalPcs("A")),n.xp6(2),n.Oqu(r.getTotalPcs("B")),n.xp6(2),n.Oqu(r.getTotalPcs("C")),n.xp6(2),n.Oqu(r.getTotalPcs("D")),n.xp6(2),n.Oqu(n.lcZ(65,14,r.getTotalAmount())),n.xp6(4),n.Q6J("ngForOf",n.xi3(69,16,r.list,n.VKq(21,A0,r.sel_date))))},dependencies:[Ee.sg,te.Fj,te.JJ,te.On,Xs.K,Rt.v,vi]})}return e})();function YR(e,i){if(1&e&&(n.TgZ(0,"tr",18)(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.qZA()()),2&e){const t=i.$implicit;n.xp6(2),n.Oqu(t.srno),n.xp6(2),n.Oqu(t.rwt),n.xp6(2),n.Oqu(t.pwt),n.xp6(2),n.Oqu(t.diameter),n.xp6(2),n.Oqu(t.division),n.xp6(2),n.Oqu(t.price),n.xp6(2),n.Oqu(t.issueDate),n.xp6(2),n.Oqu(t.issueTime)}}let $R=(()=>{class e{constructor(t){this.api=t,this.bunch={},this.changed=new n.vpe}remove(t){var o=this;return(0,ee.Z)(function*(){try{var r=yield o.api.deleteInfo("fourpwork/"+t?.id);r?toastr.success("Deleted Successfully"):toastr.error("Something Went Wrong!"),r&&(o.bunch=yield o.api.getInfo("fourplot/"+o.bunch.id),o.changed.emit(!0))}catch{toastr.error("Something Went Wrong!")}})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-fourp-bunch"]],inputs:{bunch:"bunch"},outputs:{changed:"changed"},decls:55,vars:18,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body",2,"min-height","600px"],[1,"row"],[1,"col-sm-12"],[1,"table-container"],[1,"table","table-responsive","table-striped","table-condensed","table-hover","text-center","table-fixed-header"],["colspan","4"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],[1,"bg-lightyellow"],["colspan","2"],["colspan","3"],["scope","row",4,"ngFor","ngForOf"],["scope","row"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th"),n._uU(16),n.qZA(),n.TgZ(17,"th",11),n._uU(18),n.qZA(),n.TgZ(19,"th",11),n._uU(20),n.ALo(21,"momentDate"),n.qZA()(),n.TgZ(22,"tr",12)(23,"th",13),n._uU(24,"STONE ID"),n.qZA(),n.TgZ(25,"th",13),n._uU(26,"R.WT"),n.qZA(),n.TgZ(27,"th",13),n._uU(28,"P.WT"),n.qZA(),n.TgZ(29,"th",13),n._uU(30,"DIA"),n.qZA(),n.TgZ(31,"th",13),n._uU(32,"GROUP"),n.qZA(),n.TgZ(33,"th",13),n._uU(34,"PRICE"),n.qZA(),n.TgZ(35,"th",13),n._uU(36,"DATE"),n.qZA(),n.TgZ(37,"th",13),n._uU(38,"TIME"),n.qZA()(),n.TgZ(39,"tr",14)(40,"th"),n._uU(41),n.qZA(),n.TgZ(42,"th"),n._uU(43),n.ALo(44,"wt"),n.qZA(),n.TgZ(45,"th"),n._uU(46),n.ALo(47,"wt"),n.qZA(),n._UZ(48,"th",15),n.TgZ(49,"th"),n._uU(50),n.ALo(51,"amt"),n.qZA(),n._UZ(52,"th",16),n.qZA()(),n.TgZ(53,"tbody"),n.YNc(54,YR,17,8,"tr",17),n.qZA()()()()()()()()),2&o&&(n.xp6(7),n.hij("Edit Bunch #",null==r.bunch?null:r.bunch.id,""),n.xp6(9),n.hij("#",null==r.bunch?null:r.bunch.id,""),n.xp6(2),n.hij("Code: ",null==r.bunch?null:r.bunch.code,""),n.xp6(2),n.hij("Date: ",n.xi3(21,9,null==r.bunch?null:r.bunch.createdAt,"DD/MM/YYYY HH:mm:ss"),""),n.xp6(21),n.hij("T: ",null==r.bunch||null==r.bunch.FourPWork?null:r.bunch.FourPWork.length,""),n.xp6(2),n.Oqu(n.lcZ(44,12,r.api.getSum(null==r.bunch?null:r.bunch.FourPWork,"pwt"))),n.xp6(3),n.Oqu(n.lcZ(47,14,r.api.getSum(null==r.bunch?null:r.bunch.FourPWork,"rwt"))),n.xp6(4),n.Oqu(n.lcZ(51,16,r.api.getSum(null==r.bunch?null:r.bunch.FourPWork,"price"))),n.xp6(4),n.Q6J("ngForOf",null==r.bunch?null:r.bunch.FourPWork))},dependencies:[Ee.sg,Bt.J,Rt.v,op]})}return e})();function JR(e,i){if(1&e&&(n.TgZ(0,"tr",22)(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.qZA()()),2&e){const t=i.$implicit;n.xp6(2),n.Oqu(t.srno),n.xp6(2),n.Oqu(t.rwt),n.xp6(2),n.Oqu(t.pwt),n.xp6(2),n.Oqu(t.diameter),n.xp6(2),n.Oqu(t.division),n.xp6(2),n.Oqu(t.price),n.xp6(2),n.Oqu(t.issueDate),n.xp6(2),n.Oqu(t.issueTime)}}let KR=(()=>{class e{constructor(t){this.api=t,this.list=[],this.changed=new n.vpe}scanQr(t){var o=this;return(0,ee.Z)(function*(){if(!t.target.value?.length)return $("#qrcode_r").val(""),$("#qrcode_r").focus(),void toastr.error("Invalid qr code");if(t.target.value?.indexOf(",")<0)return $("#qrcode_r").val(""),$("#qrcode_r").focus(),void toastr.error("Invalid qr code");var r=t.target.value.split(","),s=yield o.api.postInfo("fourpwork/query",{srno:r[9].trim(),diameter:Number(r[0]),pwt:Number(r[8]),rwt:Number(r[7])});if(!s?.id)return toastr.error("No Packet Scanned Before!"),$("#qrcode_r").val(""),void $("#qrcode_r").focus();yield o.api.putInfo("fourpwork",{id:s?.id,fourPLotId:null}),o.list=yield o.api.postInfo("fourpwork/enquiry",{fourPLotId:null}),toastr.success("Successfully Updated!"),o.changed.emit(!0),$("#qrcode_r").val(""),$("#qrcode_r").focus()})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-fourp-repair"]],inputs:{list:"list"},outputs:{changed:"changed"},decls:54,vars:11,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body",2,"min-height","600px"],[1,"row"],[1,"col-sm-12","form-horizontal"],[1,"col-sm-6"],[1,"form-group"],[1,"col-sm-4","control-label"],[1,"col-sm-8"],["type","text","id","qrcode_r",1,"form-control","qrcode",3,"keyup.enter"],[1,"col-sm-12"],[1,"table-container"],[1,"table","table-responsive","table-striped","table-condensed","table-hover","text-center","table-fixed-header"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],[1,"bg-lightyellow"],["colspan","2"],["scope","row",4,"ngFor","ngForOf"],["scope","row"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"span",4),n._uU(5,"\xd7"),n.qZA()(),n.TgZ(6,"h4",5),n._uU(7,"Repair"),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),n._uU(14,"\u0aac\u0abe\u0ab0\u0a95\u0acb\u0aa1."),n.qZA(),n.TgZ(15,"div",12)(16,"input",13),n.NdJ("keyup.enter",function(a){return r.scanQr(a)}),n.qZA()()()()(),n.TgZ(17,"div",14)(18,"div",15)(19,"table",16)(20,"thead")(21,"tr",17)(22,"th",18),n._uU(23,"STONE ID"),n.qZA(),n.TgZ(24,"th",18),n._uU(25,"R.WT"),n.qZA(),n.TgZ(26,"th",18),n._uU(27,"P.WT"),n.qZA(),n.TgZ(28,"th",18),n._uU(29,"DIA"),n.qZA(),n.TgZ(30,"th",18),n._uU(31,"GROUP"),n.qZA(),n.TgZ(32,"th",18),n._uU(33,"PRICE"),n.qZA(),n.TgZ(34,"th",18),n._uU(35,"DATE"),n.qZA(),n.TgZ(36,"th",18),n._uU(37,"TIME"),n.qZA()(),n.TgZ(38,"tr",19)(39,"th"),n._uU(40),n.qZA(),n.TgZ(41,"th"),n._uU(42),n.ALo(43,"wt"),n.qZA(),n.TgZ(44,"th"),n._uU(45),n.ALo(46,"wt"),n.qZA(),n._UZ(47,"th",20),n.TgZ(48,"th"),n._uU(49),n.ALo(50,"amt"),n.qZA(),n._UZ(51,"th",20),n.qZA()(),n.TgZ(52,"tbody"),n.YNc(53,JR,17,8,"tr",21),n.qZA()()()()()()()()),2&o&&(n.xp6(40),n.hij("T: ",r.list.length,""),n.xp6(2),n.Oqu(n.lcZ(43,5,r.api.getSum(r.list,"pwt"))),n.xp6(3),n.Oqu(n.lcZ(46,7,r.api.getSum(r.list,"rwt"))),n.xp6(4),n.Oqu(n.lcZ(50,9,r.api.getSum(r.list,"price"))),n.xp6(4),n.Q6J("ngForOf",r.list))},dependencies:[Ee.sg,Bt.J,op]})}return e})();function QR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",32)(1,"th")(2,"a",33),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.assignLot(s))}),n._uU(3),n.qZA()(),n.TgZ(4,"th"),n._uU(5),n.qZA(),n.TgZ(6,"th"),n._uU(7),n.qZA()()}if(2&e){const t=i.$implicit,o=n.oxw();n.xp6(3),n.Oqu(t.name),n.xp6(2),n.Oqu(t.code),n.xp6(2),n.Oqu(o.getEmpCount(t))}}function XR(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"tr",32)(1,"th")(2,"a",33),n.NdJ("click",function(){const s=n.CHM(t).$implicit,a=n.oxw();return n.KtG(a.getBundleInfo(s))}),n._uU(3),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.ALo(10,"momentDate"),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA()()}if(2&e){const t=i.$implicit;n.Tol(null!=t&&t.employeeId?"bg-lightgreen":""),n.xp6(3),n.Oqu(t.id),n.xp6(2),n.Oqu(t.code),n.xp6(2),n.Oqu(t.FourPWork.length),n.xp6(2),n.Oqu(n.xi3(10,7,t.createdAt,"DD/MM/YYYY HH:mm:ss")),n.xp6(3),n.Oqu(null==t||null==t.employee?null:t.employee.code)}}const rp=function(e){return{code:e}};let eM=(()=>{class e{constructor(t){this.api=t,this.employees=[],this.user=JSON.parse(localStorage.getItem("user")),this.employee={},this.list=[],this.blist=[],this.rlist=[],this.selBundle={},this.q="",this.sel_date=_e().format("YYYY-MM-DD")}ngOnInit(){this.loadEmployees(),this.loadBList()}loadEmployees(){var t=this;return(0,ee.Z)(function*(){t.employees=yield t.api.getInfo("employee?dId="+t.user.id),console.log(t.employees)})()}loadBList(){var t=this;return(0,ee.Z)(function*(){t.blist=yield t.api.getInfo("fourplot")})()}assignLot(t){var o=this;return(0,ee.Z)(function*(){o.employee=M.cloneDeep(t);var r=yield o.api.getInfo("fourplot?id="+t.id);o.list=M.orderBy(r,["date"],["desc"]),$("#fourp_assign_modal").modal("toggle")})()}repairLotModal(){var t=this;return(0,ee.Z)(function*(){t.rlist=yield t.api.postInfo("fourpwork/enquiry",{fourPLotId:null}),$("#fourp_repair_modal").modal("toggle")})()}getTotalPcs(t){return t?.length?M.sum(t?.map(o=>o?.FourPWork?.length)):0}getEmpCount(t){return M.sum(this.blist.filter(o=>o.employeeId==t.id&&o?.date?.indexOf(this.sel_date)>-1).map(o=>o?.FourPWork?.length))}getEmpTotalPcs(){return this.blist?.length?M.sum(this.blist.filter(t=>t?.date?.indexOf(this.sel_date)>-1)?.map(t=>t?.FourPWork?.length)):0}getBundleInfo(t){var o=this;return(0,ee.Z)(function*(){o.selBundle=yield o.api.getInfo("fourplot/"+t.id),$("#fourp_bunch_modal").modal("toggle")})()}static#e=this.\u0275fac=function(o){return new(o||e)(n.Y36(Ie.s))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-fourp-lot"]],decls:68,vars:27,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"box","box-solid"],[1,"box-header","with-border"],[1,"box-title"],[1,"pull-right"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-gears"],[1,"box-body",2,"min-height","800px !important"],[1,"col-sm-6"],[1,"table","table-responsive","table-condensed","table-hover","table-striped","text-center"],[1,"bg-lightyellow"],[1,"p2","jc"],["type","date","name","sel_date",1,"form-control","input-sm","excel_input","text-center",3,"ngModel","ngModelChange"],[1,"bg-lightblue"],["scope","col",1,"col-sm-auto"],["scope","row",4,"ngFor","ngForOf"],[1,"table-container"],[1,"table","table-responsive","table-condensed","table-hover","table-striped","text-center","table-fixed-header"],[1,"bg-lightred"],[1,"bg-lightgrey"],[1,"p2","jc","w70"],["type","text","name","q","placeholder","Find",1,"form-control","input-sm","excel_input","text-center","bg-2",3,"ngModel","ngModelChange"],["scope","row",3,"class",4,"ngFor","ngForOf"],["id","fourp_assign_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"employee","list","sel_date","changed"],["id","fourp_bunch_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"bunch","changed"],["id","fourp_repair_modal","data-keyboard","false","data-backdrop","static",1,"modal","fade"],[3,"list","changed"],["scope","row"],[3,"click"]],template:function(o,r){1&o&&(n.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),n._uU(7,"4P Work"),n.qZA(),n.TgZ(8,"div",7)(9,"button",8),n.NdJ("click",function(){return r.repairLotModal()}),n._UZ(10,"i",9),n._uU(11," Repair"),n.qZA()()(),n.TgZ(12,"div",10)(13,"div",2)(14,"div",11)(15,"table",12)(16,"thead")(17,"tr",13)(18,"th"),n._uU(19,"Date"),n.qZA(),n.TgZ(20,"th",14)(21,"input",15),n.NdJ("ngModelChange",function(a){return r.sel_date=a}),n.qZA()(),n.TgZ(22,"th"),n._uU(23),n.qZA()(),n.TgZ(24,"tr",16)(25,"th",17),n._uU(26,"Full Name"),n.qZA(),n.TgZ(27,"th",17),n._uU(28,"Short Name"),n.qZA(),n.TgZ(29,"th",17),n._uU(30,"Total Pcs"),n.qZA()()(),n.TgZ(31,"tbody"),n.YNc(32,QR,8,3,"tr",18),n.qZA()()(),n.TgZ(33,"div",11)(34,"div",19)(35,"table",20)(36,"thead")(37,"tr",21)(38,"th",17),n._uU(39,"B.NO."),n.qZA(),n.TgZ(40,"th",17),n._uU(41,"CUT NO"),n.qZA(),n.TgZ(42,"th",17),n._uU(43,"PCS"),n.qZA(),n.TgZ(44,"th",17),n._uU(45,"DATE"),n.qZA(),n.TgZ(46,"th",17),n._uU(47,"EMP"),n.qZA()(),n.TgZ(48,"tr",22),n._UZ(49,"th"),n.TgZ(50,"th",23)(51,"input",24),n.NdJ("ngModelChange",function(a){return r.q=a}),n.qZA()(),n.TgZ(52,"th"),n._uU(53),n.ALo(54,"contains"),n.qZA(),n.TgZ(55,"th"),n._uU(56),n.ALo(57,"contains"),n.qZA(),n._UZ(58,"th"),n.qZA()(),n.TgZ(59,"tbody"),n.YNc(60,XR,13,10,"tr",25),n.ALo(61,"contains"),n.qZA()()()()()()()()()()(),n.TgZ(62,"div",26)(63,"app-fourp-assign",27),n.NdJ("changed",function(){return r.loadBList()}),n.qZA()(),n.TgZ(64,"div",28)(65,"app-fourp-bunch",29),n.NdJ("changed",function(){return r.loadBList()}),n.qZA()(),n.TgZ(66,"div",30)(67,"app-fourp-repair",31),n.NdJ("changed",function(){return r.loadBList()}),n.qZA()()),2&o&&(n.xp6(21),n.Q6J("ngModel",r.sel_date),n.xp6(2),n.Oqu(r.getEmpTotalPcs()),n.xp6(9),n.Q6J("ngForOf",r.employees),n.xp6(19),n.Q6J("ngModel",r.q),n.xp6(2),n.Oqu(r.getTotalPcs(n.xi3(54,12,r.blist,n.VKq(21,rp,r.q)))),n.xp6(3),n.hij("TOTAL: ",r.api.getCount(n.xi3(57,15,r.blist,n.VKq(23,rp,r.q))),""),n.xp6(4),n.Q6J("ngForOf",n.xi3(61,18,r.blist,n.VKq(25,rp,r.q))),n.xp6(3),n.Q6J("employee",r.employee)("list",r.list)("sel_date",r.sel_date),n.xp6(2),n.Q6J("bunch",r.selBundle),n.xp6(2),n.Q6J("list",r.rlist))},dependencies:[Ee.sg,te.Fj,te.JJ,te.On,jR,$R,KR,Rt.v,vi]})}return e})();function tM(e,i){1&e&&n._UZ(0,"app-planing")}function iM(e,i){1&e&&n._UZ(0,"app-galaxy")}function nM(e,i){1&e&&n._UZ(0,"app-sarin")}function oM(e,i){1&e&&n._UZ(0,"app-laser")}function rM(e,i){1&e&&n._UZ(0,"app-recut")}function sM(e,i){1&e&&n._UZ(0,"app-jangads")}function aM(e,i){1&e&&n._UZ(0,"app-lotting")}function lM(e,i){1&e&&n._UZ(0,"app-final")}function cM(e,i){1&e&&n._UZ(0,"app-facets",4)}function dM(e,i){1&e&&n._UZ(0,"app-facets",5)}function uM(e,i){1&e&&n._UZ(0,"app-facets",6)}function hM(e,i){1&e&&n._UZ(0,"app-production")}function gM(e,i){1&e&&n._UZ(0,"app-four-p")}function pM(e,i){1&e&&n._UZ(0,"app-fourp-lot")}const fM=[{path:"",component:ni,children:[{path:"",component:nn},{path:"dashboard",component:(()=>{class e{constructor(){this.user=JSON.parse(localStorage.getItem("user"))}ngOnInit(){return(0,ee.Z)(function*(){})()}static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-dashboard"]],decls:14,vars:14,consts:[[4,"ngIf"],["facet","thaliya","nm","employeeThId","em","employee_th",4,"ngIf"],["facet","pel","nm","employeePlId","em","employee_pl",4,"ngIf"],["facet","mathala","nm","employeeMhId","em","employee_mh",4,"ngIf"],["facet","thaliya","nm","employeeThId","em","employee_th"],["facet","pel","nm","employeePlId","em","employee_pl"],["facet","mathala","nm","employeeMhId","em","employee_mh"]],template:function(o,r){1&o&&(n.YNc(0,tM,1,0,"app-planing",0),n.YNc(1,iM,1,0,"app-galaxy",0),n.YNc(2,nM,1,0,"app-sarin",0),n.YNc(3,oM,1,0,"app-laser",0),n.YNc(4,rM,1,0,"app-recut",0),n.YNc(5,sM,1,0,"app-jangads",0),n.YNc(6,aM,1,0,"app-lotting",0),n.YNc(7,lM,1,0,"app-final",0),n.YNc(8,cM,1,0,"app-facets",1),n.YNc(9,dM,1,0,"app-facets",2),n.YNc(10,uM,1,0,"app-facets",3),n.YNc(11,hM,1,0,"app-production",0),n.YNc(12,gM,1,0,"app-four-p",0),n.YNc(13,pM,1,0,"app-fourp-lot",0)),2&o&&(n.Q6J("ngIf","PLANING"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","GALAXY"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","SARIN"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","LASER"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","RECUT"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","JANGAD"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","LOTTING"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","FINAL"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","THALIYA"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","PEL"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","MATHALA"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","POLISH"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","4P_LOT"==(null==r.user||null==r.user.department?null:r.user.department.name)),n.xp6(1),n.Q6J("ngIf","4P"==(null==r.user||null==r.user.department?null:r.user.department.name)))},dependencies:[Ee.O5,He,tk,ck,Nk,jk,gT,kT,FT,xR,NR,UR,eM]})}return e})(),canActivate:[$i.a]}]}];let mM=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({imports:[mi.Bz.forChild(fM),mi.Bz]})}return e})();var vM=Oe(1965),k0=Oe(2898);let T0=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({imports:[Ee.ez]})}return e})(),CM=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({imports:[Ee.ez,te.u5,k0.D,T0,_0,wo]})}return e})();!function(){function e(i,t,o){this.el=i,this.vcr=t,this.renderer=o,this.dtOptions={}}e.prototype.ngOnInit=function(){var i=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){i.displayTable(t)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(i){var t=this;i&&(this.dtOptions=i),this.dtInstance=new Promise(function(o,r){Promise.resolve(t.dtOptions).then(function(s){0===Object.keys(s).length&&0===$("tbody tr",t.el.nativeElement).length?r("Both the table and dtOptions cannot be empty"):setTimeout(function(){var l={rowCallback:function(c,d,h){if(s.columns){var g=s.columns;t.applyNgPipeTransform(c,g),t.applyNgRefTemplate(c,g,d)}s.rowCallback&&s.rowCallback(c,d,h)}};l=Object.assign({},s,l),t.dt=$(t.el.nativeElement).DataTable(l),o(t.dt)})})})},e.prototype.applyNgPipeTransform=function(i,t){t.filter(function(r){return r.ngPipeInstance&&!r.ngTemplateRef}).forEach(function(r){var s=r.ngPipeInstance,a=r.ngPipeArgs||[],l=t.filter(function(g){return!1!==g.visible}).findIndex(function(g){return g.data===r.data}),c=i.childNodes.item(l),d=$(c).text(),h=s.transform.apply(s,function(e,i,t){if(t||2===arguments.length)for(var s,o=0,r=i.length;o<r;o++)(s||!(o in i))&&(s||(s=Array.prototype.slice.call(i,0,o)),s[o]=i[o]);return e.concat(s||Array.prototype.slice.call(i))}([d],a,!1));$(c).text(h)})},e.prototype.applyNgRefTemplate=function(i,t,o){var r=this;t.filter(function(a){return a.ngTemplateRef&&!a.ngPipeInstance}).forEach(function(a){var l,c=(l=a.ngTemplateRef).ref,d=l.context,h=t.filter(function(y){return!1!==y.visible}).findIndex(function(y){return y.data===a.data}),g=i.childNodes.item(h);$(g).html("");var m=Object.assign({},d,d?.userData,{adtData:o}),f=r.vcr.createEmbeddedView(c,m);r.renderer.appendChild(g,f.rootNodes[0])})},e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.s_b),n.Y36(n.Qsj))},e.\u0275dir=n.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}})}();var yM=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[Ee.ez]}),e}();function D0(e){return Array.isArray(e)?e:[e]}function Ni(e){return null==e?"":"string"==typeof e?e:`${e}px`}var Zr=Oe(8645),_M=Oe(2096),xM=Oe(5592),AM=Oe(2438),TM=(Oe(927),Oe(3225));let sp,DM=1;const Md={};function F0(e){return e in Md&&(delete Md[e],!0)}const FM={setImmediate(e){const i=DM++;return Md[i]=!0,sp||(sp=Promise.resolve()),sp.then(()=>F0(i)&&e()),i},clearImmediate(e){F0(e)}},{setImmediate:RM,clearImmediate:MM}=FM,Ed={setImmediate(...e){const{delegate:i}=Ed;return(i?.setImmediate||RM)(...e)},clearImmediate(e){const{delegate:i}=Ed;return(i?.clearImmediate||MM)(e)},delegate:void 0};var PM=Oe(2631);new class LM extends PM.v{flush(i){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let r;i=i||o.shift();do{if(r=i.execute(i.state,i.delay))break}while((i=o[0])&&i.id===t&&o.shift());if(this._active=!1,r){for(;(i=o[0])&&i.id===t&&o.shift();)i.unsubscribe();throw r}}}(class EM extends TM.o{constructor(i,t){super(i,t),this.scheduler=i,this.work=t}requestAsyncId(i,t,o=0){return null!==o&&o>0?super.requestAsyncId(i,t,o):(i.actions.push(this),i._scheduled||(i._scheduled=Ed.setImmediate(i.flush.bind(i,void 0))))}recycleAsyncId(i,t,o=0){var r;if(null!=o?o>0:this.delay>0)return super.recycleAsyncId(i,t,o);const{actions:s}=i;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Ed.clearImmediate(t),i._scheduled===t&&(i._scheduled=void 0))}});var R0=Oe(9028),M0=Oe(2181);let ap;try{ap=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ap=!1}let ws,Ml=(()=>{class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?(0,Ee.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ap)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(n.Lbi))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function NM(){if(null==ws){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ws=!1,ws;if("scrollBehavior"in document.documentElement.style)ws=!0;else{const e=Element.prototype.scrollTo;ws=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return ws}function P0(e){return e.composedPath?e.composedPath()[0]:e.target}function L0(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const ZM=new n.OlP("cdk-dir-doc",{providedIn:"root",factory:function GM(){return(0,n.f3M)(Ee.K0)}}),HM=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let zM=(()=>{class e{constructor(t){this.value="ltr",this.change=new n.vpe,t&&(this.value=function qM(e){const i=e?.toLowerCase()||"";return"auto"===i&&typeof navigator<"u"&&navigator?.language?HM.test(navigator.language)?"rtl":"ltr":"rtl"===i?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(ZM,8))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cp=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({})}return e})(),UM=(()=>{class e{constructor(t,o,r){this._ngZone=t,this._platform=o,this._scrolled=new Zr.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const o=this.scrollContainers.get(t);o&&(o.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new xM.y(o=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe((0,R0.e)(t)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,_M.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(t,o){const r=this.getAncestorScrollContainers(t);return this.scrolled(o).pipe((0,M0.h)(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const o=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&o.push(s)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,o){let r=function SM(e){return e instanceof n.SBq?e.nativeElement:e}(o),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const t=this._getWindow();return(0,AM.R)(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(n.R0b),n.LFG(Ml),n.LFG(Ee.K0,8))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),I0=(()=>{class e{constructor(t,o,r){this._platform=t,this._change=new Zr.x,this._changeListener=s=>{this._change.next(s)},this._document=r,o.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:o,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+o,height:r,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,o=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||o.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||o.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe((0,R0.e)(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(Ml),n.LFG(n.R0b),n.LFG(Ee.K0,8))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),O0=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({})}return e})(),N0=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({imports:[cp,O0,cp,O0]})}return e})();var jM=Oe(8180),YM=Oe(9773);class dp{attach(i){return this._attachedHost=i,i.attach(this)}detach(){let i=this._attachedHost;null!=i&&(this._attachedHost=null,i.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(i){this._attachedHost=i}}class $M extends dp{constructor(i,t,o,r,s){super(),this.component=i,this.viewContainerRef=t,this.injector=o,this.componentFactoryResolver=r,this.projectableNodes=s}}class JM extends dp{constructor(i,t,o,r){super(),this.templateRef=i,this.viewContainerRef=t,this.context=o,this.injector=r}get origin(){return this.templateRef.elementRef}attach(i,t=this.context){return this.context=t,super.attach(i)}detach(){return this.context=void 0,super.detach()}}class KM extends dp{constructor(i){super(),this.element=i instanceof n.SBq?i.nativeElement:i}}class QM{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(i){return i instanceof $M?(this._attachedPortal=i,this.attachComponentPortal(i)):i instanceof JM?(this._attachedPortal=i,this.attachTemplatePortal(i)):this.attachDomPortal&&i instanceof KM?(this._attachedPortal=i,this.attachDomPortal(i)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(i){this._disposeFn=i}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class XM extends QM{constructor(i,t,o,r,s){super(),this.outletElement=i,this._componentFactoryResolver=t,this._appRef=o,this._defaultInjector=r,this.attachDomPortal=a=>{const l=a.element,c=this._document.createComment("dom-portal");l.parentNode.insertBefore(c,l),this.outletElement.appendChild(l),this._attachedPortal=a,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(l,c)})},this._document=s}attachComponentPortal(i){const o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component);let r;return i.viewContainerRef?(r=i.viewContainerRef.createComponent(o,i.viewContainerRef.length,i.injector||i.viewContainerRef.injector,i.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=o.create(i.injector||this._defaultInjector||n.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=i,r}attachTemplatePortal(i){let t=i.viewContainerRef,o=t.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return o.rootNodes.forEach(r=>this.outletElement.appendChild(r)),o.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(o);-1!==r&&t.remove(r)}),this._attachedPortal=i,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(i){return i.hostView.rootNodes[0]}}let eE=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({})}return e})();var B0=Oe(7394),tE=Oe(3019);const Z0=NM();class iE{constructor(i,t){this._viewportRuler=i,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const i=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=i.style.left||"",this._previousHTMLStyles.top=i.style.top||"",i.style.left=Ni(-this._previousScrollPosition.left),i.style.top=Ni(-this._previousScrollPosition.top),i.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const i=this._document.documentElement,o=i.style,r=this._document.body.style,s=o.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,i.classList.remove("cdk-global-scrollblock"),Z0&&(o.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Z0&&(o.scrollBehavior=s,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,o=this._viewportRuler.getViewportSize();return t.scrollHeight>o.height||t.scrollWidth>o.width}}class nE{constructor(i,t,o,r){this._scrollDispatcher=i,this._ngZone=t,this._viewportRuler=o,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(i){this._overlayRef=i}enable(){if(this._scrollSubscription)return;const i=this._scrollDispatcher.scrolled(0).pipe((0,M0.h)(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=i.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=i.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class G0{enable(){}disable(){}attach(){}}function up(e,i){return i.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function H0(e,i){return i.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class oE{constructor(i,t,o,r){this._scrollDispatcher=i,this._viewportRuler=t,this._ngZone=o,this._config=r,this._scrollSubscription=null}attach(i){this._overlayRef=i}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:r}=this._viewportRuler.getViewportSize();up(t,[{width:o,height:r,bottom:r,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let rE=(()=>{class e{constructor(t,o,r,s){this._scrollDispatcher=t,this._viewportRuler=o,this._ngZone=r,this.noop=()=>new G0,this.close=a=>new nE(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new iE(this._viewportRuler,this._document),this.reposition=a=>new oE(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(UM),n.LFG(I0),n.LFG(n.R0b),n.LFG(Ee.K0))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class sE{constructor(i){if(this.scrollStrategy=new G0,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,i){const t=Object.keys(i);for(const o of t)void 0!==i[o]&&(this[o]=i[o])}}}class aE{constructor(i,t){this.connectionPair=i,this.scrollableViewProperties=t}}let q0=(()=>{class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const o=this._attachedOverlays.indexOf(t);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(Ee.K0))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),lE=(()=>{class e extends q0{constructor(t,o){super(t),this._ngZone=o,this._keydownListener=r=>{const s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){const l=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(r)):l.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(Ee.K0),n.LFG(n.R0b,8))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cE=(()=>{class e extends q0{constructor(t,o,r){super(t),this._platform=o,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=P0(s)},this._clickListener=s=>{const a=P0(s),l="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let d=c.length-1;d>-1;d--){const h=c[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(a)||h.overlayElement.contains(l))break;const g=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>g.next(s)):g.next(s)}}}add(t){if(super.add(t),!this._isAttached){const o=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(o)):this._addEventListeners(o),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(Ee.K0),n.LFG(Ml),n.LFG(n.R0b,8))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),z0=(()=>{class e{constructor(t,o){this._platform=o,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||L0()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const o=this._document.createElement("div");o.classList.add(t),L0()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(Ee.K0),n.LFG(Ml))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class dE{constructor(i,t,o,r,s,a,l,c,d,h=!1){this._portalOutlet=i,this._host=t,this._pane=o,this._config=r,this._ngZone=s,this._keyboardDispatcher=a,this._document=l,this._location=c,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._backdropElement=null,this._backdropClick=new Zr.x,this._attachments=new Zr.x,this._detachments=new Zr.x,this._locationChanges=B0.w0.EMPTY,this._backdropClickHandler=g=>this._backdropClick.next(g),this._backdropTransitionendHandler=g=>{this._disposeBackdrop(g.target)},this._keydownEvents=new Zr.x,this._outsidePointerEvents=new Zr.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(i){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(i);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,jM.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const i=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),i}dispose(){const i=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,i&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(i){i!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=i,this.hasAttached()&&(i.attach(this),this.updatePosition()))}updateSize(i){this._config={...this._config,...i},this._updateElementSize()}setDirection(i){this._config={...this._config,direction:i},this._updateElementDirection()}addPanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!0)}removePanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!1)}getDirection(){const i=this._config.direction;return i?"string"==typeof i?i:i.value:"ltr"}updateScrollStrategy(i){i!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=i,this.hasAttached()&&(i.attach(this),i.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const i=this._pane.style;i.width=Ni(this._config.width),i.height=Ni(this._config.height),i.minWidth=Ni(this._config.minWidth),i.minHeight=Ni(this._config.minHeight),i.maxWidth=Ni(this._config.maxWidth),i.maxHeight=Ni(this._config.maxHeight)}_togglePointerEvents(i){this._pane.style.pointerEvents=i?"":"none"}_attachBackdrop(){const i="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(i)})}):this._backdropElement.classList.add(i)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const i=this._backdropElement;if(i){if(this._animationsDisabled)return void this._disposeBackdrop(i);i.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{i.addEventListener("transitionend",this._backdropTransitionendHandler)}),i.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(i)},500))}}_toggleClasses(i,t,o){const r=D0(t||[]).filter(s=>!!s);r.length&&(o?i.classList.add(...r):i.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const i=this._ngZone.onStable.pipe((0,YM.R)((0,tE.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),i.unsubscribe())})})}_disposeScrollStrategy(){const i=this._scrollStrategy;i&&(i.disable(),i.detach&&i.detach())}_disposeBackdrop(i){i&&(i.removeEventListener("click",this._backdropClickHandler),i.removeEventListener("transitionend",this._backdropTransitionendHandler),i.remove(),this._backdropElement===i&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const V0="cdk-overlay-connected-position-bounding-box",uE=/([A-Za-z%]+)$/;class hE{get positions(){return this._preferredPositions}constructor(i,t,o,r,s){this._viewportRuler=t,this._document=o,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Zr.x,this._resizeSubscription=B0.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(i)}attach(i){this._validatePositions(),i.hostElement.classList.add(V0),this._overlayRef=i,this._boundingBox=i.hostElement,this._pane=i.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const i=this._originRect,t=this._overlayRect,o=this._viewportRect,r=this._containerRect,s=[];let a;for(let l of this._preferredPositions){let c=this._getOriginPoint(i,r,l),d=this._getOverlayPoint(c,t,l),h=this._getOverlayFit(d,t,o,l);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(l,c);this._canFitWithFlexibleDimensions(h,d,o)?s.push({position:l,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,l)}):(!a||a.overlayFit.visibleArea<h.visibleArea)&&(a={overlayFit:h,overlayPoint:d,originPoint:c,position:l,overlayRect:t})}if(s.length){let l=null,c=-1;for(const d of s){const h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>c&&(c=h,l=d)}return this._isPushed=!1,void this._applyPosition(l.position,l.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ys(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(V0),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const i=this._lastPosition;if(i){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,i);this._applyPosition(i,t)}else this.apply()}withScrollableContainers(i){return this._scrollables=i,this}withPositions(i){return this._preferredPositions=i,-1===i.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(i){return this._viewportMargin=i,this}withFlexibleDimensions(i=!0){return this._hasFlexibleDimensions=i,this}withGrowAfterOpen(i=!0){return this._growAfterOpen=i,this}withPush(i=!0){return this._canPush=i,this}withLockedPosition(i=!0){return this._positionLocked=i,this}setOrigin(i){return this._origin=i,this}withDefaultOffsetX(i){return this._offsetX=i,this}withDefaultOffsetY(i){return this._offsetY=i,this}withTransformOriginOn(i){return this._transformOriginSelector=i,this}_getOriginPoint(i,t,o){let r,s;if("center"==o.originX)r=i.left+i.width/2;else{const a=this._isRtl()?i.right:i.left,l=this._isRtl()?i.left:i.right;r="start"==o.originX?a:l}return t.left<0&&(r-=t.left),s="center"==o.originY?i.top+i.height/2:"top"==o.originY?i.top:i.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(i,t,o){let r,s;return r="center"==o.overlayX?-t.width/2:"start"===o.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==o.overlayY?-t.height/2:"top"==o.overlayY?0:-t.height,{x:i.x+r,y:i.y+s}}_getOverlayFit(i,t,o,r){const s=W0(t);let{x:a,y:l}=i,c=this._getOffset(r,"x"),d=this._getOffset(r,"y");c&&(a+=c),d&&(l+=d);let m=0-l,f=l+s.height-o.height,y=this._subtractOverflows(s.width,0-a,a+s.width-o.width),b=this._subtractOverflows(s.height,m,f),S=y*b;return{visibleArea:S,isCompletelyWithinViewport:s.width*s.height===S,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:y==s.width}}_canFitWithFlexibleDimensions(i,t,o){if(this._hasFlexibleDimensions){const r=o.bottom-t.y,s=o.right-t.x,a=U0(this._overlayRef.getConfig().minHeight),l=U0(this._overlayRef.getConfig().minWidth);return(i.fitsInViewportVertically||null!=a&&a<=r)&&(i.fitsInViewportHorizontally||null!=l&&l<=s)}return!1}_pushOverlayOnScreen(i,t,o){if(this._previousPushAmount&&this._positionLocked)return{x:i.x+this._previousPushAmount.x,y:i.y+this._previousPushAmount.y};const r=W0(t),s=this._viewportRect,a=Math.max(i.x+r.width-s.width,0),l=Math.max(i.y+r.height-s.height,0),c=Math.max(s.top-o.top-i.y,0),d=Math.max(s.left-o.left-i.x,0);let h=0,g=0;return h=r.width<=s.width?d||-a:i.x<this._viewportMargin?s.left-o.left-i.x:0,g=r.height<=s.height?c||-l:i.y<this._viewportMargin?s.top-o.top-i.y:0,this._previousPushAmount={x:h,y:g},{x:i.x+h,y:i.y+g}}_applyPosition(i,t){if(this._setTransformOrigin(i),this._setOverlayElementStyles(t,i),this._setBoundingBoxStyles(t,i),i.panelClass&&this._addPanelClasses(i.panelClass),this._lastPosition=i,this._positionChanges.observers.length){const o=this._getScrollVisibility(),r=new aE(i,o);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(i){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,r=i.overlayY;o="center"===i.overlayX?"center":this._isRtl()?"start"===i.overlayX?"right":"left":"start"===i.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${o} ${r}`}_calculateBoundingBoxRect(i,t){const o=this._viewportRect,r=this._isRtl();let s,a,l,h,g,m;if("top"===t.overlayY)a=i.y,s=o.height-a+this._viewportMargin;else if("bottom"===t.overlayY)l=o.height-i.y+2*this._viewportMargin,s=o.height-l+this._viewportMargin;else{const f=Math.min(o.bottom-i.y+o.top,i.y),y=this._lastBoundingBoxSize.height;s=2*f,a=i.y-f,s>y&&!this._isInitialRender&&!this._growAfterOpen&&(a=i.y-y/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)m=o.width-i.x+this._viewportMargin,h=i.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)g=i.x,h=o.right-i.x;else{const f=Math.min(o.right-i.x+o.left,i.x),y=this._lastBoundingBoxSize.width;h=2*f,g=i.x-f,h>y&&!this._isInitialRender&&!this._growAfterOpen&&(g=i.x-y/2)}return{top:a,left:g,bottom:l,right:m,width:h,height:s}}_setBoundingBoxStyles(i,t){const o=this._calculateBoundingBoxRect(i,t);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=Ni(o.height),r.top=Ni(o.top),r.bottom=Ni(o.bottom),r.width=Ni(o.width),r.left=Ni(o.left),r.right=Ni(o.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Ni(s)),a&&(r.maxWidth=Ni(a))}this._lastBoundingBoxSize=o,ys(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ys(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ys(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(i,t){const o={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){const h=this._viewportRuler.getViewportScrollPosition();ys(o,this._getExactOverlayY(t,i,h)),ys(o,this._getExactOverlayX(t,i,h))}else o.position="static";let l="",c=this._getOffset(t,"x"),d=this._getOffset(t,"y");c&&(l+=`translateX(${c}px) `),d&&(l+=`translateY(${d}px)`),o.transform=l.trim(),a.maxHeight&&(r?o.maxHeight=Ni(a.maxHeight):s&&(o.maxHeight="")),a.maxWidth&&(r?o.maxWidth=Ni(a.maxWidth):s&&(o.maxWidth="")),ys(this._pane.style,o)}_getExactOverlayY(i,t,o){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,i);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o)),"bottom"===i.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Ni(s.y),r}_getExactOverlayX(i,t,o){let a,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,i);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o)),a=this._isRtl()?"end"===i.overlayX?"left":"right":"end"===i.overlayX?"right":"left","right"===a?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Ni(s.x),r}_getScrollVisibility(){const i=this._getOriginRect(),t=this._pane.getBoundingClientRect(),o=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:H0(i,o),isOriginOutsideView:up(i,o),isOverlayClipped:H0(t,o),isOverlayOutsideView:up(t,o)}}_subtractOverflows(i,...t){return t.reduce((o,r)=>o-Math.max(r,0),i)}_getNarrowedViewportRect(){const i=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+i-this._viewportMargin,bottom:o.top+t-this._viewportMargin,width:i-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(i,t){return"x"===t?null==i.offsetX?this._offsetX:i.offsetX:null==i.offsetY?this._offsetY:i.offsetY}_validatePositions(){}_addPanelClasses(i){this._pane&&D0(i).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(i=>{this._pane.classList.remove(i)}),this._appliedPanelClasses=[])}_getOriginRect(){const i=this._origin;if(i instanceof n.SBq)return i.nativeElement.getBoundingClientRect();if(i instanceof Element)return i.getBoundingClientRect();const t=i.width||0,o=i.height||0;return{top:i.y,bottom:i.y+o,left:i.x,right:i.x+t,height:o,width:t}}}function ys(e,i){for(let t in i)i.hasOwnProperty(t)&&(e[t]=i[t]);return e}function U0(e){if("number"!=typeof e&&null!=e){const[i,t]=e.split(uE);return t&&"px"!==t?null:parseFloat(i)}return e||null}function W0(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}const j0="cdk-global-overlay-wrapper";class gE{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(i){const t=i.getConfig();this._overlayRef=i,this._width&&!t.width&&i.updateSize({width:this._width}),this._height&&!t.height&&i.updateSize({height:this._height}),i.hostElement.classList.add(j0),this._isDisposed=!1}top(i=""){return this._bottomOffset="",this._topOffset=i,this._alignItems="flex-start",this}left(i=""){return this._xOffset=i,this._xPosition="left",this}bottom(i=""){return this._topOffset="",this._bottomOffset=i,this._alignItems="flex-end",this}right(i=""){return this._xOffset=i,this._xPosition="right",this}start(i=""){return this._xOffset=i,this._xPosition="start",this}end(i=""){return this._xOffset=i,this._xPosition="end",this}width(i=""){return this._overlayRef?this._overlayRef.updateSize({width:i}):this._width=i,this}height(i=""){return this._overlayRef?this._overlayRef.updateSize({height:i}):this._height=i,this}centerHorizontally(i=""){return this.left(i),this._xPosition="center",this}centerVertically(i=""){return this.top(i),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const i=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:a,maxHeight:l}=o,c=!("100%"!==r&&"100vw"!==r||a&&"100%"!==a&&"100vw"!==a),d=!("100%"!==s&&"100vh"!==s||l&&"100%"!==l&&"100vh"!==l),h=this._xPosition,g=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let f="",y="",b="";c?b="flex-start":"center"===h?(b="center",m?y=g:f=g):m?"left"===h||"end"===h?(b="flex-end",f=g):("right"===h||"start"===h)&&(b="flex-start",y=g):"left"===h||"start"===h?(b="flex-start",f=g):("right"===h||"end"===h)&&(b="flex-end",y=g),i.position=this._cssPosition,i.marginLeft=c?"0":f,i.marginTop=d?"0":this._topOffset,i.marginBottom=this._bottomOffset,i.marginRight=c?"0":y,t.justifyContent=b,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const i=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,o=t.style;t.classList.remove(j0),o.justifyContent=o.alignItems=i.marginTop=i.marginBottom=i.marginLeft=i.marginRight=i.position="",this._overlayRef=null,this._isDisposed=!0}}let pE=(()=>{class e{constructor(t,o,r,s){this._viewportRuler=t,this._document=o,this._platform=r,this._overlayContainer=s}global(){return new gE}flexibleConnectedTo(t){return new hE(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(I0),n.LFG(Ee.K0),n.LFG(Ml),n.LFG(z0))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),fE=0,Y0=(()=>{class e{constructor(t,o,r,s,a,l,c,d,h,g,m,f){this.scrollStrategies=t,this._overlayContainer=o,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=l,this._ngZone=c,this._document=d,this._directionality=h,this._location=g,this._outsideClickDispatcher=m,this._animationsModuleType=f}create(t){const o=this._createHostElement(),r=this._createPaneElement(o),s=this._createPortalOutlet(r),a=new sE(t);return a.direction=a.direction||this._directionality.value,new dE(s,o,r,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const o=this._document.createElement("div");return o.id="cdk-overlay-"+fE++,o.classList.add("cdk-overlay-pane"),t.appendChild(o),o}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(n.z2F)),new XM(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(o){return new(o||e)(n.LFG(rE),n.LFG(z0),n.LFG(n._Vd),n.LFG(pE),n.LFG(lE),n.LFG(n.zs3),n.LFG(n.R0b),n.LFG(Ee.K0),n.LFG(zM),n.LFG(Ee.Ye),n.LFG(cE),n.LFG(n.QbO,8))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const CE={provide:new n.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Y0],useFactory:function vE(e){return()=>e.scrollStrategies.reposition()}};let wE=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({providers:[Y0,CE],imports:[cp,eE,N0,N0]})}return e})();var Pl=Oe(3304),yE=Oe(9115),bE=Oe(2871),SE=Oe(5245),_E=Oe(1199),xE=Oe(7282);Pl.extend(yE),Pl.extend(bE),Pl.extend(SE),Pl.extend(_E),Pl.extend(xE);let BE=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({imports:[Ee.ez,te.u5,wE]})}return e})();var ZE=Oe(1918);let GE=(()=>{class e{static#e=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=n.oAB({type:e});static#i=this.\u0275inj=n.cJS({imports:[Ee.ez,mM,vM.x,te.u5,te.UX,Kt.JF,yM,k0.D,T0,_0,wo,BE,CM,ZE.zE6]})}return e})()},3304:function(Yn){Yn.exports=function(){"use strict";var Kt="millisecond",mi="second",n="minute",Yi="hour",Ie="day",Ai="week",ni="month",$i="quarter",nn="year",ee="date",M="Invalid Date",mt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_e=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,te={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ot){var Ue=["th","st","nd","rd"],Ge=ot%100;return"["+ot+(Ue[(Ge-20)%10]||Ue[Ge]||Ue[0])+"]"}},Ut=function(ot,Ue,Ge){var Xe=String(ot);return!Xe||Xe.length>=Ue?ot:""+Array(Ue+1-Xe.length).join(Ge)+ot},Ji={s:Ut,z:function(ot){var Ue=-ot.utcOffset(),Ge=Math.abs(Ue),Xe=Math.floor(Ge/60),He=Ge%60;return(Ue<=0?"+":"-")+Ut(Xe,2,"0")+":"+Ut(He,2,"0")},m:function ot(Ue,Ge){if(Ue.date()<Ge.date())return-ot(Ge,Ue);var Xe=12*(Ge.year()-Ue.year())+(Ge.month()-Ue.month()),He=Ue.clone().add(Xe,ni),et=Ge-He<0,rt=Ue.clone().add(Xe+(et?-1:1),ni);return+(-(Xe+(Ge-He)/(et?He-rt:rt-He))||0)},a:function(ot){return ot<0?Math.ceil(ot)||0:Math.floor(ot)},p:function(ot){return{M:ni,y:nn,w:Ai,d:Ie,D:ee,h:Yi,m:n,s:mi,ms:Kt,Q:$i}[ot]||String(ot||"").toLowerCase().replace(/s$/,"")},u:function(ot){return void 0===ot}},Oi="en",Bt={};Bt[Oi]=te;var Rt="$isDayjsObject",vi=function(ot){return ot instanceof it||!(!ot||!ot[Rt])},An=function ot(Ue,Ge,Xe){var He;if(!Ue)return Oi;if("string"==typeof Ue){var et=Ue.toLowerCase();Bt[et]&&(He=et),Ge&&(Bt[et]=Ge,He=et);var rt=Ue.split("-");if(!He&&rt.length>1)return ot(rt[0])}else{var Pt=Ue.name;Bt[Pt]=Ue,He=Pt}return!Xe&&He&&(Oi=He),He||!Xe&&Oi},Wt=function(ot,Ue){if(vi(ot))return ot.clone();var Ge="object"==typeof Ue?Ue:{};return Ge.date=ot,Ge.args=arguments,new it(Ge)},nt=Ji;nt.l=An,nt.i=vi,nt.w=function(ot,Ue){return Wt(ot,{locale:Ue.$L,utc:Ue.$u,x:Ue.$x,$offset:Ue.$offset})};var it=function(){function ot(Ge){this.$L=An(Ge.locale,null,!0),this.parse(Ge),this.$x=this.$x||Ge.x||{},this[Rt]=!0}var Ue=ot.prototype;return Ue.parse=function(Ge){this.$d=function(Xe){var He=Xe.date,et=Xe.utc;if(null===He)return new Date(NaN);if(nt.u(He))return new Date;if(He instanceof Date)return new Date(He);if("string"==typeof He&&!/Z$/i.test(He)){var rt=He.match(mt);if(rt){var Pt=rt[2]-1||0,oi=(rt[7]||"0").substring(0,3);return et?new Date(Date.UTC(rt[1],Pt,rt[3]||1,rt[4]||0,rt[5]||0,rt[6]||0,oi)):new Date(rt[1],Pt,rt[3]||1,rt[4]||0,rt[5]||0,rt[6]||0,oi)}}return new Date(He)}(Ge),this.init()},Ue.init=function(){var Ge=this.$d;this.$y=Ge.getFullYear(),this.$M=Ge.getMonth(),this.$D=Ge.getDate(),this.$W=Ge.getDay(),this.$H=Ge.getHours(),this.$m=Ge.getMinutes(),this.$s=Ge.getSeconds(),this.$ms=Ge.getMilliseconds()},Ue.$utils=function(){return nt},Ue.isValid=function(){return this.$d.toString()!==M},Ue.isSame=function(Ge,Xe){var He=Wt(Ge);return this.startOf(Xe)<=He&&He<=this.endOf(Xe)},Ue.isAfter=function(Ge,Xe){return Wt(Ge)<this.startOf(Xe)},Ue.isBefore=function(Ge,Xe){return this.endOf(Xe)<Wt(Ge)},Ue.$g=function(Ge,Xe,He){return nt.u(Ge)?this[Xe]:this.set(He,Ge)},Ue.unix=function(){return Math.floor(this.valueOf()/1e3)},Ue.valueOf=function(){return this.$d.getTime()},Ue.startOf=function(Ge,Xe){var He=this,et=!!nt.u(Xe)||Xe,rt=nt.p(Ge),Pt=function(fn,wi){var on=nt.w(He.$u?Date.UTC(He.$y,wi,fn):new Date(He.$y,wi,fn),He);return et?on:on.endOf(Ie)},oi=function(fn,wi){return nt.w(He.toDate()[fn].apply(He.toDate("s"),(et?[0,0,0,0]:[23,59,59,999]).slice(wi)),He)},ui=this.$W,Ht=this.$M,pe=this.$D,pt="set"+(this.$u?"UTC":"");switch(rt){case nn:return et?Pt(1,0):Pt(31,11);case ni:return et?Pt(1,Ht):Pt(0,Ht+1);case Ai:var kn=this.$locale().weekStart||0,go=(ui<kn?ui+7:ui)-kn;return Pt(et?pe-go:pe+(6-go),Ht);case Ie:case ee:return oi(pt+"Hours",0);case Yi:return oi(pt+"Minutes",1);case n:return oi(pt+"Seconds",2);case mi:return oi(pt+"Milliseconds",3);default:return this.clone()}},Ue.endOf=function(Ge){return this.startOf(Ge,!1)},Ue.$set=function(Ge,Xe){var He,et=nt.p(Ge),rt="set"+(this.$u?"UTC":""),Pt=(He={},He[Ie]=rt+"Date",He[ee]=rt+"Date",He[ni]=rt+"Month",He[nn]=rt+"FullYear",He[Yi]=rt+"Hours",He[n]=rt+"Minutes",He[mi]=rt+"Seconds",He[Kt]=rt+"Milliseconds",He)[et],oi=et===Ie?this.$D+(Xe-this.$W):Xe;if(et===ni||et===nn){var ui=this.clone().set(ee,1);ui.$d[Pt](oi),ui.init(),this.$d=ui.set(ee,Math.min(this.$D,ui.daysInMonth())).$d}else Pt&&this.$d[Pt](oi);return this.init(),this},Ue.set=function(Ge,Xe){return this.clone().$set(Ge,Xe)},Ue.get=function(Ge){return this[nt.p(Ge)]()},Ue.add=function(Ge,Xe){var He,et=this;Ge=Number(Ge);var rt=nt.p(Xe),Pt=function(Ht){var pe=Wt(et);return nt.w(pe.date(pe.date()+Math.round(Ht*Ge)),et)};if(rt===ni)return this.set(ni,this.$M+Ge);if(rt===nn)return this.set(nn,this.$y+Ge);if(rt===Ie)return Pt(1);if(rt===Ai)return Pt(7);var oi=(He={},He[n]=6e4,He[Yi]=36e5,He[mi]=1e3,He)[rt]||1,ui=this.$d.getTime()+Ge*oi;return nt.w(ui,this)},Ue.subtract=function(Ge,Xe){return this.add(-1*Ge,Xe)},Ue.format=function(Ge){var Xe=this,He=this.$locale();if(!this.isValid())return He.invalidDate||M;var et=Ge||"YYYY-MM-DDTHH:mm:ssZ",rt=nt.z(this),Pt=this.$H,oi=this.$m,ui=this.$M,Ht=He.weekdays,pe=He.months,kn=function(wi,on,po,hi){return wi&&(wi[on]||wi(Xe,et))||po[on].slice(0,hi)},go=function(wi){return nt.s(Pt%12||12,wi,"0")},fn=He.meridiem||function(wi,on,po){var hi=wi<12?"AM":"PM";return po?hi.toLowerCase():hi};return et.replace(_e,function(wi,on){return on||function(po){switch(po){case"YY":return String(Xe.$y).slice(-2);case"YYYY":return nt.s(Xe.$y,4,"0");case"M":return ui+1;case"MM":return nt.s(ui+1,2,"0");case"MMM":return kn(He.monthsShort,ui,pe,3);case"MMMM":return kn(pe,ui);case"D":return Xe.$D;case"DD":return nt.s(Xe.$D,2,"0");case"d":return String(Xe.$W);case"dd":return kn(He.weekdaysMin,Xe.$W,Ht,2);case"ddd":return kn(He.weekdaysShort,Xe.$W,Ht,3);case"dddd":return Ht[Xe.$W];case"H":return String(Pt);case"HH":return nt.s(Pt,2,"0");case"h":return go(1);case"hh":return go(2);case"a":return fn(Pt,oi,!0);case"A":return fn(Pt,oi,!1);case"m":return String(oi);case"mm":return nt.s(oi,2,"0");case"s":return String(Xe.$s);case"ss":return nt.s(Xe.$s,2,"0");case"SSS":return nt.s(Xe.$ms,3,"0");case"Z":return rt}return null}(wi)||rt.replace(":","")})},Ue.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ue.diff=function(Ge,Xe,He){var et,rt=this,Pt=nt.p(Xe),oi=Wt(Ge),ui=6e4*(oi.utcOffset()-this.utcOffset()),Ht=this-oi,pe=function(){return nt.m(rt,oi)};switch(Pt){case nn:et=pe()/12;break;case ni:et=pe();break;case $i:et=pe()/3;break;case Ai:et=(Ht-ui)/6048e5;break;case Ie:et=(Ht-ui)/864e5;break;case Yi:et=Ht/36e5;break;case n:et=Ht/6e4;break;case mi:et=Ht/1e3;break;default:et=Ht}return He?et:nt.a(et)},Ue.daysInMonth=function(){return this.endOf(ni).$D},Ue.$locale=function(){return Bt[this.$L]},Ue.locale=function(Ge,Xe){if(!Ge)return this.$L;var He=this.clone(),et=An(Ge,Xe,!0);return et&&(He.$L=et),He},Ue.clone=function(){return nt.w(this.$d,this)},Ue.toDate=function(){return new Date(this.valueOf())},Ue.toJSON=function(){return this.isValid()?this.toISOString():null},Ue.toISOString=function(){return this.$d.toISOString()},Ue.toString=function(){return this.$d.toUTCString()},ot}(),di=it.prototype;return Wt.prototype=di,[["$ms",Kt],["$s",mi],["$m",n],["$H",Yi],["$W",Ie],["$M",ni],["$y",nn],["$D",ee]].forEach(function(ot){di[ot[1]]=function(Ue){return this.$g(Ue,ot[0],ot[1])}}),Wt.extend=function(ot,Ue){return ot.$i||(ot(Ue,it,Wt),ot.$i=!0),Wt},Wt.locale=An,Wt.isDayjs=vi,Wt.unix=function(ot){return Wt(1e3*ot)},Wt.en=Bt[Oi],Wt.Ls=Bt,Wt.p={},Wt}()},7282:function(Yn){Yn.exports=function(){"use strict";var Ii={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Oe=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,Ee=/\d\d/,Kt=/\d\d?/,mi=/\d*[^-_:/,()\s\d]+/,n={},Yi=function(M){return(M=+M)+(M>68?1900:2e3)},Ie=function(M){return function(mt){this[M]=+mt}},Ai=[/[+-]\d\d:?(\d\d)?|Z/,function(M){(this.zone||(this.zone={})).offset=function(mt){if(!mt||"Z"===mt)return 0;var _e=mt.match(/([+-]|\d\d)/g),te=60*_e[1]+(+_e[2]||0);return 0===te?0:"+"===_e[0]?-te:te}(M)}],ni=function(M){var mt=n[M];return mt&&(mt.indexOf?mt:mt.s.concat(mt.f))},$i=function(M,mt){var _e,te=n.meridiem;if(te){for(var Ut=1;Ut<=24;Ut+=1)if(M.indexOf(te(Ut,0,mt))>-1){_e=Ut>12;break}}else _e=M===(mt?"pm":"PM");return _e},nn={A:[mi,function(M){this.afternoon=$i(M,!1)}],a:[mi,function(M){this.afternoon=$i(M,!0)}],S:[/\d/,function(M){this.milliseconds=100*+M}],SS:[Ee,function(M){this.milliseconds=10*+M}],SSS:[/\d{3}/,function(M){this.milliseconds=+M}],s:[Kt,Ie("seconds")],ss:[Kt,Ie("seconds")],m:[Kt,Ie("minutes")],mm:[Kt,Ie("minutes")],H:[Kt,Ie("hours")],h:[Kt,Ie("hours")],HH:[Kt,Ie("hours")],hh:[Kt,Ie("hours")],D:[Kt,Ie("day")],DD:[Ee,Ie("day")],Do:[mi,function(M){var mt=n.ordinal,_e=M.match(/\d+/);if(this.day=_e[0],mt)for(var te=1;te<=31;te+=1)mt(te).replace(/\[|\]/g,"")===M&&(this.day=te)}],M:[Kt,Ie("month")],MM:[Ee,Ie("month")],MMM:[mi,function(M){var mt=ni("months"),_e=(ni("monthsShort")||mt.map(function(te){return te.slice(0,3)})).indexOf(M)+1;if(_e<1)throw new Error;this.month=_e%12||_e}],MMMM:[mi,function(M){var mt=ni("months").indexOf(M)+1;if(mt<1)throw new Error;this.month=mt%12||mt}],Y:[/[+-]?\d+/,Ie("year")],YY:[Ee,function(M){this.year=Yi(M)}],YYYY:[/\d{4}/,Ie("year")],Z:Ai,ZZ:Ai};return function(M,mt,_e){_e.p.customParseFormat=!0,M&&M.parseTwoDigitYear&&(Yi=M.parseTwoDigitYear);var te=mt.prototype,Ut=te.parse;te.parse=function(Ji){var Oi=Ji.date,Bt=Ji.utc,Rt=Ji.args;this.$u=Bt;var vi=Rt[1];if("string"==typeof vi){var An=!0===Rt[2],Wt=!0===Rt[3],nt=An||Wt,it=Rt[2];Wt&&(it=Rt[2]),n=this.$locale(),!An&&it&&(n=_e.Ls[it]),this.$d=function(Ge,Xe,He){try{if(["x","X"].indexOf(Xe)>-1)return new Date(("X"===Xe?1e3:1)*Ge);var et=function ee(M){var _e;_e=n&&n.formats;for(var te=(M=M.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(An,Wt,nt){var it=nt&&nt.toUpperCase();return Wt||_e[nt]||Ii[nt]||_e[it].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(di,ot,Ue){return ot||Ue.slice(1)})})).match(Oe),Ut=te.length,Ji=0;Ji<Ut;Ji+=1){var Oi=te[Ji],Bt=nn[Oi],vi=Bt&&Bt[1];te[Ji]=vi?{regex:Bt&&Bt[0],parser:vi}:Oi.replace(/^\[|\]$/g,"")}return function(An){for(var Wt={},nt=0,it=0;nt<Ut;nt+=1){var di=te[nt];if("string"==typeof di)it+=di.length;else{var ot=di.regex,Ue=di.parser,Ge=An.slice(it),Xe=ot.exec(Ge)[0];Ue.call(Wt,Xe),An=An.replace(Xe,"")}}return function(He){var et=He.afternoon;if(void 0!==et){var rt=He.hours;et?rt<12&&(He.hours+=12):12===rt&&(He.hours=0),delete He.afternoon}}(Wt),Wt}}(Xe)(Ge),rt=et.year,Pt=et.month,oi=et.day,ui=et.hours,Ht=et.minutes,pe=et.seconds,pt=et.milliseconds,kn=et.zone,go=new Date,fn=oi||(rt||Pt?1:go.getDate()),wi=rt||go.getFullYear(),on=0;rt&&!Pt||(on=Pt>0?Pt-1:go.getMonth());var po=ui||0,hi=Ht||0,Os=pe||0,Ya=pt||0;return kn?new Date(Date.UTC(wi,on,fn,po,hi,Os,Ya+60*kn.offset*1e3)):He?new Date(Date.UTC(wi,on,fn,po,hi,Os,Ya)):new Date(wi,on,fn,po,hi,Os,Ya)}catch{return new Date("")}}(Oi,vi,Bt),this.init(),it&&!0!==it&&(this.$L=this.locale(it).$L),nt&&Oi!=this.format(vi)&&(this.$d=new Date("")),n={}}else if(vi instanceof Array)for(var di=vi.length,ot=1;ot<=di;ot+=1){Rt[1]=vi[ot-1];var Ue=_e.apply(this,Rt);if(Ue.isValid()){this.$d=Ue.$d,this.$L=Ue.$L,this.init();break}ot===di&&(this.$d=new Date(""))}else Ut.call(this,Ji)}}}()},5245:function(Yn){Yn.exports=function(){"use strict";return function(Ii,Oe,Ee){Oe.prototype.isBetween=function(Kt,mi,n,Yi){var Ie=Ee(Kt),Ai=Ee(mi),ni="("===(Yi=Yi||"()")[0],$i=")"===Yi[1];return(ni?this.isAfter(Ie,n):!this.isBefore(Ie,n))&&($i?this.isBefore(Ai,n):!this.isAfter(Ai,n))||(ni?this.isBefore(Ie,n):!this.isAfter(Ie,n))&&($i?this.isAfter(Ai,n):!this.isBefore(Ai,n))}}}()},9115:function(Yn){Yn.exports=function(){"use strict";return function(Ii,Oe){Oe.prototype.isSameOrAfter=function(Ee,Kt){return this.isSame(Ee,Kt)||this.isAfter(Ee,Kt)}}}()},2871:function(Yn){Yn.exports=function(){"use strict";return function(Ii,Oe){Oe.prototype.isSameOrBefore=function(Ee,Kt){return this.isSame(Ee,Kt)||this.isBefore(Ee,Kt)}}}()},1199:function(Yn){Yn.exports=function(){"use strict";return function(Oe,Ee,Kt){var mi=function(Ie){return Ie.add(4-Ie.isoWeekday(),"day")},n=Ee.prototype;n.isoWeekYear=function(){return mi(this).year()},n.isoWeek=function(Ie){if(!this.$utils().u(Ie))return this.add(7*(Ie-this.isoWeek()),"day");var Ai,$i,nn,ee=mi(this),M=(Ai=this.isoWeekYear(),nn=4-($i=(this.$u?Kt.utc:Kt)().year(Ai).startOf("year")).isoWeekday(),$i.isoWeekday()>4&&(nn+=7),$i.add(nn,"day"));return ee.diff(M,"week")+1},n.isoWeekday=function(Ie){return this.$utils().u(Ie)?this.day()||7:this.day(this.day()%7?Ie:Ie-7)};var Yi=n.startOf;n.startOf=function(Ie,Ai){var ni=this.$utils(),$i=!!ni.u(Ai)||Ai;return"isoweek"===ni.p(Ie)?$i?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):Yi.bind(this)(Ie,Ai)}}}()}}]);